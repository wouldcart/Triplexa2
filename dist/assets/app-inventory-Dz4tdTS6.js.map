{"version":3,"mappings":"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","names":["initialCountries","id","name","code","region","continent","currency","currency_symbol","status","flag_url","is_popular","visa_required","languages","pricing_currency_override","created_at","Date","toISOString","updated_at","pricing_currency","pricing_currency_symbol","sightseeingCategories","difficultyLevels","seasons","daysOfWeek","value","label","packageTypes","sampleSightseeingData","description","country","city","category","duration","timing","difficultyLevel","allowedAgeGroup","address","googleMapLink","price","adult","child","isFree","sicAvailable","sicPricing","requiresMandatoryTransfer","transferMandatory","transferOptions","vehicleType","capacity","priceUnit","isEnabled","type","pricingOptions","adultPrice","childPrice","packageOptions","groupSizeOptions","minPeople","maxPeople","policies","highlights","inclusions","exclusions","cancellationPolicy","validityPeriod","startDate","endDate","images","url","isPrimary","altText","lastUpdated","createdAt","sightseeingData","initialRestaurants","location","cuisine","priceRange","priceCategory","averagePrice","averageCost","rating","reviewCount","openingHours","openingTime","closingTime","contact","imageUrl","cuisineTypes","features","outdoorSeating","privateRooms","wifi","parking","liveMusic","cardAccepted","mealTypes","breakfast","lunch","dinner","snacks","beverages","dietaryOptions","pureVeg","veganFriendly","vegetarian","seafood","poultry","redMeat","aLaCarte","isPreferred","currencySymbol","currencyCode","locationCodes","fullName","latitude","longitude","notes","transportTypes","seatingCapacity","luggageCapacity","active","transportRoutes","startLocation","startLocationFullName","endLocation","endLocationFullName","transferType","routeSegments","fromLocation","toLocation","transferMethod","distance","enableSightseeing","intermediateStops","locationCode","initialCities","hasAirport","isPopular","EditPackage","navigate","useNavigate","useParams","toast","useToast","activeTab","setActiveTab","useState","isLoading","setIsLoading","packageData","setPackageData","useEffect","title","variant","async","pkg","tourPackageService","getTourPackageById","error","message","fetchPkg","handleSubmit","published","destinations","length","itinerary","Error","updated","updateFromUiPackage","updatedAt","updatePackageData","updates","prev","goToPrevious","tabs","currentIndex","indexOf","goToNext","jsx","PageLayout","children","className","jsxs","Button","size","onClick","ArrowLeft","Tabs","onValueChange","TabsList","TabsTrigger","MapPin","Calendar","TabsContent","PackageBasicInfo","ItineraryBuilder","CostPricing","TermsConditions","useTransportData","itemsPerPage","routes","setRoutes","locations","setLocations","transport","setTransport","importDrawerOpen","setImportDrawerOpen","countries","setCountries","cities","setCities","abortController","AbortController","loadLocationCodesFromSupabase","signal","aborted","mappedLocations","listLocationCodes","map","row","full_name","String","err","loc","loadRoutesFromSupabase","mappedRoutes","listTransportRoutes","idx","startCode","start_location_code","start_location","endCode","end_location_code","end_location","route_code","filter","Boolean","join","normalizedTypes","Array","isArray","vehicle_types","transport_types","transport_entries","t","i","vehicle_type","seating_capacity","luggage_capacity","Number","route_name","transfer_type","fallbackRoutes","localTransportRoutes","r","countriesResponse","CitiesService","getActiveCountries","success","data","citiesResponse","getActiveCities","parseInt","has_airport","mapped","listTransportTypes","loadData","Promise","all","init","routesChannel","supabase","channel","on","event","schema","table","subscribe","locationCodesChannel","abort","removeChannel","e","searchQuery","setSearchQuery","countryFilter","setCountryFilter","cityFilter","setCityFilter","typeFilter","setTypeFilter","currentPage","setCurrentPage","viewRouteDrawerOpen","setViewRouteDrawerOpen","editRouteDrawerOpen","setEditRouteDrawerOpen","deleteRouteDialogOpen","setDeleteRouteDialogOpen","addRouteDrawerOpen","setAddRouteDrawerOpen","transportTypesDrawerOpen","setTransportTypesDrawerOpen","locationCodesDrawerOpen","setLocationCodesDrawerOpen","selectedRoute","setSelectedRoute","importFileRef","useRef","filteredRoutes","useMemo","route","matchesSearch","toLowerCase","includes","matchesCountry","matchesCity","cityName","startLocationCity","find","endLocationCity","startLocationName","endLocationName","cityNameLower","routeInvolvesCity","matchesType","totalPages","Math","max","ceil","currentRoutes","slice","availableCountries","availableCities","transferTypes","nextPage","prevPage","goToPage","page","mapRowToSightseeing","difficulty","difficulty_level","allowedDifficulty","Set","external_id","s","h","charCodeAt","uuidToNumber","image_url","activities","last_updated","transfer_options","google_map_link","has","season","allowed_age_group","days_of_week","pickupTime","pickup_time","package_options","group_size_options","pricing_options","is_free","validity_period","sic_available","sic_pricing","requires_mandatory_transfer","transfer_mandatory","mapSightseeingToRow","createSightseeing","payload","client","isAdminClientConfigured","adminSupabase","maxRows","maxErr","from","select","order","ascending","limit","maxExternalId","insert","single","updateSightseeing","mergedRow","existing","fetchError","eq","existingPolicies","incomingPolicies","mergedPolicies","advisory","trim","refundPolicy","confirmationPolicy","termsConditions","update","deleteSightseeing","delete","useSightseeingData","sightseeings","setSightseeings","loading","setLoading","ensureUniqueIds","items","seen","maxId","reduce","add","loadSightseeingsFromRemote","listSightseeings","deduped","loadSightseeings","handleStorageChange","refreshSightseeings","window","addEventListener","removeEventListener","handleSightseeingUpdate","addSightseeing","newSightseeing","created","dispatchEvent","CustomEvent","updatedPayload","updateSightseeingDb","next","sightseeing","deleteSightseeingDb","STORAGE_KEY","loadSightseeingData","storedData","localStorage","getItem","JSON","parse","setItem","stringify","getEffectivePricingCurrency","symbol","getPricingCurrencyByCountryName","countryName","c","getPricingCurrencyByCountryCode","countryCode","getCurrencyDisplayInfo","displayCurrency","displaySymbol","pricingCurrency","pricingSymbol","hasPricingOverride","AddHotel","externalId","setExternalId","isGeneratingExternalId","setIsGeneratingExternalId","isSubmitting","setIsSubmitting","form","useForm","generateExternalId","nextId","hotelService","generateNextExternalId","asChild","Link","to","Form","HotelForm","onSubmit","supabaseHotelData","convertLegacyHotelToSupabase","newHotel","createHotelWithExternalId","onCancel","onRegenerateExternalId","AddRoomType","hotelId","searchParams","useSearchParams","hotels","useSupabaseHotelsData","actualHotelId","get","hotel","React","Card","CardHeader","Badge","CardContent","starRating","RoomTypeFormContainer","EditRoomType","roomTypeId","roomType","roomTypes","AddRoomTypePage","addRoomType","updateRoomType","deleteRoomType","showAddDialog","setShowAddDialog","editingRoomType","setEditingRoomType","Plus","CardTitle","_","index","Star","Clock","checkInTime","checkOutTime","Users","charAt","toUpperCase","configuration","mealPlan","adults","extraBedPrice","handleEditRoomType","handleDeleteRoomType","AddRoomTypeDialog","open","onOpenChange","onSave","roomTypeData","newRoomType","now","random","toString","substring","hotelCurrency","initialData","mode","EditHotel","updateHotel","isAutoSave","ViewHotel","updateRoomTypeStatus","showDeleteDialog","setShowDeleteDialog","selectedImage","setSelectedImage","roomViewMode","setRoomViewMode","roomsCurrentPage","setRoomsCurrentPage","roomsPerPage","setRoomsPerPage","roomStatusFilter","setRoomStatusFilter","primaryImage","img","amenitiesByCategory","amenities","acc","amenityId","amenity","hotelAmenities","a","push","filteredRooms","filtered","room","totalRoomPages","startIndex","endIndex","paginatedRooms","handleRoomStatusUpdate","roomId","newStatus","handleRoomDelete","updatedRoomTypes","updatedHotel","getStatusColor","Edit","defaultValue","street","state","zipCode","href","target","rel","Globe","amount","min","formatCurrency","amenityIds","Check","Filter","onChange","Grid3X3","List","RoomTypesGridView","onStatusUpdate","onDelete","RoomTypesListView","RoomTypesPagination","totalItems","onPageChange","onItemsPerPageChange","perPage","entries","src","alt","image","HotelDeleteDialog","onClose","routeFormSchema","z.object","z.string","regex","z.enum","errorMap","z.array","z.preprocess","val","optional","z.number","z.boolean","default","sightseeingOptions","additionalCharges","refine","path","allLocations","some","stop","RouteFilters","currentTab","setCurrentTab","onAddRoute","onImport","onExport","onLocationCodes","onTransportTypes","Bus","Download","Upload","Search","Input","placeholder","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","disabled","currencyMap","Thailand","Japan","China","India","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Germany","France","Italy","Spain","Switzerland","Norway","Sweden","Denmark","Canada","Mexico","Brazil","Argentina","UAE","Egypt","Australia","currencyFormats","USD","decimals","separator","EUR","GBP","THB","AED","SGD","MYR","INR","JPY","CNY","IDR","PHP","VND","KRW","format","isInteger","toLocaleString","minimumFractionDigits","maximumFractionDigits","useGrouping","formatPriceForCountry","normalizedCountry","getCurrencyCodeByCountry","getCurrencySymbolByCountry","RouteVehicleTypes","Truck","vehicleName","RoutesTable","onView","onEdit","onToggleStatus","formatRouteId","showUserTracking","getOrigin","origin","getDestination","destination","getCurrentStatus","isActive","formatUserDisplay","userId","userName","formatTimestamp","timestamp","date","toLocaleDateString","toLocaleTimeString","hour","minute","getRowNumber","hasNoRoutes","TooltipProvider","Table","TableHeader","TableRow","TableHead","Fragment","TableBody","TableCell","colSpan","StatusToggle","onToggle","showLabels","Tooltip","TooltipTrigger","User","createdByUser","createdBy","TooltipContent","updatedByUser","updatedBy","Eye","Pencil","Trash2","RoutesPagination","indexOfFirstItem","indexOfLastItem","usingExternalPagination","firstItemDisplayed","lastItemDisplayed","newValue","option","Pagination","PaginationContent","PaginationItem","PaginationPrevious","pageNumbers","startNeighborhood","endNeighborhood","getPageNumbers","PaginationEllipsis","PaginationLink","PaginationNext","RouteDetailsSheet","isOpen","routeIndex","getPrice","Sheet","SheetContent","SheetHeader","SheetTitle","SheetDescription","routeId","replace","roundTripPrice","statusStr","getStatusBadge","SheetFooter","SheetClose","DeleteRouteDialog","onConfirm","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","numericId","startsWith","TransportRoutesTable","externalCurrentPage","externalTotalPages","onNextPage","externalNextPage","onPrevPage","externalPrevPage","onPageSelect","externalItemsPerPage","internalCurrentPage","setInternalCurrentPage","internalItemsPerPage","setInternalItemsPerPage","isViewOpen","setIsViewOpen","isDeleteOpen","setIsDeleteOpen","currentPageValue","itemsPerPageValue","currentItems","totalPagesValue","selectedRouteIndex","findIndex","ValidatedInput","onValidate","required","step","helpText","validateOnChange","validateOnBlur","showValidIcon","setError","isValid","setIsValid","isTouched","setIsTouched","validateValue","errorMessage","inputId","hasError","showSuccess","inputClassName","cn","InputComponent","Textarea","Label","htmlFor","onBlur","AlertCircle","CheckCircle2","ValidatedNumberInput","props","ValidatedTextarea","fieldValidationSchema","sightseeingDescription","useRouteForm","sightseeingLocations","routeData","setRouteData","filteredLocations","setFilteredLocations","filteredSightseeingLocations","setFilteredSightseeingLocations","setRouteSegments","validateField","errors","setErrors","useCallback","field","processedValue","newErrors","z.ZodError","validateAllFields","validationErrors","Object","keys","forEach","clearError","useFormValidation","prevData","extractShortCode","split","getLocationTypeDescription","generateRouteCodeSegments","allStops","segments","fromCode","fromType","toCode","toType","generateCompleteRouteCode","startLoc","endLoc","generatedName","intermediateNames","l","routeCode","onRemoveTransportType","typeId","updatedTransportTypes","onTransportTypeChange","AddRouteSheet","isSaving","setIsSaving","setSightseeingLocations","setStartLocationName","setEndLocationName","isLoadingStartLocation","setIsLoadingStartLocation","isLoadingEndLocation","setIsLoadingEndLocation","stopLocationNames","setStopLocationNames","loadingStopIds","setLoadingStopIds","activeSightseeings","item","handleLocationChange","locationName","locationResolutionService","getLocationFullName","onAddSightseeingOption","preventDefault","newSightseeingOption","updatedSightseeingOptions","onSightseeingOptionChange","optionId","readOnly","segment","checked","SearchableLocationSelect","stopId","updatedStops","onStopChange","onRemoveStop","X","newStop","onTransferMethodChange","SearchableTransportTypeAdd","onSelectType","selectedType","newTransportType","onAddTransportType","tt","Switch","onCheckedChange","onRemoveSightseeingOption","isOn","formDataWithFullNames","additionalText","normalizedStatus","UIBadge","ViewRouteSheet","hasRoute","routeDetails","setRouteDetails","details","getTransportRouteDetails","run","formatCoords","coords","lat","lng","toFixed","totalDurationMinutes","vehicleTypes","sum","v","str","total","hMatch","match","mMatch","num","parseFloat","isNaN","parseDurationToMinutes","coordPair","obj","haversineKm","b","dLat","PI","dLon","lat1","lat2","sin","cos","atan2","sqrt","round","start_location_full_name","end_location_full_name","minutes","floor","m","formatMinutesToHM","start","start_coordinates","end","end_coordinates","stopCoords","stops","coordinates","p","points","curr","dist","Info","Compass","Map","Pin","transport_type","vehicle_name","bags","adult_price","child_price","additional_charges","Route","displayedStops","st","stop_order","location_code","location_details","transfer_method_notes","EditRouteSheet","mapVehicleTypesToUI","rawVehicleTypes","vt","mapStopsToUI","mapSightseeingToUI","options","opt","allowedTransferTypes","sanitizeTransferType","raw","toStatusLiteral","parsed","parseJsonArraySafely","normalizedIsActive","is_active","intermediate_stops","sightseeing_options","getInitialData","hasErrors","enable_sightseeing","fetchRouteDetails","loadInitialLocationNames","safeValue","rawCode","labelName","cleanedTransportTypes","cleanedStops","cleanedSightseeing","ImportRoutesModal","fileRef","importing","setImporting","parsing","setParsing","importMode","setImportMode","validate","setValidate","continueOnError","setContinueOnError","preview","setPreview","refreshSupabaseSession","then","session","reset","current","ref","accept","file","files","result","parseTransportRoutes","validRows","invalidRows","ir","importTransportRoutes","validCount","invalidCount","defaultFields","ExportRoutesModal","exporting","setExporting","exportFormat","setExportFormat","exportStatus","setExportStatus","exportCountry","setExportCountry","selectedFields","setSelectedFields","f","Checkbox","handleFieldToggle","set","blob","filename","meta","exportTransportRoutes","filters","rowsCount","URL","createObjectURL","document","createElement","download","body","appendChild","click","remove","revokeObjectURL","mapCompleteRouteToTransportRoute","completeRoute","TransportRoutesTab","setItemsPerPage","exportDrawerOpen","setExportDrawerOpen","setFilters","refresh","useComprehensiveTransportRoutes","selectedIntegratedRoute","routeActions","defaultTransportTypes","newRouteData","setNewRouteData","editRouteData","setEditRouteData","resetNewRouteForm","handleViewRoute","handleEditRoute","routeCopy","handleDeleteRoute","handleConfirmDelete","test","integratedTransportService","deleteTransportRoute","updatedRoutes","handleAddRoute","handleToggleStatus","handleNewRouteInputChange","handleEditRouteInputChange","handleAddStop","handleRemoveStop","handleStopChange","handleReorderStops","_routeId","stopIds","reorder","stopMap","handleAddSightseeingOption","newOption","handleRemoveSightseeingOption","handleSightseeingOptionChange","handleAddTransportType","handleRemoveTransportType","handleTransportTypeChange","handleSaveNewRoute","formData","validationResult","safeParse","errorMessages","duplicateStops","routeName","kg","createTransportRoute","routePath","newRoute","start_location_details","end_location_details","intermediate_stops_data","transport_types_data","sightseeing_options_data","prevRoutes","errorTitle","handleSaveEditRoute","override","source","typedStatus","typedEditRouteData","updateData","updateTransportRoute","handleEditFromView","useRouteActions","newFilters","search","displayRoutes","q","totalDisplayPages","currentPageRoutes","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","tab","newItemsPerPage","TransportRoutesPage","TransportTypeAddSheet","transportCategories","newType","setNewType","notApplicableSeating","setNotApplicableSeating","notApplicableLuggage","setNotApplicableLuggage","handleChange","handleSeatingCapacityChange","numValue","handleLuggageCapacityChange","TransportTypeEditSheet","transportType","editedType","setEditedType","TransportTypeDeleteDialog","onConfirmDelete","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","DialogFooter","TransportTypeViewSheet","TransportTypesTab","transportData","searchTransportTypes","setSearchTransportTypes","addTypeOpen","setAddTypeOpen","editTypeOpen","setEditTypeOpen","deleteTypeOpen","setDeleteTypeOpen","viewTypeOpen","setViewTypeOpen","selectedTransportType","setSelectedTransportType","filteredTransportTypes","newActiveStatus","updatedRow","toggleTransportTypeActive","updatedType","mapTransportTypeRowToUI","handleToggleTypeStatus","ToggleRight","ToggleLeft","dbRow","mapUIToTransportTypeRow","newRow","createTransportType","updateTransportType","deleteTransportType","TransportTypesPage","LocationCodesHeader","onAddClick","onImportSampleData","showImportButton","LocationCodesTable","LocationCodesPagination","paginationOptions","LocationCodeAddSheet","getCitiesByCountry","useCitiesData","newLocation","setNewLocation","showCustomCategory","setShowCustomCategory","customCategory","setCustomCategory","predefinedCategories","filteredCities","handleCustomCategorySubmit","handleCustomCategoryCancel","nominatimEnabled","setNominatimEnabled","reverseAddress","setReverseAddress","isGeocoding","setIsGeocoding","res","AppSettingsService","getSetting","SETTING_CATEGORIES","INTEGRATIONS","setting_value","parseNumber","n","isFinite","formatCoord","isValidLat","isValidLon","onKeyDown","key","autoFocus","RadioGroup","RadioGroupItem","query","results","nominatimService","top","lon","reverse","display_name","ExternalLink","LocationCodeEditSheet","editedLocation","setEditedLocation","setGeocodingError","setGeocodingSuccess","geocodingError","geocodingSuccess","CheckCircle","queryParts","fallbackQuery","bestResult","Loader2","Alert","AlertDescription","LocationCodeViewSheet","LocationCodeDeleteDialog","sampleUAELocationCodes","LocationCodesManager","isAddSheetOpen","setIsAddSheetOpen","categoryFilter","setCategoryFilter","selectedLocationCode","setSelectedLocationCode","isEditOpen","setIsEditOpen","isDeleteDialogOpen","setIsDeleteDialogOpen","sampleDataImported","setSampleDataImported","isDatabaseEmpty","setIsDatabaseEmpty","mapRowToUI","sampleData","sample","uuidv4","existingData","existingCodes","fetchRemote","handleAddClick","handleUpdateLocationCode","updatedLocationCode","updateLocationCodeRemote","updatedLocations","filteredLocationCodes","matchesCategory","categories","importedCodes","createLocationCode","mapUIToInsert","newLocationCode","deleteLocationCodeRemote","LocationCodesPage","Hotels","searchTerm","setSearchTerm","viewMode","setViewMode","showFilters","setShowFilters","importExportOpen","setImportExportOpen","filteredHotels","filteredByFilters","useHotelFilters","displayedHotels","activeFilterCount","count","facilities","dateRange","getActiveFilterCount","handlePageChange","Table2","HotelFilters","SampleDataImporter","HotelsTable","HotelGrid","pageNum","ImportExportDrawer","useRestaurantsData","restaurants","setRestaurants","filteredRestaurants","setFilteredRestaurants","locationFilter","setLocationFilter","priceRangeFilter","setPriceRangeFilter","cuisineFilter","setCuisineFilter","selectedRestaurant","setSelectedRestaurant","isDetailsDialogOpen","setIsDetailsDialogOpen","isImportExportOpen","setIsImportExportOpen","flatMap","restaurant","list","restaurantService","loadRestaurants","matchesLocation","matchesPriceRange","matchesCuisine","indexOfLastRestaurant","indexOfFirstRestaurant","currentRestaurants","handleAddRestaurant","handleImportExport","handleViewDetails","handleEditRestaurant","handleDeleteClick","handleDeleteConfirm","handleImportComplete","saveRestaurant","restaurantData","saved","create","saveRestaurants","upserted","upsertMany","resetFilters","getPriceString","repeat","RestaurantCard","onViewDetails","CardFooter","RestaurantsContent","onAddRestaurant","Utensils","startPage","endPage","steps","RestaurantDetailsDialog","area","DollarSign","icon","Wifi","Car","Music","CreditCard","feature","renderFeatures","meals","meal","renderMealTypes","Salad","renderDietaryOptions","onImportComplete","fileInputRef","importStatus","setImportStatus","importMessage","setImportMessage","importRestaurants","exportRestaurants","arrayBuffer","workbook","XLSX.read","SheetNames","restaurantsSheet","Sheets","importedData","XLSX.utils","sheet_to_json","importedRestaurants","vegOptions","updatedRestaurants","exportData","Location","City","Country","Address","Area","Description","Cuisine","Rating","WiFi","Parking","Breakfast","Lunch","Dinner","Snacks","Beverages","Vegetarian","Seafood","Poultry","Status","Preferred","book_new","worksheet","json_to_sheet","book_append_sheet","excelBuffer","XLSX.write","bookType","Blob","saveAs","useRestaurantImportExport","RestaurantsPage","keywords","FileText","CircleDollarSign","TransportTabs","TransportErrorBoundary","TransportPage","getFlagUrl","flagUrl","generateFlagUrl","CountriesTable","totalCountries","selectedCountries","onSelectCountry","onSelectAll","onBulkDelete","onBulkToggleStatus","onBulkEdit","showConfirmDialog","setShowConfirmDialog","countryToToggle","setCountryToToggle","isAllSelected","every","isIndeterminate","handleSelectCountry","el","indeterminate","isSelected","rowNumber","onError","style","display","currencyInfo","handleToggleStatusClick","ChevronLeft","pages","ChevronRight","AlertTriangle","CountryViewDrawer","deleteDrawerOpen","setDeleteDrawerOpen","selectedCountry","AspectRatio","ratio","lang","FlagDisplay","getSizeClasses","currentTarget","CountryEditSheet","showFlagGenerator","setShowFlagGenerator","Flag","FlagGenerator","onFlagUrlGenerated","initialCountryCode","initialCountryName","setCountryCode","setCountryName","flagSize","setFlagSize","generatedUrl","setGeneratedUrl","isGenerating","setIsGenerating","flagError","setFlagError","handleGenerate","dataUrl","response","fetch","ok","resolve","reject","reader","FileReader","onload","onerror","readAsDataURL","convertToDataUrl","generateDataUrl","timeoutId","setTimeout","clearTimeout","handleCopyUrl","navigator","clipboard","writeText","handleDownloadFlag","link","removeChild","CardDescription","maxLength","handleCountrySelect","aspectRatio","Copy","RefreshCw","CountryAddSheet","isFormValid","Wand2","Collapsible","CollapsibleContent","CountryDeleteDrawer","CountriesFilters","searchType","setSearchType","continentFilter","setContinentFilter","statusFilter","setStatusFilter","getSearchPlaceholder","useAdvancedCountryImport","onImportError","refreshCountries","isImporting","setIsImporting","importProgress","setImportProgress","stage","percentage","currentStep","recordsProcessed","totalRecords","importStatistics","setImportStatistics","validRecords","invalidRecords","duplicateRecords","newRecords","updateRecords","skippedRecords","processedRecords","processedData","setProcessedData","setValidationErrors","importOptions","setImportOptions","skipDuplicates","validateOnly","batchSize","allowPartialImport","autoFixMinorErrors","abortControllerRef","validateCountryCode","severity","cleanCode","suggestion","validateCountryName","cleanName","validateCurrency","cleanCurrency","validateStatus","cleanStatus","validateUrl","fieldName","validateBoolean","stringValue","normalizeBoolean","handleFileImport","rawData","jsonData","endsWith","lines","line","headers","values","header","_originalRowIndex","sheetName","defval","normalized","headerMapping","Continent","Region","Currency","lowerValue","normalizeRowHeaders","readAsText","readAsBinaryString","parseFileContent","existingCountriesResponse","CountriesService","getAllCountries","existingCountries","mapDbCountriesToFrontend","processed","existingNames","processedCodes","processedNames","rowIndex","isDuplicateCode","isDuplicateName","isExistingCode","processedEntry","isNew","isUpdate","isDuplicate","originalRowIndex","processRawData","stats","allErrors","executeImport","record","processedCount","batch","countryData","mappedData","mapFrontendCountryToDbInsert","createCountry","updateCountry","finalStats","cancelImport","resetImport","hasValidData","canExecuteImport","hasWarnings","AdvancedCountryImport","trigger","setIsOpen","handleOptionsChange","getErrorIcon","XCircle","StatCard","color","green","red","yellow","blue","DialogTrigger","FileCheck","Settings","TrendingUp","Database","getStageIcon","Square","Progress","csvContent","cell","ScrollArea","RotateCcw","Play","KeyboardShortcutsHelp","shortcuts","selectedCount","setOpen","Keyboard","HelpCircle","shortcut","requiresSelection","BulkEditDialog","onBulkUpdate","setFormData","currencies","Edit3","CountriesPage","setSelectedCountries","hiddenCountries","setHiddenCountries","bulkEditDialogOpen","setBulkEditDialogOpen","currentCountries","setSelectedCountry","editFormData","setEditFormData","newCountryData","setNewCountryData","viewDrawerOpen","setViewDrawerOpen","editDrawerOpen","setEditDrawerOpen","addDrawerOpen","setAddDrawerOpen","resetNewCountryForm","useRealTimeCountries","filteredCountries","setFilteredCountries","matchesContinent","matchesStatus","safeItemsPerPage","availableContinents","pageNumber","useCountriesData","countryActions","handleNewCountryInputChange","isViewSheetOpen","setIsViewSheetOpen","isEditSheetOpen","setIsEditSheetOpen","handleViewCountry","handleEditCountry","handleDeleteCountry","handleSaveEdit","mapFrontendCountryToDbUpdate","updatedCountry","mapDbCountryToFrontend","deleteCountry","handleAddCountry","handleSaveNewCountry","insertData","newCountry","statusText","handleFormInputChange","handleFlagUrlChange","handleNewCityInputChange","handleNewCountryFlagUrlChange","useCountryActions","importExport","handleImportClick","handleExport","includeAll","dataToExport","matches","currencyOverrideData","wb","ws","currencyWs","XLSX.writeFile","overrideMessage","useCountryImportExport","handleBulkDelete","ids","displayNames","confirm","bulkDeleteCountries","handleBulkToggleStatus","statusAction","bulkToggleStatus","handleBulkEdit","onClearSelection","isDialogOpen","handleKeyDown","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","contentEditable","isCtrlOrCmd","ctrlKey","metaKey","useKeyboardShortcuts","countryId","selected","allIds","bulkUpdateCountries","KeyboardShortcutsPopup","Popover","PopoverTrigger","PopoverContent","align","CitiesPage","user","authLoading","useAuth","selectedCities","setSelectedCities","selectedCity","setSelectedCity","addDialogOpen","setAddDialogOpen","editSheetOpen","setEditSheetOpen","deleteDialogOpen","setDeleteDialogOpen","viewSheetOpen","setViewSheetOpen","bulkEditSheetOpen","setBulkEditSheetOpen","keyboardShortcutsOpen","setKeyboardShortcutsOpen","addFormData","setAddFormData","bulkEditFormData","setBulkEditFormData","newCityData","setNewCityData","addSheetOpen","setAddSheetOpen","viewDialogOpen","setViewDialogOpen","importDialogOpen","setImportDialogOpen","quickImportOpen","setQuickImportOpen","quickImportCountry","setQuickImportCountry","quickImportRegion","setQuickImportRegion","quickImportText","setQuickImportText","quickImportStatus","setQuickImportStatus","getAllCities","handleAddCity","handleViewCity","handleEditCity","handleDeleteCity","promises","updateCity","cityId","successCount","failureCount","deleteCity","handleSelectCity","handleSelectAll","paginatedCities","totalCitiesCount","activeCitiesCount","disabledCitiesCount","searchInput","getElementById","focus","ID","Name","handleToggleCityStatus","createCity","rawEntries","uniqueCityNames","statusValue","cityData","importCities","getExpirationStatus","daysUntilExpiration","getTime","formatValidityPeriod","formatDate","year","month","day","countryCurrencyMap","Nepal","Maldives","Turkey","Cambodia","Laos","Myanmar","Kenya","Tanzania","Morocco","Jordan","Lebanon","Qatar","Kuwait","Oman","Bahrain","Iran","Israel","Georgia","Armenia","Azerbaijan","Kazakhstan","Uzbekistan","Kyrgyzstan","Tajikistan","Turkmenistan","Afghanistan","Pakistan","Bangladesh","Bhutan","Mongolia","Chile","Peru","Colombia","Ecuador","Bolivia","Uruguay","Paraguay","Venezuela","Guatemala","Panama","Nicaragua","Honduras","Belize","Jamaica","Cuba","Haiti","Barbados","Bahamas","Iceland","Finland","Estonia","Latvia","Lithuania","Poland","Slovakia","Hungary","Slovenia","Croatia","Serbia","Montenegro","Albania","Bulgaria","Romania","Moldova","Ukraine","Belarus","Russia","Portugal","Netherlands","Belgium","Luxembourg","Austria","Liechtenstein","Greece","Cyprus","Malta","Ireland","Monaco","Andorra","getCurrencyByCountry","includeCode","SightseeingCard","onDuplicate","getTransferOptionsCount","expirationStatus","ImageWithFallback","fallbackIcon","getExpirationBadge","stopPropagation","Trash","SightseeingTable","formatPrice","getTransferOptions","enabledOptions","getPricingDisplay","cat","toStringArray","hasNonEmptyString","SightseeingViewDrawer","highlightsList","inclusionsList","exclusionsList","cancellationPolicyText","refundPolicyText","confirmationPolicyText","advisoryText","termsConditionsText","dayLabelMap","monday","tuesday","wednesday","thursday","friday","saturday","sunday","Separator","days","formatDaysOfWeek","hh","mm","ampm","padStart","formatPickupTimeHHMM","UserCheck","Package","highlight","inclusion","exclusion","SightseeingDeleteDialog","Sightseeing","selectedCategory","setSelectedCategory","selectedStatus","setSelectedStatus","priceFilter","setPriceFilter","showExpiredOnly","setShowExpiredOnly","selectedSightseeing","setSelectedSightseeing","handleViewSightseeing","handleEditSightseeing","handleDeleteSightseeing","handleDuplicateSightseeing","findSightseeingById","nowIso","duplicatePayload","createSightseeingDb","updatedSightseeing","useSightseeingActions","sort","arr","filteredSightseeings","matchesPrice","matchesExpiration","paginatedSightseeings","valid","expiringSoon","expired","noPeriod","getExpirationStats","handleEdit","handleAddNew","BreadcrumbNav","handleView","handleDelete","handleDuplicate","handleToggleStatusWrapper","VisaPage","visas","setVisas","fetchVisas","VisaService","getAllVisas","visa","visa_type","processing_time","handleViewVisa","handleEditVisa","deleteVisa","handleDeleteVisa","VisaWizard","setStep","applicant","setApplicant","email","phone","nationality","selectedVisa","setSelectedVisa","selectedDocs","setSelectedDocs","documents_parsed","doc","VisaDashboard","bookings","setBookings","setSearch","__vitePreload","import","a3","__VITE_PRELOAD__","sb","fetchAll","filteredVisas","assign","applicant_name","AddVisa","setCountry","visaType","setVisaType","processingTime","setProcessingTime","validity","setValidity","setPrice","isRushAvailable","setIsRushAvailable","rushProcessingTime","setRushProcessingTime","rushPrice","setRushPrice","requirements","setRequirements","setStatus","documents","setDocuments","saving","setSaving","updateDocument","patch","crypto","randomUUID","removeDocument","is_rush_available","rush_processing_time","rush_price","formatDocumentsForStorage","createVisa","EditVisa","getVisaById","load","docId","updateVisa","ViewVisa","setVisa","Packages","packages","setPackages","listTourPackages","fetchPackages","filteredPackages","dest","handleCreatePackage","handleDeletePackage","deleteTourPackage","handleStatusChange","LayoutGrid","Grid","PackageCard","onStatusChange","SmartSuggestionsPanel","templateCategory","onAddToDay","onUseDayTemplate","suggestions","useInventoryData","setSuggestions","dayTemplates","Budget","Standard","Premium","Luxury","filteredSuggestions","hotelSuggestions","standardRoom","minRate","transportSuggestions","paxBased","sightseeingSuggestions","activity","restaurantSuggestions","generateDayTemplates","templates","cityHotels","citySightseeing","cityRestaurants","dayNumber","totalCost","calculateDayCost","refreshSuggestions","useSmartTemplateSuggestions","getIcon","Hotel","Camera","UtensilsCrossed","Sparkles","getCategoryColor","template","EmptyStateIcon","IconComponent","TemplateSummary","dayPlan","calculateTotalCost","activityBreakdown","breakdown","calculateActivityBreakdown","mealStats","getMealStats","cityDistribution","distribution","getCityDistribution","paxPricing","baseTotal","pax","perPerson","getEstimatedPaxPricing","BarChart3","Activity","nights","width","PieChart","Icon","TemplateEditor","tags","setDayPlan","showSmartSuggestions","setShowSmartSuggestions","metadata","updateDay","dayId","rows","removeCity","newDay","renumberedPlan","removeDay","tag","lastDay","newActivity","templateService","ProposalTemplateService","getInstance","templateData","pricingMatrix","paxCount","basePrice","markup","usageCount","averageRating","lastUsed","saveTemplate","Save","TemplatePreview","TemplateFilters","onFilterChange","updateFilter","minDays","maxDays","Templates","showEditor","setShowEditor","showPreview","setShowPreview","selectedTemplate","setSelectedTemplate","refreshTemplates","deleteTemplate","duplicateTemplate","setTemplates","setStats","inactive","mostUsed","avgRating","loadTemplates","allTemplates","getAllTemplates","activeTemplates","inactiveTemplates","templateId","duplicated","createdFrom","toggleTemplateStatus","useTemplateData","filteredTemplates","handleCreateNew","BookTemplate","handlePreview","RestaurantBasicInfoForm","handleInputChange","handleSelectChange","handleCheckboxChange","countryOptions","filteredCityOptions","RestaurantImageForm","RestaurantCuisineForm","cuisineOptions","handleCuisineTypeChange","RestaurantPricingForm","TimePickerInput","RestaurantFeaturesForm","handleTimeChange","AddEditRestaurant","useIsMobile","isEditMode","useFormState","cityOptions","setFilteredCityOptions","filterCitiesByCountry","setCountryOptions","setCityOptions","updatedCountries","allCities","loadLocationData","useLocationOptions","isEditingWithCity","setIsEditingWithCity","previousCountry","setPreviousCountry","computedLocation","nameParts","categoryData","updatedCategory","currentCuisines","useFormHandlers","validateForm","useFormSubmit","useLocation","restaurantToEdit","foundRestaurant","useEditModeEffect","CountryCurrencyService","getCurrencyByCountryName","useCurrencyUpdate","isFirstRender","setIsFirstRender","useCountryCityEffect","useRestaurantForm","BasicInformation","handleFormChange","newImageUrl","setNewImageUrl","setAvailableCountries","setAvailableCities","currencyError","useSightseeingCurrency","propCountryNames","hookCountryNames","merged","finalCountries","cityNames","finalCitySet","displayText","updatedImages","setPrimaryImage","xmlns","height","imageToRemove","handleRemoveImage","newImage","OperationalDetails","selectedCategories","setSelectedCategories","setNewActivity","getStartDate","getEndDate","handleCategoryChange","CalendarIcon","onSelect","currentEndDate","initialFocus","currentStartDate","finalEndDate","handleRemoveActivity","level","currentDays","updatedDays","handleDayOfWeekChange","PricingPreview","enabledPricingOptions","enabledTransferOptions","enabledPackageOptions","o","PricingModule","showCustomTypeInput","setShowCustomTypeInput","showCustomPackageType","setShowCustomPackageType","pricingTypes","handleStandardPriceChange","handleSicPriceChange","handlePricingOptionChange","updatedOptions","customType","handlePackageOptionChange","updatedPackages","handleAddTransferOption","newTransfer","getSeatingCapacityForVehicle","updatedTransfers","handleTransferOptionChange","handleGroupSizeOptionChange","vehicleTypeName","lowerName","transfer","handleRemovePricingOption","PlusCircle","handleRemoveTransferOption","handleRemovePackageOption","transferIncluded","requiresPrivateTransfer","newPackage","handleRemoveGroupSizeOption","PoliciesInfo","highlightInput","setHighlightInput","exclusionInput","setExclusionInput","updatePolicies","addHighlight","addExclusion","otherInclusions","removeHighlight","removeExclusion","SightseeingForm","activeCountries","useRealTimeCountriesData","validationStatus","setValidationStatus","basic","operational","pricing","isBasicValid","isPricingValid","getTabStatusIcon","tabKey","useSightseeingForm","sightseeingId","emptyForm","autoLink","setIsFormValid","hasActivities","hasPickupTime","hasPricing","updatedFormData","currentPolicies","inclusionsFromText","existingSightseeing","maybeSingle","getSightseeingById","preparedData","loadExisting","AddSightseeing","EditSightseeing","CreatePackage","minPax","isFixedDeparture","totalSeats","startCity","endCity","packageType","themes","banners","baseCost","finalPrice","pricePerPerson","paymentPolicy","getCompletionPercentage","completed","createFromUiPackage","tabsConfig","isCompleted","getStepValidation","ViewPackage","loadPackage","Intl","NumberFormat","bannerImage","theme","departureDate","banner","accommodation","hotelName","customHotelName","actIdx","commission"],"ignoreList":[],"sources":["../../src/pages/inventory/countries/data/countryData.ts","../../src/pages/inventory/sightseeing/data/initialData.ts","../../src/pages/inventory/restaurants/data/restaurantData.ts","../../src/pages/inventory/transport/data/transportData.ts","../../src/pages/inventory/cities/data/cityData.ts","../../src/pages/inventory/packages/EditPackage.tsx","../../src/pages/inventory/transport/hooks/useTransportData.ts","../../src/pages/inventory/sightseeing/services/sightseeingService.ts","../../src/pages/inventory/sightseeing/hooks/useSightseeingData.ts","../../src/pages/inventory/sightseeing/services/storageService.ts","../../src/pages/inventory/countries/utils/currencyUtils.ts","../../src/pages/inventory/hotels/AddHotel.tsx","../../src/pages/inventory/hotels/AddRoomType.tsx","../../src/pages/inventory/hotels/EditRoomType.tsx","../../src/pages/inventory/hotels/AddRoomTypePage.tsx","../../src/pages/inventory/hotels/EditHotel.tsx","../../src/pages/inventory/hotels/ViewHotel.tsx","../../src/pages/inventory/transport/hooks/useRouteActions.ts","../../src/pages/inventory/transport/components/RouteFilters.tsx","../../src/pages/inventory/transport/utils/currencyUtils.ts","../../src/pages/inventory/transport/components/RouteVehicleTypes.tsx","../../src/pages/inventory/transport/components/RoutesTable.tsx","../../src/pages/inventory/transport/components/RoutesPagination.tsx","../../src/pages/inventory/transport/components/RouteDetailsSheet.tsx","../../src/pages/inventory/transport/components/DeleteRouteDialog.tsx","../../src/pages/inventory/transport/utils/routeUtils.ts","../../src/pages/inventory/transport/components/TransportRoutesTable.tsx","../../src/pages/inventory/transport/components/ValidatedInput.tsx","../../src/pages/inventory/transport/hooks/useFormValidation.ts","../../src/pages/inventory/transport/hooks/useRouteForm.ts","../../src/pages/inventory/transport/components/AddRouteSheet.tsx","../../src/pages/inventory/transport/components/Badge.tsx","../../src/pages/inventory/transport/components/ViewRouteSheet.tsx","../../src/pages/inventory/transport/components/EditRouteSheet.tsx","../../src/pages/inventory/transport/components/ImportRoutesModal.tsx","../../src/pages/inventory/transport/components/ExportRoutesModal.tsx","../../src/pages/inventory/transport/components/routes/TransportRoutesTab.tsx","../../src/pages/inventory/transport/TransportRoutesPage.tsx","../../src/pages/inventory/transport/components/TransportTypeAddSheet.tsx","../../src/pages/inventory/transport/components/TransportTypeEditSheet.tsx","../../src/pages/inventory/transport/components/TransportTypeDeleteDialog.tsx","../../src/pages/inventory/transport/components/TransportTypeViewSheet.tsx","../../src/pages/inventory/transport/components/types/TransportTypesTab.tsx","../../src/pages/inventory/transport/TransportTypesPage.tsx","../../src/pages/inventory/transport/components/locationCodes/LocationCodesHeader.tsx","../../src/pages/inventory/transport/components/locationCodes/LocationCodesTable.tsx","../../src/pages/inventory/transport/components/locationCodes/LocationCodesPagination.tsx","../../src/pages/inventory/transport/components/LocationCodeAddSheet.tsx","../../src/pages/inventory/transport/components/LocationCodeEditSheet.tsx","../../src/pages/inventory/transport/components/LocationCodeViewSheet.tsx","../../src/pages/inventory/transport/components/LocationCodeDeleteDialog.tsx","../../src/pages/inventory/transport/components/locationCodes/LocationCodesManager.tsx","../../src/pages/inventory/transport/LocationCodesPage.tsx","../../src/pages/inventory/Hotels.tsx","../../src/pages/inventory/restaurants/hooks/useRestaurantsData.tsx","../../src/pages/inventory/restaurants/components/RestaurantCard.tsx","../../src/pages/inventory/restaurants/components/RestaurantsContent.tsx","../../src/pages/inventory/restaurants/components/RestaurantDetailsDialog.tsx","../../src/pages/inventory/restaurants/components/ImportExportDrawer.tsx","../../src/pages/inventory/restaurants/hooks/useRestaurantImportExport.ts","../../src/pages/inventory/restaurants/RestaurantsPage.tsx","../../src/pages/inventory/transport/components/TransportTabs.tsx","../../src/pages/inventory/Transport.tsx","../../src/pages/inventory/countries/utils/flagUtils.ts","../../src/pages/inventory/countries/components/CountriesTable.tsx","../../src/pages/inventory/countries/components/drawers/CountryViewDrawer.tsx","../../src/pages/inventory/countries/components/FlagDisplay.tsx","../../src/pages/inventory/countries/components/CountryEditSheet.tsx","../../src/pages/inventory/countries/components/FlagGenerator.tsx","../../src/pages/inventory/countries/components/CountryAddSheet.tsx","../../src/pages/inventory/countries/components/drawers/CountryDeleteDrawer.tsx","../../src/pages/inventory/countries/components/CountriesFilters.tsx","../../src/pages/inventory/countries/hooks/useAdvancedCountryImport.ts","../../src/pages/inventory/countries/components/AdvancedCountryImport.tsx","../../src/pages/inventory/countries/components/KeyboardShortcutsHelp.tsx","../../src/pages/inventory/countries/components/BulkEditDialog.tsx","../../src/pages/inventory/countries/CountriesPage.tsx","../../src/pages/inventory/countries/hooks/useCountriesData.ts","../../src/pages/inventory/countries/hooks/useCountryActions.ts","../../src/pages/inventory/countries/hooks/useCountryImportExport.ts","../../src/pages/inventory/countries/hooks/useKeyboardShortcuts.ts","../../src/pages/inventory/cities/components/KeyboardShortcutsPopup.tsx","../../src/pages/inventory/Cities.tsx","../../src/pages/inventory/sightseeing/services/expirationService.ts","../../src/pages/inventory/sightseeing/utils/currency.ts","../../src/pages/inventory/sightseeing/components/SightseeingCard.tsx","../../src/pages/inventory/sightseeing/components/SightseeingTable.tsx","../../src/pages/inventory/sightseeing/components/SightseeingViewDrawer.tsx","../../src/pages/inventory/sightseeing/components/SightseeingDeleteDialog.tsx","../../src/pages/inventory/Sightseeing.tsx","../../src/pages/inventory/sightseeing/hooks/useSightseeingActions.ts","../../src/pages/inventory/Visa.tsx","../../src/pages/inventory/visa/VisaWizard.tsx","../../src/pages/inventory/visa/VisaDashboard.tsx","../../src/pages/inventory/visa/AddVisa.tsx","../../src/pages/inventory/visa/EditVisa.tsx","../../src/pages/inventory/visa/ViewVisa.tsx","../../src/pages/inventory/Packages.tsx","../../src/pages/inventory/templates/components/SmartSuggestionsPanel.tsx","../../src/pages/inventory/templates/hooks/useSmartTemplateSuggestions.ts","../../src/pages/inventory/templates/components/TemplateSummary.tsx","../../src/pages/inventory/templates/components/TemplateEditor.tsx","../../src/pages/inventory/templates/components/TemplatePreview.tsx","../../src/pages/inventory/templates/components/TemplateFilters.tsx","../../src/pages/inventory/Templates.tsx","../../src/pages/inventory/templates/hooks/useTemplateData.ts","../../src/pages/inventory/restaurants/components/RestaurantBasicInfoForm.tsx","../../src/pages/inventory/restaurants/components/RestaurantImageForm.tsx","../../src/pages/inventory/restaurants/components/RestaurantCuisineForm.tsx","../../src/pages/inventory/restaurants/components/RestaurantPricingForm.tsx","../../src/pages/inventory/restaurants/components/TimePickerInput.tsx","../../src/pages/inventory/restaurants/components/RestaurantFeaturesForm.tsx","../../src/pages/inventory/restaurants/AddEditRestaurant.tsx","../../src/pages/inventory/restaurants/hooks/useRestaurantForm.ts","../../src/pages/inventory/restaurants/hooks/form/useFormState.ts","../../src/pages/inventory/restaurants/hooks/form/useLocationOptions.ts","../../src/pages/inventory/restaurants/hooks/form/useCuisineOptions.ts","../../src/pages/inventory/restaurants/hooks/form/useFormHandlers.ts","../../src/pages/inventory/restaurants/hooks/form/useFormValidation.ts","../../src/pages/inventory/restaurants/hooks/form/useFormSubmit.ts","../../src/pages/inventory/restaurants/hooks/form/useEditModeEffect.ts","../../src/pages/inventory/restaurants/hooks/form/useCurrencyUpdate.ts","../../src/pages/inventory/restaurants/hooks/form/useCountryCityEffect.ts","../../src/pages/inventory/sightseeing/components/form-sections/BasicInformation.tsx","../../src/pages/inventory/sightseeing/components/form-sections/OperationalDetails.tsx","../../src/pages/inventory/sightseeing/components/form-sections/PricingPreview.tsx","../../src/pages/inventory/sightseeing/components/form-sections/PricingModule.tsx","../../src/pages/inventory/sightseeing/components/form-sections/PoliciesInfo.tsx","../../src/pages/inventory/sightseeing/components/SightseeingForm.tsx","../../src/pages/inventory/sightseeing/hooks/useSightseeingForm.ts","../../src/pages/inventory/sightseeing/hooks/form/useFormState.ts","../../src/pages/inventory/sightseeing/hooks/form/useFormHandlers.ts","../../src/pages/inventory/sightseeing/hooks/form/useFormValidation.ts","../../src/pages/inventory/sightseeing/hooks/form/useFormSubmit.ts","../../src/pages/inventory/sightseeing/hooks/form/useEditModeEffect.ts","../../src/pages/inventory/sightseeing/hooks/form/useCurrencyUpdate.ts","../../src/pages/inventory/sightseeing/AddSightseeing.tsx","../../src/pages/inventory/sightseeing/EditSightseeing.tsx","../../src/pages/inventory/packages/CreatePackage.tsx","../../src/pages/inventory/packages/ViewPackage.tsx"],"sourcesContent":["\nimport { Country } from '../types/country';\n\nexport const commonCurrencies = [\n  // Major Global Currencies\n  { code: 'USD', name: 'US Dollar', symbol: '$' },\n  { code: 'EUR', name: 'Euro', symbol: '' },\n  { code: 'GBP', name: 'British Pound', symbol: '' },\n  { code: 'JPY', name: 'Japanese Yen', symbol: '' },\n  { code: 'CHF', name: 'Swiss Franc', symbol: 'CHF' },\n  \n  // North America\n  { code: 'CAD', name: 'Canadian Dollar', symbol: 'C$' },\n  { code: 'MXN', name: 'Mexican Peso', symbol: '$' },\n  \n  // Asia-Pacific\n  { code: 'CNY', name: 'Chinese Yuan', symbol: '' },\n  { code: 'INR', name: 'Indian Rupee', symbol: '' },\n  { code: 'AUD', name: 'Australian Dollar', symbol: 'A$' },\n  { code: 'SGD', name: 'Singapore Dollar', symbol: 'S$' },\n  { code: 'HKD', name: 'Hong Kong Dollar', symbol: 'HK$' },\n  { code: 'KRW', name: 'South Korean Won', symbol: '' },\n  { code: 'THB', name: 'Thai Baht', symbol: '' },\n  { code: 'MYR', name: 'Malaysian Ringgit', symbol: 'RM' },\n  { code: 'IDR', name: 'Indonesian Rupiah', symbol: 'Rp' },\n  { code: 'PHP', name: 'Philippine Peso', symbol: '' },\n  { code: 'VND', name: 'Vietnamese Dong', symbol: '' },\n  { code: 'TWD', name: 'Taiwan Dollar', symbol: 'NT$' },\n  { code: 'NZD', name: 'New Zealand Dollar', symbol: 'NZ$' },\n  \n  // Middle East & Africa\n  { code: 'AED', name: 'UAE Dirham', symbol: '.' },\n  { code: 'SAR', name: 'Saudi Riyal', symbol: '' },\n  { code: 'QAR', name: 'Qatari Riyal', symbol: '' },\n  { code: 'KWD', name: 'Kuwaiti Dinar', symbol: '.' },\n  { code: 'BHD', name: 'Bahraini Dinar', symbol: '..' },\n  { code: 'OMR', name: 'Omani Rial', symbol: '' },\n  { code: 'ILS', name: 'Israeli Shekel', symbol: '' },\n  { code: 'TRY', name: 'Turkish Lira', symbol: '' },\n  { code: 'EGP', name: 'Egyptian Pound', symbol: '' },\n  { code: 'ZAR', name: 'South African Rand', symbol: 'R' },\n  { code: 'MAD', name: 'Moroccan Dirham', symbol: '..' },\n  { code: 'TND', name: 'Tunisian Dinar', symbol: '.' },\n  \n  // Europe\n  { code: 'NOK', name: 'Norwegian Krone', symbol: 'kr' },\n  { code: 'SEK', name: 'Swedish Krona', symbol: 'kr' },\n  { code: 'DKK', name: 'Danish Krone', symbol: 'kr' },\n  { code: 'PLN', name: 'Polish Zloty', symbol: 'z' },\n  { code: 'CZK', name: 'Czech Koruna', symbol: 'K' },\n  { code: 'HUF', name: 'Hungarian Forint', symbol: 'Ft' },\n  { code: 'RON', name: 'Romanian Leu', symbol: 'lei' },\n  { code: 'BGN', name: 'Bulgarian Lev', symbol: '' },\n  { code: 'HRK', name: 'Croatian Kuna', symbol: 'kn' },\n  { code: 'RSD', name: 'Serbian Dinar', symbol: '.' },\n  { code: 'RUB', name: 'Russian Ruble', symbol: '' },\n  { code: 'UAH', name: 'Ukrainian Hryvnia', symbol: '' },\n  { code: 'ISK', name: 'Icelandic Krona', symbol: 'kr' },\n  \n  // South America\n  { code: 'BRL', name: 'Brazilian Real', symbol: 'R$' },\n  { code: 'ARS', name: 'Argentine Peso', symbol: '$' },\n  { code: 'CLP', name: 'Chilean Peso', symbol: '$' },\n  { code: 'COP', name: 'Colombian Peso', symbol: '$' },\n  { code: 'PEN', name: 'Peruvian Sol', symbol: 'S/' },\n  { code: 'UYU', name: 'Uruguayan Peso', symbol: '$U' },\n  { code: 'BOB', name: 'Bolivian Boliviano', symbol: 'Bs.' },\n  { code: 'PYG', name: 'Paraguayan Guarani', symbol: '' },\n  \n  // Other Important Currencies\n  { code: 'PKR', name: 'Pakistani Rupee', symbol: '' },\n  { code: 'BDT', name: 'Bangladeshi Taka', symbol: '' },\n  { code: 'LKR', name: 'Sri Lankan Rupee', symbol: '' },\n  { code: 'NPR', name: 'Nepalese Rupee', symbol: '' },\n  { code: 'AFN', name: 'Afghan Afghani', symbol: '' },\n  { code: 'MMK', name: 'Myanmar Kyat', symbol: 'K' },\n  { code: 'LAK', name: 'Lao Kip', symbol: '' },\n  { code: 'KHR', name: 'Cambodian Riel', symbol: '' },\n  { code: 'BND', name: 'Brunei Dollar', symbol: 'B$' },\n  { code: 'MOP', name: 'Macanese Pataca', symbol: 'P' },\n  { code: 'FJD', name: 'Fijian Dollar', symbol: 'FJ$' },\n  { code: 'TOP', name: 'Tongan Paanga', symbol: 'T$' },\n  { code: 'WST', name: 'Samoan Tala', symbol: 'WS$' },\n  { code: 'VUV', name: 'Vanuatu Vatu', symbol: 'VT' },\n  { code: 'PGK', name: 'Papua New Guinea Kina', symbol: 'K' },\n  { code: 'SBD', name: 'Solomon Islands Dollar', symbol: 'SI$' },\n  { code: 'NCF', name: 'CFP Franc', symbol: '' },\n];\n\nexport const initialCountries: Country[] = [\n  {\n    id: '1',\n    name: 'United States',\n    code: 'US',\n    region: 'North America',\n    continent: 'North America',\n    currency: 'USD',\n    currency_symbol: '$',\n    status: 'active',\n    flag_url: '/flags/us.svg',\n    is_popular: true,\n    visa_required: false,\n    languages: ['English'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '2',\n    name: 'Canada',\n    code: 'CA',\n    region: 'North America',\n    continent: 'North America',\n    currency: 'CAD',\n    currency_symbol: 'C$',\n    status: 'active',\n    flag_url: '/flags/ca.svg',\n    is_popular: true,\n    visa_required: false,\n    languages: ['English', 'French'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '3',\n    name: 'United Kingdom',\n    code: 'GB',\n    region: 'Western Europe',\n    continent: 'Europe',\n    currency: 'GBP',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/gb.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['English'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '4',\n    name: 'Australia',\n    code: 'AU',\n    region: 'Oceania',\n    continent: 'Australia',\n    currency: 'AUD',\n    currency_symbol: 'A$',\n    status: 'active',\n    flag_url: '/flags/au.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['English'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '5',\n    name: 'Germany',\n    code: 'DE',\n    region: 'Western Europe',\n    continent: 'Europe',\n    currency: 'EUR',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/de.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['German'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '6',\n    name: 'France',\n    code: 'FR',\n    region: 'Western Europe',\n    continent: 'Europe',\n    currency: 'EUR',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/fr.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['French'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '7',\n    name: 'Japan',\n    code: 'JP',\n    region: 'East Asia',\n    continent: 'Asia',\n    currency: 'JPY',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/jp.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['Japanese'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '8',\n    name: 'India',\n    code: 'IN',\n    region: 'South Asia',\n    continent: 'Asia',\n    currency: 'INR',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/in.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['Hindi', 'English'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '9',\n    name: 'United Arab Emirates',\n    code: 'AE',\n    region: 'Middle East',\n    continent: 'Asia',\n    currency: 'AED',\n    currency_symbol: '.',\n    status: 'active',\n    flag_url: '/flags/ae.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['Arabic', 'English'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '10',\n    name: 'Singapore',\n    code: 'SG',\n    region: 'Southeast Asia',\n    continent: 'Asia',\n    currency: 'SGD',\n    currency_symbol: 'S$',\n    status: 'active',\n    flag_url: '/flags/sg.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['English', 'Mandarin', 'Malay', 'Tamil'],\n    pricing_currency_override: false,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '11',\n    name: 'Thailand',\n    code: 'TH',\n    region: 'Southeast Asia',\n    continent: 'Asia',\n    currency: 'THB',\n    currency_symbol: '',\n    status: 'active',\n    flag_url: '/flags/th.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['Thai', 'English'],\n    pricing_currency_override: true,\n    pricing_currency: 'USD',\n    pricing_currency_symbol: '$',\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  },\n  {\n    id: '12',\n    name: 'Brazil',\n    code: 'BR',\n    region: 'South America',\n    continent: 'South America',\n    currency: 'BRL',\n    currency_symbol: 'R$',\n    status: 'active',\n    flag_url: '/flags/br.svg',\n    is_popular: true,\n    visa_required: true,\n    languages: ['Portuguese'],\n    pricing_currency_override: true,\n    pricing_currency: 'EUR',\n    pricing_currency_symbol: '',\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  }\n];\n","\nimport { Sightseeing } from '@/types/sightseeing';\n\n// Additional data exports that are used by form components\nexport const sightseeingCategories = [\n  'Landmarks',\n  'Architecture', \n  'City Views',\n  'Temples',\n  'Culture',\n  'History',\n  'Parks',\n  'Nature',\n  'Walking Tours',\n  'Tours',\n  'Free Activities',\n  'Adventure',\n  'Entertainment',\n  'Food & Dining',\n  'Shopping',\n  'Religious Sites'\n];\n\nexport const difficultyLevels = ['Easy', 'Moderate', 'Difficult'];\n\nexport const seasons = ['Spring', 'Summer', 'Autumn', 'Winter', 'All Year'];\n\nexport const daysOfWeek = [\n  { value: 'monday', label: 'Mon' },\n  { value: 'tuesday', label: 'Tue' },\n  { value: 'wednesday', label: 'Wed' },\n  { value: 'thursday', label: 'Thu' },\n  { value: 'friday', label: 'Fri' },\n  { value: 'saturday', label: 'Sat' },\n  { value: 'sunday', label: 'Sun' }\n];\n\nexport const packageTypes = [\n  'Ticket Only',\n  'Entry Fee', \n  'SIC',\n  'Private Tour',\n  'Group Tour',\n  'Half Day',\n  'Full Day'\n];\n\nexport const sampleSightseeingData: Sightseeing[] = [\n  // Dubai Attractions\n  {\n    id: 1,\n    name: \"Burj Khalifa Observation Deck\",\n    description: \"Experience breathtaking views from the world's tallest building. The Burj Khalifa offers unparalleled 360-degree views of Dubai from its observation decks on levels 124, 125, and 148.\",\n    country: \"United Arab Emirates\",\n    city: \"Dubai\",\n    category: \"Landmarks, Architecture, City Views\",\n    status: \"active\",\n    duration: \"1.5 hours\",\n    timing: \"8:30 AM - 11:00 PM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"1 Sheikh Mohammed bin Rashid Boulevard, Dubai\",\n    googleMapLink: \"https://maps.google.com/?q=Burj+Khalifa+Dubai\",\n    price: {\n      adult: 149,\n      child: 105\n    },\n    isFree: false,\n    sicAvailable: true,\n    sicPricing: {\n      adult: 125,\n      child: 90\n    },\n    requiresMandatoryTransfer: true,\n    transferMandatory: true,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 50,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Shared Transfer\",\n        capacity: \"1-8\",\n        price: 25,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Standard Entry\",\n        name: \"Levels 124 & 125\",\n        adultPrice: 149,\n        childPrice: 105,\n        isEnabled: true,\n        description: \"Access to observation decks on levels 124 & 125\"\n      },\n      {\n        id: 2,\n        type: \"National Park Fee\",\n        name: \"Premium Level Access\",\n        adultPrice: 370,\n        childPrice: 290,\n        isEnabled: true,\n        description: \"Access to all observation decks including premium Level 148\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Burj Khalifa + Dubai Mall\",\n        type: \"Combo\",\n        description: \"Visit Burj Khalifa + Dubai Mall shopping voucher\",\n        adultPrice: 199,\n        childPrice: 149,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 1,\n        maxPeople: 4,\n        adultPrice: 149,\n        childPrice: 105\n      },\n      {\n        id: 2,\n        minPeople: 5,\n        maxPeople: 15,\n        adultPrice: 135,\n        childPrice: 95\n      }\n    ],\n    policies: {\n      highlights: [\n        \"World's tallest building observation deck\",\n        \"360-degree panoramic views of Dubai\",\n        \"High-speed elevators\",\n        \"Interactive multimedia presentations\"\n      ],\n      inclusions: [\n        \"Access to observation deck\",\n        \"Multimedia guide\",\n        \"Complimentary refreshments\"\n      ],\n      exclusions: [\n        \"Transportation\",\n        \"Meals\",\n        \"Personal expenses\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours before the activity\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1518005020951-eccb494ad742?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Burj Khalifa exterior view\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T08:00:00.000Z\",\n    createdAt: \"2024-01-15T10:00:00.000Z\"\n  },\n  {\n    id: 2,\n    name: \"Dubai Desert Safari\",\n    description: \"Experience the thrill of the Arabian desert with dune bashing, camel riding, traditional entertainment, and authentic Bedouin-style dinner under the stars.\",\n    country: \"United Arab Emirates\",\n    city: \"Dubai\",\n    category: \"Adventure, Culture, Entertainment\",\n    status: \"active\",\n    duration: \"6 hours\",\n    timing: \"3:00 PM - 9:00 PM\",\n    difficultyLevel: \"Moderate\",\n    allowedAgeGroup: \"5+ years\",\n    address: \"Lehbab Desert, Dubai\",\n    googleMapLink: \"https://maps.google.com/?q=Lehbab+Desert+Dubai\",\n    price: {\n      adult: 65,\n      child: 45\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"4WD Vehicle\",\n        capacity: \"1-6\",\n        price: 0,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Standard Safari\",\n        name: \"Evening Desert Safari\",\n        adultPrice: 65,\n        childPrice: 45,\n        isEnabled: true,\n        description: \"Dune bashing, camel ride, BBQ dinner, entertainment\"\n      },\n      {\n        id: 2,\n        type: \"Premium Safari\",\n        name: \"VIP Desert Experience\",\n        adultPrice: 120,\n        childPrice: 85,\n        isEnabled: true,\n        description: \"Private table, premium menu, falcon show, quad biking\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Desert Safari + Dubai City Tour\",\n        type: \"Full Day\",\n        description: \"Morning city tour + evening desert safari\",\n        adultPrice: 145,\n        childPrice: 105,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 2,\n        maxPeople: 6,\n        adultPrice: 65,\n        childPrice: 45\n      },\n      {\n        id: 2,\n        minPeople: 7,\n        maxPeople: 20,\n        adultPrice: 58,\n        childPrice: 40\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Thrilling dune bashing adventure\",\n        \"Traditional camel riding\",\n        \"Authentic Bedouin camp experience\",\n        \"Live entertainment and BBQ dinner\"\n      ],\n      inclusions: [\n        \"Hotel pickup and drop-off\",\n        \"Dune bashing in 4WD vehicle\",\n        \"Camel riding\",\n        \"BBQ dinner buffet\",\n        \"Traditional entertainment\",\n        \"Soft drinks and water\"\n      ],\n      exclusions: [\n        \"Alcoholic beverages\",\n        \"Quad biking (optional extra)\",\n        \"Personal expenses\",\n        \"Tips\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours before the tour\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1469041797191-50ace28483c3?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Camels in desert landscape\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T09:30:00.000Z\",\n    createdAt: \"2024-02-01T10:00:00.000Z\"\n  },\n  {\n    id: 3,\n    name: \"Dubai Marina Dhow Cruise\",\n    description: \"Sail along Dubai Marina aboard a traditional wooden dhow while enjoying a sumptuous buffet dinner and spectacular views of the illuminated skyline.\",\n    country: \"United Arab Emirates\",\n    city: \"Dubai\",\n    category: \"Entertainment, Culture, City Views\",\n    status: \"active\",\n    duration: \"2 hours\",\n    timing: \"8:00 PM - 10:00 PM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Dubai Marina, Dubai\",\n    googleMapLink: \"https://maps.google.com/?q=Dubai+Marina\",\n    price: {\n      adult: 55,\n      child: 35\n    },\n    isFree: false,\n    sicAvailable: true,\n    sicPricing: {\n      adult: 45,\n      child: 30\n    },\n    requiresMandatoryTransfer: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 30,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Shared Transfer\",\n        capacity: \"1-8\",\n        price: 15,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Standard Cruise\",\n        name: \"Marina Dhow Dinner\",\n        adultPrice: 55,\n        childPrice: 35,\n        isEnabled: true,\n        description: \"2-hour cruise with buffet dinner\"\n      },\n      {\n        id: 2,\n        type: \"VIP Cruise\",\n        name: \"Premium Marina Experience\",\n        adultPrice: 95,\n        childPrice: 65,\n        isEnabled: true,\n        description: \"VIP seating, premium menu, live entertainment\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Dhow Cruise + Burj Al Arab Photo Stop\",\n        type: \"Combo\",\n        description: \"Marina cruise + Burj Al Arab visit\",\n        adultPrice: 85,\n        childPrice: 55,\n        isEnabled: true\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Traditional wooden dhow cruise\",\n        \"Spectacular Marina skyline views\",\n        \"International buffet dinner\",\n        \"Live entertainment onboard\"\n      ],\n      inclusions: [\n        \"2-hour dhow cruise\",\n        \"Welcome drinks\",\n        \"International buffet dinner\",\n        \"Live entertainment\",\n        \"Tea, coffee, soft drinks\"\n      ],\n      exclusions: [\n        \"Hotel transfers\",\n        \"Alcoholic beverages\",\n        \"Personal expenses\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 48 hours before cruise\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1518005020951-eccb494ad742?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Dubai Marina at night\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T11:00:00.000Z\",\n    createdAt: \"2024-03-01T09:00:00.000Z\"\n  },\n  {\n    id: 4,\n    name: \"Dubai Aquarium & Underwater Zoo\",\n    description: \"Discover the wonders of marine life at one of the world's largest suspended aquariums, featuring over 33,000 aquatic animals and immersive underwater experiences.\",\n    country: \"United Arab Emirates\",\n    city: \"Dubai\",\n    category: \"Entertainment, Nature, Family\",\n    status: \"active\",\n    duration: \"2 hours\",\n    timing: \"10:00 AM - 12:00 AM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Dubai Mall, Downtown Dubai\",\n    googleMapLink: \"https://maps.google.com/?q=Dubai+Aquarium+Dubai+Mall\",\n    price: {\n      adult: 40,\n      child: 30\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Metro + Walking\",\n        capacity: \"1-10\",\n        price: 5,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 25,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Basic Entry\",\n        name: \"Aquarium Tunnel\",\n        adultPrice: 40,\n        childPrice: 30,\n        isEnabled: true,\n        description: \"Access to main aquarium tunnel and underwater zoo\"\n      },\n      {\n        id: 2,\n        type: \"Explorer Package\",\n        name: \"Behind the Scenes\",\n        adultPrice: 70,\n        childPrice: 55,\n        isEnabled: true,\n        description: \"Includes glass boat ride and behind-the-scenes tour\"\n      },\n      {\n        id: 3,\n        type: \"VIP Experience\",\n        name: \"Shark Encounter\",\n        adultPrice: 150,\n        childPrice: 120,\n        isEnabled: true,\n        description: \"Cage snorkeling with sharks (age 12+)\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Aquarium + Dubai Mall Tour\",\n        type: \"Half Day\",\n        description: \"Aquarium visit + guided mall tour\",\n        adultPrice: 65,\n        childPrice: 50,\n        isEnabled: true\n      }\n    ],\n    policies: {\n      highlights: [\n        \"World's largest suspended aquarium\",\n        \"Over 33,000 marine animals\",\n        \"Walk-through tunnel experience\",\n        \"Interactive underwater zoo\"\n      ],\n      inclusions: [\n        \"Aquarium tunnel access\",\n        \"Underwater zoo entry\",\n        \"Interactive exhibits\",\n        \"Educational presentations\"\n      ],\n      exclusions: [\n        \"Transportation\",\n        \"Food and beverages\",\n        \"Optional activities\",\n        \"Dubai Mall shopping\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours in advance\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1472396961693-142e6e269027?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Underwater aquarium tunnel view\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T12:30:00.000Z\",\n    createdAt: \"2024-04-01T14:00:00.000Z\"\n  },\n\n  // Thailand Attractions\n  {\n    id: 5,\n    name: \"Grand Palace & Emerald Buddha\",\n    description: \"Discover Thailand's most sacred temple and the former royal residence. The Grand Palace complex houses the revered Emerald Buddha and showcases magnificent Thai architecture and artistry.\",\n    country: \"Thailand\",\n    city: \"Bangkok\",\n    category: \"Temples, Culture, History\",\n    status: \"active\",\n    duration: \"2-3 hours\",\n    timing: \"8:30 AM - 3:30 PM\",\n    difficultyLevel: \"Moderate\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Na Phra Lan Road, Phra Nakhon, Bangkok\",\n    googleMapLink: \"https://maps.google.com/?q=Grand+Palace+Bangkok\",\n    price: {\n      adult: 500,\n      child: 0\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Tuk Tuk\",\n        capacity: \"1-3\",\n        price: 200,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 800,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      },\n      {\n        id: 3,\n        vehicleType: \"Shared Minivan\",\n        capacity: \"1-8\",\n        price: 150,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Entry Fee\",\n        name: \"Grand Palace Entry\",\n        adultPrice: 500,\n        childPrice: 0,\n        isEnabled: true,\n        description: \"Temple admission with audio guide\"\n      },\n      {\n        id: 2,\n        type: \"Guided Tour\",\n        name: \"Private Guide Service\",\n        adultPrice: 1200,\n        childPrice: 600,\n        isEnabled: true,\n        description: \"Entry + 2-hour private English guide\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Grand Palace + Wat Pho Temple\",\n        type: \"Half Day\",\n        description: \"Visit both temples with guide\",\n        adultPrice: 1500,\n        childPrice: 750,\n        isEnabled: true\n      },\n      {\n        id: 2,\n        name: \"Bangkok Temples & River Cruise\",\n        type: \"Full Day\",\n        description: \"Temples tour + Chao Phraya boat ride\",\n        adultPrice: 2200,\n        childPrice: 1100,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 1,\n        maxPeople: 5,\n        adultPrice: 500,\n        childPrice: 0\n      },\n      {\n        id: 2,\n        minPeople: 6,\n        maxPeople: 15,\n        adultPrice: 450,\n        childPrice: 0\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Thailand's most sacred Buddhist temple\",\n        \"Stunning Thai architecture and art\",\n        \"Former royal residence\",\n        \"Home to the Emerald Buddha\"\n      ],\n      inclusions: [\n        \"Temple admission\",\n        \"Audio guide available\",\n        \"Dress code guidance\"\n      ],\n      exclusions: [\n        \"Transportation\",\n        \"Food and beverages\",\n        \"Private guide\",\n        \"Photography fees\"\n      ],\n      cancellationPolicy: \"No refund for no-shows. Free cancellation 48 hours in advance\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1496307653780-42ee777d4833?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Grand Palace Bangkok golden architecture\"\n      }\n    ],\n    lastUpdated: \"2024-12-09T14:30:00.000Z\",\n    createdAt: \"2024-02-01T09:00:00.000Z\"\n  },\n  {\n    id: 6,\n    name: \"Floating Market & Longtail Boat Tour\",\n    description: \"Experience authentic Thai culture at the famous Damnoen Saduak Floating Market. Navigate traditional canals by longtail boat and discover local vendors selling fresh fruits, food, and crafts.\",\n    country: \"Thailand\",\n    city: \"Bangkok\",\n    category: \"Culture, Food & Dining, Adventure\",\n    status: \"active\",\n    duration: \"5 hours\",\n    timing: \"7:00 AM - 12:00 PM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Damnoen Saduak, Ratchaburi Province\",\n    googleMapLink: \"https://maps.google.com/?q=Damnoen+Saduak+Floating+Market\",\n    price: {\n      adult: 1200,\n      child: 800\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Air-conditioned Van\",\n        capacity: \"1-8\",\n        price: 0,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 1500,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Group Tour\",\n        name: \"Shared Boat Experience\",\n        adultPrice: 1200,\n        childPrice: 800,\n        isEnabled: true,\n        description: \"Shared longtail boat + market visit\"\n      },\n      {\n        id: 2,\n        type: \"Private Tour\",\n        name: \"Private Boat & Guide\",\n        adultPrice: 2000,\n        childPrice: 1400,\n        isEnabled: true,\n        description: \"Private boat + English speaking guide\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Floating Market + Coconut Farm\",\n        type: \"Full Day\",\n        description: \"Market visit + coconut sugar farm tour\",\n        adultPrice: 1800,\n        childPrice: 1200,\n        isEnabled: true\n      },\n      {\n        id: 2,\n        name: \"Market + Railway Market\",\n        type: \"Full Day\",\n        description: \"Both famous markets in one day\",\n        adultPrice: 1600,\n        childPrice: 1000,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 2,\n        maxPeople: 8,\n        adultPrice: 1200,\n        childPrice: 800\n      },\n      {\n        id: 2,\n        minPeople: 9,\n        maxPeople: 20,\n        adultPrice: 1000,\n        childPrice: 700\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Authentic floating market experience\",\n        \"Traditional longtail boat ride\",\n        \"Local fruit and food tastings\",\n        \"Cultural immersion with vendors\"\n      ],\n      inclusions: [\n        \"Hotel pickup and drop-off\",\n        \"Longtail boat ride\",\n        \"English speaking guide\",\n        \"Market entrance\",\n        \"Fresh fruit samples\"\n      ],\n      exclusions: [\n        \"Lunch\",\n        \"Personal shopping\",\n        \"Tips for boat driver\",\n        \"Optional activities\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours before tour\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1433086966358-54859d0ed716?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Traditional floating market boats\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T10:15:00.000Z\",\n    createdAt: \"2024-03-15T11:00:00.000Z\"\n  },\n  {\n    id: 7,\n    name: \"Elephant Sanctuary Ethical Tour\",\n    description: \"Visit an ethical elephant sanctuary where rescued elephants roam freely. Learn about elephant conservation, feed them, and observe their natural behaviors in a responsible tourism environment.\",\n    country: \"Thailand\",\n    city: \"Chiang Mai\",\n    category: \"Nature, Adventure, Conservation\",\n    status: \"active\",\n    duration: \"6 hours\",\n    timing: \"8:00 AM - 2:00 PM\",\n    difficultyLevel: \"Moderate\",\n    allowedAgeGroup: \"5+ years\",\n    address: \"Mae Taeng District, Chiang Mai\",\n    googleMapLink: \"https://maps.google.com/?q=Elephant+Sanctuary+Chiang+Mai\",\n    price: {\n      adult: 2500,\n      child: 1800\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Shared Songthaew\",\n        capacity: \"1-10\",\n        price: 0,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 1200,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Half Day\",\n        name: \"Elephant Encounter\",\n        adultPrice: 2500,\n        childPrice: 1800,\n        isEnabled: true,\n        description: \"Feeding, bathing, and observation experience\"\n      },\n      {\n        id: 2,\n        type: \"Full Day\",\n        name: \"Mahout Experience\",\n        adultPrice: 3500,\n        childPrice: 2500,\n        isEnabled: true,\n        description: \"Full day with elephant care training\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Elephant Sanctuary + Sticky Waterfall\",\n        type: \"Full Day\",\n        description: \"Elephant visit + unique limestone waterfall\",\n        adultPrice: 3200,\n        childPrice: 2300,\n        isEnabled: true\n      },\n      {\n        id: 2,\n        name: \"Elephant & Hill Tribe Village\",\n        type: \"Full Day\",\n        description: \"Sanctuary visit + local village tour\",\n        adultPrice: 3800,\n        childPrice: 2700,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 2,\n        maxPeople: 6,\n        adultPrice: 2500,\n        childPrice: 1800\n      },\n      {\n        id: 2,\n        minPeople: 7,\n        maxPeople: 15,\n        adultPrice: 2200,\n        childPrice: 1600\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Ethical elephant sanctuary visit\",\n        \"No riding - observation only\",\n        \"Elephant feeding and bathing\",\n        \"Conservation education program\"\n      ],\n      inclusions: [\n        \"Hotel pickup and drop-off\",\n        \"English speaking guide\",\n        \"Elephant feeding experience\",\n        \"Traditional Thai lunch\",\n        \"Bottled water\",\n        \"Insurance\"\n      ],\n      exclusions: [\n        \"Personal expenses\",\n        \"Tips for guides\",\n        \"Optional activities\",\n        \"Cameras (rental available)\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 48 hours before tour\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1472396961693-142e6e269027?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Elephants in natural sanctuary setting\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T13:45:00.000Z\",\n    createdAt: \"2024-05-01T10:30:00.000Z\"\n  },\n  {\n    id: 8,\n    name: \"Doi Suthep Temple & City View\",\n    description: \"Visit Chiang Mai's most famous temple perched on a mountain top. Climb the 309 steps of the Naga staircase to reach the golden chedi and enjoy panoramic views of the city below.\",\n    country: \"Thailand\",\n    city: \"Chiang Mai\",\n    category: \"Temples, Culture, City Views\",\n    status: \"active\",\n    duration: \"3 hours\",\n    timing: \"8:00 AM - 6:00 PM\",\n    difficultyLevel: \"Moderate\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Doi Suthep-Pui National Park, Chiang Mai\",\n    googleMapLink: \"https://maps.google.com/?q=Doi+Suthep+Temple+Chiang+Mai\",\n    price: {\n      adult: 30,\n      child: 0\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Red Songthaew\",\n        capacity: \"1-10\",\n        price: 200,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 800,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      },\n      {\n        id: 3,\n        vehicleType: \"Motorbike\",\n        capacity: \"1-2\",\n        price: 300,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Temple Entry\",\n        name: \"Basic Admission\",\n        adultPrice: 30,\n        childPrice: 0,\n        isEnabled: true,\n        description: \"Temple entrance fee only\"\n      },\n      {\n        id: 2,\n        type: \"Guided Tour\",\n        name: \"Temple + Guide\",\n        adultPrice: 400,\n        childPrice: 200,\n        isEnabled: true,\n        description: \"Entry + English speaking guide\"\n      },\n      {\n        id: 3,\n        type: \"Sunset Tour\",\n        name: \"Evening Temple Visit\",\n        adultPrice: 600,\n        childPrice: 300,\n        isEnabled: true,\n        description: \"Late afternoon visit for sunset views\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Doi Suthep + Hmong Village\",\n        type: \"Half Day\",\n        description: \"Temple visit + hill tribe village\",\n        adultPrice: 800,\n        childPrice: 400,\n        isEnabled: true\n      },\n      {\n        id: 2,\n        name: \"Temple Hopping Tour\",\n        type: \"Full Day\",\n        description: \"Doi Suthep + 3 other temples\",\n        adultPrice: 1200,\n        childPrice: 600,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 1,\n        maxPeople: 4,\n        adultPrice: 30,\n        childPrice: 0\n      },\n      {\n        id: 2,\n        minPeople: 5,\n        maxPeople: 15,\n        adultPrice: 25,\n        childPrice: 0\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Chiang Mai's most sacred temple\",\n        \"Panoramic city and mountain views\",\n        \"Golden chedi and Buddhist artifacts\",\n        \"Traditional Lanna architecture\"\n      ],\n      inclusions: [\n        \"Temple entrance fee\",\n        \"Parking fees\",\n        \"Basic information guide\"\n      ],\n      exclusions: [\n        \"Transportation\",\n        \"Food and drinks\",\n        \"Professional guide\",\n        \"Cable car (if available)\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours in advance\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1466442929976-97f336a657be?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Golden temple with mountain views\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T15:00:00.000Z\",\n    createdAt: \"2024-06-01T12:00:00.000Z\"\n  },\n  {\n    id: 9,\n    name: \"Phi Phi Islands Day Trip\",\n    description: \"Explore the stunning Phi Phi Islands made famous by the movie 'The Beach'. Enjoy crystal-clear waters, pristine beaches, snorkeling, and breathtaking limestone cliffs.\",\n    country: \"Thailand\",\n    city: \"Phuket\",\n    category: \"Nature, Adventure, Island Hopping\",\n    status: \"active\",\n    duration: \"8 hours\",\n    timing: \"7:00 AM - 3:00 PM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"All Ages\",\n    address: \"Phi Phi Islands, Krabi Province\",\n    googleMapLink: \"https://maps.google.com/?q=Phi+Phi+Islands+Thailand\",\n    price: {\n      adult: 1800,\n      child: 1200\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Hotel Transfer + Speedboat\",\n        capacity: \"1-30\",\n        price: 0,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Speedboat\",\n        capacity: \"1-12\",\n        price: 15000,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Group Tour\",\n        name: \"Shared Speedboat\",\n        adultPrice: 1800,\n        childPrice: 1200,\n        isEnabled: true,\n        description: \"Shared boat tour with lunch included\"\n      },\n      {\n        id: 2,\n        type: \"Premium Tour\",\n        name: \"Small Group (Max 15)\",\n        adultPrice: 2400,\n        childPrice: 1800,\n        isEnabled: true,\n        description: \"Smaller group, better service, premium lunch\"\n      },\n      {\n        id: 3,\n        type: \"Private Charter\",\n        name: \"Exclusive Boat\",\n        adultPrice: 4500,\n        childPrice: 3500,\n        isEnabled: true,\n        description: \"Private boat for your group only\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Phi Phi + James Bond Island\",\n        type: \"Full Day\",\n        description: \"Visit both famous island destinations\",\n        adultPrice: 2800,\n        childPrice: 2100,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 2,\n        maxPeople: 15,\n        adultPrice: 1800,\n        childPrice: 1200\n      },\n      {\n        id: 2,\n        minPeople: 16,\n        maxPeople: 30,\n        adultPrice: 1600,\n        childPrice: 1100\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Visit Maya Bay (The Beach movie location)\",\n        \"Snorkeling in crystal-clear waters\",\n        \"Limestone cliffs and pristine beaches\",\n        \"Monkey Beach wildlife viewing\"\n      ],\n      inclusions: [\n        \"Hotel pickup and drop-off\",\n        \"Speedboat transfers\",\n        \"Professional guide\",\n        \"Buffet lunch\",\n        \"Snorkeling equipment\",\n        \"Life jackets\",\n        \"Fresh fruits and drinks\",\n        \"National park fees\"\n      ],\n      exclusions: [\n        \"Personal expenses\",\n        \"Underwater camera rental\",\n        \"Tips for guide and crew\",\n        \"Alcoholic beverages\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours before departure. Weather-dependent\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1433086966358-54859d0ed716?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Phi Phi Islands limestone cliffs and clear water\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T16:30:00.000Z\",\n    createdAt: \"2024-07-01T09:00:00.000Z\"\n  },\n  {\n    id: 10,\n    name: \"Thai Cooking Class & Market Tour\",\n    description: \"Learn to cook authentic Thai dishes from local chefs. Start with a traditional market visit to select fresh ingredients, then master the art of Thai cuisine in a hands-on cooking class.\",\n    country: \"Thailand\",\n    city: \"Phuket\",\n    category: \"Food & Dining, Culture, Learning\",\n    status: \"active\",\n    duration: \"4 hours\",\n    timing: \"9:00 AM - 1:00 PM / 3:00 PM - 7:00 PM\",\n    difficultyLevel: \"Easy\",\n    allowedAgeGroup: \"10+ years\",\n    address: \"Local Cooking School, Phuket\",\n    googleMapLink: \"https://maps.google.com/?q=Thai+Cooking+Class+Phuket\",\n    price: {\n      adult: 1200,\n      child: 900\n    },\n    isFree: false,\n    transferOptions: [\n      {\n        id: 1,\n        vehicleType: \"Hotel Pickup\",\n        capacity: \"1-8\",\n        price: 0,\n        priceUnit: \"Per Person\",\n        isEnabled: true,\n        type: \"SIC\"\n      },\n      {\n        id: 2,\n        vehicleType: \"Private Car\",\n        capacity: \"1-4\",\n        price: 600,\n        priceUnit: \"Per Vehicle\",\n        isEnabled: true,\n        type: \"Private\"\n      }\n    ],\n    pricingOptions: [\n      {\n        id: 1,\n        type: \"Group Class\",\n        name: \"Standard Cooking Class\",\n        adultPrice: 1200,\n        childPrice: 900,\n        isEnabled: true,\n        description: \"Learn 4-5 dishes in group setting\"\n      },\n      {\n        id: 2,\n        type: \"Private Class\",\n        name: \"Personal Chef Experience\",\n        adultPrice: 2200,\n        childPrice: 1600,\n        isEnabled: true,\n        description: \"Private instruction, customize menu\"\n      },\n      {\n        id: 3,\n        type: \"Premium Class\",\n        name: \"Master Chef Program\",\n        adultPrice: 1800,\n        childPrice: 1300,\n        isEnabled: true,\n        description: \"Advanced techniques, 6-7 dishes, wine pairing\"\n      }\n    ],\n    packageOptions: [\n      {\n        id: 1,\n        name: \"Cooking Class + Farm Visit\",\n        type: \"Full Day\",\n        description: \"Market tour + cooking + organic farm visit\",\n        adultPrice: 1800,\n        childPrice: 1300,\n        isEnabled: true\n      },\n      {\n        id: 2,\n        name: \"Evening Class + Cultural Show\",\n        type: \"Evening\",\n        description: \"Cooking class + traditional Thai performance\",\n        adultPrice: 1600,\n        childPrice: 1200,\n        isEnabled: true\n      }\n    ],\n    groupSizeOptions: [\n      {\n        id: 1,\n        minPeople: 2,\n        maxPeople: 8,\n        adultPrice: 1200,\n        childPrice: 900\n      },\n      {\n        id: 2,\n        minPeople: 9,\n        maxPeople: 16,\n        adultPrice: 1000,\n        childPrice: 800\n      }\n    ],\n    policies: {\n      highlights: [\n        \"Hands-on Thai cooking experience\",\n        \"Traditional market tour\",\n        \"Learn 4-5 authentic dishes\",\n        \"Take home recipe book\"\n      ],\n      inclusions: [\n        \"Market tour with chef\",\n        \"All ingredients and equipment\",\n        \"English-speaking chef instructor\",\n        \"Full meal of cooked dishes\",\n        \"Recipe book to take home\",\n        \"Apron and certificate\",\n        \"Soft drinks and water\"\n      ],\n      exclusions: [\n        \"Hotel transfers (optional)\",\n        \"Alcoholic beverages\",\n        \"Personal expenses\",\n        \"Tips for chef\"\n      ],\n      cancellationPolicy: \"Free cancellation up to 24 hours before class\"\n    },\n    validityPeriod: {\n      startDate: \"2024-01-01\",\n      endDate: \"2024-12-31\"\n    },\n    images: [\n      {\n        id: 1,\n        url: \"https://images.unsplash.com/photo-1466442929976-97f336a657be?q=80&w=2070\",\n        isPrimary: true,\n        altText: \"Thai cooking class with fresh ingredients\"\n      }\n    ],\n    lastUpdated: \"2024-12-10T17:45:00.000Z\",\n    createdAt: \"2024-08-01T11:30:00.000Z\"\n  }\n];\n\n// Export as both named and default exports for compatibility\nexport const sightseeingData = sampleSightseeingData;\nexport default sampleSightseeingData;\n","\nimport { CuisineType } from '../types/restaurantTypes';\n\nexport interface Restaurant {\n  id: string;\n  name: string;\n  location?: string;\n  cuisine?: string;\n  address: string;\n  city: string;\n  country: string;\n  area?: string;\n  priceRange?: string;\n  priceCategory: '$' | '$$' | '$$$' | '$$$$';\n  averagePrice?: number;\n  averageCost: number;\n  rating: number;\n  reviewCount: number;\n  openingHours?: string;\n  openingTime: string;\n  closingTime: string;\n  contact?: string;\n  description: string;\n  images?: string[];\n  imageUrl: string;\n  features: {\n    outdoorSeating: boolean;\n    privateRooms: boolean;\n    wifi: boolean;\n    parking: boolean;\n    liveMusic: boolean;\n    cardAccepted: boolean;\n  };\n  mealTypes: {\n    breakfast: boolean;\n    lunch: boolean;\n    dinner: boolean;\n    snacks: boolean;\n    beverages: boolean;\n  };\n  dietaryOptions: {\n    pureVeg: boolean;\n    veganFriendly: boolean;\n    vegetarian: boolean;\n    seafood: boolean;\n    poultry: boolean;\n    redMeat: boolean;\n    aLaCarte: boolean;\n  };\n  cuisineTypes: CuisineType[];\n  status: 'active' | 'inactive';\n  isPreferred: boolean;\n  currencySymbol: string;\n  currencyCode?: string;\n}\n\n// Export initialRestaurants with typed cuisineTypes\nexport const initialRestaurants: Restaurant[] = [\n  {\n    id: \"rest001\",\n    name: \"Blue Elephant\",\n    location: \"Bangkok\",\n    city: \"Bangkok\",\n    country: \"Thailand\",\n    cuisine: \"Thai\",\n    address: \"233 South Sathorn Road, Yannawa, Sathorn, Bangkok 10120\",\n    priceRange: \"$$$$\",\n    priceCategory: \"$$$$\",\n    averagePrice: 2500,\n    averageCost: 2500,\n    rating: 4.8,\n    reviewCount: 450,\n    openingHours: \"11:30 AM - 10:30 PM\",\n    openingTime: \"11:30 AM\",\n    closingTime: \"10:30 PM\",\n    contact: \"+66 2 673 9353\",\n    description: \"Authentic Thai cuisine in a colonial-style mansion with a cooking school.\",\n    images: [\"https://images.unsplash.com/photo-1552566626-52f8b828add9\"],\n    imageUrl: \"https://images.unsplash.com/photo-1552566626-52f8b828add9\",\n    cuisineTypes: [\"Thai\", \"Fine Dining\", \"Local\"],\n    features: {\n      outdoorSeating: true,\n      privateRooms: true,\n      wifi: true,\n      parking: true,\n      liveMusic: false,\n      cardAccepted: true\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: true,\n      dinner: true,\n      snacks: false,\n      beverages: true\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: true,\n      vegetarian: true,\n      seafood: true,\n      poultry: true,\n      redMeat: true,\n      aLaCarte: true\n    },\n    status: \"active\",\n    isPreferred: true,\n    currencySymbol: \"\",\n    currencyCode: \"THB\"\n  },\n  {\n    id: \"rest002\",\n    name: \"Siam Supper Club\",\n    location: \"Phuket\",\n    city: \"Phuket\",\n    country: \"Thailand\",\n    cuisine: \"Western\",\n    address: \"36-40 Lagoon Road, Cherngtalay, Thalang, Phuket 83110\",\n    priceRange: \"$$$\",\n    priceCategory: \"$$$\",\n    averagePrice: 1800,\n    averageCost: 1800,\n    rating: 4.6,\n    reviewCount: 320,\n    openingHours: \"6:00 PM - 1:00 AM\",\n    openingTime: \"6:00 PM\",\n    closingTime: \"1:00 AM\",\n    contact: \"+66 76 270 936\",\n    description: \"A sophisticated bar and restaurant with live jazz music and international cuisine.\",\n    images: [\"https://images.unsplash.com/photo-1514933651103-005eec06c04b\"],\n    imageUrl: \"https://images.unsplash.com/photo-1514933651103-005eec06c04b\",\n    cuisineTypes: [\"American\", \"Steakhouse\", \"Fine Dining\"],\n    features: {\n      outdoorSeating: false,\n      privateRooms: true,\n      wifi: true,\n      parking: true,\n      liveMusic: true,\n      cardAccepted: true\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: false,\n      dinner: true,\n      snacks: true,\n      beverages: true\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: false,\n      vegetarian: true,\n      seafood: true,\n      poultry: true,\n      redMeat: true,\n      aLaCarte: true\n    },\n    status: \"active\",\n    isPreferred: false,\n    currencySymbol: \"\",\n    currencyCode: \"THB\"\n  },\n  {\n    id: \"rest003\",\n    name: \"Gaggan\",\n    location: \"Bangkok\",\n    city: \"Bangkok\",\n    country: \"Thailand\",\n    cuisine: \"Progressive Indian\",\n    address: \"68/1 Soi Langsuan, Ploenchit Road, Lumpini, Bangkok 10330\",\n    priceRange: \"$$$$$\",\n    priceCategory: \"$$$$\",\n    averagePrice: 4000,\n    averageCost: 4000,\n    rating: 4.9,\n    reviewCount: 620,\n    openingHours: \"6:00 PM - 11:00 PM\",\n    openingTime: \"6:00 PM\",\n    closingTime: \"11:00 PM\",\n    contact: \"+66 2 652 1700\",\n    description: \"Award-winning progressive Indian cuisine with a creative twist.\",\n    images: [\"https://images.unsplash.com/photo-1414235077428-338989a2e8c0\"],\n    imageUrl: \"https://images.unsplash.com/photo-1414235077428-338989a2e8c0\",\n    cuisineTypes: [\"Indian\", \"Fusion\", \"Fine Dining\"],\n    features: {\n      outdoorSeating: false,\n      privateRooms: true,\n      wifi: true,\n      parking: true,\n      liveMusic: false,\n      cardAccepted: true\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: false,\n      dinner: true,\n      snacks: false,\n      beverages: true\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: true,\n      vegetarian: true,\n      seafood: true,\n      poultry: true,\n      redMeat: true,\n      aLaCarte: false\n    },\n    status: \"active\",\n    isPreferred: true,\n    currencySymbol: \"\",\n    currencyCode: \"THB\"\n  },\n  {\n    id: \"rest004\",\n    name: \"Arabian Nights\",\n    location: \"Dubai\",\n    city: \"Dubai\",\n    country: \"UAE\",\n    cuisine: \"Middle Eastern\",\n    address: \"Sheikh Zayed Road, Downtown Dubai, UAE\",\n    priceRange: \"$$$\",\n    priceCategory: \"$$$\",\n    averagePrice: 350,\n    averageCost: 350,\n    rating: 4.7,\n    reviewCount: 480,\n    openingHours: \"5:00 PM - 12:00 AM\",\n    openingTime: \"5:00 PM\",\n    closingTime: \"12:00 AM\",\n    contact: \"+971 4 123 4567\",\n    description: \"Authentic Middle Eastern cuisine with traditional entertainment.\",\n    images: [\"https://images.unsplash.com/photo-1590846406792-0adc7f938f1d\"],\n    imageUrl: \"https://images.unsplash.com/photo-1590846406792-0adc7f938f1d\",\n    cuisineTypes: [\"Middle Eastern\", \"Local\", \"Fine Dining\"],\n    features: {\n      outdoorSeating: true,\n      privateRooms: true,\n      wifi: true,\n      parking: true,\n      liveMusic: true,\n      cardAccepted: true\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: false,\n      dinner: true,\n      snacks: true,\n      beverages: true\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: true,\n      vegetarian: true,\n      seafood: true,\n      poultry: true,\n      redMeat: true,\n      aLaCarte: true\n    },\n    status: \"active\",\n    isPreferred: false,\n    currencySymbol: \".\",\n    currencyCode: \"AED\"\n  },\n  {\n    id: \"rest005\",\n    name: \"Marina View Restaurant\",\n    location: \"Dubai\",\n    city: \"Dubai\",\n    country: \"UAE\",\n    cuisine: \"Seafood\",\n    address: \"Dubai Marina, JBR, Dubai, UAE\",\n    priceRange: \"$$$$\",\n    priceCategory: \"$$$$\",\n    averagePrice: 450,\n    averageCost: 450,\n    rating: 4.5,\n    reviewCount: 365,\n    openingHours: \"12:00 PM - 11:30 PM\",\n    openingTime: \"12:00 PM\",\n    closingTime: \"11:30 PM\",\n    contact: \"+971 4 456 7890\",\n    description: \"Premium seafood restaurant with stunning views of Dubai Marina.\",\n    images: [\"https://images.unsplash.com/photo-1555396273-367ea4eb4db5\"],\n    imageUrl: \"https://images.unsplash.com/photo-1555396273-367ea4eb4db5\",\n    cuisineTypes: [\"Seafood\", \"Mediterranean\", \"Fine Dining\"],\n    features: {\n      outdoorSeating: true,\n      privateRooms: true,\n      wifi: true,\n      parking: true,\n      liveMusic: false,\n      cardAccepted: true\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: true,\n      dinner: true,\n      snacks: false,\n      beverages: true\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: false,\n      vegetarian: true,\n      seafood: true,\n      poultry: true,\n      redMeat: false,\n      aLaCarte: true\n    },\n    status: \"active\",\n    isPreferred: true,\n    currencySymbol: \".\",\n    currencyCode: \"AED\"\n  }\n];\n\n// Export for backward compatibility - required by useInventoryData.ts\nexport const allRestaurants = initialRestaurants;\n","import { TransportRoute } from '../types/transportTypes';\nimport { LocationCode, TransportType } from '../types/transportTypes';\n\nexport const locationCodes = [\n  // Sample location codes data from the table\n  {\n    id: \"101\",\n    code: \"HKT APT\",\n    fullName: \"Phuket International Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Phuket\",\n    status: \"active\" as const,\n    latitude: \"7.8804 N\",\n    longitude: \"98.3069 E\",\n    notes: \"Main gateway to Phuket; located in Thalang district.\",\n    name: \"Phuket International Airport\"\n  },\n  {\n    id: \"102\",\n    code: \"HKT HTL\",\n    fullName: \"Phuket Hotel\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Phuket\",\n    status: \"active\" as const,\n    notes: \"Placeholder for hotel in Phuket.\",\n    name: \"Phuket Hotel\"\n  },\n  {\n    id: \"103\",\n    code: \"KBV APT\",\n    fullName: \"Krabi International Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Krabi\",\n    status: \"active\" as const,\n    latitude: \"8.1100 N\",\n    longitude: \"98.9183 E\",\n    notes: \"Serves Krabi province; located in Nuea Khlong district.\",\n    name: \"Krabi International Airport\"\n  },\n  {\n    id: \"104\",\n    code: \"KBV HTL\",\n    fullName: \"Krabi Hotel\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Krabi\",\n    status: \"active\" as const,\n    notes: \"Placeholder for hotel in Krabi.\",\n    name: \"Krabi Hotel\"\n  },\n  {\n    id: \"105\",\n    code: \"Donsak Pier\",\n    fullName: \"Donsak Pier\",\n    category: \"pier\" as const,\n    country: \"Thailand\",\n    city: \"Surat Thani\",\n    status: \"active\" as const,\n    latitude: \"9.1417 N\",\n    longitude: \"99.3133 E\",\n    notes: \"Primary ferry terminal to Koh Samui; located in Donsak district.\",\n    name: \"Donsak Pier\"\n  },\n  {\n    id: \"106\",\n    code: \"KOH Samui HTL\",\n    fullName: \"Koh Samui Hotel\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Koh Samui\",\n    status: \"active\" as const,\n    notes: \"Placeholder for hotel in Koh Samui.\",\n    name: \"Koh Samui Hotel\"\n  },\n  {\n    id: \"107\",\n    code: \"BKK APT\",\n    fullName: \"Suvarnabhumi Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Bangkok\",\n    status: \"active\" as const,\n    latitude: \"13.6900 N\",\n    longitude: \"100.7500 E\",\n    notes: \"Main international airport in Bangkok; located in Samut Prakan province.\",\n    name: \"Suvarnabhumi Airport\"\n  },\n  {\n    id: \"108\",\n    code: \"BKK HTL\",\n    fullName: \"Bangkok Hotel\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Bangkok\",\n    status: \"active\" as const,\n    notes: \"Placeholder for hotel in Bangkok.\",\n    name: \"Bangkok Hotel\"\n  },\n  {\n    id: \"109\",\n    code: \"PHI PHI\",\n    fullName: \"Phi Phi Islands\",\n    category: \"other\" as const,\n    country: \"Thailand\",\n    city: \"Phi Phi Islands\",\n    status: \"active\" as const,\n    latitude: \"7.7400 N\",\n    longitude: \"98.7700 E\",\n    notes: \"Famous archipelago; includes Ko Phi Phi Don and Ko Phi Phi Le.\",\n    name: \"Phi Phi Islands\"\n  },\n  {\n    id: \"110\",\n    code: \"USM APT\",\n    fullName: \"Samui International Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Koh Samui\",\n    status: \"active\" as const,\n    latitude: \"9.5500 N\",\n    longitude: \"100.0600 E\",\n    notes: \"Main airport on Koh Samui; located in Bo Phut subdistrict.\",\n    name: \"Samui International Airport\"\n  },\n  {\n    id: \"111\",\n    code: \"PTY HTL\",\n    fullName: \"Pattaya Hotel\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Pattaya\",\n    status: \"active\" as const,\n    notes: \"Placeholder for hotel in Pattaya.\",\n    name: \"Pattaya Hotel\"\n  },\n  {\n    id: \"112\",\n    code: \"Ao Po Pier\",\n    fullName: \"Ao Po Grand Marina Pier\",\n    category: \"pier\" as const,\n    country: \"Thailand\",\n    city: \"Phuket\",\n    status: \"active\" as const,\n    notes: \"Main pier for boats to Phang Nga Bay and the east coast islands.\",\n    name: \"Ao Po Grand Marina Pier\"\n  },\n  {\n    id: \"113\",\n    code: \"Santhiya HTL\",\n    fullName: \"Santhiya Resort\",\n    category: \"hotel\" as const,\n    country: \"Thailand\",\n    city: \"Koh Yao Yai\",\n    status: \"active\" as const,\n    notes: \"Luxury resort on Koh Yao Yai island.\",\n    name: \"Santhiya Resort\"\n  },\n  // Keep the original location codes below\n  {\n    id: \"1\",\n    code: \"BKK\",\n    fullName: \"Suvarnabhumi Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Bangkok\",\n    status: \"active\" as const,\n    name: \"Suvarnabhumi Airport\"\n  },\n  {\n    id: \"2\",\n    code: \"CNX\",\n    fullName: \"Chiang Mai International Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Chiang Mai\",\n    status: \"active\" as const,\n    name: \"Chiang Mai International Airport\"\n  },\n  {\n    id: \"3\",\n    code: \"HKT\",\n    fullName: \"Phuket International Airport\",\n    category: \"airport\" as const,\n    country: \"Thailand\",\n    city: \"Phuket\",\n    status: \"active\" as const,\n    name: \"Phuket International Airport\"\n  },\n  {\n    id: \"4\",\n    code: \"DMK\",\n    fullName: \"Don Mueang International Airport\",\n    category: \"airport\" as const, \n    country: \"Thailand\",\n    city: \"Bangkok\",\n    status: \"active\" as const,\n    name: \"Don Mueang International Airport\"\n  },\n  {\n    id: \"5\",\n    code: \"BKKCITY\",\n    fullName: \"Bangkok City Center\",\n    category: \"other\" as const,\n    country: \"Thailand\", \n    city: \"Bangkok\",\n    status: \"active\" as const, \n    name: \"Bangkok City Center\"\n  },\n  {\n    id: \"6\",\n    code: \"PHUKCITY\",\n    fullName: \"Phuket City Center\",\n    category: \"other\" as const,\n    country: \"Thailand\",\n    city: \"Phuket\",\n    status: \"active\" as const,\n    name: \"Phuket City Center\"\n  }\n];\n\nexport const transportTypes: TransportType[] = [\n  { id: \"1\", name: \"Sedan\", category: \"Economy\", seatingCapacity: 3, luggageCapacity: 2, active: true },\n  { id: \"2\", name: \"SUV\", category: \"Standard\", seatingCapacity: 5, luggageCapacity: 3, active: true },\n  { id: \"3\", name: \"Van\", category: \"Premium\", seatingCapacity: 9, luggageCapacity: 5, active: true },\n  { id: \"4\", name: \"Coach\", category: \"Standard\", seatingCapacity: 40, luggageCapacity: 20, active: true },\n  { id: \"5\", name: \"Ferry\", category: \"Economy\", seatingCapacity: 100, luggageCapacity: 50, active: true }\n];\n\nexport const transportCategories = [\n  { id: \"1\", name: \"Economy\" },\n  { id: \"2\", name: \"Standard\" },\n  { id: \"3\", name: \"Premium\" },\n  { id: \"4\", name: \"Luxury\" }\n];\n\nexport const sightseeingLocations = [\n  { id: \"1\", name: \"Grand Palace\", city: \"Bangkok\", country: \"Thailand\" },\n  { id: \"2\", name: \"Wat Arun\", city: \"Bangkok\", country: \"Thailand\" },\n  { id: \"3\", name: \"Phi Phi Islands\", city: \"Phuket\", country: \"Thailand\" },\n  { id: \"4\", name: \"Patong Beach\", city: \"Phuket\", country: \"Thailand\" }\n];\n\nexport const transportRoutes: TransportRoute[] = [\n  // ============ EN ROUTE TRANSFERS ============\n  // Routes with passenger pickup/drop-off along the way\n  {\n    id: \"er-001\",\n    name: \"Bangkok Airport to Pattaya (En Route Pickups)\",\n    code: \"BKK-PTY-ER\",\n    startLocation: \"BKK APT\",\n    startLocationFullName: \"Suvarnabhumi Airport\",\n    endLocation: \"PTY HTL\",\n    endLocationFullName: \"Pattaya Hotel\",\n    country: \"Thailand\",\n    transferType: \"en route\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"3h 30m\",\n        price: 850\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK APT\",\n        toLocation: \"BKK HTL\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"45m\"\n      },\n      {\n        fromLocation: \"BKK HTL\",\n        toLocation: \"PTY HTL\",\n        transferMethod: \"SIC\",\n        distance: \"120 km\",\n        duration: \"2h 45m\"\n      }\n    ],\n    distance: 155,\n    duration: \"3h 30m\",\n    enableSightseeing: false,\n    description: \"Shared transfer with en route hotel pickups\"\n  },\n  {\n    id: \"er-002\",\n    name: \"Phuket Airport to Southern Hotels (En Route)\",\n    code: \"HKT-STH-ER\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"HKT HTL\",\n    endLocationFullName: \"Phuket Southern Hotels\",\n    country: \"Thailand\",\n    transferType: \"en route\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"2h 15m\",\n        price: 650\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"PHUKCITY\",\n        transferMethod: \"SIC\",\n        distance: \"45 km\",\n        duration: \"1h\"\n      },\n      {\n        fromLocation: \"PHUKCITY\",\n        toLocation: \"HKT HTL\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"1h 15m\"\n      }\n    ],\n    distance: 80,\n    duration: \"2h 15m\",\n    enableSightseeing: false,\n    description: \"En route stops at multiple beach hotels\"\n  },\n  {\n    id: \"er-003\",\n    name: \"Chiang Mai Airport to City Hotels (En Route)\",\n    code: \"CNX-CTY-ER\",\n    startLocation: \"CNX\",\n    startLocationFullName: \"Chiang Mai International Airport\",\n    endLocation: \"BKKCITY\",\n    endLocationFullName: \"Chiang Mai City Hotels\",\n    country: \"Thailand\",\n    transferType: \"en route\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h 30m\",\n        price: 450\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"CNX\",\n        toLocation: \"BKKCITY\",\n        transferMethod: \"SIC\",\n        distance: \"25 km\",\n        duration: \"1h 30m\"\n      }\n    ],\n    distance: 25,\n    duration: \"1h 30m\",\n    enableSightseeing: false,\n    description: \"Multiple hotel stops in Chiang Mai city center\"\n  },\n\n  // ============ MULTI-STOP ROUTES ============\n  // Routes with multiple planned destinations\n  {\n    id: \"ms-001\",\n    name: \"Southern Thailand Island Hopping\",\n    code: \"HKT-KBV-KSM-MS\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"USM APT\",\n    endLocationFullName: \"Samui International Airport\",\n    country: \"Thailand\",\n    transferType: \"Multi-Stop\",\n    status: \"active\",\n    intermediateStops: [\n      {\n        id: \"stop-1\",\n        locationCode: \"HKT HTL\",\n        fullName: \"Phuket Hotel\",\n        transferMethod: \"PVT\"\n      },\n      {\n        id: \"stop-2\",\n        locationCode: \"KBV HTL\",\n        fullName: \"Krabi Hotel\",\n        transferMethod: \"PVT\"\n      },\n      {\n        id: \"stop-3\",\n        locationCode: \"Donsak Pier\",\n        fullName: \"Donsak Pier\",\n        transferMethod: \"SIC\"\n      }\n    ],\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"8h\",\n        price: 2800\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"HKT HTL\",\n        transferMethod: \"PVT\",\n        distance: \"50 km\",\n        duration: \"1h\"\n      },\n      {\n        fromLocation: \"HKT HTL\",\n        toLocation: \"KBV HTL\",\n        transferMethod: \"PVT\",\n        distance: \"170 km\",\n        duration: \"3h\"\n      },\n      {\n        fromLocation: \"KBV HTL\",\n        toLocation: \"Donsak Pier\",\n        transferMethod: \"PVT\",\n        distance: \"180 km\",\n        duration: \"3h\"\n      },\n      {\n        fromLocation: \"Donsak Pier\",\n        toLocation: \"USM APT\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"1h\"\n      }\n    ],\n    distance: 435,\n    duration: \"8h\",\n    enableSightseeing: false,\n    description: \"Complete island hopping tour with multiple stops\"\n  },\n  {\n    id: \"ms-002\",\n    name: \"Bangkok to Eastern Beaches Multi-Stop\",\n    code: \"BKK-PTY-KBV-MS\",\n    startLocation: \"BKK APT\",\n    startLocationFullName: \"Suvarnabhumi Airport\",\n    endLocation: \"KBV APT\",\n    endLocationFullName: \"Krabi International Airport\",\n    country: \"Thailand\",\n    transferType: \"Multi-Stop\",\n    status: \"active\",\n    intermediateStops: [\n      {\n        id: \"stop-1\",\n        locationCode: \"BKK HTL\",\n        fullName: \"Bangkok Hotel\",\n        transferMethod: \"PVT\"\n      },\n      {\n        id: \"stop-2\",\n        locationCode: \"PTY HTL\",\n        fullName: \"Pattaya Hotel\",\n        transferMethod: \"PVT\"\n      }\n    ],\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"12h\",\n        price: 3500\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK APT\",\n        toLocation: \"BKK HTL\",\n        transferMethod: \"PVT\",\n        distance: \"35 km\",\n        duration: \"1h\"\n      },\n      {\n        fromLocation: \"BKK HTL\",\n        toLocation: \"PTY HTL\",\n        transferMethod: \"PVT\",\n        distance: \"150 km\",\n        duration: \"3h\"\n      },\n      {\n        fromLocation: \"PTY HTL\",\n        toLocation: \"KBV APT\",\n        transferMethod: \"PVT\",\n        distance: \"650 km\",\n        duration: \"8h\"\n      }\n    ],\n    distance: 835,\n    duration: \"12h\",\n    enableSightseeing: false,\n    description: \"Multi-destination tour from Bangkok to southern Thailand\"\n  },\n  {\n    id: \"ms-003\",\n    name: \"Phuket Phi Phi Krabi Circuit\",\n    code: \"HKT-PHI-KBV-MS\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"KBV APT\",\n    endLocationFullName: \"Krabi International Airport\",\n    country: \"Thailand\",\n    transferType: \"Multi-Stop\",\n    status: \"active\",\n    intermediateStops: [\n      {\n        id: \"stop-1\",\n        locationCode: \"Ao Po Pier\",\n        fullName: \"Ao Po Grand Marina Pier\",\n        transferMethod: \"PVT\"\n      },\n      {\n        id: \"stop-2\",\n        locationCode: \"PHI PHI\",\n        fullName: \"Phi Phi Islands\",\n        transferMethod: \"SIC\"\n      }\n    ],\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Ferry\",\n        seatingCapacity: 100,\n        luggageCapacity: 50,\n        duration: \"6h\",\n        price: 1800\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"Ao Po Pier\",\n        transferMethod: \"PVT\",\n        distance: \"40 km\",\n        duration: \"1h\"\n      },\n      {\n        fromLocation: \"Ao Po Pier\",\n        toLocation: \"PHI PHI\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"2h\"\n      },\n      {\n        fromLocation: \"PHI PHI\",\n        toLocation: \"KBV APT\",\n        transferMethod: \"SIC\",\n        distance: \"45 km\",\n        duration: \"3h\"\n      }\n    ],\n    distance: 120,\n    duration: \"6h\",\n    enableSightseeing: false,\n    description: \"Island hopping circuit with ferry connections\"\n  },\n\n  // ============ PRIVATE TRANSFERS ============\n  // Dedicated private transfer routes\n  {\n    id: \"pvt-001\",\n    name: \"Bangkok Airport Private Transfer\",\n    code: \"BKK-CTY-PVT\",\n    startLocation: \"BKK APT\",\n    startLocationFullName: \"Suvarnabhumi Airport\",\n    endLocation: \"BKK HTL\",\n    endLocationFullName: \"Bangkok City Hotels\",\n    country: \"Thailand\",\n    transferType: \"Private\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"45m\",\n        price: 1200\n      },\n      {\n        id: \"2\",\n        type: \"SUV\",\n        seatingCapacity: 5,\n        luggageCapacity: 3,\n        duration: \"45m\",\n        price: 1600\n      },\n      {\n        id: \"3\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"45m\",\n        price: 2000\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK APT\",\n        toLocation: \"BKK HTL\",\n        transferMethod: \"PVT\",\n        distance: \"35 km\",\n        duration: \"45m\"\n      }\n    ],\n    distance: 35,\n    duration: \"45m\",\n    enableSightseeing: false,\n    description: \"Private direct transfer to city hotels\"\n  },\n  {\n    id: \"pvt-002\",\n    name: \"Phuket Airport Private Transfer\",\n    code: \"HKT-HTL-PVT\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"HKT HTL\",\n    endLocationFullName: \"Phuket Beach Hotels\",\n    country: \"Thailand\",\n    transferType: \"Private\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"1h\",\n        price: 1500\n      },\n      {\n        id: \"2\",\n        type: \"SUV\",\n        seatingCapacity: 5,\n        luggageCapacity: 3,\n        duration: \"1h\",\n        price: 2000\n      },\n      {\n        id: \"3\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h\",\n        price: 2500\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"HKT HTL\",\n        transferMethod: \"PVT\",\n        distance: \"50 km\",\n        duration: \"1h\"\n      }\n    ],\n    distance: 50,\n    duration: \"1h\",\n    enableSightseeing: false,\n    description: \"Private transfer to beach resort hotels\"\n  },\n  {\n    id: \"pvt-003\",\n    name: \"Krabi Airport Private Transfer\",\n    code: \"KBV-HTL-PVT\",\n    startLocation: \"KBV APT\",\n    startLocationFullName: \"Krabi International Airport\",\n    endLocation: \"KBV HTL\",\n    endLocationFullName: \"Krabi Beach Hotels\",\n    country: \"Thailand\",\n    transferType: \"Private\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"30m\",\n        price: 900\n      },\n      {\n        id: \"2\",\n        type: \"SUV\",\n        seatingCapacity: 5,\n        luggageCapacity: 3,\n        duration: \"30m\",\n        price: 1200\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"KBV APT\",\n        toLocation: \"KBV HTL\",\n        transferMethod: \"PVT\",\n        distance: \"15 km\",\n        duration: \"30m\"\n      }\n    ],\n    distance: 15,\n    duration: \"30m\",\n    enableSightseeing: false,\n    description: \"Private airport to hotel transfer\"\n  },\n  {\n    id: \"pvt-004\",\n    name: \"Bangkok to Pattaya Private Transfer\",\n    code: \"BKK-PTY-PVT\",\n    startLocation: \"BKK HTL\",\n    startLocationFullName: \"Bangkok City Hotels\",\n    endLocation: \"PTY HTL\",\n    endLocationFullName: \"Pattaya Beach Hotels\",\n    country: \"Thailand\",\n    transferType: \"Private\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"2h 30m\",\n        price: 2800\n      },\n      {\n        id: \"2\",\n        type: \"SUV\",\n        seatingCapacity: 5,\n        luggageCapacity: 3,\n        duration: \"2h 30m\",\n        price: 3500\n      },\n      {\n        id: \"3\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"2h 30m\",\n        price: 4200\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK HTL\",\n        toLocation: \"PTY HTL\",\n        transferMethod: \"PVT\",\n        distance: \"150 km\",\n        duration: \"2h 30m\"\n      }\n    ],\n    distance: 150,\n    duration: \"2h 30m\",\n    enableSightseeing: false,\n    description: \"Direct private transfer to beach destination\"\n  },\n  {\n    id: \"pvt-005\",\n    name: \"Phuket to Krabi Private Transfer\",\n    code: \"HKT-KBV-PVT\",\n    startLocation: \"HKT HTL\",\n    startLocationFullName: \"Phuket Hotels\",\n    endLocation: \"KBV HTL\",\n    endLocationFullName: \"Krabi Hotels\",\n    country: \"Thailand\",\n    transferType: \"Private\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"SUV\",\n        seatingCapacity: 5,\n        luggageCapacity: 3,\n        duration: \"3h\",\n        price: 4500\n      },\n      {\n        id: \"2\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"3h\",\n        price: 5500\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT HTL\",\n        toLocation: \"KBV HTL\",\n        transferMethod: \"PVT\",\n        distance: \"170 km\",\n        duration: \"3h\"\n      }\n    ],\n    distance: 170,\n    duration: \"3h\",\n    enableSightseeing: false,\n    description: \"Inter-province private transfer\"\n  },\n\n  // ============ SIC (SHARED) TRANSFERS ============\n  // Shared/Seat-in-Coach routes\n  {\n    id: \"sic-001\",\n    name: \"Bangkok Airport Shared Transfer\",\n    code: \"BKK-CTY-SIC\",\n    startLocation: \"BKK APT\",\n    startLocationFullName: \"Suvarnabhumi Airport\",\n    endLocation: \"BKK HTL\",\n    endLocationFullName: \"Bangkok City Hotels\",\n    country: \"Thailand\",\n    transferType: \"SIC\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h 15m\",\n        price: 350\n      },\n      {\n        id: \"2\",\n        type: \"Coach\",\n        seatingCapacity: 40,\n        luggageCapacity: 20,\n        duration: \"1h 30m\",\n        price: 250\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK APT\",\n        toLocation: \"BKK HTL\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"1h 15m\"\n      }\n    ],\n    distance: 35,\n    duration: \"1h 15m\",\n    enableSightseeing: false,\n    description: \"Shared airport transfer with multiple hotel stops\"\n  },\n  {\n    id: \"sic-002\",\n    name: \"Phuket Airport Shared Transfer\",\n    code: \"HKT-HTL-SIC\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"HKT HTL\",\n    endLocationFullName: \"Phuket Beach Hotels\",\n    country: \"Thailand\",\n    transferType: \"SIC\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h 30m\",\n        price: 450\n      },\n      {\n        id: \"2\",\n        type: \"Coach\",\n        seatingCapacity: 40,\n        luggageCapacity: 20,\n        duration: \"1h 45m\",\n        price: 320\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"HKT HTL\",\n        transferMethod: \"SIC\",\n        distance: \"50 km\",\n        duration: \"1h 30m\"\n      }\n    ],\n    distance: 50,\n    duration: \"1h 30m\",\n    enableSightseeing: false,\n    description: \"Budget-friendly shared transfer to beach hotels\"\n  },\n  {\n    id: \"sic-003\",\n    name: \"Bangkok to Pattaya Shared Coach\",\n    code: \"BKK-PTY-SIC\",\n    startLocation: \"BKK HTL\",\n    startLocationFullName: \"Bangkok City Hotels\",\n    endLocation: \"PTY HTL\",\n    endLocationFullName: \"Pattaya Beach Hotels\",\n    country: \"Thailand\",\n    transferType: \"SIC\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Coach\",\n        seatingCapacity: 40,\n        luggageCapacity: 20,\n        duration: \"3h 30m\",\n        price: 650\n      },\n      {\n        id: \"2\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"3h\",\n        price: 850\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK HTL\",\n        toLocation: \"PTY HTL\",\n        transferMethod: \"SIC\",\n        distance: \"150 km\",\n        duration: \"3h 30m\"\n      }\n    ],\n    distance: 150,\n    duration: \"3h 30m\",\n    enableSightseeing: false,\n    description: \"Daily scheduled shared service to Pattaya\"\n  },\n  {\n    id: \"sic-004\",\n    name: \"Krabi to Koh Samui Ferry Connection (SIC)\",\n    code: \"KBV-KSM-SIC\",\n    startLocation: \"KBV HTL\",\n    startLocationFullName: \"Krabi Hotels\",\n    endLocation: \"KOH Samui HTL\",\n    endLocationFullName: \"Koh Samui Hotels\",\n    country: \"Thailand\",\n    transferType: \"SIC\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Ferry\",\n        seatingCapacity: 100,\n        luggageCapacity: 50,\n        duration: \"4h 30m\",\n        price: 950\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"KBV HTL\",\n        toLocation: \"Donsak Pier\",\n        transferMethod: \"SIC\",\n        distance: \"180 km\",\n        duration: \"3h\"\n      },\n      {\n        fromLocation: \"Donsak Pier\",\n        toLocation: \"KOH Samui HTL\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"1h 30m\"\n      }\n    ],\n    distance: 215,\n    duration: \"4h 30m\",\n    enableSightseeing: false,\n    description: \"Combined road and ferry shared transfer\"\n  },\n  {\n    id: \"sic-005\",\n    name: \"Phi Phi Islands Shared Ferry\",\n    code: \"HKT-PHI-SIC\",\n    startLocation: \"HKT HTL\",\n    startLocationFullName: \"Phuket Hotels\",\n    endLocation: \"PHI PHI\",\n    endLocationFullName: \"Phi Phi Islands\",\n    country: \"Thailand\",\n    transferType: \"SIC\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Ferry\",\n        seatingCapacity: 100,\n        luggageCapacity: 50,\n        duration: \"2h 30m\",\n        price: 750\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT HTL\",\n        toLocation: \"Ao Po Pier\",\n        transferMethod: \"SIC\",\n        distance: \"40 km\",\n        duration: \"30m\"\n      },\n      {\n        fromLocation: \"Ao Po Pier\",\n        toLocation: \"PHI PHI\",\n        transferMethod: \"SIC\",\n        distance: \"35 km\",\n        duration: \"2h\"\n      }\n    ],\n    distance: 75,\n    duration: \"2h 30m\",\n    enableSightseeing: false,\n    description: \"Popular island excursion ferry service\"\n  },\n\n  // ============ ONE-WAY ROUTES (Updated) ============\n  {\n    id: \"ow-001\",\n    name: \"Phuket Airport to Hotel\",\n    code: \"HKT-APT-HTL-OW\",\n    startLocation: \"HKT APT\",\n    startLocationFullName: \"Phuket International Airport\",\n    endLocation: \"HKT HTL\",\n    endLocationFullName: \"Phuket Hotel\",\n    country: \"Thailand\",\n    transferType: \"One-Way\",\n    status: \"active\",\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"1h\",\n        price: 800\n      },\n      {\n        id: \"2\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h\",\n        price: 1200\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"HKT APT\",\n        toLocation: \"HKT HTL\",\n        transferMethod: \"PVT\",\n        distance: \"50 km\",\n        duration: \"1h\"\n      }\n    ],\n    distance: 50,\n    duration: \"1h\",\n    enableSightseeing: false\n  },\n\n  // ============ ROUND-TRIP ROUTES (Updated) ============\n  {\n    id: \"rt-001\",\n    name: \"Bangkok Airport Round Trip\",\n    code: \"BKK-APT-RTN\",\n    startLocation: \"BKK APT\",\n    startLocationFullName: \"Suvarnabhumi Airport\",\n    endLocation: \"BKK APT\",\n    endLocationFullName: \"Suvarnabhumi Airport\",\n    country: \"Thailand\",\n    transferType: \"Round-Trip\",\n    status: \"active\",\n    intermediateStops: [\n      {\n        id: \"stop-1\",\n        locationCode: \"BKK HTL\",\n        fullName: \"Bangkok Hotel\",\n        transferMethod: \"PVT\"\n      }\n    ],\n    transportTypes: [\n      {\n        id: \"1\",\n        type: \"Sedan\",\n        seatingCapacity: 3,\n        luggageCapacity: 2,\n        duration: \"1h 30m\",\n        price: 1800\n      },\n      {\n        id: \"2\",\n        type: \"Van\",\n        seatingCapacity: 9,\n        luggageCapacity: 5,\n        duration: \"1h 30m\",\n        price: 2400\n      }\n    ],\n    routeSegments: [\n      {\n        fromLocation: \"BKK APT\",\n        toLocation: \"BKK HTL\",\n        transferMethod: \"PVT\",\n        distance: \"35 km\",\n        duration: \"45m\"\n      },\n      {\n        fromLocation: \"BKK HTL\",\n        toLocation: \"BKK APT\",\n        transferMethod: \"PVT\",\n        distance: \"35 km\",\n        duration: \"45m\"\n      }\n    ],\n    distance: 70,\n    duration: \"1h 30m\",\n    enableSightseeing: false\n  }\n];\n\n// Export aliases for compatibility with different imports\nexport const mockTransportRoutes = transportRoutes;\nexport const initialRoutes = transportRoutes;\n","\nexport interface City {\n  id: number;\n  name: string;\n  country: string;  // This should match the country ID as string\n  region: string;\n  hasAirport: boolean;\n  isPopular: boolean;\n  status: \"active\" | \"disabled\";\n}\n\n// Initial data for cities\nexport const initialCities: City[] = [\n  { id: 1, name: 'Bangkok', country: 'Thailand', region: 'Central', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 2, name: 'Phuket', country: 'Thailand', region: 'South', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 3, name: 'Chiang Mai', country: 'Thailand', region: 'North', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 4, name: 'Pattaya', country: 'Thailand', region: 'East', hasAirport: false, isPopular: true, status: 'active' },\n  { id: 5, name: 'Dubai', country: 'UAE', region: 'Dubai', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 6, name: 'Abu Dhabi', country: 'UAE', region: 'Abu Dhabi', hasAirport: true, isPopular: false, status: 'active' },\n  { id: 7, name: 'Sharjah', country: 'UAE', region: 'Sharjah', hasAirport: true, isPopular: false, status: 'disabled' },\n  { id: 8, name: 'Ajman', country: 'UAE', region: 'Ajman', hasAirport: false, isPopular: false, status: 'disabled' },\n  { id: 9, name: 'Hua Hin', country: 'Thailand', region: 'Central', hasAirport: false, isPopular: false, status: 'active' },\n  { id: 10, name: 'Krabi', country: 'Thailand', region: 'South', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 11, name: 'Koh Samui', country: 'Thailand', region: 'South', hasAirport: true, isPopular: true, status: 'active' },\n  { id: 12, name: 'Koh Phangan', country: 'Thailand', region: 'South', hasAirport: false, isPopular: false, status: 'active' },\n  \n  // Additional cities for better transport route coverage\n  { id: 13, name: 'Phi Phi Islands', country: 'Thailand', region: 'South', hasAirport: false, isPopular: true, status: 'active' },\n  { id: 14, name: 'Koh Yao Yai', country: 'Thailand', region: 'South', hasAirport: false, isPopular: false, status: 'active' },\n  { id: 15, name: 'Rayong', country: 'Thailand', region: 'East', hasAirport: false, isPopular: false, status: 'active' },\n  { id: 16, name: 'Kanchanaburi', country: 'Thailand', region: 'West', hasAirport: false, isPopular: false, status: 'active' },\n  { id: 17, name: 'Ayutthaya', country: 'Thailand', region: 'Central', hasAirport: false, isPopular: false, status: 'active' },\n  \n  // UAE additional cities\n  { id: 18, name: 'Fujairah', country: 'UAE', region: 'Fujairah', hasAirport: true, isPopular: false, status: 'active' },\n  { id: 19, name: 'Ras Al Khaimah', country: 'UAE', region: 'Ras Al Khaimah', hasAirport: true, isPopular: false, status: 'active' },\n  { id: 20, name: 'Umm Al Quwain', country: 'UAE', region: 'Umm Al Quwain', hasAirport: false, isPopular: false, status: 'active' },\n];\n","\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { ArrowLeft, Calendar, MapPin } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { TourPackage } from '@/types/package';\nimport PackageBasicInfo from '@/components/inventory/packages/PackageBasicInfo';\nimport ItineraryBuilder from '@/components/inventory/packages/ItineraryBuilder';\nimport CostPricing from '@/components/inventory/packages/CostPricing';\nimport TermsConditions from '@/components/inventory/packages/TermsConditions';\nimport { tourPackageService } from '@/integrations/supabase/services/tourPackageService';\n\nconst EditPackage: React.FC = () => {\n  const navigate = useNavigate();\n  const { id } = useParams<{ id: string }>();\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState('basic-info');\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const [packageData, setPackageData] = useState<Partial<TourPackage>>({});\n  \n  // Load package data when component mounts\n  useEffect(() => {\n    if (!id) {\n      toast({\n        title: \"Error\",\n        description: \"No package ID provided.\",\n        variant: \"destructive\"\n      });\n      navigate('/inventory/packages');\n      return;\n    }\n    \n    const fetchPkg = async () => {\n      try {\n        const pkg = await tourPackageService.getTourPackageById(id);\n        setPackageData(pkg);\n      } catch (error: any) {\n        console.error('Error loading package:', error);\n        toast({\n          title: 'Error',\n          description: error?.message ?? 'Failed to load package data. Please try again.',\n          variant: 'destructive',\n        });\n        navigate('/inventory/packages');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchPkg();\n  }, [id, navigate, toast]);\n  \n  // Handle form submission\n  const handleSubmit = async (published: boolean = false) => {\n    if (!packageData.name) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please provide a package name.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('basic-info');\n      return;\n    }\n    \n    if (!packageData.destinations || packageData.destinations.length === 0) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please add at least one destination.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('basic-info');\n      return;\n    }\n    \n    if (!packageData.itinerary || packageData.itinerary.length === 0) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please create an itinerary.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('itinerary');\n      return;\n    }\n    \n    try {\n      if (!id) throw new Error('Missing package ID');\n      const updated = await tourPackageService.updateFromUiPackage(id, {\n        ...packageData,\n        status: published ? 'published' : packageData.status ?? 'draft',\n        updatedAt: new Date().toISOString(),\n      });\n      toast({\n        title: published ? 'Package published' : 'Package updated',\n        description: `${updated.name} has been ${published ? 'published' : 'updated'} successfully.`,\n      });\n      navigate('/inventory/packages');\n    } catch (error: any) {\n      toast({\n        title: 'Update failed',\n        description: error?.message ?? 'An error occurred while updating the package.',\n        variant: 'destructive',\n      });\n    }\n  };\n  \n  // Handle form input changes\n  const updatePackageData = (updates: Partial<TourPackage>) => {\n    setPackageData(prev => ({\n      ...prev,\n      ...updates\n    }));\n  };\n  \n  // Handle tab changes\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n  };\n  \n  // Navigation to previous section\n  const goToPrevious = () => {\n    const tabs = ['basic-info', 'itinerary', 'pricing', 'terms'];\n    const currentIndex = tabs.indexOf(activeTab);\n    if (currentIndex > 0) {\n      setActiveTab(tabs[currentIndex - 1]);\n    }\n  };\n  \n  // Navigation to next section\n  const goToNext = () => {\n    const tabs = ['basic-info', 'itinerary', 'pricing', 'terms'];\n    const currentIndex = tabs.indexOf(activeTab);\n    if (currentIndex < tabs.length - 1) {\n      setActiveTab(tabs[currentIndex + 1]);\n    }\n  };\n  \n  if (isLoading) {\n    return (\n      <PageLayout>\n        <div className=\"p-6 flex justify-center items-center h-[80vh]\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  return (\n    <PageLayout>\n      <div className=\"p-6\">\n        <div className=\"flex items-center gap-2 mb-6\">\n          <Button \n            variant=\"ghost\" \n            size=\"icon\"\n            onClick={() => navigate('/inventory/packages')}\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Edit Tour Package</h1>\n        </div>\n        \n        <Tabs value={activeTab} onValueChange={handleTabChange} className=\"space-y-4\">\n          <TabsList className=\"grid grid-cols-4\">\n            <TabsTrigger value=\"basic-info\" className=\"flex gap-2\">\n              <MapPin className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Basic Info</span>\n              <span className=\"inline sm:hidden\">Info</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"itinerary\" className=\"flex gap-2\">\n              <Calendar className=\"h-4 w-4\" />\n              <span>Itinerary</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"pricing\" className=\"flex gap-2\">\n              <Calendar className=\"h-4 w-4\" />\n              <span>Pricing</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"terms\" className=\"flex gap-2\">\n              <Calendar className=\"h-4 w-4\" />\n              <span className=\"hidden sm:inline\">Terms & Conditions</span>\n              <span className=\"inline sm:hidden\">Terms</span>\n            </TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"basic-info\" className=\"space-y-4\">\n            <PackageBasicInfo\n              packageData={packageData}\n              updatePackageData={updatePackageData}\n            />\n            <div className=\"flex justify-end mt-6\">\n              <Button onClick={goToNext}>\n                Continue to Itinerary\n              </Button>\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"itinerary\" className=\"space-y-4\">\n            <ItineraryBuilder\n              packageData={packageData}\n              updatePackageData={updatePackageData}\n            />\n            <div className=\"flex justify-between mt-6\">\n              <Button variant=\"outline\" onClick={goToPrevious}>\n                Back\n              </Button>\n              <Button onClick={goToNext}>\n                Continue to Pricing\n              </Button>\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"pricing\" className=\"space-y-4\">\n            <CostPricing\n              packageData={packageData}\n              updatePackageData={updatePackageData}\n            />\n            <div className=\"flex justify-between mt-6\">\n              <Button variant=\"outline\" onClick={goToPrevious}>\n                Back\n              </Button>\n              <Button onClick={goToNext}>\n                Continue to Terms\n              </Button>\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"terms\" className=\"space-y-4\">\n            <TermsConditions\n              packageData={packageData}\n              updatePackageData={updatePackageData}\n            />\n            <div className=\"flex justify-between mt-6\">\n              <Button variant=\"outline\" onClick={goToPrevious}>\n                Back\n              </Button>\n              <div className=\"space-x-2\">\n                <Button variant=\"outline\" onClick={() => handleSubmit(false)}>\n                  Save as Draft\n                </Button>\n                <Button onClick={() => handleSubmit(true)}>\n                  Publish Package\n                </Button>\n              </div>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default EditPackage;\n","\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { locationCodes, transportTypes, transportRoutes as localTransportRoutes } from '../data/transportData';\nimport { TransportRoute, LocationCode, TransportType } from '../types/transportTypes';\nimport { CitiesService } from '@/services/citiesService';\nimport { CountriesService } from '@/services/countriesService';\nimport { City } from '../types/city';\nimport { listTransportTypes, mapTransportTypeRowToUI } from '@/services/transportTypesService';\nimport { listTransportRoutes } from '@/services/transportRoutesService';\nimport { listLocationCodes } from '@/services/locationCodesService';\nimport { supabase } from '@/lib/supabaseClient';\n\ninterface UseTransportDataProps {\n  itemsPerPage?: number;\n}\n\nexport const useTransportData = ({ itemsPerPage = 10 }: UseTransportDataProps = {}) => {\n  const [routes, setRoutes] = useState<TransportRoute[]>([]);\n  const [locations, setLocations] = useState<LocationCode[]>([]);\n  const [transport, setTransport] = useState<TransportType[]>([]);\n  const [importDrawerOpen, setImportDrawerOpen] = useState(false);\n  \n  // Get active countries and cities from services\n  const [countries, setCountries] = useState<any[]>([]);\n  const [cities, setCities] = useState<City[]>([]);\n  \n  // Initialize data\n  useEffect(() => {\n    const abortController = new AbortController();\n    \n    const loadData = async () => {\n      // Load countries and cities from services\n      try {\n        const countriesResponse = await CitiesService.getActiveCountries();\n        if (countriesResponse.success && countriesResponse.data) {\n          setCountries(countriesResponse.data);\n        }\n        \n        const citiesResponse = await CitiesService.getActiveCities();\n        if (citiesResponse.success && citiesResponse.data) {\n          setCities(citiesResponse.data.map(city => ({\n            id: parseInt(city.id, 10),\n            name: city.name,\n            country: city.country,\n            status: city.status,\n            region: city.region,\n            hasAirport: city.has_airport,\n            isPopular: city.is_popular,\n          })));\n        }\n        // Load transport types from Supabase (admin client)\n        try {\n          if (abortController.signal.aborted) return;\n          const rows = await listTransportTypes();\n          const mapped: TransportType[] = rows.map(r => ({\n            id: r.id,\n            name: r.name,\n            category: r.category,\n            seatingCapacity: r.seating_capacity,\n            luggageCapacity: r.luggage_capacity,\n            active: r.active,\n          }));\n          setTransport(mapped);\n        } catch (err) {\n          if (abortController.signal.aborted) return;\n          console.warn('Failed to load transport types from Supabase, falling back to local data:', err);\n          // Fallback to local transport types\n          setTransport(\n            transportTypes.map(type => ({\n              id: type.id,\n              name: type.name,\n              category: type.category,\n              seatingCapacity: type.seatingCapacity,\n              luggageCapacity: type.luggageCapacity,\n              active: type.active\n            }))\n          );\n        }\n      } catch (error) {\n        console.error('Error loading countries and cities:', error);\n      }\n    };\n\n    const loadLocationCodesFromSupabase = async () => {\n      try {\n        if (abortController.signal.aborted) return;\n        const rows = await listLocationCodes();\n        const mappedLocations: LocationCode[] = rows.map((row: any) => ({\n          id: row.id,\n          code: row.code,\n          fullName: row.full_name,\n          category: row.category,\n          country: row.country,\n          city: row.city,\n          status: row.status,\n          notes: row.notes,\n          latitude: row.latitude ? String(row.latitude) : undefined,\n          longitude: row.longitude ? String(row.longitude) : undefined,\n        }));\n        setLocations(mappedLocations);\n        console.log(`Loaded ${mappedLocations.length} location codes from database`);\n      } catch (err) {\n        if (abortController.signal.aborted) return;\n        console.warn('Failed to load location codes from Supabase, falling back to local data:', err);\n        // Fallback to local location codes\n        setLocations(\n          locationCodes.map(loc => ({\n            id: loc.id,\n            code: loc.code,\n            fullName: loc.fullName,\n            category: loc.category,\n            country: loc.country,\n            city: loc.city,\n            status: loc.status\n          }))\n        );\n      }\n    };\n\n    const loadRoutesFromSupabase = async () => {\n      try {\n        if (abortController.signal.aborted) return;\n        const rows = await listTransportRoutes();\n        const mappedRoutes: TransportRoute[] = rows.map((row: any, idx: number) => {\n          const startCode = row.start_location_code || row.start_location || '';\n          const endCode = row.end_location_code || row.end_location || '';\n          const code = row.route_code || [startCode, endCode].filter(Boolean).join('-');\n          const vehicleTypesRaw = Array.isArray(row.vehicle_types)\n            ? row.vehicle_types\n            : Array.isArray(row.transport_types)\n              ? row.transport_types\n              : Array.isArray(row.transport_entries)\n                ? row.transport_entries\n                : [];\n          const normalizedTypes = vehicleTypesRaw.map((t: any, i: number) => ({\n            id: String(i + 1),\n            type: t.type || t.name || t.vehicle_type || 'Standard',\n            seatingCapacity: t.seatingCapacity ?? t.seating_capacity ?? t.capacity ?? 0,\n            luggageCapacity: t.luggageCapacity ?? t.luggage_capacity ?? 0,\n            duration: t.duration ?? '',\n            price: typeof t.price === 'number' ? t.price : Number(t.price) || 0,\n          }));\n          return {\n            id: row.id,\n            code,\n            name: row.name || row.route_name || '',\n            country: row.country || '',\n            transferType: (row.transfer_type as any) || 'One-Way',\n            startLocation: startCode,\n            startLocationFullName: row.start_location || startCode || '',\n            endLocation: endCode,\n            endLocationFullName: row.end_location || endCode || '',\n            transportTypes: normalizedTypes,\n            enableSightseeing: false,\n            status: row.status || 'active',\n            price: 0,\n            distance: 0,\n            duration: '',\n            intermediateStops: [],\n            description: '',\n            routeSegments: []\n          } as TransportRoute;\n        });\n        setRoutes(mappedRoutes);\n      } catch (err) {\n        if (abortController.signal.aborted) return;\n        console.error('Failed to load transport routes from Supabase:', err);\n        // Fallback to local data to keep the inventory page functional\n        const fallbackRoutes: TransportRoute[] = localTransportRoutes.map(r => ({\n          id: r.id,\n          code: r.code || `${r.startLocation || ''}-${r.endLocation || ''}`,\n          name: r.name || `${r.startLocationFullName || r.startLocation || ''} to ${r.endLocationFullName || r.endLocation || ''}`,\n          country: r.country || '',\n          transferType: r.transferType || 'One-Way',\n          startLocation: r.startLocation || '',\n          startLocationFullName: r.startLocationFullName || r.startLocation || '',\n          endLocation: r.endLocation || '',\n          endLocationFullName: r.endLocationFullName || r.endLocation || '',\n          transportTypes: Array.isArray(r.transportTypes) ? r.transportTypes : [],\n          enableSightseeing: !!r.enableSightseeing,\n          status: r.status || 'active',\n          price: r.price || 0,\n          distance: r.distance || 0,\n          duration: r.duration || '',\n          intermediateStops: r.intermediateStops || [],\n          description: r.description || '',\n          routeSegments: r.routeSegments || []\n        }));\n        setRoutes(fallbackRoutes);\n      }\n    };\n\n    const init = async () => {\n      await loadData();\n      // Load location codes and routes in parallel to reduce initial latency\n      await Promise.all([\n        loadLocationCodesFromSupabase(),\n        loadRoutesFromSupabase()\n      ]);\n    };\n\n    init();\n\n    // Realtime: subscribe to transport_routes changes\n    const routesChannel = supabase\n      .channel('public:transport_routes')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'transport_routes' },\n        () => {\n          // Refresh routes on any change\n          loadRoutesFromSupabase();\n        }\n      )\n      .subscribe();\n\n    // Realtime: subscribe to location_codes changes\n    const locationCodesChannel = supabase\n      .channel('public:location_codes')\n      .on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table: 'location_codes' },\n        () => {\n          // Refresh location codes on any change\n          loadLocationCodesFromSupabase();\n        }\n      )\n      .subscribe();\n\n    return () => {\n      // Abort any pending requests\n      abortController.abort();\n      \n      // Remove realtime channels\n      try {\n        supabase.removeChannel(routesChannel);\n        supabase.removeChannel(locationCodesChannel);\n      } catch (e) {\n        console.error('Error removing channels:', e);\n      }\n    };\n  }, []);\n  \n  // Removed: initial dummy routes setup. Routes now load from Supabase.\n  \n  // Filters\n  const [searchQuery, setSearchQuery] = useState('');\n  const [countryFilter, setCountryFilter] = useState('All Countries');\n  const [cityFilter, setCityFilter] = useState('All Cities');\n  const [typeFilter, setTypeFilter] = useState('All Types');\n  \n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  \n  // Drawers and modals\n  const [viewRouteDrawerOpen, setViewRouteDrawerOpen] = useState(false);\n  const [editRouteDrawerOpen, setEditRouteDrawerOpen] = useState(false);\n  const [deleteRouteDialogOpen, setDeleteRouteDialogOpen] = useState(false);\n  const [addRouteDrawerOpen, setAddRouteDrawerOpen] = useState(false);\n  const [transportTypesDrawerOpen, setTransportTypesDrawerOpen] = useState(false);\n  const [locationCodesDrawerOpen, setLocationCodesDrawerOpen] = useState(false);\n  \n  // Selected item for view/edit/delete\n  const [selectedRoute, setSelectedRoute] = useState<TransportRoute | null>(null);\n  \n  // Import/Export\n  const importFileRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  \n  // Helper function to get cities for selected country\n  const getCitiesForSelectedCountry = (): string[] => {\n    if (countryFilter === 'All Countries') {\n      return ['All Cities'];\n    }\n    \n    const countryCities = cities\n      .filter(city => city.country === countryFilter && city.status === 'active')\n      .map(city => city.name);\n    \n    return ['All Cities', ...countryCities];\n  };\n  \n  // Helper function to check if route involves a specific city\n  const routeInvolvesCity = (route: TransportRoute, cityName: string): boolean => {\n    if (cityName === 'All Cities') return true;\n    \n    // Check if start or end location corresponds to the city\n    const startLocationCity = locations.find(loc => loc.code === route.startLocation)?.city;\n    const endLocationCity = locations.find(loc => loc.code === route.endLocation)?.city;\n    \n    // Also check the location full names for direct city matches\n    const startLocationName = route.startLocationFullName?.toLowerCase() || '';\n    const endLocationName = route.endLocationFullName?.toLowerCase() || '';\n    const cityNameLower = cityName.toLowerCase();\n    \n    return startLocationCity === cityName || \n           endLocationCity === cityName ||\n           startLocationName.includes(cityNameLower) ||\n           endLocationName.includes(cityNameLower);\n  };\n  \n  // Filtered data (memoized)\n  const filteredRoutes = useMemo(() => routes.filter(route => {\n    const matchesSearch = \n      (route.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      route.code?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      route.startLocationFullName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      route.endLocationFullName?.toLowerCase().includes(searchQuery.toLowerCase())) ?? false;\n    \n    const matchesCountry = countryFilter === 'All Countries' || route.country === countryFilter;\n    const matchesCity = routeInvolvesCity(route, cityFilter);\n    const matchesType = typeFilter === 'All Types' || route.transferType === typeFilter;\n    \n    return matchesSearch && matchesCountry && matchesCity && matchesType;\n  }), [routes, searchQuery, countryFilter, cityFilter, typeFilter]);\n  \n  // Reset city filter when country changes\n  useEffect(() => {\n    setCityFilter('All Cities');\n  }, [countryFilter]);\n  \n  // Pagination\n  const totalPages = Math.max(1, Math.ceil(filteredRoutes.length / itemsPerPage));\n  \n  // Reset to first page when filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchQuery, countryFilter, cityFilter, typeFilter, itemsPerPage]);\n  \n  // Current page items (memoized)\n  const currentRoutes = useMemo(() => filteredRoutes.slice(\n    (currentPage - 1) * itemsPerPage,\n    currentPage * itemsPerPage\n  ), [filteredRoutes, currentPage, itemsPerPage]);\n  \n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n  \n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n  \n  const goToPage = (page: number) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n  \n  // Get available countries from active countries list\n  const availableCountries = ['All Countries', ...countries.map(country => country.name)];\n  const availableCities = getCitiesForSelectedCountry();\n  const transferTypes = ['All Types', 'One-Way', 'Round-Trip', 'Multi-Stop', 'en route', 'Private', 'SIC'];\n  \n  return {\n    // Data\n    routes,\n    setRoutes,\n    countries,\n    cities,\n    locations,\n    setLocations,\n    transport,\n    setTransport,\n    \n    // Filtered and paginated data\n    filteredRoutes,\n    currentRoutes,\n    \n    // Filters\n    searchQuery,\n    setSearchQuery,\n    countryFilter,\n    setCountryFilter,\n    cityFilter,\n    setCityFilter,\n    typeFilter,\n    setTypeFilter,\n    availableCountries,\n    availableCities,\n    transferTypes,\n    \n    // Pagination\n    currentPage,\n    totalPages,\n    nextPage,\n    prevPage,\n    goToPage,\n    \n    // Drawers and dialogs\n    viewRouteDrawerOpen,\n    setViewRouteDrawerOpen,\n    editRouteDrawerOpen,\n    setEditRouteDrawerOpen,\n    deleteRouteDialogOpen,\n    setDeleteRouteDialogOpen,\n    addRouteDrawerOpen,\n    setAddRouteDrawerOpen,\n    transportTypesDrawerOpen,\n    setTransportTypesDrawerOpen,\n    locationCodesDrawerOpen,\n    setLocationCodesDrawerOpen,\n    importDrawerOpen,\n    setImportDrawerOpen,\n    \n    // Selected item\n    selectedRoute,\n    setSelectedRoute,\n    \n    // Import/Export\n    importFileRef,\n    toast,\n  };\n};\n\nexport default useTransportData;\n","import { supabase, adminSupabase, isAdminClientConfigured } from '@/lib/supabaseClient';\nimport { Sightseeing } from '@/types/sightseeing';\n\n// DB row shape for public.sightseeing (partial, using JSONB for complex fields)\n// Supabase returns int8 (BIGSERIAL) as string; coerce to number in mapper\ntype SightseeingRow = {\n  id: string;\n  external_id: number | null;\n  name: string;\n  description?: string | null;\n  country: string;\n  city: string;\n  category?: string | null;\n  status: 'active' | 'inactive';\n  image_url?: string | null;\n  images?: any | null;\n  activities?: any | null;\n  duration?: string | null;\n  transfer_types?: any | null;\n  transfer_options?: any | null;\n  address?: string | null;\n  google_map_link?: string | null;\n  latitude?: number | null;\n  longitude?: number | null;\n  price?: any | null;\n  difficulty_level?: string | null;\n  season?: string | null;\n  allowed_age_group?: string | null;\n  days_of_week?: any | null;\n  timing?: string | null;\n  pickup_time?: string | null;\n  package_options?: any | null;\n  group_size_options?: any | null;\n  pricing_options?: any | null;\n  other_inclusions?: string | null;\n  advisory?: string | null;\n  cancellation_policy?: string | null;\n  refund_policy?: string | null;\n  confirmation_policy?: string | null;\n  terms_conditions?: string | null;\n  is_free?: boolean | null;\n  policies?: any | null;\n  validity_period?: any | null;\n  is_expired?: boolean | null;\n  expiration_notified?: boolean | null;\n  currency?: string | null;\n  sic_available?: boolean | null;\n  sic_pricing?: any | null;\n  requires_mandatory_transfer?: boolean | null;\n  transfer_mandatory?: boolean | null;\n  created_at: string;\n  last_updated: string;\n};\n\nfunction mapRowToSightseeing(row: SightseeingRow): Sightseeing {\n  const difficulty = (row.difficulty_level ?? undefined) as Sightseeing['difficultyLevel'];\n  const uuidToNumber = (s: string): number => {\n    let h = 0;\n    for (let i = 0; i < s.length; i++) h = (h * 31 + s.charCodeAt(i)) >>> 0;\n    return h;\n  };\n  const allowedDifficulty = new Set(['Easy', 'Moderate', 'Difficult']);\n  return {\n    id: (row.external_id ?? uuidToNumber(row.id)),\n    name: row.name,\n    description: row.description ?? undefined,\n    country: row.country,\n    city: row.city,\n    category: row.category ?? undefined,\n    status: row.status,\n    imageUrl: row.image_url ?? undefined,\n    images: (row.images ?? undefined) as Sightseeing['images'],\n    activities: Array.isArray(row.activities) ? (row.activities as string[]) : (row.activities ? [String(row.activities)] : []),\n    latitude: row.latitude ?? undefined,\n    longitude: row.longitude ?? undefined,\n    lastUpdated: row.last_updated,\n    createdAt: row.created_at,\n    duration: row.duration ?? undefined,\n    transferOptions: (row.transfer_options ?? undefined) as Sightseeing['transferOptions'],\n    address: row.address ?? undefined,\n    googleMapLink: row.google_map_link ?? undefined,\n    price: (row.price ?? undefined) as Sightseeing['price'],\n    difficultyLevel: difficulty && allowedDifficulty.has(difficulty) ? difficulty : undefined,\n    season: row.season ?? undefined,\n    allowedAgeGroup: row.allowed_age_group ?? undefined,\n    daysOfWeek: Array.isArray(row.days_of_week) ? (row.days_of_week as string[]) : (row.days_of_week ? [String(row.days_of_week)] : []),\n    timing: row.timing ?? undefined,\n    pickupTime: row.pickup_time ?? undefined,\n    packageOptions: (row.package_options ?? undefined) as Sightseeing['packageOptions'],\n    groupSizeOptions: (row.group_size_options ?? undefined) as Sightseeing['groupSizeOptions'],\n    pricingOptions: (row.pricing_options ?? undefined) as Sightseeing['pricingOptions'],\n    isFree: row.is_free ?? undefined,\n    policies: (row.policies ?? undefined) as Sightseeing['policies'],\n    validityPeriod: (row.validity_period ?? undefined) as Sightseeing['validityPeriod'],\n    sicAvailable: row.sic_available ?? undefined,\n    sicPricing: (row.sic_pricing ?? undefined) as Sightseeing['sicPricing'],\n    requiresMandatoryTransfer: row.requires_mandatory_transfer ?? undefined,\n    transferMandatory: row.transfer_mandatory ?? undefined,\n  };\n}\n\nfunction mapSightseeingToRow(data: Sightseeing): Partial<SightseeingRow> {\n  return {\n    // id omitted for insert; used for update matching\n    external_id: data.id,\n    name: data.name,\n    description: data.description ?? null,\n    country: data.country,\n    city: data.city,\n    category: data.category ?? null,\n    status: data.status,\n    // Include JSONB arrays/objects as per target schema\n    images: data.images ?? [],\n    activities: data.activities ?? [],\n    latitude: data.latitude ?? null,\n    longitude: data.longitude ?? null,\n    duration: data.duration ?? null,\n    transfer_options: data.transferOptions ?? [],\n    address: data.address ?? null,\n    google_map_link: data.googleMapLink ?? null,\n    price: data.price ?? null,\n    difficulty_level: data.difficultyLevel ?? null,\n    season: data.season ?? null,\n    allowed_age_group: data.allowedAgeGroup ?? null,\n    days_of_week: data.daysOfWeek ?? [],\n    timing: data.timing ?? null,\n    pickup_time: data.pickupTime ?? null,\n    package_options: data.packageOptions ?? [],\n    group_size_options: data.groupSizeOptions ?? [],\n    pricing_options: data.pricingOptions ?? [],\n    is_free: data.isFree ?? null,\n    policies: data.policies ?? null,\n    validity_period: data.validityPeriod ?? null,\n    sic_available: data.sicAvailable ?? null,\n    sic_pricing: data.sicPricing ?? null,\n    requires_mandatory_transfer: data.requiresMandatoryTransfer ?? null,\n    transfer_mandatory: data.transferMandatory ?? null,\n    // pricing currency fields omitted: table may not include these columns\n    // timestamps handled by DB; can optionally send last_updated\n  };\n}\n\nexport async function listSightseeings(): Promise<Sightseeing[]> {\n  const { data, error } = await supabase\n    .from('sightseeing')\n    .select('*')\n    .order('id', { ascending: true });\n  if (error) throw error;\n  return (data ?? []).map((r) => mapRowToSightseeing(r as SightseeingRow));\n}\n\nexport async function getSightseeingById(id: number): Promise<Sightseeing | null> {\n  const { data, error } = await supabase\n    .from('sightseeing')\n    .select('*')\n    .eq('external_id', id)\n    .limit(1)\n    .maybeSingle();\n  if (error) throw error;\n  return data ? mapRowToSightseeing(data as SightseeingRow) : null;\n}\n\nexport async function createSightseeing(payload: Sightseeing): Promise<Sightseeing> {\n  // Ensure external_id is assigned sequentially when missing\n  const client = isAdminClientConfigured ? adminSupabase : supabase;\n  let row = mapSightseeingToRow(payload);\n  if (!row.external_id || row.external_id === 0) {\n    const { data: maxRows, error: maxErr } = await client\n      .from('sightseeing')\n      .select('external_id')\n      .order('external_id', { ascending: false })\n      .limit(1);\n    if (!maxErr) {\n      const maxExternalId = (maxRows && maxRows[0]?.external_id) ? Number(maxRows[0].external_id) : 0;\n      row = { ...row, external_id: maxExternalId + 1 };\n    } else {\n      console.warn('Could not compute next external_id, defaulting to 1:', maxErr);\n      row = { ...row, external_id: 1 };\n    }\n  }\n  const { data, error } = await client\n    .from('sightseeing')\n    .insert(row as any)\n    .select('*')\n    .single();\n  if (error) {\n    const info = {\n      operation: 'insert',\n      usingAdminClient: !!isAdminClientConfigured,\n      hint: isAdminClientConfigured\n        ? 'Admin client used. Check schema and payload fields.'\n        : 'Anon client used. If RLS is enabled without policies, writes will fail.'\n    };\n    console.error('Sightseeing insert failed:', info, error);\n    throw error;\n  }\n  return mapRowToSightseeing(data as SightseeingRow);\n}\n\nexport async function updateSightseeing(payload: Sightseeing): Promise<Sightseeing> {\n  if (!payload.id) throw new Error('Sightseeing id is required for update');\n  // Merge existing policies to avoid overwriting JSONB when fields are omitted\n  let mergedRow = mapSightseeingToRow(payload);\n  try {\n    const { data: existing, error: fetchError } = await (isAdminClientConfigured ? adminSupabase : supabase)\n      .from('sightseeing')\n      .select('policies')\n      .eq('external_id', payload.id)\n      .single();\n    if (!fetchError && existing && existing.policies) {\n      const existingPolicies = existing.policies as any;\n      const incomingPolicies = (mergedRow.policies ?? {}) as any;\n      const mergedPolicies = {\n        ...existingPolicies,\n        ...incomingPolicies,\n        // Arrays: prefer incoming if provided, else preserve existing\n        highlights: Array.isArray(incomingPolicies?.highlights) ? incomingPolicies.highlights : (existingPolicies?.highlights ?? []),\n        exclusions: Array.isArray(incomingPolicies?.exclusions) ? incomingPolicies.exclusions : (existingPolicies?.exclusions ?? []),\n        inclusions: Array.isArray(incomingPolicies?.inclusions) ? incomingPolicies.inclusions : (existingPolicies?.inclusions ?? []),\n        // Strings: if incoming provided and non-empty, use it; otherwise keep existing\n        advisory: (incomingPolicies?.advisory ?? '').trim() ? incomingPolicies.advisory : (existingPolicies?.advisory ?? ''),\n        refundPolicy: (incomingPolicies?.refundPolicy ?? '').trim() ? incomingPolicies.refundPolicy : (existingPolicies?.refundPolicy ?? ''),\n        confirmationPolicy: (incomingPolicies?.confirmationPolicy ?? '').trim() ? incomingPolicies.confirmationPolicy : (existingPolicies?.confirmationPolicy ?? ''),\n        termsConditions: (incomingPolicies?.termsConditions ?? '').trim() ? incomingPolicies.termsConditions : (existingPolicies?.termsConditions ?? ''),\n        cancellationPolicy: (incomingPolicies?.cancellationPolicy ?? '').trim() ? incomingPolicies.cancellationPolicy : (existingPolicies?.cancellationPolicy ?? '')\n      };\n      mergedRow.policies = mergedPolicies as any;\n    }\n  } catch (e) {\n    console.warn('Policy merge skipped due to fetch error:', e);\n  }\n  const client = isAdminClientConfigured ? adminSupabase : supabase;\n  const { data, error } = await client\n    .from('sightseeing')\n    .update(mergedRow as any)\n    .eq('external_id', payload.id)\n    .select('*')\n    .single();\n  if (error) {\n    const info = {\n      operation: 'update',\n      usingAdminClient: !!isAdminClientConfigured,\n      matchField: 'external_id',\n      matchValue: payload.id,\n      hint: isAdminClientConfigured\n        ? 'Admin client used. Check that external_id exists and payload fields are valid.'\n        : 'Anon client used. If RLS is enabled without policies, updates will fail.'\n    };\n    console.error('Sightseeing update failed:', info, error);\n    throw error;\n  }\n  return mapRowToSightseeing(data as SightseeingRow);\n}\n\nexport async function deleteSightseeing(id: number): Promise<void> {\n  const client = isAdminClientConfigured ? adminSupabase : supabase;\n  const { error } = await client\n    .from('sightseeing')\n    .delete()\n    .eq('external_id', id);\n  if (error) {\n    const info = {\n      operation: 'delete',\n      usingAdminClient: !!isAdminClientConfigured,\n      matchField: 'external_id',\n      matchValue: id,\n      hint: isAdminClientConfigured\n        ? 'Admin client used. Verify the record exists.'\n        : 'Anon client used. If RLS is enabled without policies, deletes will fail.'\n    };\n    console.error('Sightseeing delete failed:', info, error);\n    throw error;\n  }\n}","\nimport { useState, useEffect } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { useToast } from '@/hooks/use-toast';\nimport { listSightseeings, createSightseeing, updateSightseeing as updateSightseeingDb, deleteSightseeing as deleteSightseeingDb } from '../services/sightseeingService';\n\nexport const useSightseeingData = () => {\n  const [sightseeings, setSightseeings] = useState<Sightseeing[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { toast } = useToast();\n\n  // Ensure all sightseeing IDs are unique to avoid UI key collisions\n  const ensureUniqueIds = (items: Sightseeing[]): Sightseeing[] => {\n    const seen = new Set<number>();\n    let maxId = items.reduce((max, s) => (typeof s.id === 'number' ? Math.max(max, s.id) : max), 0);\n    return items.map((s) => {\n      if (typeof s.id !== 'number') {\n        maxId += 1;\n        return { ...s, id: maxId };\n      }\n      if (!seen.has(s.id)) {\n        seen.add(s.id);\n        return s;\n      }\n      // Duplicate ID found; assign a new unique ID\n      maxId += 1;\n      return { ...s, id: maxId };\n    });\n  };\n\n  // Load from Supabase only (no local/dummy fallback)\n  const loadSightseeingsFromRemote = async () => {\n    try {\n      const data = await listSightseeings();\n      console.log('Loaded sightseeings from Supabase:', data?.length || 0, 'items');\n      return Array.isArray(data) ? data : [];\n    } catch (error) {\n      console.error('Error loading sightseeings from Supabase:', error);\n      return [];\n    }\n  };\n\n  // Load initial data\n  useEffect(() => {\n    const loadSightseeings = async () => {\n      setLoading(true);\n      const data = await loadSightseeingsFromRemote();\n      const deduped = ensureUniqueIds(data);\n      setSightseeings(deduped);\n      setLoading(false);\n    };\n\n    loadSightseeings();\n  }, []);\n\n  // Listen for storage changes to sync across tabs/components\n  useEffect(() => {\n    const handleStorageChange = () => {\n      // For compatibility, refresh from remote on any storage change\n      console.log('Storage changed, reloading sightseeings from remote');\n      refreshSightseeings();\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  // Custom event listener for same-tab updates\n  useEffect(() => {\n    const handleSightseeingUpdate = () => {\n      console.log('Sightseeing update event received, reloading data from remote');\n      refreshSightseeings();\n    };\n\n    window.addEventListener('sightseeingUpdated', handleSightseeingUpdate);\n    return () => window.removeEventListener('sightseeingUpdated', handleSightseeingUpdate);\n  }, []);\n\n  // No longer persist to localStorage; Supabase is the source of truth\n\n  const addSightseeing = async (newSightseeing: Omit<Sightseeing, 'id' | 'createdAt' | 'lastUpdated'>) => {\n    try {\n      const payload: Sightseeing = {\n        ...newSightseeing,\n        id: 0, // ignored by DB on insert (bigserial)\n        createdAt: new Date().toISOString(),\n        lastUpdated: new Date().toISOString()\n      } as Sightseeing;\n\n      const created = await createSightseeing(payload);\n      setSightseeings(prev => {\n        const updated = ensureUniqueIds([...prev, created]);\n        window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n        return updated;\n      });\n      toast({\n        title: \"Sightseeing added\",\n        description: `\"${created.name}\" has been added successfully.`,\n      });\n    } catch (error) {\n      console.error('Error creating sightseeing:', error);\n      toast({\n        title: 'Create failed',\n        description: 'An error occurred while creating the sightseeing.',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const updateSightseeing = async (id: number, updates: Partial<Sightseeing>) => {\n    try {\n      const existing = sightseeings.find(s => s.id === id);\n      if (!existing) return;\n      const updatedPayload: Sightseeing = {\n        ...existing,\n        ...updates,\n        lastUpdated: new Date().toISOString()\n      };\n      const updated = await updateSightseeingDb(updatedPayload);\n      setSightseeings(prev => {\n        const next = ensureUniqueIds(prev.map(s => (s.id === id ? updated : s)));\n        window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n        return next;\n      });\n      toast({\n        title: 'Sightseeing updated',\n        description: 'The sightseeing has been updated successfully.',\n      });\n    } catch (error) {\n      console.error('Error updating sightseeing:', error);\n      toast({\n        title: 'Update failed',\n        description: 'An error occurred while updating the sightseeing.',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  const deleteSightseeing = async (id: number) => {\n    try {\n      const sightseeing = sightseeings.find(s => s.id === id);\n      await deleteSightseeingDb(id);\n      setSightseeings(prev => {\n        const updated = ensureUniqueIds(prev.filter(s => s.id !== id));\n        window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n        return updated;\n      });\n      toast({\n        title: 'Sightseeing deleted',\n        description: `\"${sightseeing?.name}\" has been deleted successfully.`,\n      });\n    } catch (error) {\n      console.error('Error deleting sightseeing:', error);\n      toast({\n        title: 'Delete failed',\n        description: 'An error occurred while deleting the sightseeing.',\n        variant: 'destructive'\n      });\n    }\n  };\n\n  // Import/Export removed for remote-only data policy\n\n  // Function to refresh data manually\n  const refreshSightseeings = async () => {\n    console.log('Manually refreshing sightseeings from Supabase');\n    const data = await loadSightseeingsFromRemote();\n    const deduped = ensureUniqueIds(data);\n    setSightseeings(deduped);\n  };\n\n  return {\n    sightseeings,\n    setSightseeings,\n    loading,\n    addSightseeing,\n    updateSightseeing,\n    deleteSightseeing,\n    refreshSightseeings\n  };\n};\n","\nimport { Sightseeing } from \"@/types/sightseeing\";\nimport { sampleSightseeingData as sightseeingData } from \"../data/initialData\";\n\nconst STORAGE_KEY = 'sightseeingData';\n\n// Load data from localStorage or use initial data if not found\nexport const loadSightseeingData = (): Sightseeing[] => {\n  try {\n    const storedData = localStorage.getItem(STORAGE_KEY);\n    if (storedData) {\n      const parsedData = JSON.parse(storedData);\n      console.log('Loaded sightseeing data from localStorage:', parsedData.length, 'items');\n      return parsedData;\n    }\n    \n    // If no data in localStorage yet, store the initial data\n    console.log('No data in localStorage, using initial data');\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(sightseeingData));\n    return sightseeingData;\n  } catch (error) {\n    console.error('Failed to load sightseeing data:', error);\n    return sightseeingData;\n  }\n};\n\n// Save data to localStorage and dispatch update event\nexport const saveSightseeingData = (data: Sightseeing[]): void => {\n  try {\n    const dataToSave = data.map(item => ({\n      ...item,\n      // Ensure all pricing data is properly structured\n      pricingOptions: item.pricingOptions?.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        type: option.type || 'Standard',\n        name: option.name || option.type || 'Standard',\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0,\n        isEnabled: option.isEnabled !== undefined ? option.isEnabled : true,\n        description: option.description || ''\n      })) || [],\n      packageOptions: item.packageOptions?.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0,\n        isEnabled: option.isEnabled !== undefined ? option.isEnabled : true\n      })) || [],\n      groupSizeOptions: item.groupSizeOptions?.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0\n      })) || [],\n      transferOptions: item.transferOptions?.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        price: Number(option.price) || 0,\n        isEnabled: option.isEnabled !== undefined ? option.isEnabled : true\n      })) || [],\n      price: item.price ? {\n        adult: Number(item.price.adult) || 0,\n        child: Number(item.price.child) || 0\n      } : { adult: 0, child: 0 },\n      policies: item.policies || {\n        highlights: [],\n        inclusions: [],\n        exclusions: [],\n        cancellationPolicy: ''\n      }\n    }));\n    \n    localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));\n    localStorage.setItem('sightseeings', JSON.stringify(dataToSave)); // Also save to alternative key for compatibility\n    \n    // Dispatch custom event to notify other components\n    window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n    \n    console.log('Saved sightseeing data to localStorage:', dataToSave.length, 'items');\n  } catch (error) {\n    console.error('Failed to save sightseeing data:', error);\n  }\n};\n\n// Get a single sightseeing by ID\nexport const getSightseeingById = (id: number): Sightseeing | undefined => {\n  const data = loadSightseeingData();\n  const item = data.find(item => item.id === id);\n  console.log('Retrieved sightseeing by ID:', id, item ? 'found' : 'not found');\n  return item;\n};\n\n// Update a single sightseeing\nexport const updateSightseeing = (updatedItem: Sightseeing): void => {\n  const data = loadSightseeingData();\n  const updatedData = data.map(item => \n    item.id === updatedItem.id ? {\n      ...updatedItem,\n      lastUpdated: new Date().toISOString()\n    } : item\n  );\n  saveSightseeingData(updatedData);\n  console.log('Updated sightseeing:', updatedItem.name);\n};\n\n// Add a new sightseeing\nexport const addSightseeing = (newItem: Sightseeing): void => {\n  const data = loadSightseeingData();\n  const itemToAdd = {\n    ...newItem,\n    id: newItem.id || getNextId(),\n    createdAt: newItem.createdAt || new Date().toISOString(),\n    lastUpdated: new Date().toISOString()\n  };\n  const updatedData = [...data, itemToAdd];\n  saveSightseeingData(updatedData);\n  console.log('Added new sightseeing:', itemToAdd.name, 'with pricing options:', itemToAdd.pricingOptions?.length || 0);\n};\n\n// Delete a sightseeing by ID\nexport const deleteSightseeingById = (id: number): void => {\n  const data = loadSightseeingData();\n  const updatedData = data.filter(item => item.id !== id);\n  saveSightseeingData(updatedData);\n  console.log('Deleted sightseeing with ID:', id);\n};\n\n// Get the next available ID\nexport const getNextId = (): number => {\n  const data = loadSightseeingData();\n  const maxId = Math.max(0, ...data.map(item => item.id));\n  return maxId + 1;\n};\n\n// Search sightseeings by query\nexport const searchSightseeings = (query: string): Sightseeing[] => {\n  const data = loadSightseeingData();\n  const searchTerm = query.toLowerCase();\n  \n  return data.filter(item => \n    item.name.toLowerCase().includes(searchTerm) ||\n    item.city.toLowerCase().includes(searchTerm) ||\n    item.country.toLowerCase().includes(searchTerm) ||\n    (item.description && item.description.toLowerCase().includes(searchTerm)) ||\n    (item.category && item.category.toLowerCase().includes(searchTerm))\n  );\n};\n\n// Validate sightseeing data\nexport const validateSightseeing = (data: Partial<Sightseeing>): string[] => {\n  const errors: string[] = [];\n  \n  if (!data.name?.trim()) {\n    errors.push('Name is required');\n  }\n  \n  if (!data.country?.trim()) {\n    errors.push('Country is required');\n  }\n  \n  if (!data.city?.trim()) {\n    errors.push('City is required');\n  }\n  \n  if (!data.status) {\n    errors.push('Status is required');\n  }\n\n  // Validate pricing if not free\n  if (!data.isFree) {\n    const hasPricing = \n      (data.price && (data.price.adult > 0 || data.price.child > 0)) ||\n      (data.pricingOptions && data.pricingOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n      (data.packageOptions && data.packageOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n      (data.groupSizeOptions && data.groupSizeOptions.some(g => g.adultPrice > 0 || g.childPrice > 0)) ||\n      (data.transferOptions && data.transferOptions.some(t => t.isEnabled && t.price > 0));\n    \n    if (!hasPricing) {\n      errors.push('At least one pricing option with a price greater than zero is required');\n    }\n  }\n  \n  return errors;\n};\n","\nimport { Country } from '../types/country';\nimport { initialCountries } from '../data/countryData';\n\n// Currency override interfaces\nexport interface CurrencyOverride {\n  pricing_currency_override?: boolean;\n  pricing_currency?: string;\n  pricing_currency_symbol?: string;\n}\n\nexport interface CountryWithCurrency extends Country {\n  currency: string;\n  currency_symbol: string;\n  pricing_currency_override: boolean;\n  pricing_currency?: string;\n  pricing_currency_symbol?: string;\n}\n\n// Currency display information interface\nexport interface CurrencyDisplayInfo {\n  displayCurrency: string;\n  displaySymbol: string;\n  pricingCurrency?: string;\n  pricingSymbol?: string;\n  hasPricingOverride: boolean;\n}\n\n// Function to get the effective pricing currency for a country\nexport const getEffectivePricingCurrency = (country: Country) => {\n  if (country.pricing_currency_override && country.pricing_currency) {\n    return {\n      code: country.pricing_currency,\n      symbol: country.pricing_currency_symbol || '$',\n    };\n  }\n  return {\n    code: country.currency,\n    symbol: country.currency_symbol,\n  };\n};\n\n// Function to get effective pricing currency by country name\nexport const getPricingCurrencyByCountryName = (countryName: string) => {\n  const country = initialCountries.find(c => c.name === countryName);\n  if (!country) {\n    return { code: 'USD', symbol: '$' };\n  }\n  return getEffectivePricingCurrency(country);\n};\n\n// Function to get effective pricing currency by country code\nexport const getPricingCurrencyByCountryCode = (countryCode: string) => {\n  const country = initialCountries.find(c => c.code === countryCode);\n  if (!country) {\n    return { code: 'USD', symbol: '$' };\n  }\n  return getEffectivePricingCurrency(country);\n};\n\n// Function to format price with effective currency\nexport const formatPriceWithEffectiveCurrency = (price: number, country: Country): string => {\n  const effectiveCurrency = getEffectivePricingCurrency(country);\n  return `${effectiveCurrency.symbol}${price.toLocaleString()}`;\n};\n\n// Get effective currency symbol with override support\nexport const getEffectiveCurrencySymbol = (country: CountryWithCurrency): string => {\n  if (country.pricing_currency_override && country.pricing_currency_symbol) {\n    return country.pricing_currency_symbol;\n  }\n  return country.currency_symbol || '$';\n};\n\n// Get effective currency code with override support\nexport const getEffectiveCurrencyCode = (country: CountryWithCurrency): string => {\n  if (country.pricing_currency_override && country.pricing_currency) {\n    return country.pricing_currency;\n  }\n  return country.currency || 'USD';\n};\n\n// Format currency with override support\nexport const formatCurrencyWithOverride = (amount: number, country: CountryWithCurrency): string => {\n  const symbol = getEffectiveCurrencySymbol(country);\n  const code = getEffectiveCurrencyCode(country);\n  return `${symbol}${amount.toLocaleString()} ${code}`;\n};\n\n// Get comprehensive currency display information\nexport const getCurrencyDisplayInfo = (country: CountryWithCurrency): CurrencyDisplayInfo => {\n  const hasPricingOverride = Boolean(\n    country.pricing_currency_override && \n    country.pricing_currency && \n    country.pricing_currency !== country.currency\n  );\n\n  if (hasPricingOverride) {\n    return {\n      displayCurrency: country.pricing_currency!,\n      displaySymbol: country.pricing_currency_symbol || country.currency_symbol || '$',\n      pricingCurrency: country.pricing_currency!,\n      pricingSymbol: country.pricing_currency_symbol || country.currency_symbol || '$',\n      hasPricingOverride: true\n    };\n  }\n\n  return {\n    displayCurrency: country.currency || 'USD',\n    displaySymbol: country.currency_symbol || '$',\n    hasPricingOverride: false\n  };\n};\n","\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport HotelForm from '@/components/inventory/hotels/forms/HotelForm';\nimport { ArrowLeft } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Link } from 'react-router-dom';\nimport { hotelService } from '@/integrations/supabase/services/hotelService';\nimport { toast } from 'sonner';\nimport { Form } from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\nimport { convertLegacyHotelToSupabase } from '@/components/inventory/hotels/types/supabaseHotel';\n\nconst AddHotel: React.FC = () => {\n  const navigate = useNavigate();\n  const [externalId, setExternalId] = useState<number | null>(null);\n  const [isGeneratingExternalId, setIsGeneratingExternalId] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Setup form with react-hook-form\n  const form = useForm();\n\n  // Generate external_id on component mount\n  useEffect(() => {\n    generateExternalId();\n  }, []);\n\n  const generateExternalId = async () => {\n    setIsGeneratingExternalId(true);\n    try {\n      const nextId = await hotelService.generateNextExternalId();\n      setExternalId(nextId);\n    } catch (error) {\n      console.error('Error generating external_id:', error);\n      toast.error('Failed to generate External ID. Please try again.');\n    } finally {\n      setIsGeneratingExternalId(false);\n    }\n  };\n\n  // Regenerate external ID function\n  const handleRegenerateExternalId = async () => {\n    setIsGeneratingExternalId(true);\n    try {\n      const nextId = await hotelService.generateNextExternalId();\n      setExternalId(nextId);\n      toast.success(\"New external ID generated successfully.\");\n    } catch (error) {\n      console.error('Failed to regenerate external ID:', error);\n      toast.error(\"Failed to regenerate external ID. Please try again.\");\n    } finally {\n      setIsGeneratingExternalId(false);\n    }\n  };\n  \n  const handleSubmit = async (data: any) => {\n    if (!externalId) {\n      toast.error('External ID is required. Please regenerate it.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      // Map legacy form data (camelCase) to Supabase schema (snake_case)\n      const supabaseHotelData = convertLegacyHotelToSupabase({\n        ...data,\n        externalId: externalId,\n      });\n\n      // Create hotel with external_id validation and retry logic\n      const newHotel = await hotelService.createHotelWithExternalId(supabaseHotelData);\n      \n      // Show success message\n      toast.success(` ${data.name} has been added successfully! Redirecting to add room types...`);\n      \n      // Redirect to add room types page with hotel_id and external_id\n      navigate(`/inventory/hotels/${newHotel.id}/add-room-type?external_id=${newHotel.external_id}`);\n    } catch (error) {\n      console.error('Error adding hotel:', error);\n      \n      // Handle specific error cases\n      if (error instanceof Error) {\n        if (error.message.includes('Failed to create hotel after')) {\n          toast.error(' Unable to generate unique External ID after multiple attempts. Please try again.');\n          // Regenerate external_id for next attempt\n          generateExternalId();\n        } else {\n          toast.error(' Error saving hotel, please try again.');\n        }\n      } else {\n        toast.error(' Error saving hotel, please try again.');\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleCancel = () => {\n    navigate('/inventory/hotels');\n  };\n  \n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button asChild variant=\"ghost\" size=\"sm\">\n            <Link to=\"/inventory/hotels\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Hotels\n            </Link>\n          </Button>\n          <h1 className=\"text-2xl font-bold ml-2\">Add New Hotel</h1>\n        </div>\n        \n        <Form {...form}>\n          <HotelForm \n            onSubmit={handleSubmit} \n            onCancel={handleCancel}\n            externalId={externalId}\n            isGeneratingExternalId={isGeneratingExternalId}\n            onRegenerateExternalId={handleRegenerateExternalId}\n            isSubmitting={isSubmitting}\n          />\n        </Form>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddHotel;\n","\nimport React from 'react';\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft } from 'lucide-react';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'sonner';\nimport RoomTypeFormContainer from '@/components/inventory/hotels/forms/room-type';\n\nconst AddRoomType = () => {\n  const navigate = useNavigate();\n  const { hotelId, id } = useParams<{ hotelId?: string; id?: string }>();\n  const [searchParams] = useSearchParams();\n  const { hotels } = useSupabaseHotelsData();\n  \n  // Use hotelId if available, otherwise use id (for backward compatibility)\n  const actualHotelId = hotelId || id;\n  \n  // Extract external_id from query parameters\n  const externalId = searchParams.get('external_id');\n  \n  console.log('AddRoomType - hotelId:', hotelId, 'id:', id, 'actualHotelId:', actualHotelId, 'externalId:', externalId);\n  \n  // Find the hotel by ID\n  const hotel = hotels.find(h => h.id === actualHotelId);\n  \n  // Handle cancel\n  const handleCancel = () => {\n    navigate(`/inventory/hotels/${actualHotelId}`);\n  };\n  \n  // Check if hotel exists\n  React.useEffect(() => {\n    if (!hotel && hotels.length > 0) {\n      console.log('Hotel not found, hotels available:', hotels.length);\n      toast.error('Hotel not found');\n      navigate('/inventory/hotels');\n    }\n  }, [hotel, hotels, navigate]);\n  \n  if (!actualHotelId) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex flex-col items-center justify-center min-h-[50vh]\">\n            <h1 className=\"text-2xl font-bold mb-4\">Invalid Hotel ID</h1>\n            <p className=\"text-gray-500 mb-6\">No hotel ID provided in the URL.</p>\n            <Button asChild>\n              <Link to=\"/inventory/hotels\">Back to Hotels</Link>\n            </Button>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  if (!hotel && hotels.length > 0) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex flex-col items-center justify-center min-h-[50vh]\">\n            <h1 className=\"text-2xl font-bold mb-4\">Hotel Not Found</h1>\n            <p className=\"text-gray-500 mb-6\">The hotel you're looking for doesn't exist.</p>\n            <Button asChild>\n              <Link to=\"/inventory/hotels\">Back to Hotels</Link>\n            </Button>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button asChild variant=\"ghost\" size=\"sm\">\n            <Link to={`/inventory/hotels/${actualHotelId}`}>\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Hotel\n            </Link>\n          </Button>\n          <h1 className=\"text-2xl font-bold ml-2\">Add Room Type</h1>\n        </div>\n        \n        {hotel && (\n          <Card className=\"mb-6\">\n            <CardHeader className=\"bg-gray-50 dark:bg-gray-800 py-4\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-semibold\">Hotel: {hotel.name}</h2>\n                {externalId && (\n                  <Badge variant=\"outline\" className=\"text-sm\">\n                    External ID: {externalId}\n                  </Badge>\n                )}\n              </div>\n            </CardHeader>\n            <CardContent className=\"pt-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-500\">Location</p>\n                  <p>{hotel.city}, {hotel.country}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-gray-500\">Rating</p>\n                  <p>{hotel.starRating} Star</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-gray-500\">Category</p>\n                  <p>{hotel.category}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n        \n        {actualHotelId && (\n          <RoomTypeFormContainer \n            hotelId={actualHotelId} \n            onCancel={handleCancel}\n          />\n        )}\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddRoomType;\n","\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams, Link } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft } from 'lucide-react';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { useToast } from '@/hooks/use-toast';\nimport RoomTypeFormContainer from '@/components/inventory/hotels/forms/room-type';\n\nconst EditRoomType = () => {\n  const navigate = useNavigate();\n  const { hotelId, roomTypeId } = useParams<{ hotelId: string; roomTypeId: string }>();\n  const { hotels, loading } = useSupabaseHotelsData();\n  const { toast } = useToast();\n  \n  console.log('EditRoomType params:', { hotelId, roomTypeId });\n  console.log('Hotels data:', hotels);\n  \n  // Find the hotel by ID\n  const hotel = hotels.find(h => h.id === hotelId);\n  const roomType = hotel?.roomTypes.find(r => r.id === roomTypeId);\n  \n  console.log('Found hotel:', hotel);\n  console.log('Found room type:', roomType);\n  \n  // Handle cancel\n  const handleCancel = () => {\n    navigate(`/inventory/hotels/${hotelId}`);\n  };\n  \n  // Check if hotel and room type exist\n  useEffect(() => {\n    if (!loading && hotels.length > 0) {\n      if (!hotel) {\n        toast({\n          title: 'Error',\n          description: 'Hotel not found.',\n          variant: 'destructive',\n        });\n        navigate('/inventory/hotels');\n        return;\n      }\n      \n      if (!roomType) {\n        toast({\n          title: 'Error',\n          description: 'Room type not found.',\n          variant: 'destructive',\n        });\n        navigate(`/inventory/hotels/${hotelId}`);\n      }\n    }\n  }, [hotel, roomType, hotels, hotelId, navigate, toast, loading]);\n  \n  if (loading) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto mb-4\"></div>\n              <p className=\"text-muted-foreground\">Loading room type data...</p>\n            </div>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  if (!hotel || !roomType) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex flex-col items-center justify-center min-h-[50vh]\">\n            <h1 className=\"text-2xl font-bold mb-4\">Resource Not Found</h1>\n            <p className=\"text-gray-500 mb-6\">The hotel or room type you're looking for doesn't exist.</p>\n            <div className=\"flex gap-4\">\n              <Button asChild variant=\"outline\">\n                <Link to=\"/inventory/hotels\">Back to Hotels</Link>\n              </Button>\n              {hotelId && (\n                <Button asChild>\n                  <Link to={`/inventory/hotels/${hotelId}`}>Back to Hotel Details</Link>\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button asChild variant=\"ghost\" size=\"sm\">\n            <Link to={`/inventory/hotels/${hotelId}`}>\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Hotel\n            </Link>\n          </Button>\n          <h1 className=\"text-2xl font-bold ml-4\">Edit Room Type: {roomType.name}</h1>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <RoomTypeFormContainer \n            hotelId={hotelId!}\n            roomTypeId={roomTypeId}\n            onCancel={handleCancel}\n          />\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default EditRoomType;\n","\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { ArrowLeft, Plus, Star, MapPin, Clock, Users } from 'lucide-react';\nimport AddRoomTypeDialog from '@/components/inventory/hotels/components/AddRoomTypeDialog';\nconst AddRoomTypePage: React.FC = () => {\n  const { hotelId } = useParams<{ hotelId: string }>();\n  const navigate = useNavigate();\n  const { hotels, addRoomType, updateRoomType, deleteRoomType } = useSupabaseHotelsData();\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [editingRoomType, setEditingRoomType] = useState(null);\n  \n  const hotel = hotels.find(h => h.id === hotelId);\n  \n  useEffect(() => {\n    // If no hotel found, redirect back to hotels list\n    if (!hotel && hotels.length > 0) {\n      navigate('/inventory/hotels');\n    }\n  }, [hotel, hotels, navigate]);\n\n  if (!hotel) {\n    return (\n      <PageLayout>\n        <div className=\"container py-8\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-bold mb-4\">Hotel Not Found</h2>\n            <p className=\"text-muted-foreground mb-6\">\n              The hotel you're looking for doesn't exist or has been removed.\n            </p>\n            <Button onClick={() => navigate('/inventory/hotels')}>\n              Return to Hotels\n            </Button>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n\n  // Use hotel's currency symbol directly from database, fallback to '$' if not available\n  const currencySymbol = hotel.currency_symbol || '$';\n\n  const handleAddRoomType = (roomTypeData: any) => {\n    console.log('Adding room type to hotel:', hotelId, roomTypeData);\n    \n    const newRoomType = {\n      ...roomTypeData,\n      id: `room${Date.now()}-${Math.random().toString(36).substring(2, 7)}`,\n      currency: hotel.currency || 'USD',\n      status: 'active'\n    };\n    \n    addRoomType({ ...newRoomType, hotelId });\n    setShowAddDialog(false);\n  };\n\n  const handleEditRoomType = (roomType: any) => {\n    console.log('Editing room type:', roomType.id);\n    setEditingRoomType(roomType);\n    setShowAddDialog(true);\n  };\n\n  const handleUpdateRoomType = (roomTypeData: any) => {\n    if (editingRoomType) {\n      console.log('Updating room type:', editingRoomType.id, roomTypeData);\n      updateRoomType(editingRoomType.id, { ...roomTypeData, hotelId });\n      setEditingRoomType(null);\n      setShowAddDialog(false);\n    }\n  };\n\n  const handleDeleteRoomType = (roomTypeId: string) => {\n    console.log('Deleting room type:', roomTypeId);\n    deleteRoomType(roomTypeId);\n  };\n\n  const handleFinish = () => {\n    navigate(`/inventory/hotels/view/${hotelId}`);\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => navigate(`/inventory/hotels/view/${hotelId}`)}\n              className=\"mb-4 md:mb-0\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Hotel\n            </Button>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={() => setShowAddDialog(true)}\n              className=\"bg-primary hover:bg-primary/90\"\n            >\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Add Room Type\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={handleFinish}\n            >\n              Finish & View Hotel\n            </Button>\n          </div>\n        </div>\n\n        {/* Hotel Summary Card */}\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <CardTitle className=\"text-2xl\">{hotel.name}</CardTitle>\n                <div className=\"flex flex-wrap items-center gap-4 mt-2\">\n                  <div className=\"flex items-center\">\n                    <div className=\"flex\">\n                      {Array.from({ length: hotel.starRating }).map((_, index) => (\n                        <Star key={index} className=\"h-4 w-4 text-yellow-400 fill-current\" />\n                      ))}\n                    </div>\n                    <span className=\"ml-2 text-muted-foreground\">{hotel.category}</span>\n                  </div>\n                  <div className=\"flex items-center\">\n                    <MapPin className=\"h-4 w-4 mr-1 text-muted-foreground\" />\n                    <span className=\"text-sm\">\n                      {hotel.location}, {hotel.city}, {hotel.country}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <Badge variant=\"outline\">\n                Currency: {currencySymbol}\n              </Badge>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div className=\"flex items-center\">\n                <Clock className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                <div>\n                  <div className=\"text-sm font-medium\">Check-in</div>\n                  <div className=\"text-sm text-muted-foreground\">{hotel.checkInTime}</div>\n                </div>\n              </div>\n              <div className=\"flex items-center\">\n                <Clock className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                <div>\n                  <div className=\"text-sm font-medium\">Check-out</div>\n                  <div className=\"text-sm text-muted-foreground\">{hotel.checkOutTime}</div>\n                </div>\n              </div>\n              <div className=\"flex items-center\">\n                <Users className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                <div>\n                  <div className=\"text-sm font-medium\">Room Types</div>\n                  <div className=\"text-sm text-muted-foreground\">{hotel.roomTypes.length}</div>\n                </div>\n              </div>\n              <div>\n                <div className=\"text-sm font-medium\">Status</div>\n                <Badge \n                  variant={hotel.status === 'active' ? 'default' : 'secondary'}\n                  className=\"mt-1\"\n                >\n                  {hotel.status.charAt(0).toUpperCase() + hotel.status.slice(1)}\n                </Badge>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Room Types Section */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Room Types</CardTitle>\n              <Button\n                onClick={() => setShowAddDialog(true)}\n                size=\"sm\"\n              >\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Add Room Type\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {hotel.roomTypes.length > 0 ? (\n              <div className=\"grid grid-cols-1 gap-4\">\n                {hotel.roomTypes.map((roomType) => (\n                  <Card key={roomType.id} className=\"border-l-4 border-l-blue-500\">\n                    <CardHeader className=\"pb-2\">\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <CardTitle className=\"text-lg\">{roomType.name}</CardTitle>\n                          <p className=\"text-sm text-muted-foreground mt-1\">\n                            {roomType.configuration}  {roomType.mealPlan}\n                          </p>\n                        </div>\n                        <Badge variant={roomType.status === 'active' ? 'default' : 'secondary'}>\n                          {roomType.status}\n                        </Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                        <div>\n                          <p className=\"text-sm font-medium\">Capacity</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {roomType.capacity.adults} Adults, {roomType.capacity.children} Children\n                          </p>\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium\">Adult Price</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {currencySymbol}{roomType.adultPrice}/night\n                          </p>\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium\">Child Price</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {currencySymbol}{roomType.childPrice}/night\n                          </p>\n                        </div>\n                        <div>\n                          <p className=\"text-sm font-medium\">Extra Bed</p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {currencySymbol}{roomType.extraBedPrice}/night\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"mt-4 flex justify-end gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEditRoomType(roomType)}\n                        >\n                          Edit\n                        </Button>\n                        <Button\n                          variant=\"destructive\"\n                          size=\"sm\"\n                          onClick={() => handleDeleteRoomType(roomType.id)}\n                        >\n                          Delete\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-12 border rounded-md bg-muted/20\">\n                <Users className=\"mx-auto h-12 w-12 text-muted-foreground mb-4\" />\n                <h3 className=\"text-lg font-medium mb-2\">No Room Types Added</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Add room types to make this hotel available for booking\n                </p>\n                <Button onClick={() => setShowAddDialog(true)}>\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add First Room Type\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Add/Edit Room Type Dialog */}\n        <AddRoomTypeDialog\n          open={showAddDialog}\n          onOpenChange={setShowAddDialog}\n          onSave={editingRoomType ? handleUpdateRoomType : handleAddRoomType}\n          hotelCurrency={hotel.currency || 'USD'}\n          currencySymbol={currencySymbol}\n          initialData={editingRoomType}\n          mode={editingRoomType ? 'edit' : 'add'}\n        />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddRoomTypePage;\n","\nimport React, { useEffect } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport HotelForm from '@/components/inventory/hotels/forms/HotelForm';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Form } from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\n\nconst EditHotel: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const { hotels, loading, updateHotel } = useSupabaseHotelsData();\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  \n  // Setup form with react-hook-form\n  const form = useForm();\n  \n  console.log('EditHotel component loaded with ID:', id);\n  console.log('Hotels data:', hotels);\n  console.log('Loading state:', loading);\n  \n  // Find the hotel being edited\n  const hotel = hotels.find(h => h.id === id);\n  \n  console.log('Found hotel:', hotel);\n  \n  const handleSubmit = async (data: any) => {\n    if (!id) {\n      toast({\n        title: 'Error',\n        description: 'Hotel ID is missing.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    try {\n      console.log('Submitting hotel update for ID:', id, 'with data:', data);\n      \n      // Update the hotel using the useHotelsData hook\n      const updatedHotel = updateHotel(id, data);\n      \n      if (updatedHotel) {\n        // Only show toast for manual saves (not auto-saves)\n        if (!data.isAutoSave) {\n          toast({\n            title: 'Success',\n            description: `${data.name || 'Hotel'} has been updated successfully!`,\n          });\n          \n          // Navigate back to hotel details page only for manual saves\n          navigate(`/inventory/hotels/${id}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error updating hotel:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update hotel. Please try again.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(`/inventory/hotels/${id}`);\n  };\n\n  // Check if hotel exists when loading is complete\n  useEffect(() => {\n    if (!loading && hotels.length > 0 && !hotel) {\n      toast({\n        title: 'Error',\n        description: 'Hotel not found.',\n        variant: 'destructive',\n      });\n      navigate('/inventory/hotels');\n    }\n  }, [loading, hotels, hotel, navigate, toast]);\n  \n  if (loading) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto mb-4\"></div>\n              <p className=\"text-muted-foreground\">Loading hotel data...</p>\n            </div>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  if (!hotel) {\n    return (\n      <PageLayout>\n        <div className=\"container py-6\">\n          <div className=\"flex flex-col items-center justify-center min-h-[50vh]\">\n            <h1 className=\"text-2xl font-bold mb-4\">Hotel Not Found</h1>\n            <p className=\"text-gray-500 mb-6\">The hotel you are trying to edit could not be found.</p>\n            <div className=\"flex gap-4\">\n              <Button asChild variant=\"outline\">\n                <Link to=\"/inventory/hotels\">\n                  <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                  Back to Hotels\n                </Link>\n              </Button>\n            </div>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button asChild variant=\"ghost\" size=\"sm\">\n            <Link to={`/inventory/hotels/${id}`}>\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Hotel Details\n            </Link>\n          </Button>\n          <h1 className=\"text-2xl font-bold ml-4\">Edit Hotel: {hotel.name}</h1>\n        </div>\n        \n        <Form {...form}>\n          <HotelForm hotel={hotel} onSubmit={handleSubmit} onCancel={handleCancel} />\n        </Form>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default EditHotel;\n","import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from '@/components/ui/tabs';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { formatCurrency } from '@/lib/utils';\nimport { hotelAmenities } from '@/components/inventory/hotels/data/hotelData';\nimport { \n  Star, \n  MapPin, \n  Calendar, \n  Edit, \n  ArrowLeft,\n  Globe,\n  Clock,\n  Check,\n  Plus,\n  Grid3X3,\n  List,\n  Filter\n} from 'lucide-react';\nimport HotelDeleteDialog from '@/components/inventory/hotels/dialogs/HotelDeleteDialog';\nimport RoomTypesListView from '@/components/inventory/hotels/RoomTypesListView';\nimport RoomTypesGridView from '@/components/inventory/hotels/RoomTypesGridView';\n  import RoomTypesPagination from '@/components/inventory/hotels/RoomTypesPagination';\n  import { useToast } from '@/hooks/use-toast';\n  import type { HotelAmenity } from '@/components/inventory/hotels/types/hotel';\n\nconst ViewHotel: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { hotels, loading, updateHotel, updateRoomTypeStatus } = useSupabaseHotelsData();\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  const [roomViewMode, setRoomViewMode] = useState<'grid' | 'list'>('grid');\n  const [roomsCurrentPage, setRoomsCurrentPage] = useState(1);\n  const [roomsPerPage, setRoomsPerPage] = useState(6);\n  const [roomStatusFilter, setRoomStatusFilter] = useState<'all' | 'active' | 'inactive' | 'draft'>('all');\n  const { toast } = useToast();\n  \n  // Extract hotel ID from URL params or path\n  const hotelId = id;\n  \n  console.log('ViewHotel component loaded');\n  console.log('Hotel ID from params:', hotelId);\n  console.log('Hotels data:', hotels);\n  console.log('Loading state:', loading);\n  \n  // Find the hotel\n  const hotel = hotels.find(h => h.id === hotelId);\n  \n  console.log('Found hotel:', hotel);\n  \n  // Set primary image as default selected image\n  useEffect(() => {\n    if (hotel) {\n      const primaryImage = hotel.images.find(img => img.isPrimary);\n      setSelectedImage(primaryImage?.url || hotel.images[0]?.url || null);\n    }\n  }, [hotel]);\n  \n  // Get amenity names\n  const getAmenityNames = (amenityIds: string[]) => {\n    return amenityIds.map(id => {\n      const amenity = hotelAmenities.find(a => a.id === id);\n      return amenity ? amenity.name : id;\n    });\n  };\n\n  // Status badge color mapping\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active':\n        return 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400';\n      case 'inactive':\n        return 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400';\n      case 'draft':\n        return 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400';\n      default:\n        return 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400';\n    }\n  };\n  \n  // Group amenities by category\n  const amenitiesByCategory = React.useMemo<Record<string, HotelAmenity[]>>(() => {\n    if (!hotel) return {} as Record<string, HotelAmenity[]>;\n    \n    return hotel.amenities.reduce((acc, amenityId) => {\n      const amenity = hotelAmenities.find(a => a.id === amenityId);\n      if (amenity) {\n        if (!acc[amenity.category]) {\n          acc[amenity.category] = [];\n        }\n        acc[amenity.category].push(amenity);\n      }\n      return acc;\n    }, {} as Record<string, HotelAmenity[]>);\n  }, [hotel]);\n\n  // Filter and paginate room types\n  const filteredRooms = React.useMemo(() => {\n    if (!hotel) return [];\n    \n    let filtered = hotel.roomTypes;\n    \n    if (roomStatusFilter !== 'all') {\n      filtered = filtered.filter(room => room.status === roomStatusFilter);\n    }\n    \n    return filtered;\n  }, [hotel, roomStatusFilter]);\n\n  const totalRoomPages = Math.ceil(filteredRooms.length / roomsPerPage);\n  const startIndex = (roomsCurrentPage - 1) * roomsPerPage;\n  const endIndex = startIndex + roomsPerPage;\n  const paginatedRooms = filteredRooms.slice(startIndex, endIndex);\n\n  // Handle room status update\n  const handleRoomStatusUpdate = async (roomId: string, newStatus: 'active' | 'inactive') => {\n    try {\n      await updateRoomTypeStatus(roomId, newStatus);\n      toast({\n        title: 'Status Updated',\n        description: `Room type status updated to ${newStatus}`,\n      });\n    } catch (err) {\n      toast({\n        title: 'Update Failed',\n        description: 'Could not update room type status',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  // Handle room deletion\n  const handleRoomDelete = (roomId: string) => {\n    if (!hotel) return;\n    \n    const updatedRoomTypes = hotel.roomTypes.filter(room => room.id !== roomId);\n    \n    const updatedHotel = {\n      ...hotel,\n      roomTypes: updatedRoomTypes,\n      updatedAt: new Date().toISOString()\n    };\n    \n    updateHotel(hotel.id, updatedHotel);\n    \n    toast({\n      title: \"Room Deleted\",\n      description: \"Room type has been deleted successfully\",\n      variant: \"destructive\",\n    });\n  };\n\n  // Handle pagination\n  const handleRoomsPageChange = (page: number) => {\n    setRoomsCurrentPage(page);\n  };\n\n  const handleRoomsPerPageChange = (perPage: number) => {\n    setRoomsPerPage(perPage);\n    setRoomsCurrentPage(1);\n  };\n  \n  if (loading) {\n    return (\n      <PageLayout>\n        <div className=\"container py-8\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto mb-4\"></div>\n              <p className=\"text-muted-foreground\">Loading hotel data...</p>\n            </div>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  if (!hotel) {\n    return (\n      <PageLayout>\n        <div className=\"container py-8\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-bold mb-4\">Hotel Not Found</h2>\n            <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n              The hotel you're looking for (ID: {hotelId}) doesn't exist or has been removed.\n            </p>\n            <Button onClick={() => navigate('/inventory/hotels')}>\n              Return to Hotels\n            </Button>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n\n  // Format price with the hotel's own currency\n  const formatHotelCurrency = (amount: number) => {\n    return formatCurrency(amount, hotel.currency || 'THB');\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"container py-6\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-6\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => navigate('/inventory/hotels')}\n              className=\"mb-4 md:mb-0\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Hotels\n            </Button>\n            <Badge className={getStatusColor(hotel.status)}>\n              {hotel.status.charAt(0).toUpperCase() + hotel.status.slice(1)}\n            </Badge>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              asChild\n            >\n              <Link \n                to={`/inventory/hotels/${hotel.id}/edit`}\n                onClick={() => console.log('Edit Hotel link clicked, navigating to:', `/inventory/hotels/${hotel.id}/edit`)}\n              >\n                <Edit className=\"mr-2 h-4 w-4\" />\n                Edit Hotel\n              </Link>\n            </Button>\n            <Button\n              variant=\"destructive\"\n              size=\"sm\"\n              onClick={() => setShowDeleteDialog(true)}\n            >\n              Delete Hotel\n            </Button>\n          </div>\n        </div>\n\n        {/* Hotel Title */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-bold\">{hotel.name}</h1>\n          <div className=\"flex flex-wrap items-center gap-4 mt-2\">\n            <div className=\"flex items-center\">\n              <div className=\"flex\">\n                {Array.from({ length: hotel.starRating }).map((_, index) => (\n                  <Star key={index} className=\"h-5 w-5 text-yellow-400 fill-current\" />\n                ))}\n              </div>\n              <span className=\"ml-2 text-gray-500 dark:text-gray-400\">\n                {hotel.category}\n              </span>\n            </div>\n            <div className=\"flex items-center\">\n              <MapPin className=\"h-4 w-4 mr-1 text-gray-500 dark:text-gray-400\" />\n              <span>\n                {hotel.location}, {hotel.city}, {hotel.country}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <Tabs defaultValue=\"overview\" value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"mb-6\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"rooms\">Room Types</TabsTrigger>\n            <TabsTrigger value=\"amenities\">Amenities</TabsTrigger>\n            <TabsTrigger value=\"images\">Gallery</TabsTrigger>\n          </TabsList>\n\n          {/* Overview Tab */}\n          <TabsContent value=\"overview\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"md:col-span-2\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Basic Information</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Address</h3>\n                        <p className=\"mt-1\">\n                          {hotel.address.street}, {hotel.address.city}, {hotel.address.state}{\" \"}\n                          {hotel.address.zipCode}, {hotel.address.country}\n                        </p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Category</h3>\n                        <p className=\"mt-1\">{hotel.category}</p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Check-in / Check-out</h3>\n                        <p className=\"mt-1\">{hotel.checkInTime} / {hotel.checkOutTime}</p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Google Maps</h3>\n                        <a\n                          href={hotel.googleMapLink}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"mt-1 text-blue-600 dark:text-blue-400 hover:underline flex items-center\"\n                        >\n                          <Globe className=\"h-4 w-4 mr-1\" />\n                          View on Google Maps\n                        </a>\n                      </div>\n                      <div className=\"md:col-span-2\">\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Description</h3>\n                        <p className=\"mt-1\">{hotel.description}</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"mt-6\">\n                  <CardHeader>\n                    <CardTitle>Location</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Latitude</h3>\n                        <p className=\"mt-1\">{hotel.latitude}</p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Longitude</h3>\n                        <p className=\"mt-1\">{hotel.longitude}</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <div>\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Quick Information</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Room Types</h3>\n                        <p className=\"mt-1\">{hotel.roomTypes.length} types available</p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Starting Price</h3>\n                        <p className=\"mt-1 text-lg font-semibold\">\n                          {formatHotelCurrency(\n                            Math.min(...hotel.roomTypes.map(room => room.adultPrice))\n                          )}\n                          <span className=\"text-sm font-normal text-gray-500 dark:text-gray-400\"> / night</span>\n                        </p>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Check-in Time</h3>\n                        <div className=\"flex items-center mt-1\">\n                          <Clock className=\"h-4 w-4 mr-2 text-gray-500 dark:text-gray-400\" />\n                          <span>{hotel.checkInTime}</span>\n                        </div>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Check-out Time</h3>\n                        <div className=\"flex items-center mt-1\">\n                          <Clock className=\"h-4 w-4 mr-2 text-gray-500 dark:text-gray-400\" />\n                          <span>{hotel.checkOutTime}</span>\n                        </div>\n                      </div>\n                      <div>\n                        <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">Popular Amenities</h3>\n                        <div className=\"mt-1 space-y-1\">\n                          {getAmenityNames(hotel.amenities.slice(0, 5)).map((amenity, index) => (\n                            <div key={index} className=\"flex items-center\">\n                              <Check className=\"h-4 w-4 mr-2 text-green-500 dark:text-green-400\" />\n                              <span>{amenity}</span>\n                            </div>\n                          ))}\n                          {hotel.amenities.length > 5 && (\n                            <div className=\"text-blue-600 dark:text-blue-400 cursor-pointer\" onClick={() => setActiveTab('amenities')}>\n                              + {hotel.amenities.length - 5} more amenities\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <div className=\"mt-6\">\n                  <Button \n                    className=\"w-full\"\n                    onClick={() => setActiveTab('rooms')}\n                  >\n                    View Room Types\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n\n          {/* Room Types Tab */}\n          <TabsContent value=\"rooms\">\n            <div className=\"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <div className=\"flex items-center gap-4\">\n                <h2 className=\"text-xl font-bold\">Room Types</h2>\n                <div className=\"flex items-center gap-2\">\n                  <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                  <select \n                    value={roomStatusFilter}\n                    onChange={(e) => setRoomStatusFilter(e.target.value as any)}\n                    className=\"border border-input rounded-md px-3 py-2 text-sm\"\n                  >\n                    <option value=\"all\">All Status</option>\n                    <option value=\"active\">Active</option>\n                    <option value=\"inactive\">Inactive</option>\n                    <option value=\"draft\">Draft</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex items-center border rounded-md\">\n                  <Button\n                    variant={roomViewMode === 'grid' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    onClick={() => setRoomViewMode('grid')}\n                    className=\"rounded-r-none\"\n                  >\n                    <Grid3X3 className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant={roomViewMode === 'list' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    onClick={() => setRoomViewMode('list')}\n                    className=\"rounded-l-none\"\n                  >\n                    <List className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <Button \n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                  asChild\n                >\n                  <Link to={`/inventory/hotels/add-room-type/${hotel.id}`}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add New Room Type\n                  </Link>\n                </Button>\n              </div>\n            </div>\n\n            {filteredRooms.length > 0 ? (\n              <div className=\"space-y-4\">\n                {roomViewMode === 'grid' ? (\n                  <RoomTypesGridView\n                    roomTypes={paginatedRooms}\n                    hotelId={hotel.id}\n                    currency={hotel.currency || 'THB'}\n                    currencySymbol={hotel.currency_symbol || '$'}\n                    onStatusUpdate={handleRoomStatusUpdate}\n                    onDelete={handleRoomDelete}\n                  />\n                ) : (\n                  <RoomTypesListView\n                    roomTypes={paginatedRooms}\n                    hotelId={hotel.id}\n                    currency={hotel.currency || 'THB'}\n                    currencySymbol={hotel.currency_symbol || '$'}\n                    onStatusUpdate={handleRoomStatusUpdate}\n                    onDelete={handleRoomDelete}\n                  />\n                )}\n                \n                {totalRoomPages > 1 && (\n                  <RoomTypesPagination\n                    currentPage={roomsCurrentPage}\n                    totalPages={totalRoomPages}\n                    totalItems={filteredRooms.length}\n                    itemsPerPage={roomsPerPage}\n                    onPageChange={handleRoomsPageChange}\n                    onItemsPerPageChange={handleRoomsPerPageChange}\n                  />\n                )}\n              </div>\n            ) : (\n              <div className=\"text-center py-12 border rounded-md bg-gray-50 dark:bg-gray-800\">\n                <h3 className=\"text-lg font-medium mb-2\">\n                  {roomStatusFilter === 'all' ? 'No Room Types Added' : `No ${roomStatusFilter} Room Types`}\n                </h3>\n                <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\n                  {roomStatusFilter === 'all' \n                    ? 'Add room types to make this hotel available for booking'\n                    : `No room types found with ${roomStatusFilter} status`\n                  }\n                </p>\n                <Button \n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                  asChild\n                >\n                  <Link to={`/inventory/hotels/add-room-type/${hotel.id}`}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add First Room Type\n                  </Link>\n                </Button>\n              </div>\n            )}\n          </TabsContent>\n\n          {/* Amenities Tab */}\n          <TabsContent value=\"amenities\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Hotel Amenities</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  {Object.entries(amenitiesByCategory).map(([category, amenities]) => (\n                    <div key={category} className=\"space-y-2\">\n                      <h3 className=\"font-medium capitalize\">{category} Amenities</h3>\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2\">\n                        {amenities.map((amenity) => (\n                          <div key={amenity.id} className=\"flex items-center gap-2\">\n                            <Check className=\"h-4 w-4 text-green-500 dark:text-green-400\" />\n                            <span>{amenity.name}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Images Tab */}\n          <TabsContent value=\"images\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"md:col-span-2\">\n                <div className=\"aspect-square w-full bg-gray-100 dark:bg-gray-800 rounded-md overflow-hidden\">\n                  {selectedImage && (\n                    <img \n                      src={selectedImage} \n                      alt={hotel.name} \n                      className=\"w-full h-full object-cover\"\n                    />\n                  )}\n                </div>\n              </div>\n              <div>\n                <h3 className=\"text-lg font-medium mb-4\">Hotel Images</h3>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {hotel.images.map((image) => (\n                    <div \n                      key={image.id}\n                      className={`\n                        aspect-square rounded-md overflow-hidden cursor-pointer\n                        ${selectedImage === image.url ? 'ring-2 ring-blue-500' :  'hover:opacity-90 transition-opacity'}\n                      `}\n                      onClick={() => setSelectedImage(image.url)}\n                    >\n                      <img \n                        src={image.url} \n                        alt={hotel.name} \n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {/* Delete Dialog */}\n      {showDeleteDialog && (\n        <HotelDeleteDialog\n          hotel={hotel}\n          open={showDeleteDialog}\n          onClose={() => setShowDeleteDialog(false)}\n        />\n      )}\n    </PageLayout>\n  );\n};\n\nexport default ViewHotel;\n","import { useState, ChangeEvent, MouseEvent, useEffect } from 'react';\nimport { TransportRoute, LocationCode, TransportRouteType, Stop, SightseeingOption, RouteSegment } from '../types/transportTypes';\nimport { z } from 'zod';\nimport { useToast } from '@/hooks/use-toast';\nimport { integratedTransportService, type CreateTransportRoutePayload, type UpdateTransportRoutePayload } from '@/services/integratedTransportService';\n\n// Create Zod schema for validation\n  const routeFormSchema = z.object({\n    country: z.string().min(1, { message: 'Country is required' }).max(100, { message: 'Country name too long' }),\n    name: z.string()\n      .min(2, { message: 'Route name must be at least 2 characters' })\n      .max(200, { message: 'Route name must be less than 200 characters' })\n      .regex(/^[a-zA-Z0-9\\s\\-_()]+$/, { message: 'Route name contains invalid characters' }),\n    transferType: z.enum(['One-Way', 'Round-Trip', 'Multi-Stop', 'en route'], {\n      errorMap: () => ({ message: 'Please select a valid transfer type' })\n    }),\n  startLocation: z.string().min(1, { message: 'Start location is required' }),\n  endLocation: z.string().min(1, { message: 'End location is required' }),\n  intermediateStops: z.array(z.object({\n    id: z.string().min(1, { message: 'Stop ID is required' }),\n    locationCode: z.string().min(1, { message: 'Location code is required' }),\n    // Allow missing or empty fullName; backend resolves from locationCode\n    fullName: z.preprocess(\n      (val) => typeof val === 'string' && val.trim() === '' ? undefined : val,\n      z.string().min(1, { message: 'Location name is required' }).optional()\n    )\n  })).optional(),\n  transportTypes: z.array(z.object({\n    id: z.string().min(1, { message: 'Transport type ID is required' }),\n    type: z.string().min(1, { message: 'Transport type is required' }),\n    seatingCapacity: z.number()\n      .min(1, { message: 'Seating capacity must be at least 1' })\n      .max(1000, { message: 'Seating capacity cannot exceed 1000' }),\n    luggageCapacity: z.number()\n      .min(0, { message: 'Luggage capacity cannot be negative' })\n      .max(1000, { message: 'Luggage capacity cannot exceed 1000' }),\n    duration: z.string()\n      .min(1, { message: 'Duration is required' })\n      .regex(/^(\\d+h|\\d+m|\\d+h\\s*\\d+m|\\d+:\\d+)$/i, { message: 'Duration format is invalid (e.g., 1h, 30m, 1h 30m)' }),\n    price: z.number()\n      .min(0, { message: 'Price cannot be negative' })\n      .max(999999, { message: 'Price cannot exceed 999,999' })\n  })).min(1, { message: 'At least one transport type is required' }),\n  enableSightseeing: z.boolean().default(false),\n  sightseeingOptions: z.array(z.object({\n    id: z.string().min(1, { message: 'Sightseeing option ID is required' }),\n    location: z.string().min(1, { message: 'Sightseeing location is required' }),\n    adultPrice: z.number()\n      .min(0, { message: 'Adult price cannot be negative' })\n      .max(99999, { message: 'Adult price cannot exceed 99,999' }),\n    childPrice: z.number()\n      .min(0, { message: 'Child price cannot be negative' })\n      .max(99999, { message: 'Child price cannot exceed 99,999' }),\n    additionalCharges: z.number()\n      .min(0, { message: 'Additional charges cannot be negative' })\n      .max(99999, { message: 'Additional charges cannot exceed 99,999' }),\n    description: z.string().max(500, { message: 'Description must be less than 500 characters' }).optional()\n  })).optional(),\n  status: z.enum(['active', 'inactive'], {\n    errorMap: () => ({ message: 'Status must be either active or inactive' })\n  }).default('active')\n}).refine((data) => data.startLocation !== data.endLocation, {\n  message: \"Start and end locations cannot be the same\",\n  path: [\"endLocation\"]\n}).refine((data) => {\n  if (!data.intermediateStops || data.intermediateStops.length === 0) return true;\n  const allLocations = [data.startLocation, data.endLocation];\n  const duplicates = data.intermediateStops.some(stop => allLocations.includes(stop.locationCode));\n  return !duplicates;\n}, {\n  message: \"Intermediate stops cannot duplicate start or end locations\",\n  path: [\"intermediateStops\"]\n}).refine((data) => {\n  if (!data.enableSightseeing) return true;\n  return data.sightseeingOptions && data.sightseeingOptions.length > 0;\n}, {\n  message: \"At least one sightseeing option is required when sightseeing is enabled\",\n  path: [\"sightseeingOptions\"]\n});\n\ntype RouteFormValues = z.infer<typeof routeFormSchema>;\n\ninterface UseRouteActionsProps {\n  routes: TransportRoute[];\n  setRoutes: React.Dispatch<React.SetStateAction<TransportRoute[]>>;\n  locations: LocationCode[];\n  setSelectedRoute: React.Dispatch<React.SetStateAction<TransportRoute | null>>;\n  setViewRouteDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setEditRouteDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setDeleteRouteDialogOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setAddRouteDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  viewRouteDrawerOpen: boolean;\n  editRouteDrawerOpen: boolean;\n  deleteRouteDialogOpen: boolean;\n  addRouteDrawerOpen: boolean;\n  selectedRoute: TransportRoute | null;\n}\n\nexport const useRouteActions = ({\n  routes,\n  setRoutes,\n  locations,\n  setSelectedRoute,\n  setViewRouteDrawerOpen,\n  setEditRouteDrawerOpen,\n  setDeleteRouteDialogOpen,\n  setAddRouteDrawerOpen,\n  viewRouteDrawerOpen,\n  editRouteDrawerOpen,\n  deleteRouteDialogOpen,\n  addRouteDrawerOpen,\n  selectedRoute\n}: UseRouteActionsProps) => {\n  const { toast } = useToast();\n  \n  // Default transport types for new routes\n  const defaultTransportTypes = [\n    { \n      id: '1', \n      type: 'Sedan', \n      seatingCapacity: 4, \n      luggageCapacity: 3, \n      duration: '1h',\n      price: 500 \n    },\n    { \n      id: '2', \n      type: 'SUV', \n      seatingCapacity: 6, \n      luggageCapacity: 5, \n      duration: '1h',\n      price: 700 \n    },\n    { \n      id: '3', \n      type: 'Van', \n      seatingCapacity: 10, \n      luggageCapacity: 10, \n      duration: '1h',\n      price: 900 \n    },\n    { \n      id: '4', \n      type: 'Ferry', \n      seatingCapacity: 100, \n      luggageCapacity: 50, \n      duration: '2h',\n      price: 300 \n    }\n  ];\n  \n  // New route data\n  const [newRouteData, setNewRouteData] = useState<Partial<TransportRoute>>({\n    country: 'Thailand',\n    transferType: 'One-Way',\n    transportTypes: defaultTransportTypes,\n    enableSightseeing: false,\n    status: 'active' as const,\n    intermediateStops: [],\n    sightseeingOptions: [],\n    description: ''\n  });\n  \n  // Edit route data\n  const [editRouteData, setEditRouteData] = useState<TransportRoute | null>(null);\n  \n  // Extract short code from location code\n  const extractShortCode = (code: string) => {\n    if (!code) return '';\n    return code.split(' ')[0];\n  };\n  \n  // Get location type description (APT, HTL, etc)\n  const getLocationTypeDescription = (locationCode: string) => {\n    const location = locations.find(loc => loc.code === locationCode);\n    if (!location) return '';\n    \n    switch (location.category) {\n      case 'airport': return 'APT';\n      case 'hotel': return 'HTL';\n      case 'pier': return 'PIER';\n      default: return location.category.slice(0, 3).toUpperCase();\n    }\n  };\n  \n  // Generate route code segments for each leg of the journey\n  const generateRouteCodeSegments = (\n    startLocation: string | undefined, \n    intermediateStops: Stop[] | undefined, \n    endLocation: string | undefined\n  ) => {\n    const allStops = [\n      startLocation,\n      ...(intermediateStops?.map(stop => stop.locationCode) || []),\n      endLocation\n    ].filter(Boolean) as string[];\n    \n    if (allStops.length < 2) return [];\n    \n    const segments: string[] = [];\n    \n    // Generate code for each route segment\n    for (let i = 0; i < allStops.length - 1; i++) {\n      const fromCode = extractShortCode(allStops[i]);\n      const fromType = getLocationTypeDescription(allStops[i]);\n      \n      const toCode = extractShortCode(allStops[i + 1]);\n      const toType = getLocationTypeDescription(allStops[i + 1]);\n      \n      segments.push(`${fromCode} ${fromType}  ${toCode} ${toType}`);\n    }\n    \n    return segments;\n  };\n  \n  // Generate the full route code with all stops\n  const generateCompleteRouteCode = (\n    startLocation: string | undefined, \n    intermediateStops: Stop[] | undefined, \n    endLocation: string | undefined\n  ) => {\n    const allStops = [\n      startLocation,\n      ...(intermediateStops?.map(stop => stop.locationCode) || []),\n      endLocation\n    ].filter(Boolean) as string[];\n    \n    if (allStops.length < 2) return '';\n    \n    const routeParts = allStops.map((locationCode, index) => {\n      const shortCode = extractShortCode(locationCode);\n      const locationType = getLocationTypeDescription(locationCode);\n      return `${shortCode} ${locationType}${index < allStops.length - 1 ? ' - ' : ''}`;\n    });\n    \n    return routeParts.join('');\n  };\n  \n  // Auto-generate route code and name when locations change for new routes\n  useEffect(() => {\n    if (newRouteData.startLocation && newRouteData.endLocation) {\n      const startLocation = locations.find(loc => loc.code === newRouteData.startLocation);\n      const endLocation = locations.find(loc => loc.code === newRouteData.endLocation);\n      \n      if (startLocation && endLocation) {\n        // Generate route name\n        let generatedName: string;\n        \n        if (newRouteData.transferType === 'Multi-Stop' || newRouteData.transferType === 'en route') {\n          const intermediateNames = newRouteData.intermediateStops?.map(stop => {\n            const loc = locations.find(l => l.code === stop.locationCode);\n            return loc ? loc.fullName : '';\n          }).filter(Boolean);\n          \n          if (intermediateNames && intermediateNames.length > 0) {\n            generatedName = `${startLocation.fullName}  ${intermediateNames.join('  ')}  ${endLocation.fullName}`;\n          } else {\n            generatedName = `${startLocation.fullName}  ${endLocation.fullName}`;\n          }\n        } else {\n          generatedName = `${startLocation.fullName}  ${endLocation.fullName}`;\n        }\n        \n        // Generate route code\n        const routeCode = generateCompleteRouteCode(\n          newRouteData.startLocation, \n          newRouteData.intermediateStops, \n          newRouteData.endLocation\n        );\n        \n        // Update the new route data\n        setNewRouteData(prev => ({\n          ...prev,\n          code: routeCode,\n          name: generatedName\n        }));\n      }\n    }\n  }, [newRouteData.startLocation, newRouteData.endLocation, newRouteData.intermediateStops, newRouteData.transferType, locations]);\n  \n  // Auto-generate route code and name when locations change for edited routes\n  useEffect(() => {\n    if (editRouteData?.startLocation && editRouteData?.endLocation) {\n      const startLocation = locations.find(loc => loc.code === editRouteData.startLocation);\n      const endLocation = locations.find(loc => loc.code === editRouteData.endLocation);\n      \n      if (startLocation && endLocation) {\n        // Generate route name\n        let generatedName: string;\n        \n        if (editRouteData.transferType === 'Multi-Stop' || editRouteData.transferType === 'en route') {\n          const intermediateNames = editRouteData.intermediateStops?.map(stop => {\n            const loc = locations.find(l => l.code === stop.locationCode);\n            return loc ? loc.fullName : '';\n          }).filter(Boolean);\n          \n          if (intermediateNames && intermediateNames.length > 0) {\n            generatedName = `${startLocation.fullName}  ${intermediateNames.join('  ')}  ${endLocation.fullName}`;\n          } else {\n            generatedName = `${startLocation.fullName}  ${endLocation.fullName}`;\n          }\n        } else {\n          generatedName = `${startLocation.fullName}  ${endLocation.fullName}`;\n        }\n        \n        // Generate route code\n        const routeCode = generateCompleteRouteCode(\n          editRouteData.startLocation, \n          editRouteData.intermediateStops, \n          editRouteData.endLocation\n        );\n        \n        // Update the edit route data\n        setEditRouteData(prev => {\n          if (prev) {\n            return {\n              ...prev,\n              code: routeCode,\n              name: generatedName\n            };\n          }\n          return prev;\n        });\n      }\n    }\n  }, [\n    editRouteData?.startLocation, \n    editRouteData?.endLocation, \n    editRouteData?.intermediateStops, \n    editRouteData?.transferType, \n    locations\n  ]);\n  \n  // Handlers for route actions\n  const handleViewRoute = (route: TransportRoute) => {\n    setSelectedRoute(route);\n    setViewRouteDrawerOpen(true);\n  };\n  \n  const handleEditRoute = (route: TransportRoute) => {\n    setSelectedRoute(route);\n    // Create a deep copy to ensure we don't mutate the original object\n    const routeCopy = JSON.parse(JSON.stringify(route));\n    \n    // Ensure sightseeingOptions is an array if it exists\n    if (routeCopy.sightseeingOptions && !Array.isArray(routeCopy.sightseeingOptions)) {\n      routeCopy.sightseeingOptions = [{ ...routeCopy.sightseeingOptions, id: Date.now().toString() }];\n    } else if (!routeCopy.sightseeingOptions) {\n      routeCopy.sightseeingOptions = [];\n    }\n    \n    setEditRouteData(routeCopy);\n    setEditRouteDrawerOpen(true);\n  };\n  \n  const handleDeleteRoute = (route: TransportRoute) => {\n    setSelectedRoute(route);\n    setDeleteRouteDialogOpen(true);\n  };\n  \n  const handleConfirmDelete = async () => {\n    if (selectedRoute) {\n      try {\n        // Attempt remote delete only if the ID looks like a UUID\n        const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(selectedRoute.id);\n        if (isUUID) {\n          const result = await integratedTransportService.deleteTransportRoute(selectedRoute.id);\n          if (!result.success) {\n            throw new Error(result.error || 'Failed to delete route');\n          }\n        }\n\n        const updatedRoutes = routes.filter(route => route.id !== selectedRoute.id);\n        setRoutes(updatedRoutes);\n        setDeleteRouteDialogOpen(false);\n        toast({\n          title: \"Route Deleted\",\n          description: `${selectedRoute.name} has been deleted successfully.`,\n        });\n      } catch (error) {\n        console.error('Failed to delete route remotely:', error);\n        toast({ \n          title: 'Error', \n          description: error instanceof Error ? error.message : 'Failed to delete route', \n          variant: 'destructive' \n        });\n      }\n    }\n  };\n  \n  const handleAddRoute = () => {\n    // Reset the form data to defaults before opening\n    resetNewRouteForm();\n    setAddRouteDrawerOpen(true);\n  };\n  \n  const handleToggleStatus = (routeId: string) => {\n    const updatedRoutes = routes.map(route => \n      route.id === routeId ? { \n        ...route, \n        status: route.status === 'active' ? ('inactive' as const) : ('active' as const)\n      } : route\n    );\n    setRoutes(updatedRoutes);\n    toast({\n      title: \"Status Updated\",\n      description: \"Route status has been updated successfully.\",\n    });\n  };\n  \n  // Handlers for form inputs\n  const handleNewRouteInputChange = (field: string, value: any) => {\n    setNewRouteData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  \n  const handleEditRouteInputChange = (field: string, value: any) => {\n    if (editRouteData) {\n      setEditRouteData({\n        ...editRouteData,\n        [field]: value\n      });\n    }\n  };\n  \n  // Add stop to route\n  const handleAddStop = (e: MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    \n    if (editRouteDrawerOpen && editRouteData) {\n      // Add stop to edit route data\n      setEditRouteData(prev => ({\n        ...prev,\n        intermediateStops: [\n          ...(prev?.intermediateStops || []),\n          { id: Date.now().toString(), locationCode: '', fullName: '' }\n        ]\n      }));\n    } else {\n      // Add stop to new route data\n      setNewRouteData(prev => ({\n        ...prev,\n        intermediateStops: [\n          ...(prev.intermediateStops || []),\n          { id: Date.now().toString(), locationCode: '', fullName: '' }\n        ]\n      }));\n    }\n  };\n  \n  // Remove stop from route\n  const handleRemoveStop = async (stopId: string) => {\n    if (editRouteDrawerOpen && editRouteData) {\n      // Local-only change; persisted on save\n      // Remove stop from edit route data\n      setEditRouteData(prev => ({\n        ...prev,\n        intermediateStops: prev?.intermediateStops?.filter(stop => stop.id !== stopId) || []\n      }));\n    } else {\n      // Remove stop from new route data\n      setNewRouteData(prev => ({\n        ...prev,\n        intermediateStops: prev.intermediateStops?.filter(stop => stop.id !== stopId) || []\n      }));\n    }\n  };\n  \n  // Update stop data\n  const handleStopChange = async (stopId: string, locationCode: string) => {\n    const location = locations.find(loc => loc.code === locationCode);\n    \n    if (location) {\n      if (editRouteDrawerOpen && editRouteData) {\n        // Local-only change; persisted on save\n        // Update stop in edit route data\n        setEditRouteData(prev => ({\n          ...prev,\n          intermediateStops: prev?.intermediateStops?.map(stop => \n            stop.id === stopId \n              ? { id: stop.id, locationCode: location.code, fullName: location.fullName }\n              : stop\n          ) || []\n        }));\n      } else {\n        // Update stop in new route data\n        setNewRouteData(prev => ({\n          ...prev,\n          intermediateStops: prev.intermediateStops?.map(stop => \n            stop.id === stopId \n              ? { id: stop.id, locationCode: location.code, fullName: location.fullName }\n              : stop\n          ) || []\n        }));\n      }\n    }\n  };\n\n  // Reorder intermediate stops (local-only; persisted on save)\n  const handleReorderStops = async (_routeId: string, stopIds: string[]) => {\n    const reorder = (stops: Stop[] | undefined) => {\n      if (!stops) return [] as Stop[];\n      const stopMap = new Map(stops.map(s => [s.id, s] as const));\n      return stopIds.map((id, idx) => {\n        const s = stopMap.get(id);\n        return s ? { ...s } : { id, locationCode: '', fullName: '' };\n      });\n    };\n\n    if (editRouteDrawerOpen) {\n      setEditRouteData(prev => ({\n        ...prev!,\n        intermediateStops: reorder(prev?.intermediateStops)\n      }));\n    } else {\n      setNewRouteData(prev => ({\n        ...prev,\n        intermediateStops: reorder(prev.intermediateStops)\n      }));\n    }\n    toast({ title: 'Stops Reordered', description: 'Order updated locally. Save to persist.' });\n  };\n\n  // Add sightseeing option\n  const handleAddSightseeingOption = (e: MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    \n    const newOption = {\n      id: Date.now().toString(),\n      location: '',\n      description: '',\n      adultPrice: 0,\n      childPrice: 0,\n      additionalCharges: 0\n    };\n    \n    if (editRouteDrawerOpen && editRouteData) {\n      setEditRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: [...(prev?.sightseeingOptions || []), newOption]\n      }));\n    } else {\n      setNewRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: [...(prev.sightseeingOptions || []), newOption]\n      }));\n    }\n  };\n\n  // Remove sightseeing option\n  const handleRemoveSightseeingOption = async (optionId: string) => {\n    if (editRouteDrawerOpen && editRouteData) {\n      // Local-only change; persisted on save\n      setEditRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: prev?.sightseeingOptions?.filter(option => option.id !== optionId) || []\n      }));\n    } else {\n      setNewRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: prev.sightseeingOptions?.filter(option => option.id !== optionId) || []\n      }));\n    }\n  };\n\n  // Update sightseeing option\n  const handleSightseeingOptionChange = async (optionId: string, field: string, value: any) => {\n    if (editRouteDrawerOpen && editRouteData) {\n      // Local-only change; persisted on save\n      setEditRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: prev?.sightseeingOptions?.map(option => \n          option.id === optionId \n            ? { ...option, [field]: field.includes('Price') || field === 'additionalCharges' ? Number(value) : value }\n            : option\n        ) || []\n      }));\n    } else {\n      setNewRouteData(prev => ({\n        ...prev,\n        sightseeingOptions: prev.sightseeingOptions?.map(option => \n          option.id === optionId \n            ? { ...option, [field]: field.includes('Price') || field === 'additionalCharges' ? Number(value) : value }\n            : option\n        ) || []\n      }));\n    }\n  };\n\n  // Add transport type\n  const handleAddTransportType = (e: MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    \n    if (editRouteDrawerOpen && editRouteData) {\n      // Add transport type to edit route data\n      setEditRouteData(prev => ({\n        ...prev,\n        transportTypes: [\n          ...(prev?.transportTypes || []),\n          { id: Date.now().toString(), type: 'Sedan', seatingCapacity: 4, luggageCapacity: 3, duration: '1h', price: 500 }\n        ]\n      }));\n    } else {\n      // Add transport type to new route data\n      setNewRouteData(prev => ({\n        ...prev,\n        transportTypes: [\n          ...(prev.transportTypes || []),\n          { id: Date.now().toString(), type: 'Sedan', seatingCapacity: 4, luggageCapacity: 3, duration: '1h', price: 500 }\n        ]\n      }));\n    }\n  };\n  \n  // Remove transport type\n  const handleRemoveTransportType = (typeId: string) => {\n    if (editRouteDrawerOpen && editRouteData) {\n      // Remove transport type from edit route data\n      setEditRouteData(prev => ({\n        ...prev,\n        transportTypes: prev?.transportTypes.filter(type => type.id !== typeId) || []\n      }));\n    } else {\n      // Remove transport type from new route data\n      setNewRouteData(prev => ({\n        ...prev,\n        transportTypes: prev.transportTypes?.filter(type => type.id !== typeId) || []\n      }));\n    }\n  };\n  \n  // Update transport type data\n  const handleTransportTypeChange = (typeId: string, field: string, value: any) => {\n    if (editRouteDrawerOpen && editRouteData) {\n      // Update transport type in edit route data\n      setEditRouteData(prev => ({\n        ...prev,\n        transportTypes: prev?.transportTypes.map(type => \n          type.id === typeId \n            ? { ...type, [field]: field === 'price' || field === 'seatingCapacity' || field === 'luggageCapacity' ? Number(value) : value }\n            : type\n        ) || []\n      }));\n    } else {\n      // Update transport type in new route data\n      setNewRouteData(prev => ({\n        ...prev,\n        transportTypes: prev.transportTypes?.map(type => \n          type.id === typeId \n            ? { ...type, [field]: field === 'price' || field === 'seatingCapacity' || field === 'luggageCapacity' ? Number(value) : value }\n            : type\n        ) || []\n      }));\n    }\n  };\n  \n  // Save new route - Using comprehensive transport service\n  const handleSaveNewRoute = async (formData?: Partial<TransportRoute>) => {\n    try {\n      // Prefer incoming form data from AddRouteSheet if provided; otherwise use local state\n      const data = formData ?? newRouteData;\n\n      // Validate form data using Zod schema\n      const validationResult = routeFormSchema.safeParse({\n        country: data.country,\n        name: data.name,\n        transferType: data.transferType,\n        startLocation: data.startLocation,\n        endLocation: data.endLocation,\n        intermediateStops: data.intermediateStops,\n        transportTypes: data.transportTypes,\n        enableSightseeing: data.enableSightseeing,\n        sightseeingOptions: data.sightseeingOptions,\n        description: data.description,\n        status: data.status\n      });\n\n      if (!validationResult.success) {\n        const errorMessages = validationResult.error.errors.map(err => \n          `${err.path.join('.')}: ${err.message}`\n        ).join('\\n');\n        \n        toast({\n          title: \"Validation Error\",\n          description: errorMessages,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Check for duplicate route names\n      const existingRoute = routes.find(route => \n        route.name.toLowerCase() === (data.name ?? '').toLowerCase() &&\n        route.country === data.country\n      );\n      \n      if (existingRoute) {\n        toast({\n          title: \"Duplicate Route\",\n          description: \"A route with this name already exists in the selected country.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Get location full names\n      const startLocation = locations.find(loc => loc.code === data.startLocation);\n      const endLocation = locations.find(loc => loc.code === data.endLocation);\n      \n      if (!startLocation || !endLocation) {\n        toast({\n          title: \"Error\",\n          description: \"Start or end location not found.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Validate that start and end locations are different\n      if (data.startLocation === data.endLocation) {\n        toast({\n          title: \"Invalid Route\",\n          description: \"Start and end locations cannot be the same.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Validate intermediate stops don't duplicate start/end locations\n      const allLocations = [data.startLocation, data.endLocation];\n      const duplicateStops = data.intermediateStops?.filter(stop => \n        allLocations.includes(stop.locationCode)\n      );\n      \n      if (duplicateStops && duplicateStops.length > 0) {\n        toast({\n          title: \"Invalid Intermediate Stops\",\n          description: \"Intermediate stops cannot be the same as start or end locations.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n      \n      // Generate route code with improved format\n      const routeCode = generateCompleteRouteCode(\n        data.startLocation, \n        data.intermediateStops, \n        data.endLocation\n      );\n      \n      // Create route name if not provided\n      const routeName = data.name || `${startLocation.fullName}  ${endLocation.fullName}`;\n      \n      // Helper function to create coordinates JSON\n      const createCoordinates = (location: LocationCode | undefined) => {\n        if (!location?.latitude || !location?.longitude) return null;\n        return {\n          latitude: parseFloat(location.latitude.replace(/[NSEW\\s]/g, '')),\n          longitude: parseFloat(location.longitude.replace(/[NSEW\\s]/g, ''))\n        };\n      };\n      \n      // Prepare payload for integrated service\n      const payload: CreateTransportRoutePayload = {\n        route_code: routeCode,\n        route_name: routeName,\n        country: data.country as string,\n        transfer_type: data.transferType as 'One-Way' | 'Round-Trip' | 'Multi-Stop' | 'en route',\n        start_location_code: data.startLocation as string,\n        end_location_code: data.endLocation as string,\n        // Live schema uses `notes` instead of `description`\n        notes: data.description || '',\n        // Map UI transportTypes into vehicle_types JSONB\n        vehicle_types: (data.transportTypes || []).map(tt => ({\n          transport_type: tt.type,\n          seating_capacity: Number(tt.seatingCapacity) || 0,\n          duration: tt.duration,\n          price: Number(tt.price) || 0,\n        })),\n        // Map UI transportTypes into luggage_capacity JSONB\n        luggage_capacity: (data.transportTypes || []).map(tt => ({\n          transport_type: tt.type,\n          bags: Number(tt.luggageCapacity) || 0,\n          // Optionally support kg later; default undefined\n          kg: undefined,\n        })),\n        status: data.status === 'active' ? 'active' : 'inactive',\n        enable_sightseeing: data.enableSightseeing || false,\n        intermediate_stops: data.intermediateStops?.map((stop, index) => ({\n          stop_order: index + 1,\n          location_code: stop.locationCode,\n          coordinates: (stop as any).coordinates || null,\n          transfer_method_notes: (stop as any).transferMethod || (stop as any).transfer_method_notes || null,\n        })) || [],\n        transport_types: (data.transportTypes || []).map(tt => ({\n          type: tt.type,\n          seating_capacity: Number(tt.seatingCapacity) || 0,\n          luggage_capacity: Number(tt.luggageCapacity) || 0,\n          duration: tt.duration,\n          price: Number(tt.price) || 0,\n        })),\n        sightseeing_options: data.sightseeingOptions?.map(option => ({\n          location: option.location,\n          description: option.description || undefined,\n          adult_price: Number(option.adultPrice) || 0,\n          child_price: Number(option.childPrice) || 0,\n          additional_charges: Number(option.additionalCharges) || 0,\n        })) || [],\n      };\n\n      // Create route using integrated service\n      const result = await integratedTransportService.createTransportRoute(payload);\n      \n      if (!result.success || !result.data) {\n        throw new Error(result.error || 'Failed to create route');\n      }\n\n      // Create route segments for UI compatibility\n      const routeSegments = generateRouteCodeSegments(\n        data.startLocation, \n        data.intermediateStops, \n        data.endLocation\n      );\n      \n      // Generate route path\n      const routePath = [\n        data.startLocation as string,\n        ...(data.intermediateStops?.map(stop => stop.locationCode) || []),\n        data.endLocation as string\n      ];\n\n      // Create the new route for UI state\n      const newRoute: TransportRoute = {\n        id: result.data.id,\n        code: routeCode,\n        name: routeName,\n        country: result.data.country,\n        transferType: result.data.transfer_type as 'One-Way' | 'Round-Trip' | 'Multi-Stop' | 'en route',\n        // Use live schema columns\n        startLocation: (result.data as any).start_location,\n        startLocationFullName: (result.data as any).start_location_full_name || result.data.start_location_details?.full_name || startLocation.fullName,\n        endLocation: (result.data as any).end_location,\n        endLocationFullName: (result.data as any).end_location_full_name || result.data.end_location_details?.full_name || endLocation.fullName,\n        intermediateStops: (result.data.intermediate_stops_data || []).map(stop => ({\n          id: stop.id,\n          locationCode: stop.location_code,\n          fullName: stop.full_name || stop.location_details?.full_name || stop.location_code,\n          transferMethod: '',\n          coordinates: stop.coordinates || undefined\n        })),\n        transportTypes: (result.data.transport_types_data || []).map(tt => ({\n          id: tt.id,\n          // Use available fields; some schemas expose `name` or `category` instead of `type`\n          type: ((tt as any).type as string) || (tt.name as string) || (tt.category as string) || '',\n          seatingCapacity: Number(tt.seating_capacity) || 0,\n          luggageCapacity: Number(tt.luggage_capacity) || 0,\n          // Guard for schemas without duration/price\n          duration: (((tt as any).duration as string) || ''),\n          price: Number(((tt as any).price ?? 0)) || 0,\n        })),\n        enableSightseeing: !!(result.data as any).enable_sightseeing,\n        sightseeingOptions: (result.data.sightseeing_options_data || []).map(option => ({\n          id: option.id,\n          location: option.location as string,\n          description: (option.description as string) || '',\n          adultPrice: Number(option.adult_price) || 0,\n          childPrice: Number(option.child_price) || 0,\n          additionalCharges: Number(option.additional_charges) || 0\n        })),\n        status: (result.data.status as 'active' | 'inactive'),\n        routePath,\n        distance: Number((result.data as any).distance) || 0,\n        duration: ((result.data as any).duration as string) || '',\n        // Prefer `notes` from live schema when present for description\n        description: ((result.data as any).notes as string) || ((result.data as any).description as string) || '',\n        routeSegments: routeSegments.map((segment, index) => {\n          const fromLoc = index === 0 ? data.startLocation : \n            data.intermediateStops?.[index-1]?.locationCode;\n          const toLoc = index === routeSegments.length - 1 ? data.endLocation : \n            data.intermediateStops?.[index]?.locationCode;\n          return { fromLocation: fromLoc || '', toLocation: toLoc || '' };\n        }),\n        createdAt: (result.data as any).created_at as string,\n        updatedAt: (result.data as any).updated_at as string\n      };\n\n      // Add the new route to the routes array\n      setRoutes(prevRoutes => [...prevRoutes, newRoute]);\n      resetNewRouteForm();\n      setAddRouteDrawerOpen(false);\n      \n      toast({\n        title: \"Route Added\",\n        description: `${newRoute.name} has been added successfully.`,\n      });\n    } catch (error) {\n      console.error('Error adding new route:', error);\n      \n      let errorMessage = \"Failed to add new route.\";\n      let errorTitle = \"Error\";\n      \n      if (error instanceof Error) {\n        // Handle specific error types\n        if (error.message.includes('network') || error.message.includes('fetch')) {\n          errorTitle = \"Network Error\";\n          errorMessage = \"Unable to connect to the server. Please check your internet connection and try again.\";\n        } else if (error.message.includes('timeout')) {\n          errorTitle = \"Request Timeout\";\n          errorMessage = \"The request took too long to complete. Please try again.\";\n        } else if (error.message.includes('duplicate') || error.message.includes('already exists')) {\n          errorTitle = \"Duplicate Route\";\n          errorMessage = \"A route with similar details already exists.\";\n        } else if (error.message.includes('validation') || error.message.includes('invalid')) {\n          errorTitle = \"Validation Error\";\n          errorMessage = error.message;\n        } else {\n          errorMessage = error.message;\n        }\n      }\n      \n      toast({\n        title: errorTitle,\n        description: errorMessage,\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  // Save edited route - With improved route code generation\n  const handleSaveEditRoute = async (override?: Partial<TransportRoute>) => {\n    if (editRouteData) {\n      const source = override ? { ...editRouteData, ...override } : editRouteData;\n      try {\n        // Validate form data using Zod schema\n        const validationResult = routeFormSchema.safeParse({\n          country: source.country,\n          name: source.name,\n          transferType: source.transferType,\n          startLocation: source.startLocation,\n          endLocation: source.endLocation,\n          intermediateStops: source.intermediateStops,\n          transportTypes: source.transportTypes,\n          enableSightseeing: source.enableSightseeing,\n          sightseeingOptions: source.sightseeingOptions,\n          description: source.description,\n          status: source.status\n        });\n\n        if (!validationResult.success) {\n          const errorMessages = validationResult.error.errors.map(err => \n            `${err.path.join('.')}: ${err.message}`\n          ).join('\\n');\n          \n          toast({\n            title: \"Validation Error\",\n            description: errorMessages,\n            variant: \"destructive\"\n          });\n          return;\n        }\n\n        // Check for duplicate route names (excluding current route)\n        const existingRoute = routes.find(route => \n          route.id !== editRouteData.id &&\n          route.name.toLowerCase() === editRouteData.name.toLowerCase() &&\n          route.country === editRouteData.country\n        );\n        \n        if (existingRoute) {\n          toast({\n            title: \"Duplicate Route\",\n            description: \"A route with this name already exists in the selected country.\",\n            variant: \"destructive\"\n          });\n          return;\n        }\n\n        // Validate that start and end locations are different\n        if (editRouteData.startLocation === editRouteData.endLocation) {\n          toast({\n            title: \"Invalid Route\",\n            description: \"Start and end locations cannot be the same.\",\n            variant: \"destructive\"\n          });\n          return;\n        }\n\n        // Validate intermediate stops don't duplicate start/end locations\n        const allLocations = [source.startLocation, source.endLocation];\n        const duplicateStops = source.intermediateStops?.filter(stop => \n          allLocations.includes(stop.locationCode)\n        );\n        \n        if (duplicateStops && duplicateStops.length > 0) {\n          toast({\n            title: \"Invalid Intermediate Stops\",\n            description: \"Intermediate stops cannot be the same as start or end locations.\",\n            variant: \"destructive\"\n          });\n          return;\n        }\n\n        // Ensure the status is the correct literal type, not just a string\n        const typedStatus = source.status === 'active' ? ('active' as const) : ('inactive' as const);\n        \n        // Generate updated route code\n        const routeCode = generateCompleteRouteCode(\n          source.startLocation, \n          source.intermediateStops, \n          source.endLocation\n        );\n        \n        // Create route segments\n        const routeSegments = generateRouteCodeSegments(\n          source.startLocation, \n          source.intermediateStops, \n          source.endLocation\n        );\n        \n      // Create a properly typed version of the edited route with improved route code\n      const typedEditRouteData: TransportRoute = {\n        ...source,\n        status: typedStatus,\n        code: routeCode,\n        // Add the route segments\n        routeSegments: routeSegments.map((segment, index) => {\n          const fromLoc = index === 0 ? source.startLocation : \n            source.intermediateStops?.[index-1]?.locationCode;\n          const toLoc = index === routeSegments.length - 1 ? source.endLocation : \n            source.intermediateStops?.[index]?.locationCode;\n            \n            return {\n              fromLocation: fromLoc || '',\n              toLocation: toLoc || '',\n            };\n          })\n        };\n        \n        // Update the routes array with the typed data\n        const updatedRoutes = routes.map(route => \n          route.id === typedEditRouteData.id ? typedEditRouteData : route\n        );\n        \n        // If the route has a remote UUID ID, persist using comprehensive service\n        const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(typedEditRouteData.id);\n        if (isUUID) {\n          // Get location details for coordinates\n          const startLocation = locations.find(loc => loc.code === typedEditRouteData.startLocation);\n          const endLocation = locations.find(loc => loc.code === typedEditRouteData.endLocation);\n          \n          // Helper function to create coordinates JSON\n          const createCoordinates = (location: LocationCode | undefined) => {\n            if (!location?.latitude || !location?.longitude) return null;\n            return {\n              latitude: parseFloat(location.latitude.replace(/[NSEW\\s]/g, '')),\n              longitude: parseFloat(location.longitude.replace(/[NSEW\\s]/g, ''))\n            };\n          };\n\n          // Prepare update payload for integrated service\n          const updateData: UpdateTransportRoutePayload = {\n            id: typedEditRouteData.id,\n            route_code: routeCode,\n            route_name: typedEditRouteData.name,\n            country: typedEditRouteData.country,\n            transfer_type: typedEditRouteData.transferType as 'One-Way' | 'Round-Trip' | 'Multi-Stop' | 'en route',\n            start_location_code: typedEditRouteData.startLocation,\n            end_location_code: typedEditRouteData.endLocation,\n            // Live schema uses `notes`; map description to notes\n            notes: typedEditRouteData.description || '',\n            // Map UI transportTypes into vehicle_types JSONB\n            vehicle_types: (typedEditRouteData.transportTypes || []).map(tt => ({\n              transport_type: tt.type,\n              seating_capacity: Number(tt.seatingCapacity) || 0,\n              duration: tt.duration,\n              price: Number(tt.price) || 0,\n            })),\n            // Map UI transportTypes into luggage_capacity JSONB\n            luggage_capacity: (typedEditRouteData.transportTypes || []).map(tt => ({\n              transport_type: tt.type,\n              bags: Number(tt.luggageCapacity) || 0,\n              kg: undefined,\n            })),\n            status: typedStatus,\n            enable_sightseeing: typedEditRouteData.enableSightseeing || false,\n            intermediate_stops: typedEditRouteData.intermediateStops?.map((stop, index) => ({\n              stop_order: index + 1,\n              location_code: stop.locationCode,\n              coordinates: (stop as any).coordinates || null,\n              transfer_method_notes: (stop as any).transferMethod || (stop as any).transfer_method_notes || null,\n            })) || [],\n            transport_types: (typedEditRouteData.transportTypes || []).map(tt => ({\n              type: tt.type,\n              seating_capacity: Number(tt.seatingCapacity) || 0,\n              luggage_capacity: Number(tt.luggageCapacity) || 0,\n              duration: tt.duration,\n              price: Number(tt.price) || 0,\n            })),\n            sightseeing_options: typedEditRouteData.sightseeingOptions?.map(option => ({\n              location: option.location,\n              description: option.description || undefined,\n              adult_price: Number(option.adultPrice) || 0,\n              child_price: Number(option.childPrice) || 0,\n              additional_charges: Number(option.additionalCharges) || 0,\n            })) || [],\n          };\n\n          const result = await integratedTransportService.updateTransportRoute(updateData);\n          if (!result.success) {\n            throw new Error(result.error || 'Failed to update route');\n          }\n        }\n\n        setRoutes(updatedRoutes);\n        setEditRouteDrawerOpen(false);\n        \n        toast({\n          title: \"Route Updated\",\n          description: `${typedEditRouteData.name} has been updated successfully.`,\n        });\n      } catch (error) {\n        console.error('Error updating route:', error);\n        \n        // Enhanced error handling with specific messages\n        if (error instanceof Error) {\n          if (error.message.includes('network') || error.message.includes('fetch')) {\n            toast({\n              title: \"Network Error\",\n              description: \"Unable to connect to the server. Please check your internet connection and try again.\",\n              variant: \"destructive\"\n            });\n          } else if (error.message.includes('timeout')) {\n            toast({\n              title: \"Request Timeout\",\n              description: \"The request took too long to complete. Please try again.\",\n              variant: \"destructive\"\n            });\n          } else if (error.message.includes('duplicate') || error.message.includes('already exists')) {\n            toast({\n              title: \"Duplicate Route\",\n              description: \"A route with this name or code already exists. Please choose a different name.\",\n              variant: \"destructive\"\n            });\n          } else if (error.message.includes('validation') || error.message.includes('invalid')) {\n            toast({\n              title: \"Validation Error\",\n              description: error.message || \"Please check your input and try again.\",\n              variant: \"destructive\"\n            });\n          } else {\n            toast({\n              title: \"Update Failed\",\n              description: error.message || \"Failed to update route. Please try again.\",\n              variant: \"destructive\"\n            });\n          }\n        } else {\n          toast({\n            title: \"Unexpected Error\",\n            description: \"An unexpected error occurred while updating the route. Please try again.\",\n            variant: \"destructive\"\n          });\n        }\n      }\n    }\n  };\n  \n  // Reset new route form\n  const resetNewRouteForm = () => {\n    setNewRouteData({\n      country: 'Thailand',\n      transferType: 'One-Way',\n      transportTypes: defaultTransportTypes,\n      enableSightseeing: false,\n      status: 'active' as const, // Use a const assertion to ensure it's the correct type\n      intermediateStops: [],\n      sightseeingOptions: [],\n      description: ''\n    });\n  };\n  \n  // Edit from view\n  const handleEditFromView = () => {\n    if (selectedRoute) {\n      // Create a deep copy of the route to avoid mutations\n      const routeCopy = JSON.parse(JSON.stringify(selectedRoute));\n      \n      // Ensure sightseeingOptions is an array if it exists\n      if (routeCopy.sightseeingOptions && !Array.isArray(routeCopy.sightseeingOptions)) {\n        routeCopy.sightseeingOptions = [{ ...routeCopy.sightseeingOptions, id: Date.now().toString() }];\n      } else if (!routeCopy.sightseeingOptions) {\n        routeCopy.sightseeingOptions = [];\n      }\n      \n      setEditRouteData(routeCopy);\n      setViewRouteDrawerOpen(false);\n      setEditRouteDrawerOpen(true);\n    }\n  };\n  \n  return {\n    // Route data\n    newRouteData,\n    editRouteData,\n    \n    // Action handlers\n    handleViewRoute,\n    handleEditRoute,\n    handleDeleteRoute,\n    handleConfirmDelete,\n    handleAddRoute,\n    handleToggleStatus,\n    \n    // Form handlers\n    handleNewRouteInputChange,\n    handleEditRouteInputChange,\n    \n    // Intermediate stops CRUD\n    handleAddStop,\n    handleRemoveStop,\n    handleStopChange,\n    handleReorderStops,\n    \n    // Sightseeing options CRUD\n    handleAddSightseeingOption,\n    handleRemoveSightseeingOption,\n    handleSightseeingOptionChange,\n    \n    // Transport types\n    handleAddTransportType,\n    handleRemoveTransportType,\n    handleTransportTypeChange,\n    \n    // Save operations\n    handleSaveNewRoute,\n    handleSaveEditRoute,\n    resetNewRouteForm,\n    handleEditFromView,\n    \n    // Helper functions for route code generation\n    generateRouteCodeSegments,\n    generateCompleteRouteCode,\n    extractShortCode,\n    getLocationTypeDescription,\n    \n    // States from props for use in components\n    viewRouteDrawerOpen,\n    editRouteDrawerOpen,\n    deleteRouteDialogOpen,\n    addRouteDrawerOpen,\n    selectedRoute,\n    \n    // Setter functions for drawer states\n    setViewRouteDrawerOpen,\n    setEditRouteDrawerOpen,\n    setDeleteRouteDialogOpen,\n    setAddRouteDrawerOpen,\n    setSelectedRoute\n  };\n};\n","\nimport React from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { \n  Select, \n  SelectContent, \n  SelectItem, \n  SelectTrigger, \n  SelectValue \n} from '@/components/ui/select';\nimport { Plus, Download, Upload, MapPin, Bus, Search, Filter } from 'lucide-react';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\ninterface RouteFiltersProps {\n  searchQuery: string;\n  setSearchQuery: (value: string) => void;\n  countryFilter: string;\n  setCountryFilter: (value: string) => void;\n  cityFilter: string;\n  setCityFilter: (value: string) => void;\n  typeFilter: string;\n  setTypeFilter: (value: string) => void;\n  availableCountries: string[];\n  availableCities: string[];\n  transferTypes: string[];\n  currentTab?: string;\n  setCurrentTab?: (tab: string) => void;\n  onAddRoute: () => void;\n  onImport: () => void;\n  onExport: () => void;\n  onLocationCodes?: () => void;\n  onTransportTypes?: () => void;\n}\n\nconst RouteFilters: React.FC<RouteFiltersProps> = ({\n  searchQuery,\n  setSearchQuery,\n  countryFilter,\n  setCountryFilter,\n  cityFilter,\n  setCityFilter,\n  typeFilter,\n  setTypeFilter,\n  availableCountries,\n  availableCities,\n  transferTypes,\n  currentTab = \"all\",\n  setCurrentTab = () => {},\n  onAddRoute,\n  onImport,\n  onExport,\n  onLocationCodes,\n  onTransportTypes\n}) => {\n  // Handler to clear all filters\n  const handleClearFilters = () => {\n    setSearchQuery('');\n    setCountryFilter('All Countries');\n    setCityFilter('All Cities');\n    setTypeFilter('All Types');\n  };\n\n  return (\n    <div className=\"mb-6 space-y-4\">\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Transport Routes</h1>\n          <p className=\"text-muted-foreground\">Manage transport routes, pricing, and availability</p>\n        </div>\n        \n        <div className=\"flex flex-wrap gap-2 mt-4 md:mt-0\">\n          {/* Only render location codes and transport types buttons if the handlers are provided */}\n          {onLocationCodes && onTransportTypes && (\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-9\"\n                onClick={onLocationCodes}\n              >\n                <MapPin className=\"h-4 w-4 mr-2 hidden sm:inline\" />\n                Locations\n              </Button>\n              \n              <Button \n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-9\"\n                onClick={onTransportTypes}\n              >\n                <Bus className=\"h-4 w-4 mr-2 hidden sm:inline\" />\n                Transports\n              </Button>\n            </div>\n          )}\n          \n          <div className=\"flex gap-2\">\n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              className=\"h-9\"\n              onClick={onExport}\n            >\n              <Download className=\"h-4 w-4 mr-0 sm:mr-2\" />\n              <span className=\"hidden sm:inline\">Export</span>\n            </Button>\n            \n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              className=\"h-9\"\n              onClick={onImport}\n            >\n              <Upload className=\"h-4 w-4 mr-0 sm:mr-2\" />\n              <span className=\"hidden sm:inline\">Import</span>\n            </Button>\n          </div>\n          \n          <Button \n            size=\"sm\"\n            className=\"h-9\"\n            onClick={onAddRoute}\n          >\n            <Plus className=\"h-4 w-4 mr-0 sm:mr-2\" />\n            <span className=\"hidden sm:inline\">Add Route</span>\n            <span className=\"sm:hidden\">New</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* Tabs moved to filter section */}\n      <div className=\"w-full\">\n        <Tabs value={currentTab} onValueChange={setCurrentTab} className=\"w-full mb-4\">\n          <TabsList className=\"w-full md:w-auto grid grid-cols-4 md:flex\">\n            <TabsTrigger value=\"all\">All Routes</TabsTrigger>\n            <TabsTrigger value=\"active\">Active</TabsTrigger>\n            <TabsTrigger value=\"disabled\">Disabled</TabsTrigger>\n            <TabsTrigger value=\"special\">Special</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n        <div className=\"relative md:col-span-2\">\n          <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n          <Input\n            id=\"transport-route-search\"\n            name=\"routeSearch\"\n            placeholder=\"Search routes, locations, codes...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-8 w-full\"\n          />\n        </div>\n        \n        <Select value={countryFilter} onValueChange={setCountryFilter}>\n          <SelectTrigger>\n            <SelectValue placeholder=\"Select country\" />\n          </SelectTrigger>\n          <SelectContent>\n            {availableCountries.map((country, index) => (\n              <SelectItem key={`country-${index}-${country}`} value={country}>{country}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n        \n        <Select \n          value={cityFilter} \n          onValueChange={setCityFilter}\n          disabled={countryFilter === 'All Countries'}\n        >\n          <SelectTrigger>\n            <SelectValue placeholder=\"Select city\" />\n          </SelectTrigger>\n          <SelectContent>\n            {availableCities.map((city, index) => (\n              <SelectItem key={`city-${index}-${city}`} value={city}>{city}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n        \n        <Select value={typeFilter} onValueChange={setTypeFilter}>\n          <SelectTrigger>\n            <SelectValue placeholder=\"Select type\" />\n          </SelectTrigger>\n          <SelectContent>\n            {transferTypes.map((type, index) => (\n              <SelectItem key={`type-${index}-${type}`} value={type}>{type}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n        \n        {/* Filter clear button - show only when filters are active */}\n        {(searchQuery || countryFilter !== 'All Countries' || cityFilter !== 'All Cities' || typeFilter !== 'All Types') && (\n          <div className=\"md:col-span-5 flex justify-end\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={handleClearFilters}\n              className=\"text-sm text-muted-foreground\"\n            >\n              <Filter className=\"h-3.5 w-3.5 mr-1\" />\n              Clear filters\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RouteFilters;\n","\n// Currency mapping for different countries\nconst currencyMap: Record<string, { symbol: string; code: string }> = {\n  // Asia\n  'Thailand': { symbol: '', code: 'THB' },\n  'Japan': { symbol: '', code: 'JPY' },\n  'China': { symbol: '', code: 'CNY' },\n  'India': { symbol: '', code: 'INR' },\n  'Singapore': { symbol: 'S$', code: 'SGD' },\n  'Malaysia': { symbol: 'RM', code: 'MYR' },\n  'Indonesia': { symbol: 'Rp', code: 'IDR' },\n  'Philippines': { symbol: '', code: 'PHP' },\n  'Vietnam': { symbol: '', code: 'VND' },\n  'South Korea': { symbol: '', code: 'KRW' },\n  \n  // Europe\n  'Germany': { symbol: '', code: 'EUR' },\n  'France': { symbol: '', code: 'EUR' },\n  'Italy': { symbol: '', code: 'EUR' },\n  'Spain': { symbol: '', code: 'EUR' },\n  'United Kingdom': { symbol: '', code: 'GBP' },\n  'Switzerland': { symbol: 'CHF', code: 'CHF' },\n  'Norway': { symbol: 'kr', code: 'NOK' },\n  'Sweden': { symbol: 'kr', code: 'SEK' },\n  'Denmark': { symbol: 'kr', code: 'DKK' },\n  \n  // Americas\n  'United States': { symbol: '$', code: 'USD' },\n  'Canada': { symbol: 'C$', code: 'CAD' },\n  'Mexico': { symbol: '$', code: 'MXN' },\n  'Brazil': { symbol: 'R$', code: 'BRL' },\n  'Argentina': { symbol: '$', code: 'ARS' },\n  \n  // Middle East & Africa\n  'UAE': { symbol: '.', code: 'AED' },\n  'Saudi Arabia': { symbol: '', code: 'SAR' },\n  'Egypt': { symbol: '', code: 'EGP' },\n  'South Africa': { symbol: 'R', code: 'ZAR' },\n  \n  // Oceania\n  'Australia': { symbol: 'A$', code: 'AUD' },\n  'New Zealand': { symbol: 'NZ$', code: 'NZD' },\n};\n\n// Currency formatting configurations\nexport const currencyFormats: Record<string, { decimals: number; separator: string }> = {\n  'USD': { decimals: 2, separator: ',' },\n  'EUR': { decimals: 2, separator: ',' },\n  'GBP': { decimals: 2, separator: ',' },\n  'THB': { decimals: 2, separator: ',' },\n  'AED': { decimals: 2, separator: ',' },\n  'SGD': { decimals: 2, separator: ',' },\n  'MYR': { decimals: 2, separator: ',' },\n  'INR': { decimals: 2, separator: ',' },\n  'JPY': { decimals: 0, separator: ',' },\n  'CNY': { decimals: 2, separator: ',' },\n  'IDR': { decimals: 0, separator: ',' },\n  'PHP': { decimals: 2, separator: ',' },\n  'VND': { decimals: 0, separator: ',' },\n  'KRW': { decimals: 0, separator: ',' },\n};\n\nexport const getCurrencySymbolByCountry = (country: string): string => {\n  const normalizedCountry = country?.trim();\n  const currency = currencyMap[normalizedCountry];\n  return currency?.symbol || '$'; // Default to USD symbol\n};\n\nexport const getCurrencyCodeByCountry = (country: string): string => {\n  const normalizedCountry = country?.trim();\n  const currency = currencyMap[normalizedCountry];\n  return currency?.code || 'USD'; // Default to USD\n};\n\nexport const formatCurrencyWithCountry = (amount: number, country: string): string => {\n  const symbol = getCurrencySymbolByCountry(country);\n  return `${symbol}${amount.toLocaleString()}`;\n};\n\n// Additional exports for compatibility with other components\nexport const formatCurrency = (amount: number, currencyCode: string = 'USD'): string => {\n  const format = currencyFormats[currencyCode] || { decimals: 2, separator: ',' };\n  const isWhole = Number.isInteger(amount);\n  const decimals = isWhole ? 0 : format.decimals;\n  return amount.toLocaleString('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n    useGrouping: true\n  });\n};\n\nexport const formatPriceForCountry = (amount: number, country: string): string => {\n  const currencyCode = getCurrencyCodeByCountry(country);\n  const symbol = getCurrencySymbolByCountry(country);\n  const formattedAmount = formatCurrency(amount, currencyCode);\n  return `${symbol}${formattedAmount}`;\n};\n","\nimport React from 'react';\nimport { Truck } from 'lucide-react';\nimport { formatCurrency, formatPriceForCountry } from '../utils/currencyUtils';\nimport { TransportRouteType } from '../types/transportTypes';\n\ninterface RouteVehicleTypesProps {\n  transportTypes: TransportRouteType[];\n  country?: string;\n}\n\nconst RouteVehicleTypes: React.FC<RouteVehicleTypesProps> = ({\n  transportTypes,\n  country\n}) => {\n  if (!transportTypes || transportTypes.length === 0) {\n    return <span className=\"text-xs text-muted-foreground\">No vehicles</span>;\n  }\n  \n  return (\n    <div className=\"space-y-1\">\n      {transportTypes.map((transport, idx) => (\n        <div key={idx} className=\"flex items-center justify-between text-xs\">\n          <div className=\"flex items-center\">\n            <Truck className=\"h-3 w-3 mr-1 text-muted-foreground\" />\n            <span>\n              {transport.type}\n              {transport.vehicleName ? ` / ${transport.vehicleName}` : ''}\n            </span>\n          </div>\n          <span className=\"font-medium\">\n            {country \n              ? formatPriceForCountry(transport.price, country) \n              : formatCurrency(transport.price)}\n          </span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default RouteVehicleTypes;\n","\nimport React from 'react';\nimport { \n  Table, \n  TableBody, \n  TableCell, \n  TableHead, \n  TableHeader, \n  TableRow \n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TransportRoute } from '../types/transportTypes';\nimport { MapPin, MoreHorizontal, User, Clock, Eye, Pencil, Trash2 } from 'lucide-react';\nimport { \n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger\n} from \"@/components/ui/dropdown-menu\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport RouteVehicleTypes from './RouteVehicleTypes';\nimport { StatusToggle } from '@/components/ui/status-toggle';\n\ninterface RoutesTableProps {\n  routes: TransportRoute[];\n  onView: (route: TransportRoute) => void;\n  onEdit: (route: TransportRoute) => void;\n  onDelete: (route: TransportRoute) => void;\n  onToggleStatus?: (routeId: string, newStatus: boolean) => void;\n  formatRouteId?: (routeId: string, index: number) => string;\n  showUserTracking?: boolean; // Option to show/hide user tracking columns\n}\n\nconst RoutesTable: React.FC<RoutesTableProps> = ({\n  routes,\n  onView,\n  onEdit,\n  onDelete,\n  onToggleStatus,\n  formatRouteId,\n  showUserTracking = false,\n}) => {\n  // Helper functions\n  const getOrigin = (route: TransportRoute): string => {\n    return route.origin || route.startLocationFullName || route.startLocation;\n  };\n  \n  const getDestination = (route: TransportRoute): string => {\n    return route.destination || route.endLocationFullName || route.endLocation;\n  };\n  \n  // Get current status as boolean for the toggle component\n  const getCurrentStatus = (route: TransportRoute): boolean => {\n    // Prefer the new isActive field if available\n    if (route.isActive !== undefined) {\n      return route.isActive;\n    }\n    // Fall back to converting status field\n    if (typeof route.status === 'boolean') {\n      return route.status;\n    }\n    return route.status === 'active';\n  };\n\n  // Format user display name\n  const formatUserDisplay = (userId?: string, userName?: string): string => {\n    if (userName) return userName;\n    if (userId) return `User ${userId.slice(0, 8)}...`;\n    return 'Unknown';\n  };\n\n  // Format timestamp for display\n  const formatTimestamp = (timestamp?: string | Date): string => {\n    if (!timestamp) return 'Unknown';\n    const date = new Date(timestamp);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  // Determine the toggle status text based on current status\n  const getToggleStatusText = (status: string | boolean) => {\n    if (typeof status === 'boolean') {\n      return status ? 'Disable' : 'Enable';\n    }\n    return status === 'active' ? 'Disable' : 'Enable';\n  };\n\n  // Row numbering helper\n  const getRowNumber = (index: number): number => index + 1;\n\n  // Check if routes array is empty or undefined\n  const hasNoRoutes = routes.length === 0;\n\n  return (\n    <TooltipProvider>\n      {/* Desktop table */}\n      <div className=\"hidden md:block\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead className=\"w-[60px]\">#</TableHead>\n              <TableHead>Name</TableHead>\n              <TableHead className=\"w-[140px]\">Route Code</TableHead>\n              <TableHead>Transport Options</TableHead>\n              <TableHead className=\"text-center\">Status</TableHead>\n              {showUserTracking && (\n                <>\n                  <TableHead className=\"text-center\">Created By</TableHead>\n                  <TableHead className=\"text-center\">Updated By</TableHead>\n                </>\n              )}\n              <TableHead className=\"text-right\">Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {hasNoRoutes ? (\n              <TableRow>\n                <TableCell colSpan={showUserTracking ? 8 : 6} className=\"text-center py-8 text-gray-500\">\n                  No transport routes found\n                </TableCell>\n              </TableRow>\n            ) : (\n              routes.map((route, index) => (\n                <TableRow\n                  key={`${route.id}-${index}`}\n                  className={!getCurrentStatus(route) ? \"opacity-70\" : \"\"}\n                >\n                  <TableCell className=\"font-medium font-mono\">\n                    <span className=\"bg-muted px-2 py-1 rounded text-xs\">\n                      {getRowNumber(index)}\n                    </span>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <span className=\"font-medium truncate max-w-[260px]\">{route.name || `${getOrigin(route)}  ${getDestination(route)}`}</span>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"text-sm font-mono block truncate w-full\">{route.code || '-'}</span>\n                  </TableCell>\n                  <TableCell>\n                    {Array.isArray(route.transportTypes) && route.transportTypes.length > 0 ? (\n                      <RouteVehicleTypes\n                        transportTypes={route.transportTypes}\n                        country={route.country}\n                      />\n                    ) : (\n                      (() => {\n                        // eslint-disable-next-line no-console\n                        console.debug('No transportTypes for route', { id: route.id, name: route.name });\n                        return <span className=\"text-muted-foreground\">-</span>;\n                      })()\n                    )}\n                  </TableCell>\n                  <TableCell className=\"text-center\">\n                    <div className=\"flex items-center justify-center\">\n                      {onToggleStatus && (\n                        <StatusToggle\n                          isActive={getCurrentStatus(route)}\n                          onToggle={(newStatus) => onToggleStatus(route.id, newStatus)}\n                          size=\"sm\"\n                          showLabels={true}\n                        />\n                      )}\n                    </div>\n                  </TableCell>\n                  {showUserTracking && (\n                    <>\n                      <TableCell className=\"text-center\">\n                        <Tooltip>\n                          <TooltipTrigger asChild>\n                            <div className=\"flex items-center justify-center gap-1 text-sm text-muted-foreground\">\n                              <User className=\"h-3 w-3\" />\n                              <span className=\"truncate max-w-[100px]\">\n                                {formatUserDisplay(route.createdByUser || route.createdBy)}\n                              </span>\n                            </div>\n                          </TooltipTrigger>\n                          <TooltipContent>\n                            <div className=\"text-xs\">\n                              <div>Created by: {formatUserDisplay(route.createdByUser || route.createdBy)}</div>\n                              <div className=\"flex items-center gap-1 mt-1\">\n                                <Clock className=\"h-3 w-3\" />\n                                {formatTimestamp(route.createdAt)}\n                              </div>\n                            </div>\n                          </TooltipContent>\n                        </Tooltip>\n                      </TableCell>\n                      <TableCell className=\"text-center\">\n                        <Tooltip>\n                          <TooltipTrigger asChild>\n                            <div className=\"flex items-center justify-center gap-1 text-sm text-muted-foreground\">\n                              <User className=\"h-3 w-3\" />\n                              <span className=\"truncate max-w-[100px]\">\n                                {formatUserDisplay(route.updatedByUser || route.updatedBy)}\n                              </span>\n                            </div>\n                          </TooltipTrigger>\n                          <TooltipContent>\n                            <div className=\"text-xs\">\n                              <div>Updated by: {formatUserDisplay(route.updatedByUser || route.updatedBy)}</div>\n                              <div className=\"flex items-center gap-1 mt-1\">\n                                <Clock className=\"h-3 w-3\" />\n                                {formatTimestamp(route.updatedAt)}\n                              </div>\n                            </div>\n                          </TooltipContent>\n                        </Tooltip>\n                      </TableCell>\n                    </>\n                  )}\n                  <TableCell className=\"text-right\">\n                    <div className=\"flex justify-end gap-2\">\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onView(route)}>\n                            <Eye className=\"h-4 w-4\" />\n                            <span className=\"sr-only\">View details</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>View details</TooltipContent>\n                      </Tooltip>\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onEdit(route)}>\n                            <Pencil className=\"h-4 w-4\" />\n                            <span className=\"sr-only\">Edit</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Edit</TooltipContent>\n                      </Tooltip>\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onDelete(route)}>\n                            <Trash2 className=\"h-4 w-4 text-red-600\" />\n                            <span className=\"sr-only\">Delete</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Delete</TooltipContent>\n                      </Tooltip>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Mobile compact card layout */}\n      <div className=\"block md:hidden\">\n        {hasNoRoutes ? (\n          <div className=\"text-center py-8 text-gray-500\">No transport routes found</div>\n        ) : (\n          <div className=\"space-y-3\">\n            {routes.map((route, index) => (\n              <div\n                key={`${route.id}-${index}`}\n                className={\"border rounded-lg p-3 bg-card text-card-foreground \" + (!getCurrentStatus(route) ? \"opacity-70\" : \"\")}\n              >\n                <div className=\"grid grid-cols-1 gap-2\">\n                  {/* Header: Name and Code */}\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"font-medium truncate text-sm max-w-[70%]\">\n                      {route.name || `${getOrigin(route)}  ${getDestination(route)}`}\n                    </span>\n                    <span className=\"text-xs font-mono truncate max-w-[30%]\">{route.code}</span>\n                  </div>\n\n                  {/* Transport Options */}\n                  <div>\n                    <RouteVehicleTypes\n                      transportTypes={route.transportTypes || []}\n                      country={route.country}\n                    />\n                  </div>\n\n                  {/* Status and Actions */}\n                  <div className=\"flex items-center justify-between gap-2\">\n                    {onToggleStatus && (\n                      <StatusToggle\n                        isActive={getCurrentStatus(route)}\n                        onToggle={(newStatus) => onToggleStatus(route.id, newStatus)}\n                        size=\"lg\"\n                        showLabels={false}\n                        className=\"scale-110\"\n                      />\n                    )}\n\n                    <div className=\"flex items-center gap-2\">\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onView(route)}>\n                            <Eye className=\"h-4 w-4\" />\n                            <span className=\"sr-only\">View details</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>View details</TooltipContent>\n                      </Tooltip>\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onEdit(route)}>\n                            <Pencil className=\"h-4 w-4\" />\n                            <span className=\"sr-only\">Edit</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Edit</TooltipContent>\n                      </Tooltip>\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => onDelete(route)}>\n                            <Trash2 className=\"h-4 w-4 text-red-600\" />\n                            <span className=\"sr-only\">Delete</span>\n                          </Button>\n                        </TooltipTrigger>\n                        <TooltipContent>Delete</TooltipContent>\n                      </Tooltip>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </TooltipProvider>\n  );\n};\n\nexport default RoutesTable;\n","\nimport React from 'react';\nimport { \n  Select, \n  SelectContent, \n  SelectItem, \n  SelectTrigger, \n  SelectValue \n} from \"@/components/ui/select\";\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\ninterface RoutesPaginationProps {\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  itemsPerPage: number;\n  onPageChange: (page: number) => void;\n  onItemsPerPageChange: (value: number) => void;\n  indexOfFirstItem?: number;\n  indexOfLastItem?: number;\n  usingExternalPagination?: boolean;\n}\n\nconst RoutesPagination: React.FC<RoutesPaginationProps> = ({\n  currentPage,\n  totalPages,\n  totalItems,\n  itemsPerPage,\n  onPageChange,\n  onItemsPerPageChange,\n  indexOfFirstItem,\n  indexOfLastItem,\n  usingExternalPagination = false\n}) => {\n  // Available pagination options\n  const paginationOptions = [10, 20, 50, 100, 200];\n\n  // Enhanced pagination logic for better UX\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    \n    // Handle small page count (5 or fewer pages)\n    if (totalPages <= 5) {\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n      return pageNumbers;\n    }\n    \n    // Always show first page\n    pageNumbers.push(1);\n    \n    // Smart ellipsis for better navigation\n    if (currentPage > 3) {\n      pageNumbers.push('...');\n    }\n    \n    // Calculate neighborhood around current page\n    const startNeighborhood = Math.max(2, currentPage - 1);\n    const endNeighborhood = Math.min(totalPages - 1, currentPage + 1);\n    \n    // Add pages around current page\n    for (let i = startNeighborhood; i <= endNeighborhood; i++) {\n      if (!pageNumbers.includes(i) && i > 1 && i < totalPages) {\n        pageNumbers.push(i);\n      }\n    }\n    \n    // Add ellipsis before last page if needed\n    if (currentPage < totalPages - 2) {\n      if (pageNumbers[pageNumbers.length - 1] !== '...') {\n        pageNumbers.push('...');\n      }\n    }\n    \n    // Always show last page if more than 1 page\n    if (totalPages > 1 && !pageNumbers.includes(totalPages)) {\n      pageNumbers.push(totalPages);\n    }\n    \n    return pageNumbers;\n  };\n\n  // Handle change of items per page\n  const handleItemsPerPageChange = (value: string) => {\n    const newValue = parseInt(value, 10);\n    onItemsPerPageChange(newValue);\n  };\n  \n  // Calculate actual items displayed\n  const firstItemDisplayed = totalItems === 0 ? 0 : (indexOfFirstItem !== undefined ? indexOfFirstItem + 1 : (currentPage - 1) * itemsPerPage + 1);\n  const lastItemDisplayed = Math.min(indexOfLastItem !== undefined ? indexOfLastItem : currentPage * itemsPerPage, totalItems);\n\n  return (\n    <div className=\"flex flex-col sm:flex-row items-center justify-between space-y-2 sm:space-y-0 py-4\">\n      <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\n        <span>\n          {totalItems === 0 ? \n            \"No items to display\" : \n            `Showing ${firstItemDisplayed}-${lastItemDisplayed} of ${totalItems}`\n          }\n        </span>\n        <span className=\"flex items-center gap-2\">\n          <span>Show</span>\n          <Select\n            value={itemsPerPage.toString()}\n            onValueChange={handleItemsPerPageChange}\n          >\n            <SelectTrigger className=\"h-8 w-[70px]\">\n              <SelectValue placeholder={itemsPerPage.toString()} />\n            </SelectTrigger>\n            <SelectContent>\n              {paginationOptions.map(option => (\n                <SelectItem key={option} value={option.toString()}>\n                  {option}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </span>\n      </div>\n      \n      {totalItems > 0 && (\n        <Pagination>\n          <PaginationContent>\n            <PaginationItem>\n              <PaginationPrevious \n                onClick={() => currentPage > 1 && onPageChange(currentPage - 1)} \n                className={currentPage === 1 ? \"cursor-not-allowed opacity-50\" : \"cursor-pointer\"} \n              />\n            </PaginationItem>\n            \n            {getPageNumbers().map((page, index) => (\n              page === '...' ? (\n                <PaginationItem key={`ellipsis-${index}`}>\n                  <PaginationEllipsis />\n                </PaginationItem>\n              ) : (\n                <PaginationItem key={`page-${page}`}>\n                  <PaginationLink \n                    isActive={currentPage === page}\n                    onClick={() => typeof page === 'number' && onPageChange(page)}\n                    className=\"cursor-pointer\"\n                  >\n                    {page}\n                  </PaginationLink>\n                </PaginationItem>\n              )\n            ))}\n            \n            <PaginationItem>\n              <PaginationNext \n                onClick={() => currentPage < totalPages && onPageChange(currentPage + 1)} \n                className={currentPage === totalPages || totalPages === 0 ? \"cursor-not-allowed opacity-50\" : \"cursor-pointer\"} \n              />\n            </PaginationItem>\n          </PaginationContent>\n        </Pagination>\n      )}\n    </div>\n  );\n};\n\nexport default RoutesPagination;\n","\nimport React from 'react';\nimport { TransportRoute } from '../types/transportTypes';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetDescription,\n  SheetFooter,\n  SheetClose\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Edit, MapPin } from 'lucide-react';\nimport { formatCurrency, formatPriceForCountry } from '../utils/currencyUtils';\n\ninterface RouteDetailsSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  route: TransportRoute | null;\n  onEdit: (route: TransportRoute) => void;\n  routeIndex: number;\n  formatRouteId?: (routeId: string, index: number) => string; // Added this prop\n}\n\nconst RouteDetailsSheet: React.FC<RouteDetailsSheetProps> = ({\n  isOpen,\n  onClose,\n  route,\n  onEdit,\n  routeIndex,\n  formatRouteId\n}) => {\n  if (!route) return null;\n  \n  // Get origin and destination helper functions\n  const getOrigin = (route: TransportRoute): string => {\n    return route.origin || route.startLocationFullName || route.startLocation;\n  };\n  \n  const getDestination = (route: TransportRoute): string => {\n    return route.destination || route.endLocationFullName || route.endLocation;\n  };\n  \n  // Get price helper function\n  const getPrice = (route: TransportRoute): number => {\n    // First try to get the price directly from the route\n    if (route.price !== undefined) {\n      return route.price;\n    }\n    \n    // Then try to get it from the first transport type\n    if (route.transportTypes && route.transportTypes.length > 0) {\n      return route.transportTypes[0].price;\n    }\n    \n    // Default to 0 if no price is available\n    return 0;\n  };\n  \n  // Format route ID using the provided function or a default implementation\n  const formatRouteIdSafe = (routeId: string, index: number): string => {\n    if (formatRouteId) {\n      return formatRouteId(routeId, index);\n    }\n    \n    // Default implementation if formatRouteId is not provided\n    const numericId = routeId.toString().replace(/\\D/g, '');\n    return numericId;\n  };\n  \n  // Get status badge\n  const getStatusBadge = (status: string | boolean) => {\n    // Convert boolean status to string if needed\n    const statusStr = typeof status === 'boolean' \n      ? (status ? 'active' : 'inactive') \n      : status;\n    \n    switch (statusStr) {\n      case 'active':\n        return <Badge className=\"bg-green-500\">Active</Badge>;\n      case 'inactive':\n        return <Badge variant=\"outline\" className=\"text-gray-500\">Disabled</Badge>;\n      default:\n        return <Badge variant=\"outline\">{statusStr}</Badge>;\n    }\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"md:max-w-lg w-full\">\n        <SheetHeader>\n          <SheetTitle>Route Details</SheetTitle>\n          <SheetDescription>\n            View detailed information about this transport route.\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-4 py-4 overflow-y-auto max-h-[calc(100vh-200px)]\">\n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Route ID</h3>\n            <p className=\"text-sm font-mono bg-muted px-2 py-1 rounded-md inline-block\">\n              {formatRouteIdSafe(route.id, routeIndex)}\n            </p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Route Code</h3>\n            <p className=\"text-sm text-gray-500\">{route.code}</p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Origin</h3>\n            <p className=\"text-sm text-gray-500\">{getOrigin(route)}</p>\n          </div>\n          \n          {route.intermediateStops && route.intermediateStops.length > 0 && (\n            <div className=\"grid gap-2\">\n              <h3 className=\"text-sm font-medium\">Intermediate Stops</h3>\n              <div className=\"space-y-1\">\n                {route.intermediateStops.map((stop, index) => (\n                  <div key={stop.id} className=\"text-sm text-gray-500 flex items-center\">\n                    <span className=\"bg-amber-100 text-amber-700 w-5 h-5 rounded-full inline-flex items-center justify-center mr-2 text-xs\">\n                      {index + 1}\n                    </span>\n                    {stop.fullName}\n                    {stop.transferMethod && (\n                      <span className=\"ml-2 text-xs italic\">({stop.transferMethod})</span>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Destination</h3>\n            <p className=\"text-sm text-gray-500\">{getDestination(route)}</p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Vehicle Types</h3>\n            <div className=\"space-y-2\">\n              {route.transportTypes && route.transportTypes.map((type, index) => (\n                <div key={index} className=\"flex justify-between items-center p-2 bg-muted rounded-md\">\n                  <div>\n                    <p className=\"text-sm\">{type.type}</p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {type.seatingCapacity} seats / {type.luggageCapacity} luggage\n                    </p>\n                  </div>\n                  <div className=\"text-sm font-medium\">\n                    {route.country \n                      ? formatPriceForCountry(type.price, route.country) \n                      : formatCurrency(type.price)}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Price (one-way)</h3>\n            <p className=\"text-sm text-gray-500\">\n              {route.country \n                ? formatPriceForCountry(getPrice(route), route.country) \n                : formatCurrency(getPrice(route))}\n            </p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Round Trip Price</h3>\n            <p className=\"text-sm text-gray-500\">\n              {route.country \n                ? formatPriceForCountry(route.roundTripPrice || getPrice(route) * 1.8, route.country) \n                : formatCurrency(route.roundTripPrice || getPrice(route) * 1.8)}\n            </p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Distance</h3>\n            <p className=\"text-sm text-gray-500\">{route.distance || 'N/A'}</p>\n          </div>\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Duration</h3>\n            <p className=\"text-sm text-gray-500\">\n              {route.duration || \n               (route.transportTypes && route.transportTypes[0]?.duration) || \n               'N/A'}\n            </p>\n          </div>\n          \n          {route.country && (\n            <div className=\"grid gap-2\">\n              <h3 className=\"text-sm font-medium\">Country</h3>\n              <p className=\"text-sm text-gray-500\">{route.country}</p>\n            </div>\n          )}\n          \n          {route.transferType && (\n            <div className=\"grid gap-2\">\n              <h3 className=\"text-sm font-medium\">Transfer Type</h3>\n              <p className=\"text-sm text-gray-500\">{route.transferType}</p>\n            </div>\n          )}\n          \n          <div className=\"grid gap-2\">\n            <h3 className=\"text-sm font-medium\">Description</h3>\n            <p className=\"text-sm text-gray-500\">{route.description || \"No description provided.\"}</p>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <h3 className=\"text-sm font-medium\">Status:</h3>\n            {getStatusBadge(route.status)}\n          </div>\n        </div>\n        \n        <SheetFooter className=\"pt-4 flex flex-col sm:flex-row gap-2\">\n          <SheetClose asChild>\n            <Button type=\"button\" variant=\"outline\" className=\"sm:w-auto w-full\">Close</Button>\n          </SheetClose>\n          <Button onClick={() => {\n            onClose();\n            if (route) onEdit(route);\n          }} className=\"sm:w-auto w-full\">\n            <Edit className=\"h-4 w-4 mr-2\" />\n            Edit Route\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default RouteDetailsSheet;\n","\nimport React from 'react';\nimport { TransportRoute } from '../types/transportTypes';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface DeleteRouteDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;  // Changed from onConfirmDelete to onConfirm for compatibility\n  route: TransportRoute | null;\n}\n\nconst DeleteRouteDialog: React.FC<DeleteRouteDialogProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  route,\n}) => {\n  if (!route) return null;\n\n  // Get display name for the route\n  const getRouteName = () => {\n    if (route.name) return route.name;\n    if (route.code) return route.code;\n    return `Route from ${route.startLocationFullName || route.startLocation} to ${route.endLocationFullName || route.endLocation}`;\n  };\n\n  return (\n    <AlertDialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>Are you sure you want to delete this route?</AlertDialogTitle>\n          <AlertDialogDescription className=\"text-muted-foreground\">\n            Route: {getRouteName()}<br/>\n            ID: {route.id}<br/>\n            <span className=\"font-semibold text-destructive\">\n              This action cannot be undone. The route will be permanently deleted from the system.\n            </span>\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={onClose}>Cancel</AlertDialogCancel>\n          <AlertDialogAction \n            onClick={onConfirm} \n            className=\"bg-destructive hover:bg-destructive/90\"\n          >\n            Delete Route\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};\n\nexport default DeleteRouteDialog;\n","\nimport { TransportRoute } from \"../types/transportTypes\";\n\n/**\n * Formats a route ID by removing \"00\" prefix from the first 5 routes\n * @param routeId The route ID to format\n * @param index The index of the route in the list\n * @returns The formatted route ID\n */\nexport const formatRouteId = (routeId: string, index: number): string => {\n  const numericId = routeId.toString().replace(/\\D/g, '');\n  \n  // For the first 5 routes, remove \"00\" prefix if present\n  if (index < 5 && numericId.startsWith('00')) {\n    return numericId.substring(2); // Remove first two characters if they are \"00\"\n  }\n  \n  return numericId;\n};\n\n/**\n * Gets the price of a transport route\n * @param route The transport route\n * @returns The price of the route\n */\nexport const getPrice = (route: TransportRoute): number => {\n  // First try to get the price directly from the route\n  if (route.price !== undefined) {\n    return route.price;\n  }\n  \n  // Then try to get it from the first transport type\n  if (route.transportTypes && route.transportTypes.length > 0) {\n    return route.transportTypes[0].price;\n  }\n  \n  // Default to 0 if no price is available\n  return 0;\n};\n\n/**\n * Gets the vehicle type of a transport route\n * @param route The transport route\n * @returns The vehicle type of the route\n */\nexport const getVehicleType = (route: TransportRoute): string => {\n  // First try to get the vehicle type directly from the route\n  if (route.vehicleType) {\n    return route.vehicleType;\n  }\n  \n  // Then try to get it from the first transport type\n  if (route.transportTypes && route.transportTypes.length > 0) {\n    return route.transportTypes[0].type;\n  }\n  \n  // Default to empty string if no vehicle type is available\n  return 'N/A';\n};\n\n/**\n * Gets the origin location of a transport route\n * @param route The transport route\n * @returns The origin location of the route\n */\nexport const getOrigin = (route: TransportRoute): string => {\n  return route.origin || route.startLocationFullName || route.startLocation;\n};\n\n/**\n * Gets the destination location of a transport route\n * @param route The transport route\n * @returns The destination location of the route\n */\nexport const getDestination = (route: TransportRoute): string => {\n  return route.destination || route.endLocationFullName || route.endLocation;\n};\n","\nimport React, { useState, useEffect } from 'react';\nimport { TransportRoute } from '../types/transportTypes';\nimport RoutesTable from './RoutesTable';\nimport RoutesPagination from './RoutesPagination';\nimport RouteDetailsSheet from './RouteDetailsSheet';\nimport DeleteRouteDialog from './DeleteRouteDialog';\nimport { formatRouteId } from '../utils/routeUtils';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface TransportRoutesTableProps {\n  routes: TransportRoute[];\n  onEdit: (route: TransportRoute) => void;\n  onDelete: (route: TransportRoute) => void;\n  onView?: (route: TransportRoute) => void;\n  onToggleStatus?: (routeId: string, newStatus: boolean) => void;\n  showUserTracking?: boolean; // Option to show/hide user tracking columns\n  // Pagination props\n  currentPage?: number;\n  totalPages?: number;\n  onNextPage?: () => void;\n  onPrevPage?: () => void;\n  onPageSelect?: (page: number) => void;\n  onItemsPerPageChange?: (itemsPerPage: number) => void;\n  itemsPerPage?: number;\n}\n\nconst TransportRoutesTable: React.FC<TransportRoutesTableProps> = ({ \n  routes, \n  onEdit, \n  onDelete,\n  onView,\n  onToggleStatus,\n  showUserTracking = false,\n  // Using the props from parent or defaulting to internal state\n  currentPage: externalCurrentPage,\n  totalPages: externalTotalPages,\n  onNextPage: externalNextPage,\n  onPrevPage: externalPrevPage,\n  onPageSelect,\n  onItemsPerPageChange,\n  itemsPerPage: externalItemsPerPage,\n}) => {\n  // Use internal state if external pagination is not provided\n  const [internalCurrentPage, setInternalCurrentPage] = useState(1);\n  const [internalItemsPerPage, setInternalItemsPerPage] = useState(10);\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [isDeleteOpen, setIsDeleteOpen] = useState(false);\n  const [selectedRoute, setSelectedRoute] = useState<TransportRoute | null>(null);\n  const { toast } = useToast();\n  \n  // Reset page when routes change significantly\n  useEffect(() => {\n    if (!externalCurrentPage && routes.length > 0) {\n      setInternalCurrentPage(1);\n    }\n  }, [routes.length, externalCurrentPage]);\n  \n  // Determine whether to use external or internal pagination\n  const usingExternalPagination = externalCurrentPage !== undefined && externalTotalPages !== undefined;\n  const currentPageValue = usingExternalPagination ? externalCurrentPage : internalCurrentPage;\n  const itemsPerPageValue = externalItemsPerPage || internalItemsPerPage;\n  \n  // Calculate pagination for internal use only if not using external pagination\n  let indexOfLastItem = 0;\n  let indexOfFirstItem = 0;\n  let currentItems = routes;\n  let totalPagesValue = externalTotalPages || 1;\n  \n  if (!usingExternalPagination) {\n    indexOfLastItem = internalCurrentPage * internalItemsPerPage;\n    indexOfFirstItem = indexOfLastItem - internalItemsPerPage;\n    currentItems = routes.slice(indexOfFirstItem, indexOfLastItem);\n    totalPagesValue = Math.max(1, Math.ceil(routes.length / internalItemsPerPage));\n  }\n\n  // Ensure we don't have empty pages\n  useEffect(() => {\n    if (currentItems.length === 0 && routes.length > 0 && internalCurrentPage > 1) {\n      setInternalCurrentPage(Math.max(1, Math.ceil(routes.length / internalItemsPerPage)));\n    }\n  }, [currentItems.length, routes.length, internalCurrentPage, internalItemsPerPage]);\n\n  // Pagination controls for internal pagination\n  const handlePageChange = (page: number) => {\n    if (onPageSelect && usingExternalPagination) {\n      onPageSelect(page);\n    } else if (page >= 1 && page <= totalPagesValue) {\n      setInternalCurrentPage(page);\n    }\n  };\n  \n  const handleItemsPerPageChange = (value: number) => {\n    if (onItemsPerPageChange && usingExternalPagination) {\n      onItemsPerPageChange(value);\n    } else {\n      setInternalItemsPerPage(value);\n      setInternalCurrentPage(1); // Reset to first page when changing items per page\n    }\n  };\n\n  // Handle view route details\n  const handleView = (route: TransportRoute) => {\n    if (onView) {\n      onView(route);\n    } else {\n      setSelectedRoute(route);\n      setIsViewOpen(true);\n    }\n  };\n  \n  // Handle delete\n  const handleDelete = (route: TransportRoute) => {\n    setSelectedRoute(route);\n    setIsDeleteOpen(true);\n  };\n  \n  // Confirm delete\n  const confirmDelete = () => {\n    if (selectedRoute) {\n      onDelete(selectedRoute);\n      setIsDeleteOpen(false);\n    }\n  };\n\n  // Handle toggle status using newStatus boolean from toggle component\n  const handleToggleStatus = (routeId: string, newStatus: boolean) => {\n    if (onToggleStatus) {\n      onToggleStatus(routeId, newStatus);\n    }\n  };\n  \n  // Find index of selected route in current items\n  const selectedRouteIndex = selectedRoute \n    ? currentItems.findIndex(r => r.id === selectedRoute.id)\n    : -1;\n\n  return (\n    <div>\n      <div className=\"rounded-md border overflow-x-auto\">\n        <RoutesTable \n          routes={currentItems}\n          onView={handleView}\n          onEdit={onEdit}\n          onDelete={handleDelete}\n          onToggleStatus={handleToggleStatus}\n          formatRouteId={formatRouteId}\n          showUserTracking={showUserTracking}\n        />\n      </div>\n      \n      <RoutesPagination\n        currentPage={currentPageValue}\n        totalPages={totalPagesValue}\n        totalItems={routes.length}\n        itemsPerPage={itemsPerPageValue}\n        onPageChange={handlePageChange}\n        onItemsPerPageChange={handleItemsPerPageChange}\n        indexOfFirstItem={indexOfFirstItem}\n        indexOfLastItem={Math.min(indexOfLastItem, routes.length)}\n        usingExternalPagination={usingExternalPagination}\n      />\n      \n      {/* Route Details Sheet */}\n      <RouteDetailsSheet\n        isOpen={isViewOpen}\n        onClose={() => setIsViewOpen(false)}\n        route={selectedRoute}\n        onEdit={onEdit}\n        formatRouteId={formatRouteId}\n        routeIndex={selectedRouteIndex}\n      />\n      \n      {/* Delete Confirmation Dialog */}\n      <DeleteRouteDialog\n        isOpen={isDeleteOpen}\n        onClose={() => setIsDeleteOpen(false)}\n        onConfirm={confirmDelete}\n        route={selectedRoute}\n      />\n    </div>\n  );\n};\n\nexport default TransportRoutesTable;\n","import React, { useState, useEffect } from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { AlertCircle, CheckCircle2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ValidatedInputProps {\n  id?: string;\n  label: string;\n  value: string | number;\n  onChange: (value: string | number) => void;\n  onValidate?: (value: string | number) => string | null;\n  type?: 'text' | 'number' | 'textarea';\n  placeholder?: string;\n  required?: boolean;\n  min?: number;\n  max?: number;\n  step?: number;\n  className?: string;\n  disabled?: boolean;\n  helpText?: string;\n  validateOnChange?: boolean;\n  validateOnBlur?: boolean;\n  showValidIcon?: boolean;\n}\n\nexport const ValidatedInput: React.FC<ValidatedInputProps> = ({\n  id,\n  label,\n  value,\n  onChange,\n  onValidate,\n  type = 'text',\n  placeholder,\n  required = false,\n  min,\n  max,\n  step,\n  className,\n  disabled = false,\n  helpText,\n  validateOnChange = true,\n  validateOnBlur = true,\n  showValidIcon = true,\n}) => {\n  const [error, setError] = useState<string | null>(null);\n  const [isValid, setIsValid] = useState<boolean>(false);\n  const [isTouched, setIsTouched] = useState<boolean>(false);\n\n  const validateValue = (val: string | number) => {\n    if (!onValidate) return;\n\n    const errorMessage = onValidate(val);\n    setError(errorMessage);\n    setIsValid(!errorMessage && val !== '' && val !== 0);\n  };\n\n  useEffect(() => {\n    if (isTouched && validateOnChange) {\n      validateValue(value);\n    }\n  }, [value, isTouched, validateOnChange, onValidate]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const newValue = type === 'number' ? Number(e.target.value) : e.target.value;\n    onChange(newValue);\n    \n    if (!isTouched) {\n      setIsTouched(true);\n    }\n  };\n\n  const handleBlur = () => {\n    if (!isTouched) {\n      setIsTouched(true);\n    }\n    \n    if (validateOnBlur) {\n      validateValue(value);\n    }\n  };\n\n  const inputId = id || `input-${label.toLowerCase().replace(/\\s+/g, '-')}`;\n  const hasError = error && isTouched;\n  const showSuccess = isValid && isTouched && showValidIcon && !hasError;\n\n  const inputClassName = cn(\n    'bg-background border-input text-foreground transition-colors',\n    hasError && 'border-destructive focus:border-destructive',\n    showSuccess && 'border-green-500 focus:border-green-500',\n    className\n  );\n\n  const InputComponent = type === 'textarea' ? Textarea : Input;\n\n  return (\n    <div className=\"space-y-1\">\n      <Label htmlFor={inputId} className=\"text-sm font-medium\">\n        {label}\n        {required && <span className=\"text-destructive ml-1\">*</span>}\n      </Label>\n      \n      <div className=\"relative\">\n        <InputComponent\n          id={inputId}\n          type={type === 'textarea' ? undefined : type}\n          value={value}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          placeholder={placeholder}\n          min={min}\n          max={max}\n          step={step}\n          disabled={disabled}\n          className={inputClassName}\n        />\n        \n        {/* Validation icons */}\n        {(hasError || showSuccess) && (\n          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n            {hasError ? (\n              <AlertCircle className=\"h-4 w-4 text-destructive\" />\n            ) : showSuccess ? (\n              <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n            ) : null}\n          </div>\n        )}\n      </div>\n      \n      {/* Error message */}\n      {hasError && (\n        <p className=\"text-sm text-destructive flex items-center gap-1\">\n          <AlertCircle className=\"h-3 w-3\" />\n          {error}\n        </p>\n      )}\n      \n      {/* Help text */}\n      {helpText && !hasError && (\n        <p className=\"text-xs text-muted-foreground\">\n          {helpText}\n        </p>\n      )}\n    </div>\n  );\n};\n\n// Specialized components for common use cases\nexport const ValidatedNumberInput: React.FC<Omit<ValidatedInputProps, 'type'>> = (props) => (\n  <ValidatedInput {...props} type=\"number\" />\n);\n\nexport const ValidatedTextarea: React.FC<Omit<ValidatedInputProps, 'type'>> = (props) => (\n  <ValidatedInput {...props} type=\"textarea\" />\n);\n\nexport default ValidatedInput;","import { useState, useCallback } from 'react';\nimport { z } from 'zod';\n\n// Validation schema for individual fields\nconst fieldValidationSchema = {\n  name: z.string()\n    .min(1, 'Route name is required')\n    .max(100, 'Route name must be less than 100 characters')\n    .regex(/^[a-zA-Z0-9\\s\\-_()]+$/, 'Route name contains invalid characters'),\n  \n  country: z.string()\n    .min(1, 'Country is required')\n    .max(50, 'Country name is too long'),\n  \n  transferType: z.enum(['One-Way', 'Round-Trip', 'Multi-Stop', 'en route'], {\n    errorMap: () => ({ message: 'Please select a valid transfer type' })\n  }),\n  \n  startLocation: z.string()\n    .min(1, 'Start location is required'),\n  \n  endLocation: z.string()\n    .min(1, 'End location is required'),\n  \n  description: z.string()\n    .max(500, 'Description must be less than 500 characters')\n    .optional(),\n  \n  // Transport type validations\n  seatingCapacity: z.number()\n    .min(1, 'Seating capacity must be at least 1')\n    .max(100, 'Seating capacity cannot exceed 100'),\n  \n  luggageCapacity: z.number()\n    .min(0, 'Luggage capacity cannot be negative')\n    .max(50, 'Luggage capacity cannot exceed 50'),\n  \n  duration: z.string()\n    .regex(/^\\d{1,2}:\\d{2}$/, 'Duration must be in HH:MM format'),\n  \n  price: z.number()\n    .min(0, 'Price cannot be negative')\n    .max(10000, 'Price seems too high'),\n  \n  // Sightseeing option validations\n  adultPrice: z.number()\n    .min(0, 'Adult price cannot be negative')\n    .max(1000, 'Adult price seems too high'),\n  \n  childPrice: z.number()\n    .min(0, 'Child price cannot be negative')\n    .max(1000, 'Child price seems too high'),\n  \n  additionalCharges: z.number()\n    .min(0, 'Additional charges cannot be negative')\n    .max(1000, 'Additional charges seem too high'),\n  \n  sightseeingDescription: z.string()\n    .max(200, 'Description must be less than 200 characters')\n    .optional(),\n};\n\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\nexport interface UseFormValidationReturn {\n  errors: Record<string, string>;\n  validateField: (field: string, value: any) => string | null;\n  validateAllFields: (data: Record<string, any>) => ValidationError[];\n  clearError: (field: string) => void;\n}\n\nexport const useFormValidation = (): UseFormValidationReturn => {\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validateField = useCallback((field: string, value: any): string | null => {\n    try {\n      const schema = fieldValidationSchema[field as keyof typeof fieldValidationSchema];\n      if (!schema) return null;\n\n      // Convert string numbers to actual numbers for numeric fields\n      let processedValue = value;\n      if (['seatingCapacity', 'luggageCapacity', 'price', 'adultPrice', 'childPrice', 'additionalCharges'].includes(field)) {\n        processedValue = value === '' ? 0 : Number(value);\n      }\n\n      schema.parse(processedValue);\n      \n      // Clear error if validation passes\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[field];\n        return newErrors;\n      });\n      \n      return null;\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const errorMessage = error.errors[0]?.message || 'Invalid value';\n        \n        // Set error\n        setErrors(prev => ({\n          ...prev,\n          [field]: errorMessage\n        }));\n        \n        return errorMessage;\n      }\n      return null;\n    }\n  }, []);\n\n  const validateAllFields = useCallback((data: Record<string, any>): ValidationError[] => {\n    const validationErrors: ValidationError[] = [];\n    \n    Object.keys(fieldValidationSchema).forEach(field => {\n      const error = validateField(field, data[field]);\n      if (error) {\n        validationErrors.push({ field, message: error });\n      }\n    });\n    \n    return validationErrors;\n  }, [validateField]);\n\n  const clearError = useCallback((field: string) => {\n    setErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[field];\n      return newErrors;\n    });\n  }, []);\n\n  const clearAllErrors = useCallback(() => {\n    setErrors({});\n  }, []);\n\n  const hasErrors = Object.keys(errors).length > 0;\n\n  return {\n    errors,\n    validateField,\n    validateAllFields,\n    clearError,\n  };\n};\n\n// Custom validation rules for complex scenarios\nexport const customValidationRules = {\n  // Validate that start and end locations are different\n  validateLocationsDifferent: (startLocation: string, endLocation: string): string | null => {\n    if (startLocation && endLocation && startLocation === endLocation) {\n      return 'Start and end locations must be different';\n    }\n    return null;\n  },\n\n  // Validate that intermediate stops don't duplicate start/end locations\n  validateIntermediateStops: (\n    intermediateStops: Array<{ locationCode: string }>,\n    startLocation: string,\n    endLocation: string\n  ): string | null => {\n    if (!intermediateStops || intermediateStops.length === 0) return null;\n\n    const duplicateStart = intermediateStops.some(stop => stop.locationCode === startLocation);\n    const duplicateEnd = intermediateStops.some(stop => stop.locationCode === endLocation);\n\n    if (duplicateStart) {\n      return 'Intermediate stops cannot include the start location';\n    }\n    if (duplicateEnd) {\n      return 'Intermediate stops cannot include the end location';\n    }\n\n    // Check for duplicate intermediate stops\n    const locationCodes = intermediateStops.map(stop => stop.locationCode);\n    const uniqueCodes = new Set(locationCodes);\n    if (locationCodes.length !== uniqueCodes.size) {\n      return 'Intermediate stops must be unique';\n    }\n\n    return null;\n  },\n\n  // Validate that at least one sightseeing option exists when sightseeing is enabled\n  validateSightseeingOptions: (\n    enableSightseeing: boolean,\n    sightseeingOptions: Array<any>\n  ): string | null => {\n    if (enableSightseeing && (!sightseeingOptions || sightseeingOptions.length === 0)) {\n      return 'At least one sightseeing option is required when sightseeing is enabled';\n    }\n    return null;\n  },\n\n  // Validate child price is not higher than adult price\n  validatePriceRelationship: (adultPrice: number, childPrice: number): string | null => {\n    if (adultPrice > 0 && childPrice > 0 && childPrice > adultPrice) {\n      return 'Child price should not be higher than adult price';\n    }\n    return null;\n  },\n};","import { useState, useEffect, useCallback } from 'react';\nimport { TransportRoute, LocationCode, SightseeingOption, Stop } from '@/pages/inventory/transport/types/transportTypes';\nimport { useFormValidation, customValidationRules } from './useFormValidation';\nimport { Sightseeing } from '@/types/sightseeing';\n\nexport const useRouteForm = (initialData: Partial<TransportRoute>, locations: LocationCode[], sightseeingLocations: Sightseeing[]) => {\n  const [routeData, setRouteData] = useState<Partial<TransportRoute>>({\n    ...initialData,\n    startLocationFullName: initialData.startLocationFullName || '',\n    endLocationFullName: initialData.endLocationFullName || '',\n  });\n  const [filteredLocations, setFilteredLocations] = useState<LocationCode[]>([]);\n  const [filteredSightseeingLocations, setFilteredSightseeingLocations] = useState<Sightseeing[]>([]);\n  const [routeSegments, setRouteSegments] = useState<string[]>([]);\n\n  const { validateField, errors } = useFormValidation();\n\n  const onChange = (field: string, value: any) => {\n    setRouteData(prevData => ({ ...prevData, [field]: value }));\n  };\n\n  const extractShortCode = (code: string) => {\n    if (!code) return '';\n    return code.split(' ')[0];\n  };\n\n  const getLocationTypeDescription = (code: string) => {\n    const location = locations.find(loc => loc.code === code);\n    if (!location) return '';\n\n    switch (location.category) {\n      case 'airport': return 'APT';\n      case 'hotel': return 'HTL';\n      case 'pier': return 'PIER';\n      default: return location.category.slice(0, 3).toUpperCase();\n    }\n  };\n\n  const generateRouteCodeSegments = useCallback(() => {\n    const allStops = [\n      routeData.startLocation,\n      ...(routeData.intermediateStops?.map(stop => stop.locationCode) || []),\n      routeData.endLocation\n    ].filter(Boolean) as string[];\n\n    if (allStops.length < 2) return [];\n\n    const segments: string[] = [];\n    for (let i = 0; i < allStops.length - 1; i++) {\n      const fromCode = extractShortCode(allStops[i]);\n      const fromType = getLocationTypeDescription(allStops[i]);\n      const toCode = extractShortCode(allStops[i + 1]);\n      const toType = getLocationTypeDescription(allStops[i + 1]);\n      segments.push(`${fromCode} ${fromType}  ${toCode} ${toType}`);\n    }\n    return segments;\n  }, [routeData.startLocation, routeData.endLocation, routeData.intermediateStops, locations]);\n\n  const generateCompleteRouteCode = useCallback(() => {\n    const allStops = [\n      routeData.startLocation,\n      ...(routeData.intermediateStops?.map(stop => stop.locationCode) || []),\n      routeData.endLocation\n    ].filter(Boolean) as string[];\n\n    if (allStops.length < 2) return '';\n\n    const routeParts = allStops.map((locationCode, index) => {\n      const shortCode = extractShortCode(locationCode);\n      const locationType = getLocationTypeDescription(locationCode);\n      return `${shortCode} ${locationType}${index < allStops.length - 1 ? ' - ' : ''}`;\n    });\n\n    return routeParts.join('');\n  }, [routeData.startLocation, routeData.endLocation, routeData.intermediateStops, locations]);\n\n  useEffect(() => {\n    if (routeData.country) {\n      setFilteredLocations(locations.filter(loc => loc.country === routeData.country));\n      setFilteredSightseeingLocations(\n        sightseeingLocations.filter(loc => loc.country === routeData.country)\n      );\n    }\n  }, [routeData.country, locations, sightseeingLocations]);\n\n  useEffect(() => {\n    const allLocations = [\n      routeData.startLocation,\n      ...(routeData.intermediateStops?.map(stop => stop.locationCode) || []),\n      routeData.endLocation\n    ].filter(Boolean);\n\n    if (allLocations.length >= 2) {\n      const segments = generateRouteCodeSegments();\n      setRouteSegments(segments);\n\n      const startLoc = locations.find(loc => loc.code === routeData.startLocation);\n      const endLoc = locations.find(loc => loc.code === routeData.endLocation);\n\n      if (startLoc && endLoc) {\n        let generatedName: string;\n        if (routeData.transferType === 'Multi-Stop' || routeData.transferType === 'en route') {\n          const intermediateNames = routeData.intermediateStops?.map(stop => {\n            const loc = locations.find(l => l.code === stop.locationCode);\n            return loc ? loc.fullName : '';\n          }).filter(Boolean);\n\n          if (intermediateNames && intermediateNames.length > 0) {\n            generatedName = `${startLoc.fullName}  ${intermediateNames.join('  ')}  ${endLoc.fullName}`;\n          } else {\n            generatedName = `${startLoc.fullName}  ${endLoc.fullName}`;\n          }\n        } else {\n          generatedName = `${startLoc.fullName}  ${endLoc.fullName}`;\n        }\n        onChange('name', generatedName);\n\n        const routeCode = generateCompleteRouteCode();\n        onChange('code', routeCode);\n      }\n    }\n  }, [routeData.startLocation, routeData.endLocation, routeData.intermediateStops, routeData.transferType, locations, generateRouteCodeSegments, generateCompleteRouteCode]);\n\n\n\n  const onRemoveTransportType = (typeId: string) => {\n    const updatedTransportTypes = routeData.transportTypes?.filter(type => type.id !== typeId);\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  const onTransportTypeChange = (typeId: string, field: string, value: any) => {\n    const updatedTransportTypes = routeData.transportTypes?.map(type =>\n      type.id === typeId ? { ...type, [field]: value } : type\n    );\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  return {\n    routeData,\n    setRouteData,\n    onChange,\n    filteredLocations,\n    filteredSightseeingLocations,\n    routeSegments,\n    validateField,\n    errors,\n    extractShortCode,\n    getLocationTypeDescription,\n    generateRouteCodeSegments,\n    generateCompleteRouteCode,\n    onRemoveTransportType,\n    onTransportTypeChange\n  };\n};","\nimport React, { useEffect, useState } from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetDescription,\n  SheetFooter\n} from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Switch } from '@/components/ui/switch';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { SearchableLocationSelect } from '@/components/ui/searchable-location-select';\nimport { SearchableTransportTypeAdd } from '@/components/ui/searchable-transport-type-add';\nimport { TransportRoute, LocationCode, TransportType, SightseeingOption, Stop } from '../types/transportTypes';\nimport { Country } from '../../countries/types/country';\nimport { Plus, X, Route, MapPin } from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { loadSightseeingData } from '../../sightseeing/services/storageService';\nimport { ValidatedInput, ValidatedNumberInput, ValidatedTextarea } from './ValidatedInput';\nimport { useRouteForm } from '../hooks/useRouteForm';\nimport { locationResolutionService } from '@/services/locationResolutionService';\n\ninterface AddRouteSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (routeData: Partial<TransportRoute>) => void;\n  countries: Country[];\n  locations: LocationCode[];\n  transportTypes: TransportType[];\n}\n\nconst AddRouteSheet: React.FC<AddRouteSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  countries,\n  locations,\n  transportTypes\n}) => {\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const [sightseeingLocations, setSightseeingLocations] = useState<Sightseeing[]>([]);\n  \n  // New state for real-time location name display\n  const [startLocationName, setStartLocationName] = useState<string>('');\n  const [endLocationName, setEndLocationName] = useState<string>('');\n  const [isLoadingStartLocation, setIsLoadingStartLocation] = useState(false);\n  const [isLoadingEndLocation, setIsLoadingEndLocation] = useState(false);\n  \n  // State for intermediate stop location names\n  const [stopLocationNames, setStopLocationNames] = useState<Record<string, string>>({});\n  const [loadingStopIds, setLoadingStopIds] = useState<Set<string>>(new Set());\n  \n  const { \n    routeData, \n    setRouteData,\n    onChange, \n    filteredLocations, \n    filteredSightseeingLocations, \n    routeSegments, \n    validateField, \n    errors, \n    onRemoveTransportType,\n    onTransportTypeChange,\n  } = useRouteForm({}, locations, sightseeingLocations);\n\n  const onAddTransportType = (value: string) => {\n    const selectedType = transportTypes.find(t => t.id === value);\n    if (!selectedType) return;\n\n    const newTransportType = {\n      id: `tt-${Date.now()}`,\n      type: selectedType.name,\n      seatingCapacity: selectedType.seatingCapacity,\n      luggageCapacity: selectedType.luggageCapacity,\n      price: 0, // Default price, can be adjusted\n      duration: '' // Default duration, can be adjusted\n    };\n    const updatedTransportTypes = [...(routeData.transportTypes || []), newTransportType];\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  useEffect(() => {\n    const sightseeingData = loadSightseeingData();\n    const activeSightseeings = sightseeingData.filter(item => item.status === 'active');\n    setSightseeingLocations(activeSightseeings);\n  }, []);\n\n  // Reset form when sheet opens\n  useEffect(() => {\n    if (isOpen) {\n      // Reset form data\n      setRouteData({\n        status: 'active',\n        isActive: true,\n        enableSightseeing: false\n      });\n      // Reset location names\n      setStartLocationName('');\n      setEndLocationName('');\n      setStopLocationNames({});\n      setLoadingStopIds(new Set());\n    }\n  }, [isOpen, setRouteData]);\n\n  // Enhanced onChange function to handle location name resolution\n  const handleLocationChange = async (field: string, value: any) => {\n    onChange(field, value);\n    \n    // Handle real-time location name display\n    if (field === 'startLocation') {\n      if (value) {\n        setIsLoadingStartLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(value);\n          setStartLocationName(locationName || '');\n          // Also update the form data with the full name\n          onChange('startLocationFullName', locationName || '');\n        } catch (error) {\n          console.error('Error fetching start location name:', error);\n          setStartLocationName('');\n        } finally {\n          setIsLoadingStartLocation(false);\n        }\n      } else {\n        setStartLocationName('');\n        onChange('startLocationFullName', '');\n      }\n    } else if (field === 'endLocation') {\n      if (value) {\n        setIsLoadingEndLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(value);\n          setEndLocationName(locationName || '');\n          // Also update the form data with the full name\n          onChange('endLocationFullName', locationName || '');\n        } catch (error) {\n          console.error('Error fetching end location name:', error);\n          setEndLocationName('');\n        } finally {\n          setIsLoadingEndLocation(false);\n        }\n      } else {\n        setEndLocationName('');\n        onChange('endLocationFullName', '');\n      }\n    }\n  };\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    \n    try {\n      if (Object.keys(errors).length > 0) {\n        console.warn('Form has validation errors, cannot submit');\n        return;\n      }\n      \n      // Ensure location full names are set\n      const formDataWithFullNames = {\n        ...routeData,\n        startLocationFullName: startLocationName || routeData.startLocationFullName,\n        endLocationFullName: endLocationName || routeData.endLocationFullName,\n        // Map UI Notes textarea to description for saving\n        description: (routeData as any).notes ?? routeData.description ?? ''\n      };\n      \n      await onSave(formDataWithFullNames);\n      onClose();\n    } catch (error) {\n      console.error('Error saving route:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const onAddStop = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const newStop: Stop = { id: `stop-${Date.now()}`, locationCode: '', fullName: '', transferMethod: '' };\n    const updatedStops = [...(routeData.intermediateStops || []), newStop];\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n  };\n\n  const onRemoveStop = (stopId: string) => {\n    const updatedStops = routeData.intermediateStops?.filter(stop => stop.id !== stopId);\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n    \n    // Clean up location name state\n    setStopLocationNames(prev => {\n      const updated = { ...prev };\n      delete updated[stopId];\n      return updated;\n    });\n    setLoadingStopIds(prev => {\n      const updated = new Set(prev);\n      updated.delete(stopId);\n      return updated;\n    });\n  };\n\n  const onStopChange = async (stopId: string, locationCode: string) => {\n    const updatedStops = routeData.intermediateStops?.map(stop => \n      stop.id === stopId ? { ...stop, locationCode } : stop\n    );\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n    \n    // Handle location name resolution for intermediate stops\n    if (locationCode) {\n      setLoadingStopIds(prev => new Set(prev).add(stopId));\n      try {\n        const locationName = await locationResolutionService.getLocationFullName(locationCode);\n        setStopLocationNames(prev => ({\n          ...prev,\n          [stopId]: locationName || ''\n        }));\n      } catch (error) {\n        console.error('Error fetching stop location name:', error);\n        setStopLocationNames(prev => ({\n          ...prev,\n          [stopId]: ''\n        }));\n      } finally {\n        setLoadingStopIds(prev => {\n          const updated = new Set(prev);\n          updated.delete(stopId);\n          return updated;\n        });\n      }\n    } else {\n      // Clear location name if no location code\n      setStopLocationNames(prev => {\n        const updated = { ...prev };\n        delete updated[stopId];\n        return updated;\n      });\n    }\n  };\n\n  const onTransferMethodChange = (index: number, value: string) => {\n    const updatedStops = [...(routeData.intermediateStops || [])];\n    if (updatedStops[index]) {\n      updatedStops[index] = { ...updatedStops[index], transferMethod: value } as Stop;\n      setRouteData(prev => ({ ...prev, intermediateStops: updatedStops }));\n    }\n  };\n\n\n\n  const onAddSightseeingOption = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const newSightseeingOption: SightseeingOption = {\n      id: `so-${Date.now()}`,\n      location: '',\n      adultPrice: 0,\n      childPrice: 0,\n      description: '',\n      additionalCharges: 0\n    };\n    const updatedSightseeingOptions = [...(routeData.sightseeingOptions || []), newSightseeingOption];\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n\n  const onRemoveSightseeingOption = (optionId: string) => {\n    const updatedSightseeingOptions = routeData.sightseeingOptions?.filter(option => option.id !== optionId);\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n\n  const onSightseeingOptionChange = (optionId: string, field: string, value: any) => {\n    const updatedSightseeingOptions = routeData.sightseeingOptions?.map(option =>\n      option.id === optionId ? { ...option, [field]: value } : option\n    );\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n  \n  const handleStatusChange = (checked: boolean | \"indeterminate\") => {\n    const isOn = checked === true;\n    onChange('status', isOn ? 'active' : 'inactive');\n    onChange('isActive', isOn);\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full md:max-w-[1000px] overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Add New Transport Route</SheetTitle>\n          <SheetDescription>\n            Manage and organize transport routes efficiently\n          </SheetDescription>\n        </SheetHeader>\n\n        <div className=\"py-6 space-y-8\">\n          {/* Basic Info */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <h3 className=\"text-lg font-semibold\">Basic Information</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">\n                  Country <span className=\"text-red-500\">*</span>\n                </label>\n                <Select\n                  value={routeData.country}\n                  onValueChange={(value) => {\n                    onChange('country', value);\n                    validateField('country', value);\n                  }}\n                >\n                  <SelectTrigger className={errors.country ? \"border-red-500\" : \"\"}>\n                    <SelectValue placeholder=\"Select country\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {countries.map((country) => (\n                      <SelectItem key={country.id} value={country.name}>{country.name}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                {errors.country && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.country}</p>\n                )}\n              </div>\n              \n              <div>\n                <ValidatedInput\n                  label=\"Route Name\"\n                  value={routeData.name || ''}\n                  onChange={(value) => onChange('name', value)}\n                  onValidate={(value) => validateField('name', value)}\n                  placeholder=\"Route name\"\n                  required\n                  helpText=\"Auto-generated based on selected locations\"\n                />\n              </div>\n\n              <div className=\"col-span-2\">\n                <ValidatedTextarea\n                  label=\"Notes\"\n                  value={routeData.notes || ''}\n                  onChange={(value) => onChange('notes', value)}\n                  onValidate={(value) => validateField('notes', value)}\n                  placeholder=\"Add any notes for this route...\"\n                  helpText=\"Optional notes about this route\"\n                />\n              </div>\n\n              {/* Route Code */}\n              <div className=\"col-span-2\">\n                <label className=\"block text-sm font-medium mb-1\">Route Code</label>\n                <Input\n                  value={routeData.code || ''}\n                  readOnly\n                  className=\"bg-muted border-input text-foreground font-mono\"\n                  placeholder=\"Auto-generated\"\n                />\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Auto-generated from locations with detailed format\n                </p>\n                \n                {/* Display route segments */}\n                {routeSegments.length > 0 && (\n                  <div className=\"mt-2 bg-muted p-2 rounded-md\">\n                    <p className=\"text-xs font-medium mb-1\">Route Segments:</p>\n                    <div className=\"space-y-1\">\n                      {routeSegments.map((segment, index) => (\n                        <div key={index} className=\"text-xs font-mono pl-2 border-l-2 border-primary\">\n                          {segment}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Transfer Type & Stops */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <h3 className=\"text-lg font-semibold\">Transfer Type & Stops</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">\n                  Transfer Type <span className=\"text-red-500\">*</span>\n                </label>\n                <div className=\"flex flex-wrap gap-6\">\n                  {['One-Way', 'Round-Trip', 'Multi-Stop', 'en route'].map((type) => (\n                    <label key={type} className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        checked={routeData.transferType === type}\n                        onChange={() => {\n                          onChange('transferType', type);\n                          validateField('transferType', type);\n                        }}\n                        className=\"h-4 w-4 text-primary\"\n                      />\n                      <span>{type}</span>\n                    </label>\n                  ))}\n                </div>\n                {errors.transferType && (\n                  <p className=\"text-red-500 text-sm mt-1\">{errors.transferType}</p>\n                )}\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Start Location <span className=\"text-red-500\">*</span>\n                  </label>\n                  <SearchableLocationSelect\n                    locations={filteredLocations}\n                    value={routeData.startLocation}\n                    onValueChange={(value) => {\n                      handleLocationChange('startLocation', value);\n                      validateField('startLocation', value);\n                    }}\n                    placeholder=\"Select start location\"\n                    className={errors.startLocation ? 'border-red-500' : ''}\n                  />\n                  {errors.startLocation && (\n                    <p className=\"text-red-500 text-sm mt-1\">{errors.startLocation}</p>\n                  )}\n                  \n                  {/* Real-time Start Location Name Display */}\n                  {routeData.startLocation && (\n                    <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md\">\n                      <div className=\"flex items-center space-x-2\">\n                        <MapPin className=\"h-4 w-4 text-blue-600\" />\n                        <div className=\"flex-1\">\n                          {isLoadingStartLocation ? (\n                            <div className=\"flex items-center space-x-2\">\n                              <div className=\"animate-spin h-3 w-3 border border-blue-600 border-t-transparent rounded-full\"></div>\n                              <span className=\"text-sm text-blue-600\">Loading location name...</span>\n                            </div>\n                          ) : startLocationName ? (\n                            <div>\n                              <p className=\"text-sm font-medium text-blue-900\">{startLocationName}</p>\n                              <p className=\"text-xs text-blue-600\">Code: {routeData.startLocation}</p>\n                            </div>\n                          ) : (\n                            <p className=\"text-sm text-blue-600\">Location name not found</p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    End Location <span className=\"text-red-500\">*</span>\n                  </label>\n                  <SearchableLocationSelect\n                    locations={filteredLocations}\n                    value={routeData.endLocation}\n                    onValueChange={(value) => {\n                      handleLocationChange('endLocation', value);\n                      validateField('endLocation', value);\n                    }}\n                    placeholder=\"Select end location\"\n                    className={errors.endLocation ? 'border-red-500' : ''}\n                  />\n                  {errors.endLocation && (\n                    <p className=\"text-red-500 text-sm mt-1\">{errors.endLocation}</p>\n                  )}\n                  \n                  {/* Real-time End Location Name Display */}\n                  {routeData.endLocation && (\n                    <div className=\"mt-2 p-3 bg-green-50 border border-green-200 rounded-md\">\n                      <div className=\"flex items-center space-x-2\">\n                        <MapPin className=\"h-4 w-4 text-green-600\" />\n                        <div className=\"flex-1\">\n                          {isLoadingEndLocation ? (\n                            <div className=\"flex items-center space-x-2\">\n                              <div className=\"animate-spin h-3 w-3 border border-green-600 border-t-transparent rounded-full\"></div>\n                              <span className=\"text-sm text-green-600\">Loading location name...</span>\n                            </div>\n                          ) : endLocationName ? (\n                            <div>\n                              <p className=\"text-sm font-medium text-green-900\">{endLocationName}</p>\n                              <p className=\"text-xs text-green-600\">Code: {routeData.endLocation}</p>\n                            </div>\n                          ) : (\n                            <p className=\"text-sm text-green-600\">Location name not found</p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              {/* Intermediate Stops */}\n              {(routeData.transferType === 'Multi-Stop' || routeData.transferType === 'en route') && (\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Intermediate Stops</label>\n                  \n                  {routeData.intermediateStops && routeData.intermediateStops.map((stop) => (\n                    <div key={stop.id} className=\"space-y-2 mb-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <SearchableLocationSelect\n                          locations={filteredLocations}\n                          value={stop.locationCode}\n                          onValueChange={(value) => onStopChange(stop.id, value)}\n                          placeholder=\"Select stop location\"\n                          className=\"flex-1\"\n                        />\n                        \n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => onRemoveStop(stop.id)}\n                          className=\"text-destructive\"\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                      \n                      {/* Real-time Stop Location Name Display */}\n                      {stop.locationCode && (\n                        <div className=\"ml-0 p-3 bg-orange-50 border border-orange-200 rounded-md\">\n                          <div className=\"flex items-center space-x-2\">\n                            <MapPin className=\"h-4 w-4 text-orange-600\" />\n                            <div className=\"flex-1\">\n                              {loadingStopIds.has(stop.id) ? (\n                                <div className=\"flex items-center space-x-2\">\n                                  <div className=\"animate-spin h-3 w-3 border border-orange-600 border-t-transparent rounded-full\"></div>\n                                  <span className=\"text-sm text-orange-600\">Loading location name...</span>\n                                </div>\n                              ) : stopLocationNames[stop.id] ? (\n                                <div>\n                                  <p className=\"text-sm font-medium text-orange-900\">{stopLocationNames[stop.id]}</p>\n                                  <p className=\"text-xs text-orange-600\">Code: {stop.locationCode}</p>\n                                </div>\n                              ) : (\n                                <p className=\"text-sm text-orange-600\">Location name not found</p>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                  \n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={onAddStop}\n                    className=\"mt-2\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Add Stop\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Transfer Method Notes */}\n          {(routeData.transferType === 'Multi-Stop' || routeData.transferType === 'en route') && (\n            <div className=\"space-y-4 pb-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Transfer Method Notes</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Add notes about transfer methods for each segment (e.g., \"Road transfer PVT + Ferry on SIC\")\n              </p>\n              \n          {routeData.intermediateStops && routeData.intermediateStops.length > 0 && (\n            <div className=\"space-y-3\">\n              {routeData.intermediateStops.map((_, index) => (\n                <div key={index} className=\"flex flex-col\">\n                  <label className=\"text-sm font-medium mb-1\">\n                    {routeSegments[index]}\n                  </label>\n                  <Input\n                    placeholder=\"e.g., Road transfer PVT + Ferry on SIC\"\n                    value={routeData.intermediateStops?.[index]?.transferMethod || ''}\n                    onChange={(e) => onTransferMethodChange(index, e.target.value)}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n            </div>\n          )}\n          \n          {/* Transport Information */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-semibold\">Transport Information</h3>\n              <SearchableTransportTypeAdd\n                transportTypes={transportTypes}\n                onSelectType={(value) => onAddTransportType(value)}\n              />\n            </div>\n            \n            {routeData.transportTypes && routeData.transportTypes.map((type, index) => (\n              <div key={type.id} className=\"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border rounded-md\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Transport Type</label>\n                  <Select\n                    value={type.type}\n                    onValueChange={(value) => onTransportTypeChange(type.id, 'type', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {transportTypes.filter((tt) => (tt as any).active !== false).map((t) => (\n                        <SelectItem key={t.id} value={t.name}>{t.name}</SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div>\n                  <ValidatedNumberInput\n                    label=\"Seating Capacity\"\n                    value={type.seatingCapacity}\n                    onChange={(value) => onTransportTypeChange(type.id, 'seatingCapacity', value)}\n                    onValidate={(value) => validateField('transportTypes.seatingCapacity', value)}\n                    min={0}\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <ValidatedNumberInput\n                    label=\"Luggage Capacity\"\n                    value={type.luggageCapacity}\n                    onChange={(value) => onTransportTypeChange(type.id, 'luggageCapacity', value)}\n                    onValidate={(value) => validateField('transportTypes.luggageCapacity', value)}\n                    min={0}\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <ValidatedInput\n                    label=\"Duration\"\n                    value={type.duration}\n                    onChange={(value) => onTransportTypeChange(type.id, 'duration', value)}\n                    onValidate={(value) => validateField('transportTypes.duration', value)}\n                    placeholder=\"e.g., 1h 30m\"\n                    helpText=\"Format: 1h 30m\"\n                    required\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <div className=\"flex-1\">\n                    <ValidatedNumberInput\n                      label=\"Price\"\n                      value={type.price}\n                      onChange={(value) => onTransportTypeChange(type.id, 'price', value)}\n                      onValidate={(value) => validateField('transportTypes.price', value)}\n                      min={0}\n                      step={0.01}\n                      required\n                    />\n                  </div>\n                  \n                  {routeData.transportTypes && routeData.transportTypes.length > 1 && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => onRemoveTransportType(type.id)}\n                      className=\"ml-2 mb-[2px] text-destructive\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          {/* Sightseeing Options */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-semibold\">Sightseeing Options</h3>\n              {routeData.enableSightseeing && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={onAddSightseeingOption}\n                >\n                  <Plus className=\"h-4 w-4 mr-1\" />\n                  Add Sightseeing\n                </Button>\n              )}\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"enableSightseeing\"\n                checked={!!routeData.enableSightseeing}\n                onCheckedChange={(checked) => onChange('enableSightseeing', !!checked)}\n              />\n              <label\n                htmlFor=\"enableSightseeing\"\n                className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n              >\n                Sightseeing Options\n              </label>\n            </div>\n            \n            {routeData.enableSightseeing && (\n              <div className=\"space-y-4\">\n                {filteredSightseeingLocations.length === 0 && (\n                  <div className=\"text-sm text-amber-600 bg-amber-50 border border-amber-200 p-3 rounded-md\">\n                    No active sightseeing locations found for {routeData.country || \"the selected country\"}. \n                    Add sightseeing locations in the Sightseeing module first.\n                  </div>\n                )}\n                \n                {routeData.sightseeingOptions && routeData.sightseeingOptions.length > 0 ? (\n                  routeData.sightseeingOptions.map((option) => (\n                    <div key={option.id} className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/50 rounded-md relative\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onRemoveSightseeingOption(option.id)}\n                        className=\"absolute right-2 top-2 text-destructive\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium mb-1\">Sightseeing Location</label>\n                        <Select\n                          value={option.location}\n                          onValueChange={(value) => onSightseeingOptionChange(option.id, 'location', value)}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select location\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {filteredSightseeingLocations.map((location) => (\n                              <SelectItem key={location.id} value={location.name}>\n                                {location.name} - {location.city}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Adult Price\"\n                          value={option.adultPrice}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'adultPrice', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.adultPrice', value)}\n                          min={0}\n                          step={0.01}\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Child Price\"\n                          value={option.childPrice}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'childPrice', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.childPrice', value)}\n                          min={0}\n                          step={0.01}\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Additional Charges\"\n                          value={option.additionalCharges}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'additionalCharges', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.additionalCharges', value)}\n                          min={0}\n                          step={0.01}\n                          helpText=\"Optional extra charges\"\n                        />\n                      </div>\n                      \n                      <div className=\"col-span-2\">\n                        <ValidatedInput\n                          label=\"Description\"\n                          value={option.description || ''}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'description', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.description', value)}\n                          placeholder=\"Description of the sightseeing option\"\n                          helpText=\"Brief description of the sightseeing activity\"\n                        />\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={onAddSightseeingOption}\n                    className=\"w-full py-8 border-dashed\"\n                    disabled={filteredSightseeingLocations.length === 0}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Sightseeing Option\n                  </Button>\n                )}\n              </div>\n            )}\n          </div>\n          \n          {/* Status */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold\">Status</h3>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"routeStatus\"\n                checked={(routeData.status === 'active') || routeData.isActive === true}\n                onCheckedChange={handleStatusChange}\n              />\n              <span className=\"text-sm font-medium\">\n                {((routeData.status === 'active') || routeData.isActive === true) ? 'Active' : 'Inactive'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSave}\n            disabled={Object.keys(errors).length > 0 || isSaving}\n            className={Object.keys(errors).length > 0 ? \"opacity-50 cursor-not-allowed\" : \"\"}\n          >\n            {isSaving ? \"Saving...\" : \"Save Route\"}\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default AddRouteSheet;\n","\nimport React from 'react';\nimport { Badge as UIBadge } from '@/components/ui/badge';\nimport { cn } from '@/lib/utils';\n\ninterface BadgeProps {\n  status: 'active' | 'inactive' | boolean;\n  variant?: 'default' | 'outline' | 'secondary';\n  className?: string;\n  additionalText?: string;\n}\n\nconst Badge: React.FC<BadgeProps> = ({ \n  status, \n  variant = 'default', \n  className,\n  additionalText = ''\n}) => {\n  // Convert boolean status to string\n  const normalizedStatus = typeof status === 'boolean' \n    ? (status ? 'active' : 'inactive') \n    : status;\n  \n  const getStatusClass = () => {\n    switch (normalizedStatus) {\n      case 'active':\n        return 'bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400';\n      case 'inactive':\n        return 'bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400';\n\n      default:\n        return 'bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400';\n    }\n  };\n\n  return (\n    <UIBadge \n      variant={variant}\n      className={cn(\n        variant === 'default' ? getStatusClass() : '',\n        'capitalize',\n        className\n      )}\n    >\n      {normalizedStatus} {additionalText}\n    </UIBadge>\n  );\n};\n\nexport default Badge;\n","\nimport React, { useEffect, useState } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetFooter, SheetTitle, SheetDescription } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { TransportRoute } from '../types/transportTypes';\nimport { \n  Table, \n  TableHeader, \n  TableRow, \n  TableHead, \n  TableBody, \n  TableCell \n} from '@/components/ui/table';\nimport { formatCurrency, formatPriceForCountry } from '../utils/currencyUtils';\nimport { Map, Pin, Calendar, Clock, Route, Compass, ArrowRight, Info, Truck, MapPin } from 'lucide-react';\nimport Badge from './Badge';\nimport { getTransportRouteDetails, type TransportRouteDetails } from '@/services/transportRouteDetailsService';\n\ninterface ViewRouteSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  route: TransportRoute | null;\n  onEdit: () => void;\n}\n\nconst ViewRouteSheet: React.FC<ViewRouteSheetProps> = ({ isOpen, onClose, route, onEdit }) => {\n  const hasRoute = !!route;\n  \n  // Legacy flags no longer used in read-only view\n  // const hasRouteSegments = route.routeSegments && route.routeSegments.length > 0;\n  // const hasIntermediateStops = route.intermediateStops && route.intermediateStops.length > 0;\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [routeDetails, setRouteDetails] = useState<TransportRouteDetails | null>(null);\n\n  // Convert status to a normalized string for the Badge component\n  const getStatusString = (status: unknown): 'active' | 'inactive' => {\n    if (typeof status === 'boolean') {\n      return status ? 'active' : 'inactive';\n    }\n    if (typeof status === 'string') {\n      const s = status.toLowerCase();\n      return s === 'active' ? 'active' : 'inactive';\n    }\n    return 'inactive';\n  };\n  \n  useEffect(() => {\n    const run = async () => {\n      setError(null);\n      setRouteDetails(null);\n      if (!route?.id || !isOpen) return;\n      setLoading(true);\n      try {\n        const details = await getTransportRouteDetails(route.id);\n        setRouteDetails(details);\n      } catch (e) {\n        setError(e instanceof Error ? e.message : 'Unknown error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    run();\n  }, [route?.id, isOpen]);\n\n  const formatCoords = (coords: any): string => {\n    if (!coords || typeof coords !== 'object') return 'N/A';\n    const lat = (coords as any).lat ?? (coords as any).latitude;\n    const lng = (coords as any).lng ?? (coords as any).longitude;\n    if (typeof lat === 'number' && typeof lng === 'number') {\n      return `${lat.toFixed(6)}, ${lng.toFixed(6)}`;\n    }\n    return 'N/A';\n  };\n\n  // Helpers: parse duration strings like \"2h 30m\" or \"150m\" to minutes, then format back\n  const parseDurationToMinutes = (str: unknown): number => {\n    if (typeof str !== 'string') return 0;\n    const s = str.trim().toLowerCase();\n    let total = 0;\n    const hMatch = s.match(/(\\d+)\\s*h/);\n    const mMatch = s.match(/(\\d+)\\s*m/);\n    if (hMatch) total += parseInt(hMatch[1], 10) * 60;\n    if (mMatch) total += parseInt(mMatch[1], 10);\n    if (!hMatch && !mMatch) {\n      const num = parseFloat(s);\n      if (!isNaN(num)) total += num; // assume minutes\n    }\n    return total;\n  };\n\n  const formatMinutesToHM = (minutes: number): string => {\n    if (!minutes || minutes <= 0) return 'N/A';\n    const h = Math.floor(minutes / 60);\n    const m = minutes % 60;\n    return h > 0 ? `${h}h ${m}m` : `${m}m`;\n  };\n\n  const totalDurationMinutes = Array.isArray(routeDetails?.vehicleTypes)\n    ? routeDetails!.vehicleTypes.reduce((sum: number, v: any) => sum + parseDurationToMinutes(v?.duration), 0)\n    : 0;\n\n  // Extract (lat,lng) consistently\n  const coordPair = (obj: any): { lat: number; lng: number } | null => {\n    if (!obj || typeof obj !== 'object') return null;\n    const lat = obj.lat ?? obj.latitude;\n    const lng = obj.lng ?? obj.longitude;\n    if (typeof lat === 'number' && typeof lng === 'number') return { lat, lng };\n    return null;\n  };\n\n  // Haversine distance in km (rounded to nearest km)\n  const haversineKm = (a: { lat: number; lng: number }, b: { lat: number; lng: number }): number => {\n    const R = 6371;\n    const dLat = ((b.lat - a.lat) * Math.PI) / 180;\n    const dLon = ((b.lng - a.lng) * Math.PI) / 180;\n    const lat1 = (a.lat * Math.PI) / 180;\n    const lat2 = (b.lat * Math.PI) / 180;\n    const h = Math.sin(dLat / 2) ** 2 + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) ** 2;\n    const c = 2 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h));\n    return Math.round(R * c);\n  };\n\n  // Compute distance: Multi-Stop sum, else Start-End (Round-trip multiplies by 2)\n  const computeDistanceKm = (): string => {\n    const start = coordPair(routeDetails?.start_coordinates);\n    const end = coordPair(routeDetails?.end_coordinates);\n    const stops = Array.isArray(routeDetails?.stops) ? routeDetails!.stops : [];\n    const stopCoords: Array<{ lat: number; lng: number }> = stops\n      .map((s: any) => coordPair(s?.coordinates))\n      .filter((p: any) => p !== null) as Array<{ lat: number; lng: number }>;\n\n    // Multi-Stop: need start, each stop, and end to form legs\n    if (stopCoords.length > 0) {\n      if (!start || !end) return 'N/A';\n      const points = [start, ...stopCoords, end];\n      // Validate all points\n      if (points.some(p => !p)) return 'N/A';\n      const sum = points.reduce((acc, curr, idx) => {\n        if (idx === 0) return 0;\n        return acc + haversineKm(points[idx - 1], curr);\n      }, 0);\n      return `${sum} km`;\n    }\n\n    // Basic Start-End distance\n    if (start && end) {\n      let dist = haversineKm(start, end);\n      const tt = routeDetails?.transfer_type?.toLowerCase() || '';\n      const isRoundTrip = tt.includes('round') || tt.includes('return') || tt.includes('two-way');\n      if (isRoundTrip) dist = dist * 2;\n      return `${dist} km`;\n    }\n    return 'N/A';\n  };\n  \n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full sm:max-w-[700px] overflow-y-auto\">\n        <SheetHeader className=\"pb-2 mb-2 border-b\">\n          <div className=\"flex justify-between items-center\">\n            <SheetTitle className=\"flex items-center gap-2\">\n              <span className=\"text-xl\">\n                {routeDetails\n                  ? `${routeDetails.start_location_full_name || routeDetails.start_location || 'N/A'}  ${routeDetails.end_location_full_name || routeDetails.end_location || 'N/A'}`\n                  : (route?.name || 'Transport Route')}\n                <Badge status={getStatusString(routeDetails?.status ?? (route?.status ?? 'inactive'))} className=\"ml-2\" />\n              </span>\n            </SheetTitle>\n            {/* Export button removed from here */}\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <SheetDescription className=\"flex items-center\">\n              Transport route details\n            </SheetDescription>\n            <div className=\"text-sm font-medium text-muted-foreground\">\n              {routeDetails?.route_code && (\n                <span className=\"font-mono\">Code: {routeDetails.route_code}</span>\n              )}\n            </div>\n          </div>\n        </SheetHeader>\n        \n        <div className=\"py-4 space-y-6\">\n          {loading && hasRoute && (\n            <div className=\"p-4 text-sm text-muted-foreground\">Loading route</div>\n          )}\n          {error && hasRoute && (\n            <div className=\"p-4 text-sm text-destructive\">{error}</div>\n          )}\n          {!loading && !error && hasRoute && routeDetails && (\n            <>\n            {/* Heading: Route Name or Full Name */}\n            <h1 className=\"text-2xl font-bold mb-4\">\n              {routeDetails.route_name \n                || (routeDetails.start_location_full_name && routeDetails.end_location_full_name \n                      ? `${routeDetails.start_location_full_name}  ${routeDetails.end_location_full_name}`\n                      : 'Transport Route Details')}\n            </h1>\n            {/* Quick summary */}\n            <div className=\"rounded-lg bg-muted p-4\">\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">Country</p>\n                  <p className=\"font-medium\">{routeDetails.country || 'N/A'}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">Transfer Type</p>\n                  <p className=\"font-medium\">{routeDetails.transfer_type || 'N/A'}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">Duration</p>\n                  <p className=\"font-medium\">{formatMinutesToHM(totalDurationMinutes)}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">Distance</p>\n                  <p className=\"font-medium\">{computeDistanceKm()}</p>\n                </div>\n              </div>\n            </div>\n\n          {/* Basic Info */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <Info className=\"h-5 w-5 text-primary\" />\n              Route Information\n            </h3>\n            \n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <Compass className=\"h-4 w-4\" />\n                  Route Code\n                </div>\n                <p className=\"font-medium\">{routeDetails.route_code || 'N/A'}</p>\n              </div>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <Map className=\"h-4 w-4\" />\n                  Country\n                </div>\n                <p className=\"font-medium\">{routeDetails.country || 'N/A'}</p>\n              </div>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <Truck className=\"h-4 w-4\" />\n                  Transfer Type\n                </div>\n                <p className=\"font-medium\">{routeDetails.transfer_type || 'N/A'}</p>\n              </div>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <Info className=\"h-4 w-4\" />\n                  Notes\n                </div>\n                <p className=\"font-medium\">{routeDetails.notes || 'N/A'}</p>\n              </div>\n            </div>\n          </div>\n          \n          {/* Route Segments removed in View per spec */}\n          \n          {/* Locations */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <MapPin className=\"h-5 w-5 text-primary\" />\n              Locations\n            </h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-start\">\n                <div className=\"bg-green-100 p-2 rounded mr-3\">\n                  <Pin className=\"h-5 w-5 text-green-600\" />\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Start Location</p>\n                  <p>{routeDetails.start_location_full_name || routeDetails.start_location || 'N/A'}</p>\n                  <p className=\"text-xs text-muted-foreground\">{routeDetails.start_location || ''}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-start\">\n                <div className=\"bg-red-100 p-2 rounded mr-3\">\n                  <Pin className=\"h-5 w-5 text-red-600\" />\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">End Location</p>\n                  <p>{routeDetails.end_location_full_name || routeDetails.end_location || 'N/A'}</p>\n                  <p className=\"text-xs text-muted-foreground\">{routeDetails.end_location || ''}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Transport Details & Pricing - Updated to show all vehicle types prominently */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <Truck className=\"h-5 w-5 text-primary\" />\n              Transport Options\n            </h3>\n            \n            <div className=\"overflow-x-auto\">\n              {(Array.isArray(routeDetails.vehicleTypes) && routeDetails.vehicleTypes.length > 0) ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Transport Type / Vehicle</TableHead>\n                      <TableHead className=\"text-center\">Capacity</TableHead>\n                      <TableHead className=\"text-center\">Duration</TableHead>\n                      <TableHead className=\"text-center\">Luggage</TableHead>\n                      <TableHead className=\"text-right\">Price</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {routeDetails.vehicleTypes.map((v: any, index: number) => (\n                      <TableRow key={index}>\n                        <TableCell className=\"font-medium\">\n                          {(v.transport_type || 'N/A')}\n                          {v.vehicle_name ? ` / ${v.vehicle_name}` : ''}\n                        </TableCell>\n                        <TableCell className=\"text-center\">{v.seating_capacity ?? 'N/A'}</TableCell>\n                        <TableCell className=\"text-center\">\n                          <div className=\"flex items-center justify-center\">\n                            <Clock className=\"h-4 w-4 mr-1 text-muted-foreground\" />\n                            {v.duration || 'N/A'}\n                          </div>\n                        </TableCell>\n                        <TableCell className=\"text-center\">\n                          {(() => {\n                            const match = Array.isArray(routeDetails.luggageCapacity)\n                              ? routeDetails.luggageCapacity.find((l: any) => l.transport_type === v.transport_type)\n                              : undefined;\n                            return match?.bags != null ? String(match.bags) : 'N/A';\n                          })()}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          {typeof v?.price === 'number'\n                            ? (routeDetails.country \n                                ? formatPriceForCountry(v.price, routeDetails.country) \n                                : formatCurrency(v.price))\n                            : 'N/A'}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <div className=\"p-3 text-sm text-muted-foreground\">No transport options are available for this route.</div>\n              )}\n            </div>\n          </div>\n          \n\n          \n          {/* Sightseeing Options */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <Compass className=\"h-5 w-5 text-primary\" />\n              Sightseeing Options\n            </h3>\n            <div className=\"overflow-x-auto\">\n              {(Array.isArray(routeDetails.sightseeing) && routeDetails.sightseeing.length > 0) ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Sightseeing Location</TableHead>\n                      <TableHead>Description</TableHead>\n                      <TableHead className=\"text-right\">Adult Price</TableHead>\n                      <TableHead className=\"text-right\">Child Price</TableHead>\n                      <TableHead className=\"text-right\">Additional Charges</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {routeDetails.sightseeing.map((option: any) => (\n                      <TableRow key={option.id}>\n                        <TableCell className=\"font-medium\">{option.location || 'N/A'}</TableCell>\n                        <TableCell>{option.description || 'N/A'}</TableCell>\n                        <TableCell className=\"text-right\">\n                          {routeDetails.country\n                            ? formatPriceForCountry(option.adult_price ?? 0, routeDetails.country)\n                            : formatCurrency(option.adult_price ?? 0)}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          {routeDetails.country\n                            ? formatPriceForCountry(option.child_price ?? 0, routeDetails.country)\n                            : formatCurrency(option.child_price ?? 0)}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          {routeDetails.country\n                            ? formatPriceForCountry(option.additional_charges ?? 0, routeDetails.country)\n                            : formatCurrency(option.additional_charges ?? 0)}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <div className=\"p-3 text-sm text-muted-foreground\">No sightseeing options available for this route.</div>\n              )}\n            </div>\n          </div>\n          \n          {/* Intermediate Stops */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <Route className=\"h-5 w-5 text-primary\" />\n              Intermediate Stops\n            </h3>\n            <div className=\"overflow-x-auto\">\n              {(() => {\n                const displayedStops = Array.isArray(routeDetails.stops)\n                  ? routeDetails.stops.filter((s: any) => {\n                      const st = s.status;\n                      if (st === undefined || st === null) return true;\n                      if (typeof st === 'boolean') return st;\n                      if (typeof st === 'string') return st.toLowerCase() === 'active';\n                      return true;\n                    })\n                  : [];\n                return displayedStops.length > 0 ? (\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Stop Order</TableHead>\n                      <TableHead>Location</TableHead>\n                      <TableHead>Full Name</TableHead>\n                      <TableHead>Coordinates</TableHead>\n                      <TableHead>Transfer Notes</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {displayedStops.map((s: any) => (\n                      <TableRow key={s.id}>\n                        <TableCell>{s.stop_order ?? 'N/A'}</TableCell>\n                        <TableCell>{s.location_code || s.location || 'N/A'}</TableCell>\n                        <TableCell>{s.full_name || s.location_details?.full_name || 'N/A'}</TableCell>\n                        <TableCell>{s.coordinates ? formatCoords(s.coordinates) : 'N/A'}</TableCell>\n                        <TableCell>{s.transfer_method_notes ?? s.notes ?? 'N/A'}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              ) : (\n                <div className=\"p-3 text-sm text-muted-foreground\">No intermediate stops for this route.</div>\n              );})()}\n            </div>\n          </div>\n          \n          {/* Additional Information */}\n          {routeDetails?.description && (\n            <div>\n              <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n                <Info className=\"h-5 w-5 text-primary\" />\n                Description\n              </h3>\n              <p className=\"text-sm\">{routeDetails.description}</p>\n            </div>\n          )}\n          \n          {/* Notes */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 border-b pb-2 flex items-center gap-2\">\n              <Info className=\"h-5 w-5 text-primary\" />\n              Notes\n            </h3>\n            <p className=\"text-sm\">{routeDetails?.notes || 'N/A'}</p>\n          </div>\n          </>\n          )}\n        </div>\n        \n        <SheetFooter className=\"pt-4 border-t mt-4\">\n          <Button variant=\"outline\" onClick={onClose} className=\"sm:w-auto w-full\">\n            Back to Routes\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default ViewRouteSheet;\n","\nimport React, { useState, useEffect } from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n  SheetFooter\n} from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Plus, Trash2, Route, MapPin, X } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { TransportRoute, TransportType, LocationCode, SightseeingOption, Stop } from '@/pages/inventory/transport/types/transportTypes';\nimport { Country } from '@/pages/inventory/countries/types/country';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { loadSightseeingData } from '@/pages/inventory/sightseeing/services/storageService';\nimport { ValidatedInput, ValidatedNumberInput, ValidatedTextarea } from './ValidatedInput';\nimport { useRouteForm } from '../hooks/useRouteForm';\nimport { locationResolutionService } from '@/services/locationResolutionService';\nimport type { CompleteTransportRoute } from '@/services/comprehensiveTransportService';\nimport { supabase } from '@/lib/supabaseClient';\nimport { getTransportRouteDetails } from '@/services/transportRouteDetailsService';\n\ninterface EditRouteSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (routeData: Partial<TransportRoute>) => void;\n  route: CompleteTransportRoute | null;\n  countries: Country[];\n  locations: LocationCode[];\n  transportTypes: TransportType[];\n}\n\nconst EditRouteSheet: React.FC<EditRouteSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  route,\n  countries,\n  locations,\n  transportTypes\n}) => {\n  const [isSaving, setIsSaving] = useState<boolean>(false);\n  const [sightseeingLocations, setSightseeingLocations] = useState<Sightseeing[]>([]);\n  \n  // New state for real-time location name display\n  const [startLocationName, setStartLocationName] = useState<string>('');\n  const [endLocationName, setEndLocationName] = useState<string>('');\n  const [isLoadingStartLocation, setIsLoadingStartLocation] = useState(false);\n  const [isLoadingEndLocation, setIsLoadingEndLocation] = useState(false);\n\n  // Helpers to normalize varied data shapes to UI form expectations\n  const parseJsonArraySafely = (value: unknown): any[] => {\n    try {\n      if (Array.isArray(value)) return value as any[];\n      if (typeof value === 'string') {\n        const parsed = JSON.parse(value);\n        return Array.isArray(parsed) ? parsed : [];\n      }\n      if (value && typeof value === 'object') return [value as any];\n      return [];\n    } catch {\n      return [];\n    }\n  };\n\n  const mapVehicleTypesToUI = (rawVehicleTypes: any[]): any[] => {\n    return rawVehicleTypes.map((vt: any, index: number) => ({\n      id: String(index + 1),\n      type: vt.transport_type ?? vt.type ?? 'N/A',\n      vehicleName: vt.vehicle_name ?? vt.vehicleName ?? undefined,\n      seatingCapacity: Number(vt.seating_capacity ?? vt.seatingCapacity ?? 0),\n      luggageCapacity: Number(vt.luggage_capacity ?? vt.luggageCapacity ?? 0),\n      duration: vt.duration ?? '',\n      price: Number(vt.price ?? 0),\n    }));\n  };\n\n  const mapStopsToUI = (stops: any[] = []): any[] => {\n    return stops.map((stop: any) => ({\n      id: stop.id ?? String(Math.random()),\n      locationCode: stop.location_code ?? stop.locationCode ?? '',\n      fullName: stop.full_name ?? stop.fullName ?? '',\n      transferMethod: stop.transfer_method_notes ?? stop.transferMethod ?? ''\n    }));\n  };\n\n  const mapSightseeingToUI = (options: any[] = []): any[] => {\n    return options.map((opt: any) => ({\n      id: opt.id,\n      location: opt.location ?? opt.location_code ?? '',\n      description: opt.description ?? '',\n      adultPrice: Number(opt.adult_price ?? opt.adultPrice ?? 0),\n      childPrice: Number(opt.child_price ?? opt.childPrice ?? 0),\n      additionalCharges: Number(opt.additional_charges ?? opt.additionalCharges ?? 0)\n    }));\n  };\n\n  // Allowed transfer types for strict typing\n  const allowedTransferTypes = ['One-Way', 'Round-Trip', 'Multi-Stop', 'en route', 'Private', 'SIC'] as const;\n  type AllowedTransferType = typeof allowedTransferTypes[number];\n\n  // Sanitize incoming transfer type values to the allowed union\n  const sanitizeTransferType = (raw: any): AllowedTransferType => {\n    const val = String(raw ?? '').trim();\n    return (allowedTransferTypes as readonly string[]).includes(val)\n      ? (val as AllowedTransferType)\n      : 'One-Way';\n  };\n\n  // Convert boolean active flag to status literal\n  const toStatusLiteral = (isActive: boolean) => (isActive ? 'active' as const : 'inactive' as const);\n\n  const getInitialData = () => {\n    if (!route) return {};\n\n    // Vehicle types can be stored under different keys depending on schema evolution\n    const rawVehicleTypes = parseJsonArraySafely(\n      (route as any).vehicle_types ?? (route as any).transport_types ?? (route as any).transport_entries\n    );\n\n    const normalizedIsActive = typeof (route as any).is_active === 'boolean'\n      ? Boolean((route as any).is_active)\n      : String((route as any).status || '').toLowerCase() === 'active';\n\n    return {\n      id: route.id,\n      code: route.route_code || '',\n      name: route.route_name || '',\n      country: (route as any).country || '',\n      transferType: sanitizeTransferType((route as any).transfer_type),\n      startLocation: (route as any).start_location || '',\n      endLocation: (route as any).end_location || '',\n      notes: (route as any).notes || '',\n      status: toStatusLiteral(normalizedIsActive),\n      isActive: normalizedIsActive,\n      intermediateStops: mapStopsToUI(route.intermediate_stops || []),\n      transportTypes: mapVehicleTypesToUI(rawVehicleTypes),\n      sightseeingOptions: mapSightseeingToUI(route.sightseeing_options || [])\n    };\n  };\n\n  const { \n    routeData, \n    setRouteData,\n    onChange, \n    filteredLocations, \n    filteredSightseeingLocations, \n    routeSegments, \n    validateField, \n    errors, \n  } = useRouteForm(getInitialData(), locations, sightseeingLocations);\n\n  const hasErrors = Object.keys(errors).length > 0;\n\n  useEffect(() => {\n    const sightseeingData = loadSightseeingData();\n    const activeSightseeings = sightseeingData.filter(item => item.status === 'active');\n    setSightseeingLocations(activeSightseeings);\n  }, []);\n\n  // Fetch full route details for editing when sheet opens\n  useEffect(() => {\n    const fetchRouteDetails = async () => {\n      if (!isOpen || !route?.id) return;\n      try {\n        const details = await getTransportRouteDetails(route.id);\n\n        const normalizedIsActive = String(details.status || '').toLowerCase() === 'active';\n        const vehicleTypes = Array.isArray(details.vehicleTypes) ? details.vehicleTypes : [];\n        const stops = Array.isArray(details.stops) ? details.stops : [];\n        const sightseeing = Array.isArray(details.sightseeing) ? details.sightseeing : [];\n\n        setRouteData(prev => ({\n          ...prev,\n          id: details.id,\n          code: details.route_code || '',\n          name: details.route_name || '',\n          notes: details.notes || '',\n          country: details.country || '',\n          transferType: sanitizeTransferType((details as any).transfer_type),\n          startLocation: details.start_location || '',\n          endLocation: details.end_location || '',\n          startLocationFullName: (details as any).start_location_full_name || '',\n          endLocationFullName: (details as any).end_location_full_name || '',\n          intermediateStops: mapStopsToUI(stops),\n          transportTypes: mapVehicleTypesToUI(vehicleTypes),\n          enableSightseeing: !!details.enable_sightseeing,\n          sightseeingOptions: mapSightseeingToUI(sightseeing),\n          status: toStatusLiteral(normalizedIsActive),\n          isActive: normalizedIsActive\n        }));\n      } catch (error) {\n        console.error('Error fetching route for edit:', error);\n      }\n    };\n\n    fetchRouteDetails();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, route?.id]);\n\n  // Load initial location names when route data is available\n  useEffect(() => {\n    const loadInitialLocationNames = async () => {\n      if (routeData.startLocation) {\n        setIsLoadingStartLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(routeData.startLocation);\n          setStartLocationName(locationName || '');\n        } catch (error) {\n          console.error('Error fetching start location name:', error);\n        } finally {\n          setIsLoadingStartLocation(false);\n        }\n      }\n      \n      if (routeData.endLocation) {\n        setIsLoadingEndLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(routeData.endLocation);\n          setEndLocationName(locationName || '');\n        } catch (error) {\n          console.error('Error fetching end location name:', error);\n        } finally {\n          setIsLoadingEndLocation(false);\n        }\n      }\n    };\n\n    loadInitialLocationNames();\n  }, [routeData.startLocation, routeData.endLocation]);\n\n  // Enhanced onChange function to handle location name resolution\n  const handleLocationChange = async (field: string, value: any) => {\n    onChange(field, value);\n    \n    // Handle real-time location name display\n    if (field === 'startLocation') {\n      if (value) {\n        setIsLoadingStartLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(value);\n          setStartLocationName(locationName || '');\n          // Also update the form data with the full name\n          onChange('startLocationFullName', locationName || '');\n        } catch (error) {\n          console.error('Error fetching start location name:', error);\n          setStartLocationName('');\n        } finally {\n          setIsLoadingStartLocation(false);\n        }\n      } else {\n        setStartLocationName('');\n        onChange('startLocationFullName', '');\n      }\n    } else if (field === 'endLocation') {\n      if (value) {\n        setIsLoadingEndLocation(true);\n        try {\n          const locationName = await locationResolutionService.getLocationFullName(value);\n          setEndLocationName(locationName || '');\n          // Also update the form data with the full name\n          onChange('endLocationFullName', locationName || '');\n        } catch (error) {\n          console.error('Error fetching end location name:', error);\n          setEndLocationName('');\n        } finally {\n          setIsLoadingEndLocation(false);\n        }\n      } else {\n        setEndLocationName('');\n        onChange('endLocationFullName', '');\n      }\n    }\n  };\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    // Normalize values before handing off to save handler\n    const cleanedTransportTypes = (routeData.transportTypes || []).map(tt => ({\n      ...tt,\n      seatingCapacity: Number(tt.seatingCapacity) || 0,\n      luggageCapacity: Number(tt.luggageCapacity) || 0,\n      price: Number(tt.price) || 0,\n      duration: String(tt.duration || '')\n    }));\n\n    const cleanedStops = (routeData.intermediateStops || []).map(stop => ({\n      ...stop,\n      fullName: (stop as any).fullName ?? '',\n      transferMethod: (stop as any).transferMethod ?? ''\n    }));\n\n    const cleanedSightseeing = (routeData.sightseeingOptions || []).map(opt => ({\n      ...opt,\n      adultPrice: Number(opt.adultPrice) || 0,\n      childPrice: Number(opt.childPrice) || 0,\n      additionalCharges: Number(opt.additionalCharges) || 0,\n      description: opt.description ?? ''\n    }));\n\n    const normalizedStatus = (routeData.status === 'active' || routeData.status === 'inactive')\n      ? routeData.status\n      : ((routeData as any).isActive ? 'active' : 'inactive');\n\n    const payload = {\n      ...routeData,\n      transferType: sanitizeTransferType(routeData.transferType as any),\n      status: normalizedStatus as 'active' | 'inactive',\n      transportTypes: cleanedTransportTypes,\n      intermediateStops: cleanedStops,\n      sightseeingOptions: cleanedSightseeing,\n      // Map UI Notes textarea to description for saving/editing\n      description: (routeData as any).notes ?? routeData.description ?? ''\n    };\n    await onSave(payload);\n    setIsSaving(false);\n    onClose();\n  };\n\n  const onAddStop = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const newStop: Stop = { id: `stop-${Date.now()}`, locationCode: '', fullName: '', transferMethod: '' };\n    const updatedStops = [...(routeData.intermediateStops || []), newStop];\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n  };\n\n  const onRemoveStop = (stopId: string) => {\n    const updatedStops = routeData.intermediateStops?.filter(stop => stop.id !== stopId);\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n  };\n\n  const onStopChange = (stopId: string, locationCode: string) => {\n    const updatedStops = routeData.intermediateStops?.map(stop => \n      stop.id === stopId ? { ...stop, locationCode } : stop\n    );\n    setRouteData(prev => ({...prev, intermediateStops: updatedStops}));\n  };\n\n  const onTransferMethodChange = (index: number, value: string) => {\n    const updatedStops = [...(routeData.intermediateStops || [])];\n    if (updatedStops[index]) {\n      updatedStops[index] = { ...updatedStops[index], transferMethod: value } as Stop;\n      setRouteData(prev => ({ ...prev, intermediateStops: updatedStops }));\n    }\n  };\n\n  const onAddTransportType = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const newTransportType = {\n      id: `tt-${Date.now()}`,\n      type: '',\n      seatingCapacity: 0,\n      luggageCapacity: 0,\n      price: 0,\n      duration: ''\n    };\n    const updatedTransportTypes = [...(routeData.transportTypes || []), newTransportType];\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  const onRemoveTransportType = (typeId: string) => {\n    const updatedTransportTypes = routeData.transportTypes?.filter(type => type.id !== typeId);\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  const onTransportTypeChange = (typeId: string, field: string, value: any) => {\n    const updatedTransportTypes = routeData.transportTypes?.map(type =>\n      type.id === typeId ? { ...type, [field]: value } : type\n    );\n    setRouteData(prev => ({...prev, transportTypes: updatedTransportTypes}));\n  };\n\n  const onAddSightseeingOption = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    const newSightseeingOption: SightseeingOption = {\n      id: `so-${Date.now()}`,\n      location: '',\n      adultPrice: 0,\n      childPrice: 0,\n      description: '',\n      additionalCharges: 0\n    };\n    const updatedSightseeingOptions = [...(routeData.sightseeingOptions || []), newSightseeingOption];\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n\n  const onRemoveSightseeingOption = (optionId: string) => {\n    const updatedSightseeingOptions = routeData.sightseeingOptions?.filter(option => option.id !== optionId);\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n\n  const onSightseeingOptionChange = (optionId: string, field: string, value: any) => {\n    const updatedSightseeingOptions = routeData.sightseeingOptions?.map(option =>\n      option.id === optionId ? { ...option, [field]: value } : option\n    );\n    setRouteData(prev => ({...prev, sightseeingOptions: updatedSightseeingOptions}));\n  };\n  \n  const handleStatusChange = (checked: boolean | \"indeterminate\") => {\n    onChange('status', checked ? ('active' as const) : ('inactive' as const));\n  };\n\n  if (!route) return null;\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full md:max-w-[1000px] overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Edit Transport Route</SheetTitle>\n          <SheetDescription>\n            Update the details of the transport route.\n          </SheetDescription>\n        </SheetHeader>\n\n        <div className=\"py-6 space-y-8\">\n          {/* Basic Info */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <h3 className=\"text-lg font-semibold\">Basic Information</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Country</label>\n                <Select\n                  value={routeData.country}\n                  onValueChange={(value) => onChange('country', value)}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select country\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {countries.map((country) => {\n                      const raw = country?.name?.trim();\n                      const safeValue = raw && raw.length > 0 ? country.name : `country-${country.id}`;\n                      if (!raw) {\n                        console.warn('[EditRouteSheet] Country name missing or empty for id:', country?.id, country);\n                      }\n                      return (\n                        <SelectItem key={country.id} value={safeValue}>\n                          {raw && raw.length > 0 ? country.name : 'Unknown'}\n                        </SelectItem>\n                      );\n                    })}\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div>\n                <ValidatedInput\n                  label=\"Route Name\"\n                  value={routeData.name || ''}\n                  onChange={(value) => onChange('name', value)}\n                  onValidate={(value) => validateField('name', value)}\n                  placeholder=\"Route name\"\n                  required\n                  helpText=\"Auto-generated based on selected locations\"\n                />\n              </div>\n\n              <div className=\"col-span-2\">\n                <ValidatedTextarea\n                  label=\"Notes\"\n                  value={routeData.notes || ''}\n                  onChange={(value) => onChange('notes', value)}\n                  onValidate={(value) => validateField('description', value)}\n                  placeholder=\"Add any notes for this route...\"\n                  helpText=\"Optional notes about this route\"\n                />\n              </div>\n\n              {/* Route Code */}\n              <div className=\"col-span-2\">\n                <label className=\"block text-sm font-medium mb-1\">Route Code</label>\n                <Input\n                  value={routeData.code || ''}\n                  readOnly\n                  className=\"bg-muted border-input text-foreground font-mono\"\n                  placeholder=\"Auto-generated\"\n                />\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  Auto-generated from locations with detailed format\n                </p>\n                \n                {/* Display route segments */}\n                {routeSegments.length > 0 && (\n                  <div className=\"mt-2 bg-muted p-2 rounded-md\">\n                    <p className=\"text-xs font-medium mb-1\">Route Segments:</p>\n                    <div className=\"space-y-1\">\n                      {routeSegments.map((segment, index) => (\n                        <div key={index} className=\"text-xs font-mono pl-2 border-l-2 border-primary\">\n                          {segment}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Transfer Type & Stops */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <h3 className=\"text-lg font-semibold\">Transfer Type & Stops</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex flex-wrap gap-6\">\n                {['One-Way', 'Round-Trip', 'Multi-Stop', 'en route'].map((type) => (\n                  <label key={type} className=\"flex items-center space-x-2 cursor-pointer\">\n                    <input\n                      type=\"radio\"\n                      checked={routeData.transferType === type}\n                      onChange={() => onChange('transferType', type)}\n                      className=\"h-4 w-4 text-primary\"\n                    />\n                    <span>{type}</span>\n                  </label>\n                ))}\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Start Location</label>\n                  <Select\n                    value={routeData.startLocation}\n                    onValueChange={(value) => handleLocationChange('startLocation', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select start location\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {filteredLocations.map((location) => {\n                        const rawCode = location?.code?.trim();\n                        const safeValue = rawCode && rawCode.length > 0 ? location.code : `loc-${location.id}`;\n                        const labelName = location?.fullName || location?.name || rawCode || 'Unknown';\n                        if (!rawCode) {\n                          console.warn('[EditRouteSheet] Start location code missing for id:', location?.id, location);\n                        }\n                        return (\n                          <SelectItem key={location.id} value={safeValue}>\n                            {(rawCode && rawCode.length > 0 ? rawCode : `LOC-${location.id}`)} - {labelName} ({location.category || 'N/A'})\n                          </SelectItem>\n                        );\n                      })}\n                    </SelectContent>\n                  </Select>\n                  \n                  {/* Real-time Start Location Name Display */}\n                  {routeData.startLocation && (\n                    <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md\">\n                      <div className=\"flex items-center space-x-2\">\n                        <MapPin className=\"h-4 w-4 text-blue-600\" />\n                        <div className=\"flex-1\">\n                          {isLoadingStartLocation ? (\n                            <div className=\"flex items-center space-x-2\">\n                              <div className=\"animate-spin h-3 w-3 border border-blue-600 border-t-transparent rounded-full\"></div>\n                              <span className=\"text-sm text-blue-600\">Loading location name...</span>\n                            </div>\n                          ) : startLocationName ? (\n                            <div>\n                              <p className=\"text-sm font-medium text-blue-900\">{startLocationName}</p>\n                              <p className=\"text-xs text-blue-600\">Code: {routeData.startLocation}</p>\n                            </div>\n                          ) : (\n                            <p className=\"text-sm text-blue-600\">Location name not found</p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">End Location</label>\n                  <Select\n                    value={routeData.endLocation}\n                    onValueChange={(value) => handleLocationChange('endLocation', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select end location\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {filteredLocations.map((location) => {\n                        const rawCode = location?.code?.trim();\n                        const safeValue = rawCode && rawCode.length > 0 ? location.code : `loc-${location.id}`;\n                        const labelName = location?.fullName || location?.name || rawCode || 'Unknown';\n                        if (!rawCode) {\n                          console.warn('[EditRouteSheet] End location code missing for id:', location?.id, location);\n                        }\n                        return (\n                          <SelectItem key={location.id} value={safeValue}>\n                            {(rawCode && rawCode.length > 0 ? rawCode : `LOC-${location.id}`)} - {labelName} ({location.category || 'N/A'})\n                          </SelectItem>\n                        );\n                      })}\n                    </SelectContent>\n                  </Select>\n                  \n                  {/* Real-time End Location Name Display */}\n                  {routeData.endLocation && (\n                    <div className=\"mt-2 p-3 bg-green-50 border border-green-200 rounded-md\">\n                      <div className=\"flex items-center space-x-2\">\n                        <MapPin className=\"h-4 w-4 text-green-600\" />\n                        <div className=\"flex-1\">\n                          {isLoadingEndLocation ? (\n                            <div className=\"flex items-center space-x-2\">\n                              <div className=\"animate-spin h-3 w-3 border border-green-600 border-t-transparent rounded-full\"></div>\n                              <span className=\"text-sm text-green-600\">Loading location name...</span>\n                            </div>\n                          ) : endLocationName ? (\n                            <div>\n                              <p className=\"text-sm font-medium text-green-900\">{endLocationName}</p>\n                              <p className=\"text-xs text-green-600\">Code: {routeData.endLocation}</p>\n                            </div>\n                          ) : (\n                            <p className=\"text-sm text-green-600\">Location name not found</p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              {/* Intermediate Stops */}\n              {(routeData.transferType === 'Multi-Stop' || routeData.transferType === 'en route') && (\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Intermediate Stops</label>\n                  \n                  {routeData.intermediateStops && routeData.intermediateStops.map((stop) => (\n                    <div key={stop.id} className=\"flex items-center space-x-2 mb-2\">\n                      <Select\n                        value={stop.locationCode}\n                        onValueChange={(value) => onStopChange(stop.id, value)}\n                      >\n                        <SelectTrigger className=\"flex-1\">\n                          <SelectValue placeholder=\"Select stop location\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {filteredLocations.map((location) => {\n                            const rawCode = location?.code?.trim();\n                            const safeValue = rawCode && rawCode.length > 0 ? location.code : `loc-${location.id}`;\n                            const labelName = location?.fullName || location?.name || rawCode || 'Unknown';\n                            if (!rawCode) {\n                              console.warn('[EditRouteSheet] Stop location code missing for id:', location?.id, location);\n                            }\n                            return (\n                              <SelectItem key={location.id} value={safeValue}>\n                                {(rawCode && rawCode.length > 0 ? rawCode : `LOC-${location.id}`)} - {labelName} ({location.category || 'N/A'})\n                              </SelectItem>\n                            );\n                          })}\n                        </SelectContent>\n                      </Select>\n                      \n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onRemoveStop(stop.id)}\n                        className=\"text-destructive\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  ))}\n                  \n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={onAddStop}\n                    className=\"mt-2\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-1\" />\n                    Add Stop\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Transfer Method Notes */}\n          {(routeData.transferType === 'Multi-Stop' || routeData.transferType === 'en route') && (\n            <div className=\"space-y-4 pb-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Transfer Method Notes</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Add notes about transfer methods for each segment (e.g., \"Road transfer PVT + Ferry on SIC\")\n              </p>\n              \n              {routeData.intermediateStops && routeData.intermediateStops.length > 0 && (\n                <div className=\"space-y-3\">\n                  {routeData.intermediateStops.map((_, index) => (\n                    <div key={index} className=\"flex flex-col\">\n                      <label className=\"text-sm font-medium mb-1\">\n                        {routeSegments[index]}\n                      </label>\n                      <Input\n                        placeholder=\"e.g., Road transfer PVT + Ferry on SIC\"\n                        value={routeData.intermediateStops?.[index]?.transferMethod || ''}\n                        onChange={(e) => onTransferMethodChange(index, e.target.value)}\n                      />\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Transport Information */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-semibold\">Transport Information</h3>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onAddTransportType}\n              >\n                <Plus className=\"h-4 w-4 mr-1\" />\n                Add Transport Type\n              </Button>\n            </div>\n            \n            {routeData.transportTypes && routeData.transportTypes.map((type, index) => (\n              <div key={type.id} className=\"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border rounded-md\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Transport Type</label>\n                  <Select\n                    value={type.type}\n                    onValueChange={(value) => onTransportTypeChange(type.id, 'type', value)}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {transportTypes.map((t) => {\n                        const raw = t?.name?.trim();\n                        const safeValue = raw && raw.length > 0 ? t.name : `type-${t.id}`;\n                        if (!raw) {\n                          console.warn('[EditRouteSheet] Transport type name missing for id:', t?.id, t);\n                        }\n                        return (\n                          <SelectItem key={t.id} value={safeValue}>\n                            {raw && raw.length > 0 ? t.name : 'Unknown'}\n                          </SelectItem>\n                        );\n                      })}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div>\n                  <ValidatedNumberInput\n                    label=\"Seating Capacity\"\n                    value={type.seatingCapacity}\n                    onChange={(value) => onTransportTypeChange(type.id, 'seatingCapacity', value)}\n                    onValidate={(value) => validateField('transportTypes.seatingCapacity', value)}\n                    min={0}\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <ValidatedNumberInput\n                    label=\"Luggage Capacity\"\n                    value={type.luggageCapacity}\n                    onChange={(value) => onTransportTypeChange(type.id, 'luggageCapacity', value)}\n                    onValidate={(value) => validateField('transportTypes.luggageCapacity', value)}\n                    min={0}\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <ValidatedInput\n                    label=\"Duration\"\n                    value={type.duration}\n                    onChange={(value) => onTransportTypeChange(type.id, 'duration', value)}\n                    onValidate={(value) => validateField('transportTypes.duration', value)}\n                    placeholder=\"e.g., 1h 30m\"\n                    helpText=\"Format: 1h 30m\"\n                    required\n                  />\n                </div>\n                \n                <div className=\"flex items-end\">\n                  <div className=\"flex-1\">\n                    <ValidatedNumberInput\n                      label=\"Price\"\n                      value={type.price}\n                      onChange={(value) => onTransportTypeChange(type.id, 'price', value)}\n                      onValidate={(value) => validateField('transportTypes.price', value)}\n                      min={0}\n                      step={0.01}\n                      required\n                    />\n                  </div>\n                  \n                  {routeData.transportTypes && routeData.transportTypes.length > 1 && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => onRemoveTransportType(type.id)}\n                      className=\"ml-2 mb-[2px] text-destructive\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          {/* Sightseeing Options */}\n          <div className=\"space-y-4 pb-4 border-b\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg font-semibold\">Sightseeing Options</h3>\n              {routeData.enableSightseeing && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={onAddSightseeingOption}\n                >\n                  <Plus className=\"h-4 w-4 mr-1\" />\n                  Add Sightseeing\n                </Button>\n              )}\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"enableSightseeing\"\n                checked={!!routeData.enableSightseeing}\n                onCheckedChange={(checked) => onChange('enableSightseeing', !!checked)}\n              />\n              <label\n                htmlFor=\"enableSightseeing\"\n                className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n              >\n                Sightseeing Options\n              </label>\n            </div>\n            \n            {routeData.enableSightseeing && (\n              <div className=\"space-y-4\">\n                {filteredSightseeingLocations.length === 0 && (\n                  <div className=\"text-sm text-amber-600 bg-amber-50 border border-amber-200 p-3 rounded-md\">\n                    No active sightseeing locations found for {routeData.country || \"the selected country\"}. \n                    Add sightseeing locations in the Sightseeing module first.\n                  </div>\n                )}\n                \n                {routeData.sightseeingOptions && routeData.sightseeingOptions.length > 0 ? (\n                  routeData.sightseeingOptions.map((option) => (\n                    <div key={option.id} className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/50 rounded-md relative\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onRemoveSightseeingOption(option.id)}\n                        className=\"absolute right-2 top-2 text-destructive\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium mb-1\">Sightseeing Location</label>\n                        <Select\n                          value={option.location}\n                          onValueChange={(value) => onSightseeingOptionChange(option.id, 'location', value)}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select location\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {filteredSightseeingLocations.map((location) => {\n                              const raw = location?.name?.trim();\n                              const safeValue = raw && raw.length > 0 ? location.name : `sight-${location.id}`;\n                              if (!raw) {\n                                console.warn('[EditRouteSheet] Sightseeing location name missing for id:', location?.id, location);\n                              }\n                              return (\n                                <SelectItem key={location.id} value={safeValue}>\n                                  {(raw && raw.length > 0 ? location.name : 'Unknown')} - {location.city || 'N/A'}\n                                </SelectItem>\n                              );\n                            })}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Adult Price\"\n                          value={option.adultPrice}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'adultPrice', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.adultPrice', value)}\n                          min={0}\n                          step={0.01}\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Child Price\"\n                          value={option.childPrice}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'childPrice', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.childPrice', value)}\n                          min={0}\n                          step={0.01}\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <ValidatedNumberInput\n                          label=\"Additional Charges\"\n                          value={option.additionalCharges}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'additionalCharges', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.additionalCharges', value)}\n                          min={0}\n                          step={0.01}\n                          helpText=\"Optional extra charges\"\n                        />\n                      </div>\n                      \n                      <div className=\"col-span-2\">\n                        <ValidatedInput\n                          label=\"Description\"\n                          value={option.description || ''}\n                          onChange={(value) => onSightseeingOptionChange(option.id, 'description', value)}\n                          onValidate={(value) => validateField('sightseeingOptions.description', value)}\n                          placeholder=\"Description of the sightseeing option\"\n                          helpText=\"Brief description of the sightseeing activity\"\n                        />\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={onAddSightseeingOption}\n                    className=\"w-full py-8 border-dashed\"\n                    disabled={filteredSightseeingLocations.length === 0}\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Sightseeing Option\n                  </Button>\n                )}\n              </div>\n            )}\n          </div>\n          \n          {/* Status */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold\">Status</h3>\n            \n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"routeStatus\"\n                checked={(routeData.status === 'active') || routeData.isActive === true}\n                onCheckedChange={handleStatusChange}\n              />\n              <span className=\"text-sm font-medium\">\n                {((routeData.status === 'active') || routeData.isActive === true) ? 'Active' : 'Inactive'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button \n            onClick={handleSave}\n            disabled={hasErrors || isSaving}\n            className={hasErrors ? \"opacity-50 cursor-not-allowed\" : \"\"}\n          >\n            {isSaving ? \"Saving...\" : \"Save Changes\"}\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default EditRouteSheet;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { useToast } from '@/hooks/use-toast';\nimport { importTransportRoutes, parseTransportRoutes } from '@/utils/transportRoutesImportExport';\nimport { refreshSupabaseSession } from '@/utils/supabaseSessionRefresh';\n\ntype ImportMode = 'add' | 'update';\n\ninterface ImportRoutesModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst ImportRoutesModal: React.FC<ImportRoutesModalProps> = ({ isOpen, onClose }) => {\n  const fileRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n  const [importing, setImporting] = useState(false);\n  const [parsing, setParsing] = useState(false);\n  const [importMode, setImportMode] = useState<ImportMode>('add');\n  const [validate, setValidate] = useState(true);\n  const [continueOnError, setContinueOnError] = useState(false);\n  const [preview, setPreview] = useState<{ validRows: any[]; invalidRows: { route: any; errors: string[] }[] } | null>(null);\n  \n  // Refresh Supabase session when modal opens to prevent net::ERR_ABORTED errors\n  useEffect(() => {\n    if (isOpen) {\n      refreshSupabaseSession().then(session => {\n        if (!session) {\n          toast({ \n            title: 'Session refresh failed', \n            description: 'You may need to log in again if you encounter errors',\n            variant: 'destructive'\n          });\n        }\n      });\n    }\n  }, [isOpen, toast]);\n\n  const reset = () => {\n    if (fileRef.current) fileRef.current.value = '';\n    setImporting(false);\n    setParsing(false);\n    setPreview(null);\n  };\n\n  const handleParse = async () => {\n    try {\n      const file = fileRef.current?.files?.[0];\n      if (!file) {\n        toast({ title: 'No file selected', description: 'Please choose a file to preview.', variant: 'destructive' });\n        return;\n      }\n      \n      // Refresh session before parsing to prevent net::ERR_ABORTED errors\n      await refreshSupabaseSession();\n      \n      setParsing(true);\n      const result = await parseTransportRoutes(file, { validate, continueOnError });\n      setPreview(result);\n      toast({ title: 'Preview generated', description: `${result.validRows.length} valid, ${result.invalidRows.length} invalid` });\n    } catch (err: any) {\n      console.error('Parse error:', err);\n      toast({ title: 'Preview failed', description: err?.message || 'Unknown error', variant: 'destructive' });\n    } finally {\n      setParsing(false);\n    }\n  };\n\n  const handleImport = async () => {\n    try {\n      const file = fileRef.current?.files?.[0];\n      if (!file) {\n        toast({ title: 'No file selected', description: 'Please choose a file to import.', variant: 'destructive' });\n        return;\n      }\n      \n      // Refresh session before import to prevent net::ERR_ABORTED errors\n      await refreshSupabaseSession();\n      \n      setImporting(true);\n      const result = await importTransportRoutes(file, { validate, continueOnError, importMode });\n      toast({ title: 'Import complete', description: `${result.validCount} rows imported. ${result.invalidCount} invalid.` });\n      if (result.invalidCount) {\n        // eslint-disable-next-line no-console\n        console.warn('Invalid import rows:', result.invalidRows);\n      }\n      reset();\n      onClose();\n    } catch (err: any) {\n      console.error('Import error:', err);\n      toast({ \n        title: 'Import failed', \n        description: err?.message || 'Unknown error. Check console for details.', \n        variant: 'destructive' \n      });\n    } finally {\n      setImporting(false);\n    }\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full md:max-w-[700px] overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Import Transport Routes</SheetTitle>\n          <SheetDescription>Import Excel/CSV/JSON. Validate and preview before confirming.</SheetDescription>\n        </SheetHeader>\n\n        <div className=\"space-y-6 mt-4\">\n          <section className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold\">Source File</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"md:col-span-2\">\n                <Label>File</Label>\n                <Input ref={fileRef} type=\"file\" accept=\".xlsx,.xls,.csv,.json\" />\n              </div>\n              <div>\n                <Label>Import Mode</Label>\n                <Select value={importMode} onValueChange={(v) => setImportMode(v as ImportMode)}>\n                  <SelectTrigger className=\"mt-1.5\">\n                    <SelectValue placeholder=\"Select mode\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"add\">Add (append new)</SelectItem>\n                    <SelectItem value=\"update\">Update existing</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-center\">\n              <div className=\"flex items-center gap-3\">\n                <Switch checked={validate} onCheckedChange={setValidate} />\n                <div>\n                  <Label>Validate data</Label>\n                  <p className=\"text-xs text-muted-foreground\">Check required fields and types before import</p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Switch checked={continueOnError} onCheckedChange={setContinueOnError} />\n                <div>\n                  <Label>Continue on error</Label>\n                  <p className=\"text-xs text-muted-foreground\">Import valid rows; collect invalid errors</p>\n                </div>\n              </div>\n              <div>\n                <Button variant=\"secondary\" onClick={handleParse} disabled={parsing}>Preview</Button>\n              </div>\n            </div>\n          </section>\n\n          {preview && (\n            <section className=\"space-y-3\">\n              <h3 className=\"text-lg font-semibold\">Preview</h3>\n              <div className=\"text-sm\">\n                <span className=\"mr-4\">Valid: {preview.validRows.length}</span>\n                <span>Invalid: {preview.invalidRows.length}</span>\n              </div>\n              <div className=\"border rounded p-3\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm\">\n                  {preview.validRows.slice(0, 6).map((r, idx) => (\n                    <div key={idx} className=\"p-2 rounded border bg-muted\">\n                      <div className=\"font-medium\">{r.name || r.route_code}</div>\n                      <div className=\"text-xs text-muted-foreground\">{r.country}  {r.start_location}  {r.end_location}</div>\n                      <div className=\"text-xs\">Stops: {Array.isArray(r.intermediate_stops) ? r.intermediate_stops.length : 0}  Types: {Array.isArray(r.transport_types) ? r.transport_types.length : 0}</div>\n                    </div>\n                  ))}\n                </div>\n                {preview.invalidRows.length > 0 && (\n                  <div className=\"mt-3\">\n                    <Label>Invalid rows</Label>\n                    <ul className=\"list-disc pl-5 text-xs\">\n                      {preview.invalidRows.slice(0, 6).map((ir, idx) => (\n                        <li key={idx}>{ir.errors.join(', ')}</li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </section>\n          )}\n\n          <div className=\"flex gap-3\">\n            <Button onClick={handleImport} disabled={importing}>Import</Button>\n            <Button variant=\"outline\" onClick={() => { reset(); onClose(); }}>Close</Button>\n          </div>\n\n          <SheetFooter />\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default ImportRoutesModal;","import React, { useState } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { exportTransportRoutes } from '@/utils/transportRoutesImportExport';\n\ntype Format = 'xlsx' | 'csv' | 'json';\n\ninterface ExportRoutesModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst defaultFields = [\n  'id',\n  'code',\n  'name',\n  'country',\n  'currency',\n  'transferType',\n  'startLocation',\n  'endLocation',\n  'intermediateStops',\n  'transportTypes',\n  'enableSightseeing',\n  'sightseeingOptions',\n  'status',\n  'price',\n  'distance',\n  'duration',\n  'description',\n];\n\nconst ExportRoutesModal: React.FC<ExportRoutesModalProps> = ({ isOpen, onClose }) => {\n  const { toast } = useToast();\n  const [exporting, setExporting] = useState(false);\n  const [exportFormat, setExportFormat] = useState<Format>('xlsx');\n  const [exportStatus, setExportStatus] = useState<string | undefined>(undefined);\n  const [exportCountry, setExportCountry] = useState<string | undefined>(undefined);\n  const [selectedFields, setSelectedFields] = useState<string[]>([...defaultFields]);\n\n  const handleFieldToggle = (field: string, checked: boolean) => {\n    setSelectedFields((prev) => {\n      const set = new Set(prev);\n      if (checked) set.add(field); else set.delete(field);\n      return Array.from(set);\n    });\n  };\n\n  const handleExport = async () => {\n    try {\n      setExporting(true);\n      const { blob, filename, meta } = await exportTransportRoutes({\n        format: exportFormat,\n        selectedFields,\n        filters: { status: exportStatus, country: exportCountry },\n      });\n\n      // eslint-disable-next-line no-console\n      console.debug('[ExportRoutes] Meta:', meta);\n\n      if (meta && meta.rowsCount === 0) {\n        toast({ title: 'No data to export', description: 'No routes matched the selected filters.', variant: 'destructive' });\n        setExporting(false);\n        return;\n      }\n\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      URL.revokeObjectURL(url);\n      toast({ title: 'Export complete', description: `Saved as ${filename}` });\n    } catch (err: any) {\n      toast({ title: 'Export failed', description: err?.message || 'Unknown error', variant: 'destructive' });\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full md:max-w-[700px] overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Export Transport Routes</SheetTitle>\n          <SheetDescription>Export Excel/CSV/JSON with filters and selected fields.</SheetDescription>\n        </SheetHeader>\n\n        <div className=\"space-y-8 mt-4\">\n          <section className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold\">Export</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label>Format</Label>\n                <Select value={exportFormat} onValueChange={(v) => setExportFormat(v as Format)}>\n                  <SelectTrigger className=\"mt-1.5\">\n                    <SelectValue placeholder=\"Choose format\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"xlsx\">Excel (.xlsx)</SelectItem>\n                    <SelectItem value=\"csv\">CSV (.csv)</SelectItem>\n                    <SelectItem value=\"json\">JSON (.json)</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Status filter</Label>\n                <Select\n                  value={exportStatus ?? 'any'}\n                  onValueChange={(v) => setExportStatus(v === 'any' ? undefined : v)}\n                >\n                  <SelectTrigger className=\"mt-1.5\">\n                    <SelectValue placeholder=\"Any\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"any\">Any</SelectItem>\n                    <SelectItem value=\"active\">Active</SelectItem>\n                    <SelectItem value=\"inactive\">Inactive</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label>Country filter</Label>\n                <Input placeholder=\"e.g., Thailand\" value={exportCountry ?? ''} onChange={(e) => setExportCountry(e.target.value || undefined)} />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>Select fields</Label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                {defaultFields.map((f) => (\n                  <label key={f} className=\"flex items-center gap-2 text-sm\">\n                    <Checkbox checked={selectedFields.includes(f)} onCheckedChange={(c) => handleFieldToggle(f, Boolean(c))} />\n                    {f}\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            <div>\n              <Button onClick={handleExport} disabled={exporting}>Export Routes</Button>\n            </div>\n          </section>\n\n          <SheetFooter>\n            <Button variant=\"outline\" onClick={onClose}>Close</Button>\n          </SheetFooter>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default ExportRoutesModal;","\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { useComprehensiveTransportRoutes } from '@/hooks/useComprehensiveTransportRoutes';\nimport { useRouteActions } from '../../hooks/useRouteActions';\nimport { useTransportData } from '../../hooks/useTransportData';\nimport RouteFilters from '../RouteFilters';\nimport TransportRoutesTable from '../TransportRoutesTable';\nimport AddRouteSheet from '../AddRouteSheet';\nimport ViewRouteSheet from '../ViewRouteSheet';\nimport EditRouteSheet from '../EditRouteSheet';\nimport DeleteRouteDialog from '../DeleteRouteDialog';\nimport ImportRoutesModal from '../ImportRoutesModal';\nimport ExportRoutesModal from '../ExportRoutesModal';\nimport { useToast } from '@/hooks/use-toast';\nimport type { TransportRoute } from '../../types/transportTypes';\nimport type { CompleteTransportRoute } from '@/services/comprehensiveTransportService';\nimport type { TransportRouteType } from '../../types/transportTypes';\nimport { supabase } from '@/lib/supabaseClient';\n\n// Safely parse potential JSON arrays (stringified or already arrays)\nfunction parseJsonArraySafely(value: unknown): any[] {\n  if (Array.isArray(value)) return value;\n  if (typeof value === 'string' && value.trim().length > 0) {\n    try {\n      const parsed = JSON.parse(value);\n      return Array.isArray(parsed) ? parsed : [];\n    } catch {\n      return [];\n    }\n  }\n  return [];\n}\n\n// Helper function to map CompleteTransportRoute to TransportRoute, including vehicle types\nconst mapCompleteRouteToTransportRoute = (completeRoute: CompleteTransportRoute): TransportRoute => {\n  // Prefer vehicle_types, then transport_types, then transport_entries\n  const rawVehicleTypes = parseJsonArraySafely(\n    (completeRoute as any).vehicle_types ?? (completeRoute as any).transport_types ?? (completeRoute as any).transport_entries\n  );\n\n  const transportTypes: TransportRouteType[] = rawVehicleTypes.map((vt: any, index: number) => ({\n    id: String(index + 1),\n    type: vt.transport_type ?? vt.type ?? 'N/A',\n    vehicleName: vt.vehicle_name ?? vt.vehicleName ?? undefined,\n    seatingCapacity: Number(vt.seating_capacity ?? vt.seatingCapacity ?? 0),\n    luggageCapacity: Number(vt.luggage_capacity ?? vt.luggageCapacity ?? 0),\n    duration: vt.duration ?? '',\n    price: Number(vt.price ?? 0),\n  }));\n\n  const normalizedIsActive = typeof (completeRoute as any).is_active === 'boolean'\n    ? Boolean((completeRoute as any).is_active)\n    : String(completeRoute.status || '').toLowerCase() === 'active';\n\n  const normalizedStatus: 'active' | 'inactive' = normalizedIsActive ? 'active' : 'inactive';\n\n  return {\n    id: completeRoute.id,\n    code: completeRoute.route_code || '',\n    name: completeRoute.route_name || '',\n    country: completeRoute.country || '',\n    transferType: completeRoute.transfer_type as any,\n    startLocation: completeRoute.start_location || '',\n    startLocationFullName: completeRoute.start_location_full_name || '',\n    endLocation: completeRoute.end_location || '',\n    endLocationFullName: completeRoute.end_location_full_name || '',\n    status: normalizedStatus,\n    isActive: normalizedIsActive,\n    distance: completeRoute.distance || 0,\n    duration: completeRoute.duration || '',\n    description: completeRoute.notes || '',\n    enableSightseeing: completeRoute.enable_sightseeing || false,\n    transportTypes,\n    intermediateStops: completeRoute.intermediate_stops?.map(stop => ({\n      id: stop.id,\n      locationCode: stop.location_code || '',\n      fullName: stop.full_name || '',\n      // Cast to any to tolerate type variance across generated Supabase types\n      transferMethod: (stop as any).transfer_method_notes || ''\n    })) || [],\n    sightseeingOptions: completeRoute.sightseeing_options?.map(option => ({\n      id: option.id,\n      location: option.location || '',\n      description: option.description || '',\n      adultPrice: option.adult_price || 0,\n      childPrice: option.child_price || 0,\n      additionalCharges: option.additional_charges || 0\n    })) || [],\n    createdAt: completeRoute.created_at,\n    updatedAt: completeRoute.updated_at\n  };\n};\n\nexport default function TransportRoutesTab() {\n  const { toast } = useToast();\n  \n  // Local state for UI\n  // Use string type to align with filters prop signature\n  const [currentTab, setCurrentTab] = useState<string>('all');\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [importDrawerOpen, setImportDrawerOpen] = useState(false);\n  const [exportDrawerOpen, setExportDrawerOpen] = useState(false);\n  \n  // Route action state variables\n  const [selectedRoute, setSelectedRoute] = useState<any>(null);\n  const [viewRouteDrawerOpen, setViewRouteDrawerOpen] = useState(false);\n  const [editRouteDrawerOpen, setEditRouteDrawerOpen] = useState(false);\n  const [deleteRouteDialogOpen, setDeleteRouteDialogOpen] = useState(false);\n  const [addRouteDrawerOpen, setAddRouteDrawerOpen] = useState(false);\n  \n  // Filter state variables\n  const [searchQuery, setSearchQuery] = useState('');\n  const [countryFilter, setCountryFilter] = useState('All Countries');\n  const [cityFilter, setCityFilter] = useState('All Cities');\n  const [typeFilter, setTypeFilter] = useState('All Types');\n  \n  // Filters for the comprehensive service\n  const [filters, setFilters] = useState<{\n    country?: string;\n    transfer_type?: string;\n    status?: string;\n    enable_sightseeing?: boolean;\n  }>({});\n\n  // Use the comprehensive transport routes hook\n  const {\n    routes,\n    loading,\n    error,\n    createRoute,\n    updateRoute,\n    deleteRoute,\n    refresh,\n    transportTypes,\n    statistics\n  } = useComprehensiveTransportRoutes({ filters });\n\n  // Get locations from useTransportData\n  const { locations, countries, transport } = useTransportData();\n\n  // Convert complete routes to transport routes for UI compatibility\n  const transportRoutes = useMemo(() => {\n    if (!routes || !Array.isArray(routes)) {\n      return [];\n    }\n    return routes.map(mapCompleteRouteToTransportRoute);\n  }, [routes]);\n\n  // Derive the comprehensive route for edit sheet from selected UI route\n  const selectedIntegratedRoute = useMemo<CompleteTransportRoute | null>(() => {\n    if (!selectedRoute || !routes) return null;\n    return routes.find(r => r.id === selectedRoute.id) || null;\n  }, [selectedRoute, routes]);\n\n  // Use route actions for form management\n  const routeActions = useRouteActions({\n    routes: transportRoutes,\n    setRoutes: () => {},\n    locations: locations || [],\n    setSelectedRoute,\n    setViewRouteDrawerOpen,\n    setEditRouteDrawerOpen,\n    setDeleteRouteDialogOpen,\n    setAddRouteDrawerOpen,\n    viewRouteDrawerOpen,\n    editRouteDrawerOpen,\n    deleteRouteDialogOpen,\n    addRouteDrawerOpen,\n    selectedRoute\n  });\n\n  // Update filters based on tab, search, country, and type\n  useEffect(() => {\n    const newFilters: typeof filters = {};\n\n    // Status by tab\n    switch (currentTab) {\n      case 'active':\n        newFilters.status = 'active';\n        break;\n      case 'disabled':\n        newFilters.status = 'inactive';\n        break;\n      case 'all':\n      default:\n        // No status filter for 'all'\n        break;\n    }\n\n    // Country filter (skip \"All Countries\")\n    if (countryFilter && countryFilter !== 'All Countries') {\n      newFilters.country = countryFilter;\n    }\n\n    // Type filter (skip \"All Types\")\n    if (typeFilter && typeFilter !== 'All Types') {\n      newFilters.transfer_type = typeFilter;\n    }\n\n    // Search query\n    if (searchQuery && searchQuery.trim().length > 0) {\n      // The service supports a generic search key\n      (newFilters as any).search = searchQuery.trim();\n    }\n\n    setFilters(newFilters);\n  }, [currentTab, countryFilter, typeFilter, searchQuery]);\n\n  // Handle toggle status: update via Supabase and refresh\n  const handleToggleStatus = async (routeId: string, newStatus: boolean) => {\n    try {\n      const { error } = await supabase\n        .from('transport_routes')\n        .update({\n          status: newStatus ? 'active' : 'inactive'\n        })\n        .eq('id', routeId);\n\n      if (error) {\n        console.error('Failed to update status:', error);\n        throw error;\n      }\n\n      toast({\n        title: \"Success\",\n        description: `Route status updated to ${newStatus ? 'active' : 'inactive'}`,\n      });\n      \n      await refresh();\n    } catch (error) {\n      console.error('Error updating route status:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update route status\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Handle import routes\n  const handleImportRoutes = async (importedRoutes: any[]) => {\n    try {\n      for (const routeData of importedRoutes) {\n        // Format the route data for the comprehensive service\n        const formattedRoute = {\n          route_name: routeData.name || `${routeData.startLocation} to ${routeData.endLocation}`,\n          country: routeData.country || '',\n          transfer_type: routeData.transferType || 'One-Way',\n          start_location: routeData.startLocation || '',\n          end_location: routeData.endLocation || '',\n          start_location_full_name: routeData.startLocationFullName || '',\n          end_location_full_name: routeData.endLocationFullName || '',\n          distance: routeData.distance || 0,\n          duration: routeData.duration || '',\n          notes: routeData.description || '',\n          status: routeData.status || 'active',\n          enable_sightseeing: routeData.enableSightseeing || false\n        };\n        \n        await createRoute(formattedRoute);\n      }\n      \n      toast({\n        title: \"Success\",\n        description: `Successfully imported ${importedRoutes.length} routes`,\n      });\n      \n      await refresh();\n    } catch (error) {\n      console.error('Error importing routes:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to import routes\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Handle items per page change\n  const handleItemsPerPageChange = (newItemsPerPage: number) => {\n    setItemsPerPage(newItemsPerPage);\n    setCurrentPage(1); // Reset to first page\n  };\n\n  // Helper to check if a route involves a given city\n  const routeInvolvesCity = useCallback((route: TransportRoute, city: string) => {\n    if (!city || city === 'All Cities') return true;\n    const startLoc = (locations || []).find(l => l.code === route.startLocation);\n    const endLoc = (locations || []).find(l => l.code === route.endLocation);\n    return (\n      (startLoc?.city && startLoc.city === city) ||\n      (endLoc?.city && endLoc.city === city) ||\n      (route.startLocationFullName && route.startLocationFullName.toLowerCase().includes(city.toLowerCase())) ||\n      (route.endLocationFullName && route.endLocationFullName.toLowerCase().includes(city.toLowerCase()))\n    );\n  }, [locations]);\n\n  // Filter routes for display: status tab, country, city, type, search\n  const displayRoutes = useMemo(() => {\n    let result = transportRoutes;\n\n    // Special tab\n    if (currentTab === 'special') {\n      result = result.filter(route => route.transferType === 'Multi-Stop' || route.transferType === 'en route');\n    }\n\n    // Country\n    if (countryFilter && countryFilter !== 'All Countries') {\n      result = result.filter(route => (route.country || '').toLowerCase() === countryFilter.toLowerCase());\n    }\n\n    // City\n    if (cityFilter && cityFilter !== 'All Cities') {\n      result = result.filter(route => routeInvolvesCity(route, cityFilter));\n    }\n\n    // Type\n    if (typeFilter && typeFilter !== 'All Types') {\n      result = result.filter(route => (route.transferType || '').toLowerCase() === typeFilter.toLowerCase());\n    }\n\n    // Search\n    if (searchQuery && searchQuery.trim().length > 0) {\n      const q = searchQuery.trim().toLowerCase();\n      result = result.filter(route => {\n        return (\n          (route.name && route.name.toLowerCase().includes(q)) ||\n          (route.code && route.code.toLowerCase().includes(q)) ||\n          (route.description && route.description.toLowerCase().includes(q)) ||\n          (route.startLocation && route.startLocation.toLowerCase().includes(q)) ||\n          (route.endLocation && route.endLocation.toLowerCase().includes(q)) ||\n          (route.startLocationFullName && route.startLocationFullName.toLowerCase().includes(q)) ||\n          (route.endLocationFullName && route.endLocationFullName.toLowerCase().includes(q))\n        );\n      });\n    }\n\n    return result;\n  }, [transportRoutes, currentTab, countryFilter, cityFilter, typeFilter, searchQuery, routeInvolvesCity]);\n\n  // Calculate total pages based on filtered routes\n  const totalDisplayPages = Math.max(1, Math.ceil(displayRoutes.length / itemsPerPage));\n  \n  // Get paginated routes\n  const currentPageRoutes = useMemo(() => {\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    return displayRoutes.slice(startIndex, startIndex + itemsPerPage);\n  }, [displayRoutes, currentPage, itemsPerPage]);\n  \n  // Pagination functions\n  const nextPage = useCallback(() => {\n    if (currentPage < totalDisplayPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  }, [currentPage, totalDisplayPages]);\n\n  const prevPage = useCallback(() => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  }, [currentPage]);\n\n  const goToPage = useCallback((page: number) => {\n    if (page >= 1 && page <= totalDisplayPages) {\n      setCurrentPage(page);\n    }\n  }, [totalDisplayPages]);\n\n  // Show loading state\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading routes...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show error state\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <div className=\"text-red-500 mb-4\">\n            <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z\" />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Error Loading Routes</h3>\n          <p className=\"text-gray-600 mb-4\">{error}</p>\n          <button \n            onClick={refresh}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <RouteFilters \n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        countryFilter={countryFilter}\n        setCountryFilter={setCountryFilter}\n        cityFilter={cityFilter}\n        setCityFilter={setCityFilter}\n        typeFilter={typeFilter}\n        setTypeFilter={setTypeFilter}\n        availableCountries={['All Countries', ...Array.from(new Set(locations?.map(loc => loc.country) || []))]}\n        availableCities={['All Cities', ...Array.from(new Set(locations?.map(loc => loc.city) || []))]}\n        transferTypes={['All Types', 'One-Way', 'Round-Trip', 'Multi-Stop', 'en route']}\n        currentTab={currentTab}\n        setCurrentTab={(tab: string) => setCurrentTab(tab)}\n        onAddRoute={routeActions.handleAddRoute}\n        onImport={() => setImportDrawerOpen(true)}\n        onExport={() => setExportDrawerOpen(true)}\n      />\n\n      <TransportRoutesTable \n        routes={currentPageRoutes}\n        currentPage={currentPage}\n        totalPages={totalDisplayPages}\n        onNextPage={nextPage}\n        onPrevPage={prevPage}\n        onPageSelect={goToPage}\n        onView={routeActions.handleViewRoute}\n        onEdit={routeActions.handleEditRoute}\n        onDelete={routeActions.handleDeleteRoute}\n        onToggleStatus={handleToggleStatus}\n        itemsPerPage={itemsPerPage}\n        onItemsPerPageChange={handleItemsPerPageChange}\n      />\n\n      <AddRouteSheet \n        isOpen={routeActions.addRouteDrawerOpen}\n        onClose={() => routeActions.setAddRouteDrawerOpen(false)}\n        onSave={routeActions.handleSaveNewRoute}\n        countries={countries || []}\n        locations={locations || []}\n        transportTypes={transport || []}\n      />\n\n      <ViewRouteSheet \n        isOpen={routeActions.viewRouteDrawerOpen}\n        onClose={() => routeActions.setViewRouteDrawerOpen(false)}\n        route={routeActions.selectedRoute}\n        onEdit={routeActions.handleEditFromView}\n      />\n\n      <EditRouteSheet \n        isOpen={routeActions.editRouteDrawerOpen}\n        onClose={() => routeActions.setEditRouteDrawerOpen(false)}\n        onSave={routeActions.handleSaveEditRoute}\n        route={selectedIntegratedRoute}\n        countries={countries || []}\n        locations={locations || []}\n        transportTypes={transport || []}\n      />\n\n      <DeleteRouteDialog \n        isOpen={routeActions.deleteRouteDialogOpen}\n        onClose={() => routeActions.setDeleteRouteDialogOpen(false)}\n        onConfirm={routeActions.handleConfirmDelete}\n        route={routeActions.selectedRoute}\n      />\n\n      <ImportRoutesModal\n        isOpen={importDrawerOpen}\n        onClose={() => setImportDrawerOpen(false)}\n      />\n      <ExportRoutesModal\n        isOpen={exportDrawerOpen}\n        onClose={() => setExportDrawerOpen(false)}\n      />\n    </>\n  );\n}\n","\nimport React from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport TransportRoutesTab from './components/routes/TransportRoutesTab';\n\nconst TransportRoutesPage: React.FC = () => {\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-4 px-2 sm:px-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">Transport Routes</h1>\n        <TransportRoutesTab />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default TransportRoutesPage;\n","\nimport React, { useState } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { TransportType } from '../types/transportTypes';\n\ninterface TransportTypeAddSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (transportType: Omit<TransportType, 'id'>) => void;\n  transportCategories: string[];\n}\n\nconst TransportTypeAddSheet: React.FC<TransportTypeAddSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  transportCategories\n}) => {\n  const [newType, setNewType] = useState<Omit<TransportType, 'id'>>({\n    name: '',\n    category: '',\n    seatingCapacity: 0,\n    luggageCapacity: 0,\n    active: true\n  });\n\n  const [notApplicableSeating, setNotApplicableSeating] = useState(false);\n  const [notApplicableLuggage, setNotApplicableLuggage] = useState(false);\n\n  const handleChange = (field: keyof Omit<TransportType, 'id'>, value: any) => {\n    setNewType({\n      ...newType,\n      [field]: value\n    });\n  };\n\n  const handleSeatingCapacityChange = (value: string) => {\n    if (notApplicableSeating) return;\n    const numValue = value === '' ? 0 : parseInt(value);\n    handleChange('seatingCapacity', numValue);\n  };\n\n  const handleLuggageCapacityChange = (value: string) => {\n    if (notApplicableLuggage) return;\n    const numValue = value === '' ? 0 : parseInt(value);\n    handleChange('luggageCapacity', numValue);\n  };\n\n  const toggleNotApplicableSeating = () => {\n    setNotApplicableSeating(!notApplicableSeating);\n    if (!notApplicableSeating) {\n      handleChange('seatingCapacity', 0);\n    }\n  };\n\n  const toggleNotApplicableLuggage = () => {\n    setNotApplicableLuggage(!notApplicableLuggage);\n    if (!notApplicableLuggage) {\n      handleChange('luggageCapacity', 0);\n    }\n  };\n\n  const handleSubmit = () => {\n    onSave(newType);\n    // Reset form\n    setNewType({\n      name: '',\n      category: '',\n      seatingCapacity: 0,\n      luggageCapacity: 0,\n      active: true\n    });\n    setNotApplicableSeating(false);\n    setNotApplicableLuggage(false);\n  };\n\n  const isFormValid = () => {\n    return (\n      newType.name.trim() !== '' &&\n      newType.category.trim() !== ''\n    );\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Add Transport Type</SheetTitle>\n          <SheetDescription>\n            Create a new transport type and define its specifications\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Transport Type Name <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"name\"\n              value={newType.name}\n              onChange={(e) => handleChange('name', e.target.value)}\n              placeholder=\"Enter transport type name (e.g., SUV)\"\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"category\">Category <span className=\"text-red-500\">*</span></Label>\n            <Select \n              value={newType.category} \n              onValueChange={(value) => handleChange('category', value)}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select category\" />\n              </SelectTrigger>\n              <SelectContent>\n                {transportCategories.map((category) => (\n                  <SelectItem key={category} value={category}>\n                    {category}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <Label htmlFor=\"seating\">Seating Capacity (Adults) <span className=\"text-red-500\">*</span></Label>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground\">Not Applicable</span>\n                <Switch \n                  checked={notApplicableSeating}\n                  onCheckedChange={toggleNotApplicableSeating}\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                className=\"h-10 w-10 p-0\"\n                onClick={() => handleSeatingCapacityChange(Math.max(0, newType.seatingCapacity - 1).toString())}\n                disabled={notApplicableSeating}\n              >\n                -\n              </Button>\n              <Input \n                id=\"seating\"\n                type=\"number\"\n                min=\"0\"\n                value={notApplicableSeating ? \"N/A\" : newType.seatingCapacity}\n                onChange={(e) => handleSeatingCapacityChange(e.target.value)}\n                disabled={notApplicableSeating}\n                className=\"text-center\"\n              />\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                className=\"h-10 w-10 p-0\"\n                onClick={() => handleSeatingCapacityChange((newType.seatingCapacity + 1).toString())}\n                disabled={notApplicableSeating}\n              >\n                +\n              </Button>\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <Label htmlFor=\"luggage\">Luggage Capacity <span className=\"text-red-500\">*</span></Label>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground\">Not Applicable</span>\n                <Switch \n                  checked={notApplicableLuggage}\n                  onCheckedChange={toggleNotApplicableLuggage}\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                className=\"h-10 w-10 p-0\"\n                onClick={() => handleLuggageCapacityChange(Math.max(0, newType.luggageCapacity - 1).toString())}\n                disabled={notApplicableLuggage}\n              >\n                -\n              </Button>\n              <Input \n                id=\"luggage\"\n                type=\"number\"\n                min=\"0\"\n                value={notApplicableLuggage ? \"N/A\" : newType.luggageCapacity}\n                onChange={(e) => handleLuggageCapacityChange(e.target.value)}\n                disabled={notApplicableLuggage}\n                className=\"text-center\"\n              />\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                className=\"h-10 w-10 p-0\"\n                onClick={() => handleLuggageCapacityChange((newType.luggageCapacity + 1).toString())}\n                disabled={notApplicableLuggage}\n              >\n                +\n              </Button>\n            </div>\n            <Select disabled={notApplicableLuggage}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"bags\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"bags\">bags</SelectItem>\n                <SelectItem value=\"suitcases\">suitcases</SelectItem>\n                <SelectItem value=\"pieces\">pieces</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center py-2\">\n              <Label htmlFor=\"active\">Active Status</Label>\n              <Switch \n                id=\"active\"\n                checked={newType.active}\n                onCheckedChange={(checked) => handleChange('active', checked)}\n              />\n            </div>\n          </div>\n        </div>\n        \n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSubmit} disabled={!isFormValid()}>Save Transport Type</Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default TransportTypeAddSheet;\n","\nimport React, { useState, useEffect } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { TransportType } from '../types/transportTypes';\n\ninterface TransportTypeEditSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (transportType: TransportType) => void;\n  transportType: TransportType | null;\n  transportCategories: string[];\n}\n\nconst TransportTypeEditSheet: React.FC<TransportTypeEditSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  transportType,\n  transportCategories\n}) => {\n  const [editedType, setEditedType] = useState<TransportType | null>(null);\n  const [notApplicableSeating, setNotApplicableSeating] = useState(false);\n  const [notApplicableLuggage, setNotApplicableLuggage] = useState(false);\n\n  useEffect(() => {\n    if (transportType) {\n      setEditedType(transportType);\n      setNotApplicableSeating(transportType.seatingCapacity === 0);\n      setNotApplicableLuggage(transportType.luggageCapacity === 0);\n    }\n  }, [transportType]);\n\n  const handleChange = (field: keyof TransportType, value: any) => {\n    if (editedType) {\n      setEditedType({\n        ...editedType,\n        [field]: value\n      });\n    }\n  };\n\n  const handleSeatingCapacityChange = (value: string) => {\n    if (notApplicableSeating || !editedType) return;\n    const numValue = value === '' ? 0 : parseInt(value);\n    handleChange('seatingCapacity', numValue);\n  };\n\n  const handleLuggageCapacityChange = (value: string) => {\n    if (notApplicableLuggage || !editedType) return;\n    const numValue = value === '' ? 0 : parseInt(value);\n    handleChange('luggageCapacity', numValue);\n  };\n\n  const toggleNotApplicableSeating = () => {\n    setNotApplicableSeating(!notApplicableSeating);\n    if (editedType) {\n      if (!notApplicableSeating) {\n        handleChange('seatingCapacity', 0);\n      }\n    }\n  };\n\n  const toggleNotApplicableLuggage = () => {\n    setNotApplicableLuggage(!notApplicableLuggage);\n    if (editedType) {\n      if (!notApplicableLuggage) {\n        handleChange('luggageCapacity', 0);\n      }\n    }\n  };\n\n  const handleSubmit = () => {\n    if (editedType) {\n      onSave(editedType);\n    }\n  };\n\n  const isFormValid = () => {\n    return editedType && \n      editedType.name.trim() !== '' &&\n      editedType.category.trim() !== '';\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Edit Transport Type</SheetTitle>\n          <SheetDescription>\n            Update transport type specifications\n          </SheetDescription>\n        </SheetHeader>\n        \n        {editedType && (\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Transport Type Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"name\"\n                value={editedType.name}\n                onChange={(e) => handleChange('name', e.target.value)}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"category\">Category <span className=\"text-red-500\">*</span></Label>\n              <Select \n                value={editedType.category} \n                onValueChange={(value) => handleChange('category', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {transportCategories.map((category) => (\n                    <SelectItem key={category} value={category}>\n                      {category}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <Label htmlFor=\"seating\">Seating Capacity (Adults) <span className=\"text-red-500\">*</span></Label>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm text-muted-foreground\">Not Applicable</span>\n                  <Switch \n                    checked={notApplicableSeating}\n                    onCheckedChange={toggleNotApplicableSeating}\n                  />\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  className=\"h-10 w-10 p-0\"\n                  onClick={() => handleSeatingCapacityChange(Math.max(0, editedType.seatingCapacity - 1).toString())}\n                  disabled={notApplicableSeating}\n                >\n                  -\n                </Button>\n                <Input \n                  id=\"seating\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={notApplicableSeating ? \"N/A\" : editedType.seatingCapacity}\n                  onChange={(e) => handleSeatingCapacityChange(e.target.value)}\n                  disabled={notApplicableSeating}\n                  className=\"text-center\"\n                />\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  className=\"h-10 w-10 p-0\"\n                  onClick={() => handleSeatingCapacityChange((editedType.seatingCapacity + 1).toString())}\n                  disabled={notApplicableSeating}\n                >\n                  +\n                </Button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <Label htmlFor=\"luggage\">Luggage Capacity <span className=\"text-red-500\">*</span></Label>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm text-muted-foreground\">Not Applicable</span>\n                  <Switch \n                    checked={notApplicableLuggage}\n                    onCheckedChange={toggleNotApplicableLuggage}\n                  />\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  className=\"h-10 w-10 p-0\"\n                  onClick={() => handleLuggageCapacityChange(Math.max(0, editedType.luggageCapacity - 1).toString())}\n                  disabled={notApplicableLuggage}\n                >\n                  -\n                </Button>\n                <Input \n                  id=\"luggage\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={notApplicableLuggage ? \"N/A\" : editedType.luggageCapacity}\n                  onChange={(e) => handleLuggageCapacityChange(e.target.value)}\n                  disabled={notApplicableLuggage}\n                  className=\"text-center\"\n                />\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  className=\"h-10 w-10 p-0\"\n                  onClick={() => handleLuggageCapacityChange((editedType.luggageCapacity + 1).toString())}\n                  disabled={notApplicableLuggage}\n                >\n                  +\n                </Button>\n              </div>\n              <Select disabled={notApplicableLuggage}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"bags\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"bags\">bags</SelectItem>\n                  <SelectItem value=\"suitcases\">suitcases</SelectItem>\n                  <SelectItem value=\"pieces\">pieces</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center py-2\">\n                <Label htmlFor=\"active\">Active Status</Label>\n                <Switch \n                  id=\"active\"\n                  checked={editedType.active}\n                  onCheckedChange={(checked) => handleChange('active', checked)}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n        \n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSubmit} disabled={!isFormValid()}>Save Changes</Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default TransportTypeEditSheet;\n","\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { TransportType } from '../types/transportTypes';\n\ninterface TransportTypeDeleteDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirmDelete: () => void;\n  transportType: TransportType | null;\n}\n\nconst TransportTypeDeleteDialog: React.FC<TransportTypeDeleteDialogProps> = ({\n  isOpen,\n  onClose,\n  onConfirmDelete,\n  transportType\n}) => {\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Delete Transport Type</DialogTitle>\n          <DialogDescription>\n            Are you sure you want to delete this transport type? This action cannot be undone.\n          </DialogDescription>\n        </DialogHeader>\n        \n        {transportType && (\n          <div className=\"py-4\">\n            <p><strong>Name:</strong> {transportType.name}</p>\n            <p><strong>Category:</strong> {transportType.category}</p>\n            <p><strong>Seating Capacity:</strong> {transportType.seatingCapacity || 'Not Applicable'}</p>\n            <p><strong>Luggage Capacity:</strong> {transportType.luggageCapacity || 'Not Applicable'}</p>\n          </div>\n        )}\n        \n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n          <Button variant=\"destructive\" onClick={onConfirmDelete}>Delete</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default TransportTypeDeleteDialog;\n","\nimport React from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetDescription,\n  SheetFooter,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { TransportType } from '../types/transportTypes';\n\ninterface TransportTypeViewSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  transportType: TransportType | null;\n}\n\nconst TransportTypeViewSheet: React.FC<TransportTypeViewSheetProps> = ({\n  isOpen,\n  onClose,\n  transportType\n}) => {\n  if (!transportType) return null;\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md\">\n        <SheetHeader>\n          <SheetTitle>Transport Type Details</SheetTitle>\n          <SheetDescription>\n            View details of the selected transport type\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"py-4 space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4 pb-2 border-b\">\n            <div className=\"font-medium\">Name</div>\n            <div>{transportType.name}</div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 pb-2 border-b\">\n            <div className=\"font-medium\">Category</div>\n            <div>{transportType.category}</div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 pb-2 border-b\">\n            <div className=\"font-medium\">Seating Capacity</div>\n            <div>{transportType.seatingCapacity || 'N/A'}</div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 pb-2 border-b\">\n            <div className=\"font-medium\">Luggage Capacity</div>\n            <div>{transportType.luggageCapacity || 'N/A'}</div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4 pb-2 border-b\">\n            <div className=\"font-medium\">Status</div>\n            <div>\n              <Badge variant={transportType.active ? \"default\" : \"outline\"}>\n                {transportType.active ? \"Active\" : \"Inactive\"}\n              </Badge>\n            </div>\n          </div>\n        </div>\n        \n        <SheetFooter>\n          <Button onClick={onClose}>Close</Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default TransportTypeViewSheet;\n","\nimport React, { useState } from 'react';\nimport { useTransportData } from '../../hooks/useTransportData';\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Table, TableHeader, TableRow, TableHead, TableBody, TableCell } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Search, Plus, Edit, Trash2, Eye, ToggleLeft, ToggleRight } from 'lucide-react';\nimport { TransportType } from '../../types/transportTypes';\nimport TransportTypeAddSheet from '../TransportTypeAddSheet';\nimport TransportTypeEditSheet from '../TransportTypeEditSheet';\nimport TransportTypeDeleteDialog from '../TransportTypeDeleteDialog';\nimport TransportTypeViewSheet from '../TransportTypeViewSheet';\nimport { \n  createTransportType, \n  updateTransportType, \n  deleteTransportType, \n  toggleTransportTypeActive,\n  mapUIToTransportTypeRow,\n  mapTransportTypeRowToUI\n} from '@/services/transportTypesService';\nimport { useToast } from '@/hooks/use-toast';\n\nconst TransportTypesTab: React.FC = () => {\n  const transportData = useTransportData();\n  const { toast } = useToast();\n  \n  // States for transport types management\n  const [searchTransportTypes, setSearchTransportTypes] = useState('');\n  const [addTypeOpen, setAddTypeOpen] = useState(false);\n  const [editTypeOpen, setEditTypeOpen] = useState(false);\n  const [deleteTypeOpen, setDeleteTypeOpen] = useState(false);\n  const [viewTypeOpen, setViewTypeOpen] = useState(false);\n  const [selectedTransportType, setSelectedTransportType] = useState<TransportType | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  // Handle viewing a transport type details\n  const handleViewTransportType = (transportType: TransportType) => {\n    setSelectedTransportType(transportType);\n    setViewTypeOpen(true);\n  };\n\n  // Handle adding a new transport type\n  const handleAddTransportType = async (transportType: Omit<TransportType, 'id'>) => {\n    setIsLoading(true);\n    try {\n      const dbRow = mapUIToTransportTypeRow(transportType);\n      const newRow = await createTransportType(dbRow);\n      const newType = mapTransportTypeRowToUI(newRow);\n      \n      // Update local state\n      transportData.setTransport([...transportData.transport, newType]);\n      setAddTypeOpen(false);\n      \n      toast({\n        title: \"Transport Type Added\",\n        description: `${transportType.name} has been added successfully.`,\n      });\n    } catch (error) {\n      console.error('Error adding transport type:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to add transport type. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle editing a transport type\n  const handleEditTransportType = async (transportType: TransportType) => {\n    setIsLoading(true);\n    try {\n      const dbRow = mapUIToTransportTypeRow(transportType);\n      const updatedRow = await updateTransportType(transportType.id, dbRow);\n      const updatedType = mapTransportTypeRowToUI(updatedRow);\n      \n      // Update local state\n      transportData.setTransport(\n        transportData.transport.map(type => \n          type.id === transportType.id ? updatedType : type\n        )\n      );\n      setEditTypeOpen(false);\n      \n      toast({\n        title: \"Transport Type Updated\",\n        description: `${transportType.name} has been updated successfully.`,\n      });\n    } catch (error) {\n      console.error('Error updating transport type:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update transport type. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle deleting a transport type\n  const handleDeleteTransportType = async () => {\n    if (!selectedTransportType) return;\n    \n    setIsLoading(true);\n    try {\n      await deleteTransportType(selectedTransportType.id);\n      \n      // Update local state\n      transportData.setTransport(\n        transportData.transport.filter(type => type.id !== selectedTransportType.id)\n      );\n      setDeleteTypeOpen(false);\n      \n      toast({\n        title: \"Transport Type Deleted\",\n        description: `${selectedTransportType.name} has been deleted successfully.`,\n      });\n      setSelectedTransportType(null);\n    } catch (error) {\n      console.error('Error deleting transport type:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete transport type. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle toggling transport type status\n  const handleToggleTypeStatus = async (transportType: TransportType) => {\n    setIsLoading(true);\n    try {\n      const newActiveStatus = !transportType.active;\n      const updatedRow = await toggleTransportTypeActive(transportType.id, newActiveStatus);\n      const updatedType = mapTransportTypeRowToUI(updatedRow);\n      \n      // Update local state\n      transportData.setTransport(\n        transportData.transport.map(type => \n          type.id === transportType.id ? updatedType : type\n        )\n      );\n      \n      toast({\n        title: \"Status Updated\",\n        description: `${transportType.name} status has been updated.`,\n      });\n    } catch (error) {\n      console.error('Error toggling transport type status:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update status. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Filter transport types based on search\n  const filteredTransportTypes = transportData.transport.filter(type => \n    type.name.toLowerCase().includes(searchTransportTypes.toLowerCase()) ||\n    type.category.toLowerCase().includes(searchTransportTypes.toLowerCase())\n  );\n\n  // Get unique categories for filter\n  const transportCategories = Array.from(new Set(transportData.transport.map(type => type.category)));\n\n  return (\n    <>\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <CardTitle>Transport Types</CardTitle>\n            <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n              <div className=\"relative flex-1 sm:w-64\">\n                <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search transport types...\"\n                  className=\"pl-8 w-full\"\n                  value={searchTransportTypes}\n                  onChange={(e) => setSearchTransportTypes(e.target.value)}\n                />\n              </div>\n              <Button onClick={() => setAddTypeOpen(true)} disabled={isLoading}>\n                <Plus className=\"mr-2 h-4 w-4\" /> Add Type\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"rounded-md border\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Category</TableHead>\n                  <TableHead>Seating</TableHead>\n                  <TableHead>Luggage</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredTransportTypes.length > 0 ? (\n                  filteredTransportTypes.map((type) => (\n                    <TableRow key={type.id}>\n                      <TableCell className=\"font-medium\">{type.name}</TableCell>\n                      <TableCell>{type.category}</TableCell>\n                      <TableCell>{type.seatingCapacity || 'N/A'}</TableCell>\n                      <TableCell>{type.luggageCapacity || 'N/A'}</TableCell>\n                      <TableCell>\n                        <Badge variant={type.active ? \"default\" : \"outline\"}>\n                          {type.active ? \"Active\" : \"Inactive\"}\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex justify-end gap-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleViewTransportType(type)}\n                            title=\"View Details\"\n                            disabled={isLoading}\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleToggleTypeStatus(type)}\n                            title={type.active ? \"Deactivate\" : \"Activate\"}\n                            disabled={isLoading}\n                          >\n                            {type.active ? (\n                              <ToggleRight className=\"h-4 w-4 text-green-500\" />\n                            ) : (\n                              <ToggleLeft className=\"h-4 w-4 text-gray-400\" />\n                            )}\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => {\n                              setSelectedTransportType(type);\n                              setEditTypeOpen(true);\n                            }}\n                            disabled={isLoading}\n                          >\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => {\n                              setSelectedTransportType(type);\n                              setDeleteTypeOpen(true);\n                            }}\n                            disabled={isLoading}\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"h-24 text-center\">\n                      {searchTransportTypes ? 'No transport types found matching your search.' : 'No transport types added yet.'}\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n        \n      {/* Transport Type Sheets and Dialogs */}\n      <TransportTypeAddSheet\n        isOpen={addTypeOpen}\n        onClose={() => setAddTypeOpen(false)}\n        onSave={handleAddTransportType}\n        transportCategories={transportCategories}\n      />\n\n      <TransportTypeEditSheet\n        isOpen={editTypeOpen}\n        onClose={() => setEditTypeOpen(false)}\n        onSave={handleEditTransportType}\n        transportType={selectedTransportType}\n        transportCategories={transportCategories}\n      />\n\n      <TransportTypeDeleteDialog\n        isOpen={deleteTypeOpen}\n        onClose={() => setDeleteTypeOpen(false)}\n        onConfirmDelete={handleDeleteTransportType}\n        transportType={selectedTransportType}\n      />\n\n      <TransportTypeViewSheet\n        isOpen={viewTypeOpen}\n        onClose={() => setViewTypeOpen(false)}\n        transportType={selectedTransportType}\n      />\n    </>\n  );\n};\n\nexport default TransportTypesTab;\n","\nimport React from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport TransportTypesTab from './components/types/TransportTypesTab';\n\nconst TransportTypesPage: React.FC = () => {\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-4 px-2 sm:px-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">Transport Types</h1>\n        <TransportTypesTab />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default TransportTypesPage;\n","\nimport React from 'react';\nimport { Plus, Download } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface LocationCodesHeaderProps {\n  onAddClick: () => void;\n  onImportSampleData?: () => void;\n  showImportButton?: boolean;\n}\n\nconst LocationCodesHeader: React.FC<LocationCodesHeaderProps> = ({ \n  onAddClick, \n  onImportSampleData,\n  showImportButton = false \n}) => {\n  return (\n    <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n      <div>\n        <h2 className=\"text-xl font-bold\">Location Codes Management</h2>\n        <p className=\"text-sm text-muted-foreground\">Manage short codes and full names for locations used across the system.</p>\n      </div>\n      <div className=\"flex gap-2\">\n        {showImportButton && onImportSampleData && (\n          <Button \n            variant=\"outline\"\n            onClick={onImportSampleData}\n            className=\"flex items-center gap-1\"\n          >\n            <Download className=\"h-4 w-4\" /> Import Sample Data\n          </Button>\n        )}\n        <Button \n          onClick={onAddClick}\n          className=\"flex items-center gap-1\"\n        >\n          <Plus className=\"h-4 w-4\" /> Add Code\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default LocationCodesHeader;\n","\nimport React from 'react';\nimport { Edit, Trash2, Eye, ToggleLeft, ToggleRight } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Table, TableHeader, TableRow, TableHead, TableBody, TableCell } from '@/components/ui/table';\nimport { LocationCode } from '../../types/transportTypes';\n\ninterface LocationCodesTableProps {\n  locations: LocationCode[];\n  onView: (location: LocationCode) => void;\n  onEdit: (location: LocationCode) => void;\n  onDelete: (location: LocationCode) => void;\n  onToggleStatus: (location: LocationCode) => void;\n}\n\nconst LocationCodesTable: React.FC<LocationCodesTableProps> = ({\n  locations,\n  onView,\n  onEdit,\n  onDelete,\n  onToggleStatus\n}) => {\n  return (\n    <Table>\n      <TableHeader>\n        <TableRow>\n          <TableHead>Short Code</TableHead>\n          <TableHead className=\"hidden md:table-cell\">Full Name</TableHead>\n          <TableHead>Category</TableHead>\n          <TableHead className=\"hidden md:table-cell\">Country</TableHead>\n          <TableHead>Status</TableHead>\n          <TableHead className=\"text-right\">Actions</TableHead>\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {locations.length === 0 ? (\n          <TableRow>\n            <TableCell colSpan={6} className=\"text-center py-8 text-muted-foreground\">\n              No location codes found\n            </TableCell>\n          </TableRow>\n        ) : (\n          locations.map((location) => (\n            <TableRow key={`location-${location.id}-${location.code}`}>\n              <TableCell className=\"font-medium\">{location.code}</TableCell>\n              <TableCell className=\"hidden md:table-cell\">{location.fullName}</TableCell>\n              <TableCell>\n                <span className={`px-2 py-1 rounded-full text-xs ${\n                  location.category === 'airport' ? 'bg-blue-100 text-blue-800' :\n                  location.category === 'hotel' ? 'bg-green-100 text-green-800' :\n                  location.category === 'pier' ? 'bg-amber-100 text-amber-800' :\n                  'bg-gray-100 text-gray-800'\n                }`}>\n                  {location.category}\n                </span>\n              </TableCell>\n              <TableCell className=\"hidden md:table-cell\">\n                {location.country}\n              </TableCell>\n              <TableCell>\n                <span className={`px-2 py-1 rounded-full text-xs ${\n                  location.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                }`}>\n                  {location.status}\n                </span>\n              </TableCell>\n              <TableCell className=\"text-right\">\n                <div className=\"flex justify-end gap-2\">\n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => onView(location)}\n                    title=\"View Details\"\n                    aria-label=\"View details\"\n                  >\n                    <Eye className=\"h-4 w-4\" />\n                  </Button>\n                  \n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => onToggleStatus(location)}\n                    title={location.status === 'active' ? \"Deactivate\" : \"Activate\"}\n                    aria-label={location.status === 'active' ? \"Deactivate\" : \"Activate\"}\n                  >\n                    {location.status === 'active' ? (\n                      <ToggleRight className=\"h-4 w-4 text-green-500\" />\n                    ) : (\n                      <ToggleLeft className=\"h-4 w-4 text-gray-400\" />\n                    )}\n                  </Button>\n                  \n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => onEdit(location)}\n                    title=\"Edit location code\"\n                    aria-label=\"Edit location code\"\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  \n                  <Button \n                    variant=\"ghost\" \n                    size=\"icon\"\n                    onClick={() => onDelete(location)}\n                    title=\"Delete location code\"\n                    aria-label=\"Delete location code\"\n                    className=\"hover:bg-red-100 hover:text-red-600\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </TableCell>\n            </TableRow>\n          ))\n        )}\n      </TableBody>\n    </Table>\n  );\n};\n\nexport default LocationCodesTable;\n","\nimport React from 'react';\nimport { \n  Select, \n  SelectContent, \n  SelectItem, \n  SelectTrigger, \n  SelectValue \n} from \"@/components/ui/select\";\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\ninterface LocationCodesPaginationProps {\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  itemsPerPage: number;\n  onPageChange: (page: number) => void;\n  onItemsPerPageChange: (itemsPerPage: number) => void;\n  indexOfFirstItem: number;\n  indexOfLastItem: number;\n}\n\nconst LocationCodesPagination: React.FC<LocationCodesPaginationProps> = ({\n  currentPage,\n  totalPages,\n  totalItems,\n  itemsPerPage,\n  onPageChange,\n  onItemsPerPageChange,\n  indexOfFirstItem,\n  indexOfLastItem\n}) => {\n  // Available pagination options\n  const paginationOptions = [5, 10, 20, 50, 100];\n\n  // Enhanced pagination logic for better UX\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    \n    if (totalPages <= 5) {\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n      return pageNumbers;\n    }\n    \n    // Always show first page\n    pageNumbers.push(1);\n    \n    if (currentPage > 3) {\n      pageNumbers.push('...');\n    }\n    \n    // Calculate neighborhood around current page\n    const startNeighborhood = Math.max(2, currentPage - 1);\n    const endNeighborhood = Math.min(totalPages - 1, currentPage + 1);\n    \n    // Add pages around current page\n    for (let i = startNeighborhood; i <= endNeighborhood; i++) {\n      if (!pageNumbers.includes(i) && i > 1 && i < totalPages) {\n        pageNumbers.push(i);\n      }\n    }\n    \n    // Add ellipsis before last page if needed\n    if (currentPage < totalPages - 2) {\n      if (pageNumbers[pageNumbers.length - 1] !== '...') {\n        pageNumbers.push('...');\n      }\n    }\n    \n    // Always show last page if more than 1 page\n    if (totalPages > 1 && !pageNumbers.includes(totalPages)) {\n      pageNumbers.push(totalPages);\n    }\n    \n    return pageNumbers;\n  };\n\n  // Handle change of items per page\n  const handleItemsPerPageChange = (value: string) => {\n    const newValue = parseInt(value, 10);\n    onItemsPerPageChange(newValue);\n  };\n\n  if (totalPages <= 1 && totalItems <= paginationOptions[0]) return null;\n\n  return (\n    <div className=\"flex flex-col sm:flex-row items-center justify-between space-y-2 sm:space-y-0 p-4 border-t\">\n      <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\n        <span>\n          {totalItems === 0 ? \n            \"No items to display\" : \n            `Showing ${indexOfFirstItem + 1}-${indexOfLastItem} of ${totalItems}`\n          }\n        </span>\n        <span className=\"flex items-center gap-2\">\n          <span>Show</span>\n          <Select\n            value={itemsPerPage.toString()}\n            onValueChange={handleItemsPerPageChange}\n          >\n            <SelectTrigger className=\"h-8 w-[70px]\">\n              <SelectValue placeholder={itemsPerPage.toString()} />\n            </SelectTrigger>\n            <SelectContent>\n              {paginationOptions.map(option => (\n                <SelectItem key={option} value={option.toString()}>\n                  {option}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </span>\n      </div>\n      \n      {totalItems > 0 && totalPages > 1 && (\n        <Pagination>\n          <PaginationContent>\n            <PaginationItem>\n              <PaginationPrevious \n                onClick={() => currentPage > 1 && onPageChange(currentPage - 1)} \n                className={currentPage === 1 ? \"cursor-not-allowed opacity-50\" : \"cursor-pointer\"} \n              />\n            </PaginationItem>\n            \n            {getPageNumbers().map((page, index) => (\n              page === '...' ? (\n                <PaginationItem key={`ellipsis-${index}`}>\n                  <PaginationEllipsis />\n                </PaginationItem>\n              ) : (\n                <PaginationItem key={`page-${page}`}>\n                  <PaginationLink \n                    isActive={currentPage === page}\n                    onClick={() => typeof page === 'number' && onPageChange(page)}\n                    className=\"cursor-pointer\"\n                  >\n                    {page}\n                  </PaginationLink>\n                </PaginationItem>\n              )\n            ))}\n            \n            <PaginationItem>\n              <PaginationNext \n                onClick={() => currentPage < totalPages && onPageChange(currentPage + 1)} \n                className={currentPage === totalPages ? \"cursor-not-allowed opacity-50\" : \"cursor-pointer\"} \n              />\n            </PaginationItem>\n          </PaginationContent>\n        </Pagination>\n      )}\n    </div>\n  );\n};\n\nexport default LocationCodesPagination;\n","\nimport React, { useState, useEffect } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Textarea } from '@/components/ui/textarea';\nimport { LocationCode } from '../types/transportTypes';\nimport { Country, City, useCitiesData } from '@/hooks/useCitiesData';\nimport { AppSettingsService, SETTING_CATEGORIES } from '@/services/appSettingsService_database';\nimport { nominatimService } from '@/services/nominatimService';\nimport { ExternalLink, MapPin, Plus } from 'lucide-react';\n\ninterface LocationCodeAddSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (location: Omit<LocationCode, 'id'>) => void;\n  countries: Country[];\n  cities: City[];\n}\n\nconst LocationCodeAddSheet: React.FC<LocationCodeAddSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  countries,\n  cities\n}) => {\n  const { getCitiesByCountry } = useCitiesData();\n  const [newLocation, setNewLocation] = useState<Omit<LocationCode, 'id'>>({\n    code: '',\n    fullName: '',\n    category: 'airport',\n    country: '',\n    city: '',\n    status: 'active',\n    notes: '',\n    latitude: '',\n    longitude: ''\n  });\n\n  // State for custom category input\n  const [showCustomCategory, setShowCustomCategory] = useState(false);\n  const [customCategory, setCustomCategory] = useState('');\n  const [predefinedCategories] = useState([\n    'airport',\n    'hotel', \n    'pier',\n    'train_station',\n    'bus_station',\n    'port',\n    'landmark',\n    'other'\n  ]);\n\n  // Get filtered cities based on selected country\n  const filteredCities = newLocation.country ? getCitiesByCountry(newLocation.country) : [];\n\n  // Reset form when sheet closes\n  useEffect(() => {\n    if (!isOpen) {\n      setNewLocation({\n        code: '',\n        fullName: '',\n        category: 'airport',\n        country: '',\n        city: '',\n        status: 'active',\n        notes: '',\n        latitude: '',\n        longitude: ''\n      });\n      setShowCustomCategory(false);\n      setCustomCategory('');\n    }\n  }, [isOpen]);\n\n  const handleChange = (field: keyof Omit<LocationCode, 'id'>, value: string) => {\n    setNewLocation(prev => ({\n      ...prev,\n      [field]: value,\n      // Reset city when country changes\n      ...(field === 'country' ? { city: '' } : {})\n    }));\n  };\n\n  const handleCategoryChange = (value: string) => {\n    if (value === 'custom') {\n      setShowCustomCategory(true);\n      setCustomCategory('');\n    } else {\n      setShowCustomCategory(false);\n      setCustomCategory('');\n      handleChange('category', value);\n    }\n  };\n\n  const handleCustomCategorySubmit = () => {\n    if (customCategory.trim()) {\n      handleChange('category', customCategory.trim());\n      setShowCustomCategory(false);\n    }\n  };\n\n  const handleCustomCategoryCancel = () => {\n    setShowCustomCategory(false);\n    setCustomCategory('');\n    // Reset to a default category\n    handleChange('category', 'other');\n  };\n\n  const handleSubmit = () => {\n    onSave(newLocation);\n  };\n\n  const isFormValid = () => {\n    return (\n      newLocation.code.trim() !== '' &&\n      newLocation.fullName.trim() !== '' &&\n      newLocation.country.trim() !== '' &&\n      newLocation.city.trim() !== ''\n    );\n  };\n\n  // Nominatim toggle from admin settings\n  const [nominatimEnabled, setNominatimEnabled] = useState(false);\n  const [reverseAddress, setReverseAddress] = useState<string>('');\n  const [isGeocoding, setIsGeocoding] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await AppSettingsService.getSetting(SETTING_CATEGORIES.INTEGRATIONS, 'nominatim_geocoding_enabled');\n        if (res.success && res.data) {\n          setNominatimEnabled(res.data.setting_value === 'true');\n        } else {\n          setNominatimEnabled(false);\n        }\n      } catch {\n        setNominatimEnabled(false);\n      }\n    })();\n  }, []);\n\n  const geocodeFromName = async () => {\n    const query = [newLocation.fullName, newLocation.city, newLocation.country].filter(Boolean).join(' ');\n    if (!query.trim()) return;\n    setIsGeocoding(true);\n    try {\n      const results = await nominatimService.search(query, { limit: 1 });\n      \n      if (results && results.length > 0) {\n        const top = results[0];\n        handleChange('latitude', top.lat);\n        handleChange('longitude', top.lon);\n      }\n    } catch (error) {\n      console.error('Geocoding failed:', error);\n    } finally {\n      setIsGeocoding(false);\n    }\n  };\n\n  const reverseLookup = async () => {\n    if (!newLocation.latitude || !newLocation.longitude) return;\n    setIsGeocoding(true);\n    try {\n      const res = await nominatimService.reverse(newLocation.latitude, newLocation.longitude);\n      setReverseAddress(res.display_name || '');\n    } finally {\n      setIsGeocoding(false);\n    }\n  };\n\n  // Coordinate formatting and validation helpers\n  const parseNumber = (s?: string) => {\n    const n = Number(s);\n    return Number.isFinite(n) ? n : null;\n  };\n  const formatCoord = (s?: string) => {\n    const n = parseNumber(s);\n    return n === null ? '' : n.toFixed(6);\n  };\n  const isValidLat = (s?: string) => {\n    const n = parseNumber(s);\n    return n !== null && n >= -90 && n <= 90;\n  };\n  const isValidLon = (s?: string) => {\n    const n = parseNumber(s);\n    return n !== null && n >= -180 && n <= 180;\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Add New Location Code</SheetTitle>\n          <SheetDescription>\n            Enter location details below\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"code\">Short Code <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"code\"\n              value={newLocation.code}\n              onChange={(e) => handleChange('code', e.target.value)}\n              placeholder=\"Example: BKK APT\"\n            />\n            <p className=\"text-xs text-muted-foreground\">Example: BKK APT</p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"fullName\">Full Name <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"fullName\"\n              value={newLocation.fullName}\n              onChange={(e) => handleChange('fullName', e.target.value)}\n              placeholder=\"Enter complete location name\"\n            />\n            <p className=\"text-xs text-muted-foreground\">Enter complete location name</p>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"category\">Category <span className=\"text-red-500\">*</span></Label>\n            {!showCustomCategory ? (\n              <Select \n                value={newLocation.category} \n                onValueChange={handleCategoryChange}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {predefinedCategories.map(category => (\n                    <SelectItem key={category} value={category}>\n                      {category.charAt(0).toUpperCase() + category.slice(1).replace('_', ' ')}\n                    </SelectItem>\n                  ))}\n                  <SelectItem value=\"custom\">\n                    <div className=\"flex items-center gap-2\">\n                      <Plus className=\"h-4 w-4\" />\n                      Add Custom Category\n                    </div>\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            ) : (\n              <div className=\"space-y-2\">\n                <div className=\"flex gap-2\">\n                  <Input\n                    value={customCategory}\n                    onChange={(e) => setCustomCategory(e.target.value)}\n                    placeholder=\"Enter custom category\"\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter') {\n                        handleCustomCategorySubmit();\n                      } else if (e.key === 'Escape') {\n                        handleCustomCategoryCancel();\n                      }\n                    }}\n                    autoFocus\n                  />\n                  <Button \n                    type=\"button\" \n                    size=\"sm\" \n                    onClick={handleCustomCategorySubmit}\n                    disabled={!customCategory.trim()}\n                  >\n                    Add\n                  </Button>\n                  <Button \n                    type=\"button\" \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={handleCustomCategoryCancel}\n                  >\n                    Cancel\n                  </Button>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Press Enter to add or Escape to cancel\n                </p>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"country\">Country <span className=\"text-red-500\">*</span></Label>\n              <Select \n                value={newLocation.country} \n                onValueChange={(value) => handleChange('country', value)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select country\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {countries.map(country => (\n                    <SelectItem key={country.id} value={country.name}>\n                      {country.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"city\">City <span className=\"text-red-500\">*</span></Label>\n              <Select \n                value={newLocation.city} \n                onValueChange={(value) => handleChange('city', value)}\n                disabled={!newLocation.country}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select city\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {filteredCities.length > 0 ? (\n                    filteredCities.map(city => (\n                      <SelectItem key={city.id} value={city.name}>\n                        {city.name}\n                      </SelectItem>\n                    ))\n                  ) : (\n                    <SelectItem value=\"no-cities\" disabled>\n                      {newLocation.country ? 'No cities available for this country' : 'Select a country first'}\n                    </SelectItem>\n                  )}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label>Status</Label>\n            <RadioGroup \n              defaultValue={newLocation.status}\n              onValueChange={(value) => handleChange('status', value as 'active' | 'inactive')}\n              className=\"flex gap-4\"\n            >\n              <div className=\"flex items-center space-x-2\">\n                <RadioGroupItem value=\"active\" id=\"active\" />\n                <Label htmlFor=\"active\">Active</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <RadioGroupItem value=\"inactive\" id=\"inactive\" />\n                <Label htmlFor=\"inactive\">Inactive</Label>\n              </div>\n            </RadioGroup>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Notes</Label>\n            <Textarea\n              id=\"notes\"\n              value={newLocation.notes || ''}\n              onChange={(e) => handleChange('notes', e.target.value)}\n              placeholder=\"Enter additional notes\"\n            />\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"latitude\">Latitude</Label>\n              <Input\n                id=\"latitude\"\n                value={newLocation.latitude || ''}\n                onChange={(e) => handleChange('latitude', e.target.value)}\n                placeholder=\"Enter latitude\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"longitude\">Longitude</Label>\n              <Input\n                id=\"longitude\"\n                value={newLocation.longitude || ''}\n                onChange={(e) => handleChange('longitude', e.target.value)}\n                placeholder=\"Enter longitude\"\n              />\n            </div>\n          </div>\n\n          {/* Coordinates preview */}\n          <div className=\"space-y-2\">\n            <Label>Coordinates Preview</Label>\n            <div className=\"rounded border p-2 text-sm font-mono\">\n              <div>\n                Latitude: <span className={isValidLat(newLocation.latitude) ? 'text-foreground' : 'text-red-600'}>\n                  {formatCoord(newLocation.latitude) || ''}\n                </span>\n              </div>\n              <div>\n                Longitude: <span className={isValidLon(newLocation.longitude) ? 'text-foreground' : 'text-red-600'}>\n                  {formatCoord(newLocation.longitude) || ''}\n                </span>\n              </div>\n            </div>\n            {!isValidLat(newLocation.latitude) && newLocation.latitude && (\n              <p className=\"text-xs text-red-600\">Latitude must be between -90 and 90</p>\n            )}\n            {!isValidLon(newLocation.longitude) && newLocation.longitude && (\n              <p className=\"text-xs text-red-600\">Longitude must be between -180 and 180</p>\n            )}\n          </div>\n\n          {/* Geocoding helpers */}\n          <div className=\"space-y-2\">\n            {nominatimEnabled ? (\n              <div className=\"flex flex-wrap items-center gap-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={geocodeFromName}\n                  disabled={isGeocoding || !newLocation.fullName}\n                >\n                  <MapPin className=\"h-4 w-4 mr-1\" /> Search coords from name\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  onClick={reverseLookup}\n                  disabled={isGeocoding || !newLocation.latitude || !newLocation.longitude}\n                >\n                  Reverse geocode\n                </Button>\n                <a\n                  href=\"/tools/nominatim\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className=\"inline-flex items-center text-sm text-primary hover:underline\"\n                >\n                  <ExternalLink className=\"h-4 w-4 mr-1\" /> Open Nominatim Tools\n                </a>\n              </div>\n            ) : (\n              <p className=\"text-xs text-muted-foreground\">\n                Nominatim geocoding is disabled by admin. Enable it in Settings.\n              </p>\n            )}\n            {reverseAddress && (\n              <p className=\"text-xs text-muted-foreground\">{reverseAddress}</p>\n            )}\n          </div>\n        </div>\n        \n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSubmit} disabled={!isFormValid()}>Save Location Code</Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default LocationCodeAddSheet;\n","\nimport React, { useState, useEffect } from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { LocationCode } from '../types/transportTypes';\nimport { Country, City, useCitiesData } from '@/hooks/useCitiesData';\nimport { AppSettingsService, SETTING_CATEGORIES } from '@/services/appSettingsService_database';\nimport { nominatimService } from '@/services/nominatimService';\nimport { ExternalLink, MapPin, Loader2, CheckCircle, AlertCircle, Search, Plus } from 'lucide-react';\n\ninterface LocationCodeEditSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (location: LocationCode) => void;\n  locationCode: LocationCode | null;\n  countries: Country[];\n  cities: City[];\n}\n\nconst LocationCodeEditSheet: React.FC<LocationCodeEditSheetProps> = ({\n  isOpen,\n  onClose,\n  onSave,\n  locationCode,\n  countries,\n  cities\n}) => {\n  const { getCitiesByCountry } = useCitiesData();\n  const [editedLocation, setEditedLocation] = useState<LocationCode | null>(null);\n\n  // State for custom category input\n  const [showCustomCategory, setShowCustomCategory] = useState(false);\n  const [customCategory, setCustomCategory] = useState('');\n  const [predefinedCategories] = useState([\n    'airport',\n    'hotel', \n    'pier',\n    'train_station',\n    'bus_station',\n    'port',\n    'landmark',\n    'other'\n  ]);\n\n  // Get filtered cities based on selected country\n  const filteredCities = editedLocation?.country ? getCitiesByCountry(editedLocation.country) : [];\n\n  useEffect(() => {\n    if (locationCode) {\n      setEditedLocation(locationCode);\n      // Reset geocoding states when location changes\n      setReverseAddress('');\n      setGeocodingError('');\n      setGeocodingSuccess('');\n      // Reset custom category states\n      setShowCustomCategory(false);\n      setCustomCategory('');\n    }\n  }, [locationCode]);\n\n  const handleChange = (field: keyof LocationCode, value: string) => {\n    if (editedLocation) {\n      setEditedLocation({\n        ...editedLocation,\n        [field]: value,\n        // Reset city when country changes\n        ...(field === 'country' ? { city: '' } : {})\n      });\n      \n      // Clear geocoding feedback when location details change\n      if (['fullName', 'city', 'country'].includes(field)) {\n        setGeocodingError('');\n        setGeocodingSuccess('');\n        setReverseAddress('');\n      }\n    }\n  };\n\n  const handleSubmit = () => {\n    if (editedLocation) {\n      onSave(editedLocation);\n    }\n  };\n\n  const isFormValid = () => {\n    return editedLocation &&\n      editedLocation.code.trim() !== '' &&\n      editedLocation.fullName.trim() !== '' &&\n      editedLocation.country.trim() !== '' &&\n      editedLocation.city.trim() !== '';\n  };\n\n  const handleCategoryChange = (value: string) => {\n    if (value === 'custom') {\n      setShowCustomCategory(true);\n      setCustomCategory('');\n    } else {\n      setShowCustomCategory(false);\n      setCustomCategory('');\n      handleChange('category', value);\n    }\n  };\n\n  const handleCustomCategorySubmit = () => {\n    if (customCategory.trim()) {\n      handleChange('category', customCategory.trim());\n      setShowCustomCategory(false);\n    }\n  };\n\n  const handleCustomCategoryCancel = () => {\n    setShowCustomCategory(false);\n    setCustomCategory('');\n    // Reset to current category or default\n    if (editedLocation) {\n      handleChange('category', editedLocation.category || 'other');\n    }\n  };\n\n  // Enhanced Nominatim helpers with better error handling and feedback\n  const [nominatimEnabled, setNominatimEnabled] = useState(false);\n  const [reverseAddress, setReverseAddress] = useState<string>('');\n  const [isGeocoding, setIsGeocoding] = useState(false);\n  const [geocodingError, setGeocodingError] = useState<string>('');\n  const [geocodingSuccess, setGeocodingSuccess] = useState<string>('');\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await AppSettingsService.getSetting(SETTING_CATEGORIES.INTEGRATIONS, 'nominatim_geocoding_enabled');\n        if (res.success && res.data) {\n          setNominatimEnabled(res.data.setting_value === 'true');\n        } else {\n          setNominatimEnabled(false);\n        }\n      } catch {\n        setNominatimEnabled(false);\n      }\n    })();\n  }, []);\n\n  const geocodeFromName = async () => {\n    if (!editedLocation) return;\n    \n    // Enhanced query construction for better accuracy\n    const queryParts = [];\n    if (editedLocation.fullName.trim()) queryParts.push(editedLocation.fullName.trim());\n    if (editedLocation.city.trim()) queryParts.push(editedLocation.city.trim());\n    if (editedLocation.country.trim()) queryParts.push(editedLocation.country.trim());\n    \n    const query = queryParts.join(', ');\n    if (!query) {\n      setGeocodingError('Please provide at least a location name to search for coordinates.');\n      return;\n    }\n\n    setIsGeocoding(true);\n    setGeocodingError('');\n    setGeocodingSuccess('');\n    setReverseAddress('');\n\n    try {\n      // Enhanced search with multiple attempts for better accuracy\n      let results = await nominatimService.search(query, { limit: 5 });\n      \n      // If no results with full query, try with just name and country\n      if (!results || results.length === 0) {\n        const fallbackQuery = [editedLocation.fullName, editedLocation.country].filter(Boolean).join(', ');\n        if (fallbackQuery !== query) {\n          results = await nominatimService.search(fallbackQuery, { limit: 5 });\n        }\n      }\n      \n      // If still no results, try with just the location name\n      if (!results || results.length === 0) {\n        if (editedLocation.fullName.trim()) {\n          results = await nominatimService.search(editedLocation.fullName.trim(), { limit: 5 });\n        }\n      }\n\n      if (results && results.length > 0) {\n        const bestResult = results[0];\n        \n        // Validate coordinates\n        const lat = parseFloat(bestResult.lat);\n        const lon = parseFloat(bestResult.lon);\n        \n        if (isNaN(lat) || isNaN(lon) || lat < -90 || lat > 90 || lon < -180 || lon > 180) {\n          setGeocodingError('Invalid coordinates received from geocoding service.');\n          return;\n        }\n        \n        handleChange('latitude', bestResult.lat);\n        handleChange('longitude', bestResult.lon);\n        \n        setGeocodingSuccess(`Found coordinates for \"${bestResult.display_name}\"`);\n        \n        // Show additional results if available\n        if (results.length > 1) {\n          setGeocodingSuccess(prev => `${prev} (${results.length - 1} other result${results.length > 2 ? 's' : ''} available)`);\n        }\n      } else {\n        setGeocodingError(`No coordinates found for \"${query}\". Try a more specific or different location name.`);\n      }\n    } catch (error) {\n      console.error('Geocoding error:', error);\n      setGeocodingError('Failed to search for coordinates. Please check your internet connection and try again.');\n    } finally {\n      setIsGeocoding(false);\n    }\n  };\n\n  const reverseLookup = async () => {\n    if (!editedLocation?.latitude || !editedLocation?.longitude) return;\n    \n    // Validate coordinates before reverse lookup\n    const lat = parseFloat(editedLocation.latitude);\n    const lon = parseFloat(editedLocation.longitude);\n    \n    if (isNaN(lat) || isNaN(lon) || lat < -90 || lat > 90 || lon < -180 || lon > 180) {\n      setGeocodingError('Please enter valid coordinates (latitude: -90 to 90, longitude: -180 to 180).');\n      return;\n    }\n\n    setIsGeocoding(true);\n    setGeocodingError('');\n    setGeocodingSuccess('');\n    setReverseAddress('');\n\n    try {\n      const res = await nominatimService.reverse(lat, lon);\n      if (res && res.display_name) {\n        setReverseAddress(res.display_name);\n        setGeocodingSuccess('Successfully found location details for the coordinates.');\n      } else {\n        setGeocodingError('No location details found for these coordinates.');\n      }\n    } catch (error) {\n      console.error('Reverse geocoding error:', error);\n      setGeocodingError('Failed to lookup location details. Please check your internet connection and try again.');\n    } finally {\n      setIsGeocoding(false);\n    }\n  };\n\n  // Coordinate formatting and validation helpers\n  const parseNumber = (s?: string) => {\n    const n = Number(s);\n    return Number.isFinite(n) ? n : null;\n  };\n  const formatCoord = (s?: string) => {\n    const n = parseNumber(s);\n    return n === null ? '' : n.toFixed(6);\n  };\n  const isValidLat = (s?: string) => {\n    const n = parseNumber(s);\n    return n !== null && n >= -90 && n <= 90;\n  };\n  const isValidLon = (s?: string) => {\n    const n = parseNumber(s);\n    return n !== null && n >= -180 && n <= 180;\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Edit Location Code</SheetTitle>\n          <SheetDescription>\n            Update location details and coordinates\n          </SheetDescription>\n        </SheetHeader>\n        \n        {editedLocation && (\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"code\">Short Code <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"code\"\n                value={editedLocation.code}\n                onChange={(e) => handleChange('code', e.target.value)}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"fullName\">Full Name <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"fullName\"\n                value={editedLocation.fullName}\n                onChange={(e) => handleChange('fullName', e.target.value)}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"category\">Category <span className=\"text-red-500\">*</span></Label>\n              {!showCustomCategory ? (\n                <Select \n                  value={editedLocation.category} \n                  onValueChange={handleCategoryChange}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {predefinedCategories.map(category => (\n                      <SelectItem key={category} value={category}>\n                        {category.charAt(0).toUpperCase() + category.slice(1).replace('_', ' ')}\n                      </SelectItem>\n                    ))}\n                    <SelectItem value=\"custom\">\n                      <div className=\"flex items-center gap-2\">\n                        <Plus className=\"h-4 w-4\" />\n                        Add Custom Category\n                      </div>\n                    </SelectItem>\n                  </SelectContent>\n                </Select>\n              ) : (\n                <div className=\"space-y-2\">\n                  <div className=\"flex gap-2\">\n                    <Input\n                      value={customCategory}\n                      onChange={(e) => setCustomCategory(e.target.value)}\n                      placeholder=\"Enter custom category\"\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                          handleCustomCategorySubmit();\n                        } else if (e.key === 'Escape') {\n                          handleCustomCategoryCancel();\n                        }\n                      }}\n                      autoFocus\n                    />\n                    <Button \n                      type=\"button\" \n                      size=\"sm\" \n                      onClick={handleCustomCategorySubmit}\n                      disabled={!customCategory.trim()}\n                    >\n                      Add\n                    </Button>\n                    <Button \n                      type=\"button\" \n                      variant=\"outline\" \n                      size=\"sm\" \n                      onClick={handleCustomCategoryCancel}\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Press Enter to add or Escape to cancel\n                  </p>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"country\">Country <span className=\"text-red-500\">*</span></Label>\n                <Select \n                  value={editedLocation.country} \n                  onValueChange={(value) => handleChange('country', value)}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {countries.map(country => (\n                      <SelectItem key={country.id} value={country.name}>\n                        {country.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"city\">City <span className=\"text-red-500\">*</span></Label>\n                <Select \n                  value={editedLocation.city} \n                  onValueChange={(value) => handleChange('city', value)}\n                  disabled={!editedLocation.country}\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {filteredCities.length > 0 ? (\n                      filteredCities.map(city => (\n                        <SelectItem key={city.id} value={city.name}>\n                          {city.name}\n                        </SelectItem>\n                      ))\n                    ) : (\n                      <SelectItem value=\"no-cities\" disabled>\n                        {editedLocation.country ? 'No cities available for this country' : 'Select a country first'}\n                      </SelectItem>\n                    )}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Status</Label>\n              <RadioGroup \n                value={editedLocation.status}\n                onValueChange={(value) => handleChange('status', value as 'active' | 'inactive')}\n                className=\"flex gap-4\"\n              >\n                <div className=\"flex items-center space-x-2\">\n                  <RadioGroupItem value=\"active\" id=\"edit-active\" />\n                  <Label htmlFor=\"edit-active\">Active</Label>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <RadioGroupItem value=\"inactive\" id=\"edit-inactive\" />\n                  <Label htmlFor=\"edit-inactive\">Inactive</Label>\n                </div>\n              </RadioGroup>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"notes\">Notes</Label>\n              <Textarea\n                id=\"notes\"\n                value={editedLocation.notes || ''}\n                onChange={(e) => handleChange('notes', e.target.value)}\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"latitude\">Latitude</Label>\n                <Input\n                  id=\"latitude\"\n                  value={editedLocation.latitude || ''}\n                  onChange={(e) => handleChange('latitude', e.target.value)}\n                  placeholder=\"e.g., 13.6900\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"longitude\">Longitude</Label>\n                <Input\n                  id=\"longitude\"\n                  value={editedLocation.longitude || ''}\n                  onChange={(e) => handleChange('longitude', e.target.value)}\n                  placeholder=\"e.g., 100.7501\"\n                />\n              </div>\n            </div>\n\n            {/* Enhanced Coordinates preview */}\n            <div className=\"space-y-2\">\n              <Label>Coordinates Preview</Label>\n              <div className=\"rounded border p-3 text-sm font-mono bg-muted/50\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-muted-foreground\">Latitude:</span>\n                  <span className={isValidLat(editedLocation.latitude) ? 'text-foreground font-medium' : 'text-red-600'}>\n                    {formatCoord(editedLocation.latitude) || ''}\n                  </span>\n                  {isValidLat(editedLocation.latitude) && <CheckCircle className=\"h-3 w-3 text-green-600\" />}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-muted-foreground\">Longitude:</span>\n                  <span className={isValidLon(editedLocation.longitude) ? 'text-foreground font-medium' : 'text-red-600'}>\n                    {formatCoord(editedLocation.longitude) || ''}\n                  </span>\n                  {isValidLon(editedLocation.longitude) && <CheckCircle className=\"h-3 w-3 text-green-600\" />}\n                </div>\n              </div>\n              {!isValidLat(editedLocation.latitude) && editedLocation.latitude && (\n                <p className=\"text-xs text-red-600 flex items-center gap-1\">\n                  <AlertCircle className=\"h-3 w-3\" />\n                  Latitude must be between -90 and 90\n                </p>\n              )}\n              {!isValidLon(editedLocation.longitude) && editedLocation.longitude && (\n                <p className=\"text-xs text-red-600 flex items-center gap-1\">\n                  <AlertCircle className=\"h-3 w-3\" />\n                  Longitude must be between -180 and 180\n                </p>\n              )}\n            </div>\n\n            {/* Enhanced Geocoding helpers */}\n            <div className=\"space-y-3\">\n              <Label>Geocoding Tools</Label>\n              {nominatimEnabled ? (\n                <div className=\"space-y-3\">\n                  <div className=\"flex flex-wrap items-center gap-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      onClick={geocodeFromName}\n                      disabled={isGeocoding || !editedLocation.fullName.trim()}\n                      className=\"flex items-center gap-2\"\n                    >\n                      {isGeocoding ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      ) : (\n                        <Search className=\"h-4 w-4\" />\n                      )}\n                      {isGeocoding ? 'Searching...' : 'Search coordinates'}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      size=\"sm\"\n                      onClick={reverseLookup}\n                      disabled={isGeocoding || !editedLocation.latitude || !editedLocation.longitude}\n                      className=\"flex items-center gap-2\"\n                    >\n                      {isGeocoding ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      ) : (\n                        <MapPin className=\"h-4 w-4\" />\n                      )}\n                      {isGeocoding ? 'Looking up...' : 'Reverse lookup'}\n                    </Button>\n                    <a\n                      href=\"/tools/nominatim\"\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                      className=\"inline-flex items-center text-sm text-primary hover:underline\"\n                    >\n                      <ExternalLink className=\"h-4 w-4 mr-1\" /> Nominatim Tools\n                    </a>\n                  </div>\n                  \n                  {/* Enhanced feedback messages */}\n                  {geocodingError && (\n                    <Alert variant=\"destructive\">\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertDescription>{geocodingError}</AlertDescription>\n                    </Alert>\n                  )}\n                  \n                  {geocodingSuccess && (\n                    <Alert>\n                      <CheckCircle className=\"h-4 w-4\" />\n                      <AlertDescription className=\"text-green-700\">{geocodingSuccess}</AlertDescription>\n                    </Alert>\n                  )}\n                  \n                  {reverseAddress && (\n                    <div className=\"p-3 bg-muted rounded-md\">\n                      <Label className=\"text-xs text-muted-foreground\">Location Details:</Label>\n                      <p className=\"text-sm mt-1\">{reverseAddress}</p>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <Alert>\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Nominatim geocoding is disabled by admin. Enable it in Settings  General  System Settings.\n                  </AlertDescription>\n                </Alert>\n              )}\n            </div>\n          </div>\n        )}\n        \n        <SheetFooter>\n          <Button variant=\"outline\" onClick={onClose}>Cancel</Button>\n          <Button onClick={handleSubmit} disabled={!isFormValid()}>\n            Save Changes\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default LocationCodeEditSheet;\n","\nimport React from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { LocationCode } from '../types/transportTypes';\nimport { MapPin, Globe, Building2, Info } from 'lucide-react';\n\ninterface LocationCodeViewSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  locationCode: LocationCode | null;\n}\n\nconst LocationCodeViewSheet: React.FC<LocationCodeViewSheetProps> = ({\n  isOpen,\n  onClose,\n  locationCode\n}) => {\n  if (!locationCode) return null;\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"sm:max-w-md\">\n        <SheetHeader>\n          <SheetTitle className=\"flex items-center gap-2\">\n            <MapPin className=\"h-5 w-5\" />\n            {locationCode.code}\n          </SheetTitle>\n          <SheetDescription>\n            Location code details\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-6 py-4\">\n          <div className=\"space-y-4\">\n            <div>\n              <h4 className=\"text-sm font-medium text-muted-foreground mb-2\">Basic Information</h4>\n              <div className=\"space-y-3\">\n                <div>\n                  <span className=\"text-sm font-medium\">Full Name:</span>\n                  <p className=\"text-sm\">{locationCode.fullName}</p>\n                </div>\n                <div>\n                  <span className=\"text-sm font-medium\">Short Code:</span>\n                  <p className=\"text-sm font-mono bg-muted px-2 py-1 rounded\">{locationCode.code}</p>\n                </div>\n                <div>\n                  <span className=\"text-sm font-medium\">Category:</span>\n                  <Badge variant=\"secondary\" className=\"ml-2 capitalize\">\n                    {locationCode.category}\n                  </Badge>\n                </div>\n                <div>\n                  <span className=\"text-sm font-medium\">Status:</span>\n                  <Badge \n                    variant={locationCode.status === 'active' ? 'default' : 'secondary'} \n                    className=\"ml-2 capitalize\"\n                  >\n                    {locationCode.status}\n                  </Badge>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <h4 className=\"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-1\">\n                <Globe className=\"h-4 w-4\" />\n                Location\n              </h4>\n              <div className=\"space-y-3\">\n                <div>\n                  <span className=\"text-sm font-medium\">Country:</span>\n                  <p className=\"text-sm\">{locationCode.country}</p>\n                </div>\n                <div>\n                  <span className=\"text-sm font-medium\">City:</span>\n                  <p className=\"text-sm\">{locationCode.city}</p>\n                </div>\n                {locationCode.latitude && locationCode.longitude && (\n                  <div>\n                    <span className=\"text-sm font-medium\">Coordinates:</span>\n                    <p className=\"text-sm font-mono\">\n                      {locationCode.latitude}, {locationCode.longitude}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {locationCode.notes && (\n              <div>\n                <h4 className=\"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-1\">\n                  <Info className=\"h-4 w-4\" />\n                  Notes\n                </h4>\n                <p className=\"text-sm bg-muted p-3 rounded\">{locationCode.notes}</p>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        <SheetFooter>\n          <Button onClick={onClose}>Close</Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default LocationCodeViewSheet;\n","\nimport React from 'react';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { LocationCode } from '../types/transportTypes';\n\ninterface LocationCodeDeleteDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  locationCode: LocationCode | null;\n}\n\nconst LocationCodeDeleteDialog: React.FC<LocationCodeDeleteDialogProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  locationCode\n}) => {\n  return (\n    <AlertDialog open={isOpen} onOpenChange={onClose}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>Delete Location Code</AlertDialogTitle>\n          <AlertDialogDescription>\n            Are you sure you want to delete \"{locationCode?.code}\" - {locationCode?.fullName}? \n            This action cannot be undone.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={onClose}>Cancel</AlertDialogCancel>\n          <AlertDialogAction onClick={onConfirm} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n            Delete\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};\n\nexport default LocationCodeDeleteDialog;\n","\nimport React, { useState, useEffect } from 'react';\nimport LocationCodesHeader from './LocationCodesHeader';\nimport LocationCodesTable from './LocationCodesTable';\nimport LocationCodesPagination from './LocationCodesPagination';\nimport LocationCodeAddSheet from '../LocationCodeAddSheet';\nimport LocationCodeEditSheet from '../LocationCodeEditSheet';\nimport LocationCodeViewSheet from '../LocationCodeViewSheet';\nimport LocationCodeDeleteDialog from '../LocationCodeDeleteDialog';\nimport { useTransportData } from '../../hooks/useTransportData';\nimport { useCitiesData } from '@/hooks/useCitiesData';\nimport { useToast } from '@/hooks/use-toast';\nimport { Button } from '@/components/ui/button';\nimport { Plus } from 'lucide-react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { LocationCode } from '../../types/transportTypes';\nimport {\n  listLocationCodes,\n  createLocationCode,\n  updateLocationCode as updateLocationCodeRemote,\n  deleteLocationCode as deleteLocationCodeRemote,\n} from '@/services/locationCodesService';\n\n\n// Sample UAE location codes data\nconst sampleUAELocationCodes: Omit<LocationCode, 'id'>[] = [\n  // Dubai Airports\n  {\n    code: 'DXB',\n    fullName: 'Dubai International Airport',\n    category: 'airport',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.2532',\n    longitude: '55.3657',\n    status: 'active',\n    notes: 'Main international airport serving Dubai'\n  },\n  {\n    code: 'DWC',\n    fullName: 'Al Maktoum International Airport',\n    category: 'airport',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '24.8967',\n    longitude: '55.1614',\n    status: 'active',\n    notes: 'Dubai World Central airport, also known as Dubai South'\n  },\n  // Abu Dhabi Airport\n  {\n    code: 'AUH',\n    fullName: 'Abu Dhabi International Airport',\n    category: 'airport',\n    country: 'United Arab Emirates',\n    city: 'Abu Dhabi',\n    latitude: '24.4330',\n    longitude: '54.6511',\n    status: 'active',\n    notes: 'Main international airport serving Abu Dhabi'\n  },\n  // Sharjah Airport\n  {\n    code: 'SHJ',\n    fullName: 'Sharjah International Airport',\n    category: 'airport',\n    country: 'United Arab Emirates',\n    city: 'Sharjah',\n    latitude: '25.3285',\n    longitude: '55.5172',\n    status: 'active',\n    notes: 'International airport serving Sharjah'\n  },\n  // Dubai Hotels\n  {\n    code: 'BURJ',\n    fullName: 'Burj Al Arab Jumeirah',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.1412',\n    longitude: '55.1853',\n    status: 'active',\n    notes: 'World-famous sail-shaped luxury hotel'\n  },\n  {\n    code: 'ATLS',\n    fullName: 'Atlantis The Palm Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.1308',\n    longitude: '55.1173',\n    status: 'active',\n    notes: 'Iconic resort hotel on Palm Jumeirah'\n  },\n  {\n    code: 'JWMD',\n    fullName: 'JW Marriott Marquis Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.1857',\n    longitude: '55.2441',\n    status: 'active',\n    notes: 'Twin tower luxury hotel in Business Bay'\n  },\n  {\n    code: 'ARMN',\n    fullName: 'Armani Hotel Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.1972',\n    longitude: '55.2744',\n    status: 'active',\n    notes: 'Luxury hotel in Burj Khalifa designed by Giorgio Armani'\n  },\n  {\n    code: 'ADDR',\n    fullName: 'Address Downtown Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.1918',\n    longitude: '55.2756',\n    status: 'active',\n    notes: 'Luxury hotel overlooking Dubai Fountain and Burj Khalifa'\n  },\n  {\n    code: 'FOUR',\n    fullName: 'Four Seasons Resort Dubai at Jumeirah Beach',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.2166',\n    longitude: '55.2294',\n    status: 'active',\n    notes: 'Beachfront luxury resort with private beach access'\n  },\n  {\n    code: 'RITZ',\n    fullName: 'The Ritz-Carlton Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.2319',\n    longitude: '55.2697',\n    status: 'active',\n    notes: 'Luxury beach resort on JBR Beach'\n  },\n  {\n    code: 'PARK',\n    fullName: 'Park Hyatt Dubai',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Dubai',\n    latitude: '25.2370',\n    longitude: '55.3429',\n    status: 'active',\n    notes: 'Luxury resort on Dubai Creek with marina and spa'\n  },\n  // Abu Dhabi Hotels\n  {\n    code: 'EMPL',\n    fullName: 'Emirates Palace Abu Dhabi',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Abu Dhabi',\n    latitude: '24.4619',\n    longitude: '54.3178',\n    status: 'active',\n    notes: 'Luxury palace hotel in Abu Dhabi'\n  },\n  {\n    code: 'SLUX',\n    fullName: 'The St. Regis Saadiyat Island Resort',\n    category: 'hotel',\n    country: 'United Arab Emirates',\n    city: 'Abu Dhabi',\n    latitude: '24.5588',\n    longitude: '54.4322',\n    status: 'active',\n    notes: 'Beachfront luxury resort on Saadiyat Island'\n  }\n];\n\nconst LocationCodesManager: React.FC = () => {\n  const { \n    locations, \n    setLocations,\n    toast\n  } = useTransportData();\n  \n  // Use shared cities data hook to get active countries\n  const { getActiveCountries, getCitiesByCountry } = useCitiesData();\n  \n  const [isAddSheetOpen, setIsAddSheetOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [countryFilter, setCountryFilter] = useState('All');\n  const [categoryFilter, setCategoryFilter] = useState('All');\n  const [selectedLocationCode, setSelectedLocationCode] = useState<LocationCode | null>(null);\n  const [isEditOpen, setIsEditOpen] = useState(false);\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [sampleDataImported, setSampleDataImported] = useState(false);\n  const [isDatabaseEmpty, setIsDatabaseEmpty] = useState(false);\n  \n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  \n  // Get countries and cities from shared data\n  const countries = getActiveCountries();\n  const cities = countryFilter === 'All' ? [] : getCitiesByCountry(countryFilter);\n\n  // Load remote location codes on component mount\n  useEffect(() => {\n    const fetchRemote = async () => {\n      try {\n        const rows = await listLocationCodes();\n        const mapped: LocationCode[] = rows.map(mapRowToUI);\n        \n        // If database is empty, use sample data to provide a better user experience\n        if (mapped.length === 0) {\n          console.log('Database is empty, loading sample UAE location codes');\n          setIsDatabaseEmpty(true);\n          const sampleData: LocationCode[] = sampleUAELocationCodes.map(sample => ({\n            ...sample,\n            id: uuidv4()\n          }));\n          setLocations(sampleData);\n          \n          // Optionally save sample data to localStorage for consistency\n          localStorage.setItem('locationCodes', JSON.stringify(sampleData));\n        } else {\n          setIsDatabaseEmpty(false);\n          setLocations(mapped);\n        }\n      } catch (error) {\n        console.error('Failed to load location codes from Supabase:', error);\n        // Fallback to any existing local data\n        const existingData = localStorage.getItem('locationCodes');\n        const existingCodes = existingData ? JSON.parse(existingData) : [];\n        \n        if (existingCodes.length) {\n          setLocations(existingCodes);\n        } else {\n          // If no local data either, use sample data\n          console.log('No local data found, loading sample UAE location codes');\n          const sampleData: LocationCode[] = sampleUAELocationCodes.map(sample => ({\n            ...sample,\n            id: uuidv4()\n          }));\n          setLocations(sampleData);\n          localStorage.setItem('locationCodes', JSON.stringify(sampleData));\n        }\n      }\n    };\n    fetchRemote();\n  }, [setLocations]);\n  \n  // Open add sheet\n  const handleAddClick = () => {\n    setIsAddSheetOpen(true);\n  };\n\n  // Import sample data to database\n  const handleImportSampleData = async () => {\n    try {\n      console.log('Importing sample UAE location codes to database...');\n      const importedCodes: LocationCode[] = [];\n      \n      for (const sample of sampleUAELocationCodes) {\n        try {\n          const inserted = await createLocationCode(mapUIToInsert(sample));\n          const mapped = mapRowToUI(inserted);\n          importedCodes.push(mapped);\n        } catch (error) {\n          console.error(`Failed to import ${sample.code}:`, error);\n        }\n      }\n      \n      if (importedCodes.length > 0) {\n        // Refresh the locations list\n        const rows = await listLocationCodes();\n        const mapped: LocationCode[] = rows.map(mapRowToUI);\n        setLocations(mapped);\n        setIsDatabaseEmpty(false);\n        \n        toast({\n          title: \"Sample data imported\",\n          description: `Successfully imported ${importedCodes.length} location codes to the database.`\n        });\n      }\n    } catch (error) {\n      console.error('Failed to import sample data:', error);\n      toast({ \n        title: 'Error', \n        description: 'Failed to import sample data to database', \n        variant: 'destructive' \n      });\n    }\n  };\n  \n  // Handle adding a new location code\n  const handleAddLocationCode = async (newLocationCode: Omit<LocationCode, 'id'>) => {\n    try {\n      const inserted = await createLocationCode(mapUIToInsert(newLocationCode));\n      const mapped = mapRowToUI(inserted);\n      setLocations([...locations, mapped]);\n      setIsAddSheetOpen(false);\n      toast({\n        title: \"Location code added\",\n        description: `${mapped.code} has been added successfully.`\n      });\n    } catch (error) {\n      console.error('Failed to add location code:', error);\n      toast({ title: 'Error', description: 'Failed to add location code', variant: 'destructive' });\n    }\n  };\n  \n  // Handle editing a location code\n  const handleEditLocationCode = (locationCode: LocationCode) => {\n    setSelectedLocationCode(locationCode);\n    setIsEditOpen(true);\n  };\n  \n  // Handle viewing location code details\n  const handleViewLocationCode = (locationCode: LocationCode) => {\n    setSelectedLocationCode(locationCode);\n    setIsViewOpen(true);\n  };\n  \n  // Handle deleting a location code\n  const handleDeleteLocationCode = (locationCode: LocationCode) => {\n    setSelectedLocationCode(locationCode);\n    setIsDeleteDialogOpen(true);\n  };\n  \n  // Confirm delete\n  const confirmDelete = async () => {\n    if (selectedLocationCode) {\n      try {\n        await deleteLocationCodeRemote(selectedLocationCode.id);\n        const updatedLocations = locations.filter(loc => loc.id !== selectedLocationCode.id);\n        setLocations(updatedLocations);\n        setIsDeleteDialogOpen(false);\n        toast({\n          title: \"Location code deleted\",\n          description: `${selectedLocationCode.code} has been removed.`\n        });\n      } catch (error) {\n        console.error('Failed to delete location code:', error);\n        toast({ title: 'Error', description: 'Failed to delete location code', variant: 'destructive' });\n      }\n    }\n  };\n  \n  // Handle updating a location code\n  const handleUpdateLocationCode = async (updatedLocationCode: LocationCode) => {\n    try {\n      const updatedRow = await updateLocationCodeRemote(updatedLocationCode.id, mapUIToUpdate(updatedLocationCode));\n      const mapped = mapRowToUI(updatedRow);\n      const updatedLocations = locations.map(loc => (loc.id === mapped.id ? mapped : loc));\n      setLocations(updatedLocations);\n      setIsEditOpen(false);\n      toast({\n        title: \"Location code updated\",\n        description: `${mapped.code} has been updated successfully.`\n      });\n    } catch (error) {\n      console.error('Failed to update location code:', error);\n      toast({ title: 'Error', description: 'Failed to update location code', variant: 'destructive' });\n    }\n  };\n\n  // Handle toggle status\n  const handleToggleStatus = (locationCode: LocationCode) => {\n    const updatedLocationCode = {\n      ...locationCode,\n      status: locationCode.status === 'active' ? 'inactive' : 'active' as 'active' | 'inactive'\n    };\n    void handleUpdateLocationCode(updatedLocationCode);\n  };\n  \n  // Filter location codes based on search query and filters\n  const filteredLocationCodes = locations.filter(loc => {\n    const matchesSearch = \n      loc.code.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      loc.fullName.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesCountry = countryFilter === 'All' || loc.country === countryFilter;\n    const matchesCategory = categoryFilter === 'All' || loc.category === categoryFilter;\n    \n    return matchesSearch && matchesCountry && matchesCategory;\n  });\n  \n  // Get available countries from active countries and actual location data\n  const availableCountries = ['All', ...new Set([\n    ...countries.map(country => country.name),\n    ...locations.map(loc => loc.country).filter(Boolean)\n  ])];\n  \n  const categories = ['All', ...new Set(locations.map(loc => loc.category).filter(Boolean))];\n  \n  // Pagination calculations\n  const totalPages = Math.max(1, Math.ceil(filteredLocationCodes.length / itemsPerPage));\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = filteredLocationCodes.slice(indexOfFirstItem, indexOfLastItem);\n  \n  // Reset to first page when filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchQuery, countryFilter, categoryFilter, itemsPerPage]);\n  \n  // Pagination handlers\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page);\n  };\n  \n  const handleItemsPerPageChange = (newItemsPerPage: number) => {\n    setItemsPerPage(newItemsPerPage);\n    setCurrentPage(1);\n  };\n  \n  return (\n    <div className=\"space-y-6\">\n      <LocationCodesHeader \n        onAddClick={handleAddClick} \n        onImportSampleData={handleImportSampleData}\n        showImportButton={isDatabaseEmpty}\n      />\n      \n      {/* Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"flex-1\">\n          <input\n            type=\"text\"\n            placeholder=\"Search location codes...\"\n            className=\"w-full px-3 py-2 border rounded-md\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n          />\n        </div>\n        <select\n          className=\"px-3 py-2 border rounded-md\"\n          value={countryFilter}\n          onChange={(e) => setCountryFilter(e.target.value)}\n        >\n          {availableCountries.map(country => (\n            <option key={country} value={country}>{country}</option>\n          ))}\n        </select>\n        <select\n          className=\"px-3 py-2 border rounded-md\"\n          value={categoryFilter}\n          onChange={(e) => setCategoryFilter(e.target.value)}\n        >\n          {categories.map(category => (\n            <option key={category} value={category}>{category}</option>\n          ))}\n        </select>\n      </div>\n      \n      {/* Location Codes Table */}\n      <div className=\"border rounded-lg\">\n        <LocationCodesTable\n          locations={currentItems}\n          onEdit={handleEditLocationCode}\n          onDelete={handleDeleteLocationCode}\n          onView={handleViewLocationCode}\n          onToggleStatus={handleToggleStatus}\n        />\n        \n        {/* Pagination */}\n        <LocationCodesPagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          totalItems={filteredLocationCodes.length}\n          itemsPerPage={itemsPerPage}\n          onPageChange={handlePageChange}\n          onItemsPerPageChange={handleItemsPerPageChange}\n          indexOfFirstItem={indexOfFirstItem}\n          indexOfLastItem={Math.min(indexOfLastItem, filteredLocationCodes.length)}\n        />\n      </div>\n      \n      {/* Location Codes Map View */}\n      \n      \n      {/* Empty state */}\n      {filteredLocationCodes.length === 0 && (\n        <div className=\"text-center py-10 bg-gray-50 dark:bg-gray-800 rounded-lg\">\n          <p className=\"text-gray-500 dark:text-gray-400 mb-4\">\n            No location codes found matching your filters\n          </p>\n          <Button onClick={handleAddClick} className=\"flex items-center gap-1\">\n            <Plus className=\"h-4 w-4\" /> Add New Location Code\n          </Button>\n        </div>\n      )}\n      \n      {/* Add sheet */}\n      <LocationCodeAddSheet\n        isOpen={isAddSheetOpen}\n        onClose={() => setIsAddSheetOpen(false)}\n        onSave={handleAddLocationCode}\n        countries={countries}\n        cities={cities}\n      />\n      \n      {/* Edit sheet */}\n      <LocationCodeEditSheet\n        isOpen={isEditOpen}\n        onClose={() => setIsEditOpen(false)}\n        onSave={handleUpdateLocationCode}\n        locationCode={selectedLocationCode}\n        countries={countries}\n        cities={cities}\n      />\n      \n      {/* View sheet */}\n      <LocationCodeViewSheet\n        isOpen={isViewOpen}\n        onClose={() => setIsViewOpen(false)}\n        locationCode={selectedLocationCode}\n      />\n      \n      {/* Delete dialog */}\n      <LocationCodeDeleteDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={() => setIsDeleteDialogOpen(false)}\n        onConfirm={confirmDelete}\n        locationCode={selectedLocationCode}\n      />\n    </div>\n  );\n};\n\nexport default LocationCodesManager;\n\n// Helpers to map between DB rows and UI object\nfunction mapRowToUI(row: any): LocationCode {\n  return {\n    id: row.id,\n    code: row.code,\n    fullName: row.full_name,\n    category: row.category,\n    country: row.country,\n    city: row.city,\n    status: row.status,\n    notes: row.notes ?? undefined,\n    latitude: row.latitude != null ? String(row.latitude) : undefined,\n    longitude: row.longitude != null ? String(row.longitude) : undefined,\n  };\n}\n\nfunction mapUIToInsert(loc: Omit<LocationCode, 'id'>) {\n  return {\n    code: loc.code,\n    full_name: loc.fullName,\n    category: loc.category,\n    country: loc.country,\n    city: loc.city,\n    status: loc.status,\n    notes: loc.notes ?? null,\n    latitude: loc.latitude && loc.latitude.trim() !== '' ? Number(loc.latitude) : null,\n    longitude: loc.longitude && loc.longitude.trim() !== '' ? Number(loc.longitude) : null,\n  };\n}\n\nfunction mapUIToUpdate(loc: LocationCode) {\n  return {\n    code: loc.code,\n    full_name: loc.fullName,\n    category: loc.category,\n    country: loc.country,\n    city: loc.city,\n    status: loc.status,\n    notes: loc.notes ?? null,\n    latitude: loc.latitude && loc.latitude.trim() !== '' ? Number(loc.latitude) : null,\n    longitude: loc.longitude && loc.longitude.trim() !== '' ? Number(loc.longitude) : null,\n  };\n}\n","\nimport React from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport LocationCodesManager from './components/locationCodes/LocationCodesManager';\n\nconst LocationCodesPage: React.FC = () => {\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-4 px-2 sm:px-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">Location Codes</h1>\n        <LocationCodesManager />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default LocationCodesPage;\n","\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Search, Filter, Plus, Download, Table2, Grid3X3 } from 'lucide-react';\nimport HotelFilters from '@/components/inventory/hotels/HotelFilters';\nimport HotelsTable from '@/components/inventory/hotels/HotelsTable';\nimport HotelGrid from '@/components/inventory/hotels/HotelGrid';\nimport { useSupabaseHotelsData } from '@/components/inventory/hotels/hooks/useSupabaseHotelsData';\nimport { useHotelFilters } from '@/components/inventory/hotels/hooks/useHotelFilters';\nimport { HotelFilters as HotelFiltersType } from '@/components/inventory/hotels/types/hotel';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from '@/components/ui/pagination';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport ImportExportDrawer from '@/components/inventory/hotels/drawers/ImportExportDrawer';\nimport { Card, CardContent } from '@/components/ui/card';\nimport SampleDataImporter from '@/components/inventory/hotels/components/SampleDataImporter';\n\nconst Hotels: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'table'>('table');\n  const [showFilters, setShowFilters] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const [importExportOpen, setImportExportOpen] = useState(false);\n  \n  const { \n    hotels, \n    loading, \n    refreshHotels \n  } = useSupabaseHotelsData();\n\n  // Typed filters and derived filtered hotels\n  const { filters, setFilters, filteredHotels: filteredByFilters } = useHotelFilters(hotels);\n  const filteredHotels = filteredByFilters;\n  const exportHotels = () => {};\n\n  // Reset pagination when search term or filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchTerm, filters]);\n\n  // Calculate pagination\n  const totalItems = filteredHotels.filter(hotel => \n    hotel.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    hotel.location.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    hotel.country.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    hotel.city.toLowerCase().includes(searchTerm.toLowerCase())\n  ).length;\n  \n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = Math.min(startIndex + itemsPerPage, totalItems);\n  \n  // Apply search filter in addition to the other filters\n  const displayedHotels = filteredHotels\n    .filter(hotel => \n      hotel.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      hotel.location.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      hotel.country.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      hotel.city.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n    .slice(startIndex, endIndex);\n\n  // Compute active filter count safely with typed filters\n  const getActiveFilterCount = (f: HotelFiltersType) => {\n    let count = 0;\n    if (f.country && f.country !== 'all') count++;\n    if (f.city && f.city !== 'all') count++;\n    if (f.location && f.location !== 'all') count++;\n    if (f.starRating !== 'all') count++;\n    if (f.status !== 'all') count++;\n    if (f.category && f.category !== 'all') count++;\n    if (f.roomTypes.length > 0) count++;\n    if (f.facilities.length > 0) count++;\n    if (f.priceRange.min > 0 || f.priceRange.max < 10000) count++;\n    if (f.dateRange.from && f.dateRange.to) count++;\n    return count;\n  };\n  const activeFilterCount = getActiveFilterCount(filters);\n\n  const handlePageChange = (page: number) => {\n    if (page > 0 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n  \n  const handleAddNewHotel = () => {\n    navigate('/inventory/hotels/add');\n  };\n\n  const toggleFilters = () => {\n    setShowFilters(!showFilters);\n  };\n  \n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Hotel Inventory</h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n              Manage your hotel listings and room types\n            </p>\n          </div>\n          <div className=\"flex gap-3 mt-4 sm:mt-0\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setImportExportOpen(true)}\n              className=\"flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800\"\n            >\n              <Download className=\"h-4 w-4\" />\n              Import/Export\n            </Button>\n            <Button \n              variant=\"default\" \n              size=\"sm\" \n              className=\"bg-brand-blue hover:bg-brand-blue/90 flex items-center gap-2\"\n              onClick={handleAddNewHotel}\n            >\n              <Plus className=\"h-4 w-4\" />\n              Add New Hotel\n            </Button>\n          </div>\n        </div>\n        \n        {/* Search and Filters Card */}\n        <Card className=\"border-gray-200 dark:border-gray-700\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              <div className=\"relative flex-1\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Search className=\"h-4 w-4 text-gray-400\" />\n                </div>\n                <input\n                  type=\"text\"\n                  className=\"pl-10 pr-4 py-2.5 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-brand-blue focus:border-transparent placeholder-gray-500 dark:placeholder-gray-400\"\n                  placeholder=\"Search hotels by name, location, country, or city...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <Button \n                  variant=\"outline\" \n                  size=\"default\" \n                  className=\"flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800\"\n                  onClick={toggleFilters}\n                  aria-expanded={showFilters}\n                  aria-controls=\"hotel-filters-panel\"\n                >\n                  <Filter className=\"h-4 w-4\" />\n                  Filters\n                  {activeFilterCount > 0 && (\n                    <span className=\"ml-1 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-brand-blue rounded-full\">\n                      {activeFilterCount}\n                    </span>\n                  )}\n                </Button>\n                \n                <Tabs \n                  defaultValue=\"table\" \n                  value={viewMode} \n                  onValueChange={(v) => setViewMode(v as 'grid' | 'table')}\n                  className=\"hidden md:flex\"\n                >\n                  <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"table\" className=\"flex items-center gap-2\">\n                      <Table2 className=\"h-4 w-4\" />\n                      Table\n                    </TabsTrigger>\n                    <TabsTrigger value=\"grid\" className=\"flex items-center gap-2\">\n                      <Grid3X3 className=\"h-4 w-4\" />\n                      Grid\n                    </TabsTrigger>\n                  </TabsList>\n                </Tabs>\n              </div>\n            </div>\n            \n            {showFilters && (\n              <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\" id=\"hotel-filters-panel\">\n                <HotelFilters filters={filters} setFilters={setFilters} />\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        \n        {/* Loading State */}\n        {loading && (\n          <Card>\n            <CardContent className=\"flex justify-center items-center py-20\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-blue\"></div>\n            </CardContent>\n          </Card>\n        )}\n        \n        {/* Sample Data Importer - Show when no hotels */}\n        {!loading && hotels.length === 0 && (\n          <div className=\"flex justify-center py-8\">\n            <SampleDataImporter />\n          </div>\n        )}\n\n        {/* Hotels Display */}\n        {!loading && hotels.length > 0 && (\n          <>\n            {/* Results Summary */}\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Showing {totalItems > 0 ? startIndex + 1 : 0}-{endIndex} of {totalItems} hotels\n              </p>\n              \n              {/* Items per page selector */}\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">Show:</span>\n                <Select\n                  value={itemsPerPage.toString()}\n                  onValueChange={(value) => {\n                    setItemsPerPage(parseInt(value));\n                    setCurrentPage(1);\n                  }}\n                >\n                  <SelectTrigger className=\"w-[80px]\">\n                    <SelectValue placeholder=\"10\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"10\">10</SelectItem>\n                    <SelectItem value=\"20\">20</SelectItem>\n                    <SelectItem value=\"50\">50</SelectItem>\n                    <SelectItem value=\"100\">100</SelectItem>\n                    <SelectItem value=\"200\">200</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {viewMode === 'table' ? (\n              <HotelsTable hotels={displayedHotels} searchTerm={''} />\n            ) : (\n              <HotelGrid hotels={displayedHotels} searchTerm={''} />\n            )}\n            \n            {/* Pagination */}\n            {totalPages > 1 && (\n              <div className=\"flex justify-center\">\n                <Pagination>\n                  <PaginationContent>\n                    <PaginationItem>\n                      <PaginationPrevious \n                        onClick={() => handlePageChange(currentPage - 1)}\n                        className={currentPage === 1 ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                      />\n                    </PaginationItem>\n                    \n                    {/* First Page */}\n                    {currentPage > 3 && (\n                      <PaginationItem>\n                        <PaginationLink onClick={() => handlePageChange(1)}>\n                          1\n                        </PaginationLink>\n                      </PaginationItem>\n                    )}\n                    \n                    {/* Ellipsis if needed */}\n                    {currentPage > 4 && (\n                      <PaginationItem>\n                        <PaginationEllipsis />\n                      </PaginationItem>\n                    )}\n                    \n                    {/* Pages around current */}\n                    {Array.from({ length: Math.min(3, totalPages) }).map((_, i) => {\n                      let pageNum;\n                      \n                      if (totalPages <= 3) {\n                        pageNum = i + 1;\n                      } else if (currentPage <= 2) {\n                        pageNum = i + 1;\n                      } else if (currentPage >= totalPages - 1) {\n                        pageNum = totalPages - 2 + i;\n                      } else {\n                        pageNum = currentPage - 1 + i;\n                      }\n                      \n                      if (pageNum <= 0 || pageNum > totalPages) return null;\n                      \n                      return (\n                        <PaginationItem key={pageNum}>\n                          <PaginationLink \n                            isActive={pageNum === currentPage}\n                            onClick={() => handlePageChange(pageNum)}\n                          >\n                            {pageNum}\n                          </PaginationLink>\n                        </PaginationItem>\n                      );\n                    })}\n                    \n                    {/* Ellipsis if needed */}\n                    {currentPage < totalPages - 3 && (\n                      <PaginationItem>\n                        <PaginationEllipsis />\n                      </PaginationItem>\n                    )}\n                    \n                    {/* Last Page */}\n                    {currentPage < totalPages - 2 && (\n                      <PaginationItem>\n                        <PaginationLink onClick={() => handlePageChange(totalPages)}>\n                          {totalPages}\n                        </PaginationLink>\n                      </PaginationItem>\n                    )}\n                    \n                    <PaginationItem>\n                      <PaginationNext \n                        onClick={() => handlePageChange(currentPage + 1)}\n                        className={currentPage === totalPages ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                      />\n                    </PaginationItem>\n                  </PaginationContent>\n                </Pagination>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Empty State - when search returns no results */}\n        {!loading && hotels.length > 0 && totalItems === 0 && (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-20\">\n              <p className=\"text-lg text-gray-600 dark:text-gray-400 mb-2\">No hotels found</p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500\">Try adjusting your search criteria or filters</p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n      \n      {/* Import/Export Drawer */}\n      <ImportExportDrawer \n        open={importExportOpen} \n        onOpenChange={setImportExportOpen} \n      />\n    </PageLayout>\n  );\n};\n\nexport default Hotels;\n","\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useToast } from '@/hooks/use-toast';\nimport { initialCountries } from '../../countries/data/countryData';\nimport { initialCities } from '../../cities/data/cityData';\nimport { Restaurant, CuisineType } from '../types/restaurantTypes';\nimport { restaurantService } from '@/integrations/supabase/services/restaurantService';\n\nexport const useRestaurantsData = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  \n  // Restaurants state fetched from Supabase\n  const [restaurants, setRestaurants] = useState<Restaurant[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  // State variables\n  const [filteredRestaurants, setFilteredRestaurants] = useState<Restaurant[]>(restaurants);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [locationFilter, setLocationFilter] = useState<string>('all');\n  const [priceRangeFilter, setPriceRangeFilter] = useState<string>('all');\n  const [cuisineFilter, setCuisineFilter] = useState<string>('all');\n  const [selectedRestaurant, setSelectedRestaurant] = useState<Restaurant | null>(null);\n  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [isImportExportOpen, setIsImportExportOpen] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(6);\n  \n  // Active countries and cities from the system\n  const activeCountries = initialCountries.filter(country => country.status === 'active');\n  const activeCities = initialCities.filter(city => city.status === 'active');\n  \n  // Get unique cuisines from restaurants data\n  const cuisineTypes = Array.from(new Set(restaurants.flatMap(restaurant => restaurant.cuisineTypes)));\n  \n  // Get unique locations from restaurants data (prefer explicit location, fallback to city)\n  const locations = Array.from(new Set(restaurants.map(restaurant => restaurant.location || restaurant.city)));\n\n  // Apply filters to restaurants\n  useEffect(() => {\n    // Initial load from Supabase\n    const loadRestaurants = async () => {\n      try {\n        setIsLoading(true);\n        const list = await restaurantService.list();\n        // Convert service UI type to local Restaurant type by shallow casting\n        setRestaurants(list as unknown as Restaurant[]);\n      } catch (error) {\n        console.error('Failed to load restaurants from Supabase:', error);\n        toast({ title: 'Error', description: 'Failed to load restaurants from server.', variant: 'destructive' });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadRestaurants();\n  }, []);\n\n  // Apply filters to restaurants\n  useEffect(() => {\n    let result = restaurants.filter(restaurant => {\n      const matchesSearch = \n        restaurant.name.toLowerCase().includes(searchQuery.toLowerCase()) || \n        restaurant.cuisineTypes.some(cuisine => cuisine.toLowerCase().includes(searchQuery.toLowerCase())) ||\n        (restaurant.location || restaurant.city).toLowerCase().includes(searchQuery.toLowerCase()) ||\n        restaurant.country.toLowerCase().includes(searchQuery.toLowerCase());\n        \n      const matchesLocation = locationFilter === 'all' || (restaurant.location || restaurant.city) === locationFilter;\n      const matchesPriceRange = priceRangeFilter === 'all' || restaurant.priceRange === priceRangeFilter;\n      const matchesCuisine = cuisineFilter === 'all' || restaurant.cuisineTypes.includes(cuisineFilter as CuisineType);\n      \n      return matchesSearch && matchesLocation && matchesPriceRange && matchesCuisine;\n    });\n    \n    setFilteredRestaurants(result);\n    setCurrentPage(1); // Reset to first page when filters change\n  }, [searchQuery, locationFilter, priceRangeFilter, cuisineFilter, restaurants]);\n\n  // Pagination logic\n  const indexOfLastRestaurant = currentPage * itemsPerPage;\n  const indexOfFirstRestaurant = indexOfLastRestaurant - itemsPerPage;\n  const currentRestaurants = filteredRestaurants.slice(indexOfFirstRestaurant, indexOfLastRestaurant);\n  const totalPages = Math.ceil(filteredRestaurants.length / itemsPerPage);\n\n  // Save restaurant data\n  const saveRestaurant = async (restaurantData: Partial<Restaurant>): Promise<Restaurant> => {\n    try {\n      // Create or update via Supabase\n      let saved;\n      if (!restaurantData.id) {\n        saved = await restaurantService.create(restaurantData as any);\n        toast({ title: 'Success', description: `${restaurantData.name} has been added successfully.` });\n      } else {\n        saved = await restaurantService.update(String(restaurantData.id), restaurantData as any);\n        toast({ title: 'Success', description: `${restaurantData.name} has been updated successfully.` });\n      }\n      // Update local state\n      setRestaurants(prev => {\n        const exists = prev.some(r => r.id === saved.id);\n        if (exists) return prev.map(r => (r.id === saved.id ? (saved as unknown as Restaurant) : r));\n        return [...prev, saved as unknown as Restaurant];\n      });\n      return saved as unknown as Restaurant;\n    } catch (error) {\n      console.error('Error saving restaurant:', error);\n      toast({ title: 'Error', description: 'Failed to save restaurant data. Please try again.', variant: 'destructive' });\n      throw error;\n    }\n  };\n\n  // Handle restaurant actions\n  const handleViewDetails = (restaurant: Restaurant) => {\n    setSelectedRestaurant(restaurant);\n    setIsDetailsDialogOpen(true);\n  };\n\n  const handleEditRestaurant = (restaurant: Restaurant) => {\n    navigate(`/inventory/restaurants/edit/${restaurant.id}`, { state: { restaurant } });\n  };\n\n  const handleDeleteClick = (restaurant: Restaurant) => {\n    setSelectedRestaurant(restaurant);\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = () => {\n    if (selectedRestaurant) {\n      (async () => {\n        try {\n          await restaurantService.delete(selectedRestaurant.id);\n          setRestaurants(prev => prev.filter(r => r.id !== selectedRestaurant.id));\n          toast({ title: 'Restaurant deleted', description: `${selectedRestaurant.name} has been removed from the system.` });\n          setIsDeleteDialogOpen(false);\n        } catch (error) {\n          console.error('Error deleting restaurant:', error);\n          toast({ title: 'Error', description: 'Failed to delete restaurant. Please try again.', variant: 'destructive' });\n        }\n      })();\n    }\n  };\n\n  // Handle add new restaurant\n  const handleAddRestaurant = () => {\n    navigate('/inventory/restaurants/add');\n  };\n\n  // Open import/export drawer\n  const handleImportExport = () => {\n    setIsImportExportOpen(true);\n  };\n\n  // Handle import completion\n  const handleImportComplete = () => {\n    toast({\n      title: \"Import complete\",\n      description: \"Restaurants have been imported successfully.\",\n    });\n  };\n\n  // Pagination navigation\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  const goToPage = (page: number) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n\n  // Reset all filters\n  const resetFilters = () => {\n    setSearchQuery('');\n    setLocationFilter('all');\n    setPriceRangeFilter('all');\n    setCuisineFilter('all');\n  };\n\n  return {\n    restaurants,\n    filteredRestaurants,\n    currentRestaurants,\n    totalPages,\n    currentPage,\n    itemsPerPage,\n    searchQuery,\n    locationFilter,\n    priceRangeFilter,\n    cuisineFilter,\n    locations,\n    cuisineTypes,\n    selectedRestaurant,\n    isDetailsDialogOpen,\n    isDeleteDialogOpen,\n    isImportExportOpen,\n    isLoading,\n    handleAddRestaurant,\n    handleImportExport,\n    handleViewDetails,\n    handleEditRestaurant,\n    handleDeleteClick,\n    handleDeleteConfirm,\n    handleImportComplete,\n    saveRestaurant,\n    setRestaurants,\n    // Upsert many rows to Supabase for import/export flows\n    saveRestaurants: async (updated: Restaurant[]) => {\n      try {\n        const upserted = await restaurantService.upsertMany(updated as any);\n        setRestaurants(upserted as unknown as Restaurant[]);\n        return true;\n      } catch (error) {\n        console.error('Error saving restaurants batch:', error);\n        toast({ title: 'Error', description: 'Failed to save imported restaurants.', variant: 'destructive' });\n        return false;\n      }\n    },\n    setSearchQuery,\n    setLocationFilter,\n    setPriceRangeFilter,\n    setCuisineFilter,\n    setItemsPerPage,\n    nextPage,\n    prevPage,\n    goToPage,\n    resetFilters,\n    setIsDetailsDialogOpen,\n    setIsDeleteDialogOpen,\n    setIsImportExportOpen\n  };\n};\n\nexport default useRestaurantsData;\n","\nimport React from 'react';\nimport { \n  Card, \n  CardContent, \n  CardFooter, \n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Utensils, \n  MapPin, \n  Clock, \n  Eye, \n  Edit, \n  Trash2 \n} from 'lucide-react';\nimport { Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantCardProps {\n  restaurant: Restaurant;\n  onViewDetails: () => void;\n  onEdit: () => void;\n  onDelete: () => void;\n}\n\nconst getPriceString = (priceCategory: string): string => {\n  return priceCategory.repeat(priceCategory.length);\n};\n\nconst RestaurantCard: React.FC<RestaurantCardProps> = ({ \n  restaurant, \n  onViewDetails,\n  onEdit, \n  onDelete \n}) => {\n  const { \n    name, \n    city, \n    location,\n    cuisineTypes, \n    priceCategory, \n    priceRange,\n    openingHours,\n    openingTime, \n    closingTime, \n    imageUrl, \n    isPreferred,\n    currencySymbol,\n    averagePrice\n  } = restaurant;\n\n  return (\n    <Card className=\"overflow-hidden flex flex-col h-full\">\n      {/* Restaurant Image with Preferred Badge */}\n      <div className=\"relative h-48\">\n        <img \n          src={imageUrl} \n          alt={name} \n          className=\"w-full h-full object-cover\"\n        />\n        {isPreferred && (\n          <Badge \n            className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600\"\n          >\n            Preferred\n          </Badge>\n        )}\n      </div>\n      \n      {/* Restaurant Details */}\n      <CardContent className=\"pt-4 flex-1\">\n        <div className=\"space-y-3\">\n          {/* Name */}\n          <div>\n            <h3 className=\"font-bold text-lg\">{name}</h3>\n          </div>\n          \n          {/* Location */}\n          <div className=\"flex items-center text-sm text-gray-600 dark:text-gray-300\">\n            <MapPin className=\"h-4 w-4 mr-1.5 flex-shrink-0\" />\n            <span>{location || city}</span>\n          </div>\n          \n          {/* Hours */}\n          <div className=\"flex items-center text-sm text-gray-600 dark:text-gray-300\">\n            <Clock className=\"h-4 w-4 mr-1.5 flex-shrink-0\" />\n            <span>{openingHours || `${openingTime} - ${closingTime}`}</span>\n          </div>\n          \n          {/* Cuisine Tags */}\n          <div className=\"flex flex-wrap gap-1.5\">\n            {cuisineTypes.slice(0, 2).map((cuisine) => (\n              <Badge key={cuisine} variant=\"outline\" className=\"text-xs\">\n                {cuisine}\n              </Badge>\n            ))}\n            {cuisineTypes.length > 2 && (\n              <Badge variant=\"outline\" className=\"text-xs\">\n                +{cuisineTypes.length - 2}\n              </Badge>\n            )}\n          </div>\n          \n          {/* Price Category */}\n          <div>\n            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {getPriceString(priceCategory)}{priceRange ? `  ${priceRange}` : ''}{averagePrice != null ? `  ${currencySymbol}${averagePrice}` : `  ${currencySymbol}`}\n            </span>\n          </div>\n        </div>\n      </CardContent>\n      \n      {/* Action Buttons */}\n      <CardFooter className=\"border-t pt-3 flex justify-between bg-gray-50 dark:bg-gray-800/50\">\n        <Button \n          variant=\"ghost\" \n          size=\"sm\" \n          onClick={onViewDetails}\n          className=\"flex-1 flex items-center justify-center\"\n        >\n          <Eye className=\"h-4 w-4 mr-1\" />\n          View\n        </Button>\n        <Button \n          variant=\"ghost\" \n          size=\"sm\" \n          onClick={onEdit}\n          className=\"flex-1 flex items-center justify-center text-blue-600\"\n        >\n          <Edit className=\"h-4 w-4 mr-1\" />\n          Edit\n        </Button>\n        <Button \n          variant=\"ghost\" \n          size=\"sm\" \n          onClick={onDelete}\n          className=\"flex-1 flex items-center justify-center text-red-600\"\n        >\n          <Trash2 className=\"h-4 w-4 mr-1\" />\n          Delete\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n};\n\nexport default RestaurantCard;\n","\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Utensils, Plus } from 'lucide-react';\nimport { Restaurant } from '../types/restaurantTypes';\nimport RestaurantCard from './RestaurantCard';\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\ninterface RestaurantsContentProps {\n  filteredRestaurants: Restaurant[];\n  currentRestaurants: Restaurant[];\n  currentPage: number;\n  totalPages: number;\n  onViewDetails: (restaurant: Restaurant) => void;\n  onEdit: (restaurant: Restaurant) => void;\n  onDelete: (restaurant: Restaurant) => void;\n  onAddRestaurant: () => void;\n  onNextPage: () => void;\n  onPrevPage: () => void;\n}\n\nconst RestaurantsContent: React.FC<RestaurantsContentProps> = ({\n  filteredRestaurants,\n  currentRestaurants,\n  currentPage,\n  totalPages,\n  onViewDetails,\n  onEdit,\n  onDelete,\n  onAddRestaurant,\n  onNextPage,\n  onPrevPage\n}) => {\n  // Results count for display\n  const indexOfFirstRestaurant = filteredRestaurants.length === 0 ? 0 : (currentPage - 1) * 6 + 1;\n  const indexOfLastRestaurant = Math.min(currentPage * 6, filteredRestaurants.length);\n\n  // Calculate page numbers for pagination\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    const maxPagesToShow = 5;\n    \n    if (totalPages <= maxPagesToShow) {\n      // Show all pages if total pages is less than max pages to show\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n    } else {\n      // Always show first page\n      pageNumbers.push(1);\n      \n      let startPage = Math.max(2, currentPage - 1);\n      let endPage = Math.min(totalPages - 1, currentPage + 1);\n      \n      // Adjust start and end page based on current page\n      if (currentPage <= 2) {\n        endPage = 3;\n      } else if (currentPage >= totalPages - 1) {\n        startPage = totalPages - 2;\n      }\n      \n      // Add ellipsis after first page if needed\n      if (startPage > 2) {\n        pageNumbers.push('ellipsis1');\n      }\n      \n      // Add pages around current page\n      for (let i = startPage; i <= endPage; i++) {\n        pageNumbers.push(i);\n      }\n      \n      // Add ellipsis before last page if needed\n      if (endPage < totalPages - 1) {\n        pageNumbers.push('ellipsis2');\n      }\n      \n      // Always show last page\n      if (totalPages > 1) {\n        pageNumbers.push(totalPages);\n      }\n    }\n    \n    return pageNumbers;\n  };\n  \n  const goToPage = (page: number) => {\n    // Since we don't have direct access to goToPage from props,\n    // we'll use onNextPage and onPrevPage to navigate\n    if (page > currentPage) {\n      // Need to go forward\n      const steps = page - currentPage;\n      for (let i = 0; i < steps; i++) {\n        onNextPage();\n      }\n    } else if (page < currentPage) {\n      // Need to go backward\n      const steps = currentPage - page;\n      for (let i = 0; i < steps; i++) {\n        onPrevPage();\n      }\n    }\n  };\n  \n  return (\n    <>\n      {/* Results count */}\n      <div className=\"mb-4 text-sm text-gray-500 dark:text-gray-400\">\n        Showing {filteredRestaurants.length === 0 ? 0 : indexOfFirstRestaurant}-\n        {indexOfLastRestaurant} of {filteredRestaurants.length} restaurants\n      </div>\n\n      {/* Restaurant Cards Grid */}\n      {filteredRestaurants.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\n          {currentRestaurants.map((restaurant) => (\n            <RestaurantCard \n              key={restaurant.id}\n              restaurant={restaurant}\n              onViewDetails={() => onViewDetails(restaurant)}\n              onEdit={() => onEdit(restaurant)}\n              onDelete={() => onDelete(restaurant)}\n            />\n          ))}\n        </div>\n      ) : (\n        <Card className=\"mb-6\">\n          <CardContent className=\"flex flex-col items-center justify-center py-10\">\n            <Utensils className=\"h-12 w-12 text-gray-300 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-1\">No restaurants found</h3>\n            <p className=\"text-gray-500 dark:text-gray-400 text-center max-w-sm\">\n              There are no restaurants matching your search criteria. Try adjusting your filters or add a new restaurant.\n            </p>\n            <Button \n              className=\"mt-4 bg-brand-blue hover:bg-brand-blue/90\"\n              onClick={onAddRestaurant}\n            >\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Add Restaurant\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n      \n      {/* Enhanced Pagination */}\n      {filteredRestaurants.length > 0 && totalPages > 1 && (\n        <div className=\"flex justify-center mt-6\">\n          <Pagination>\n            <PaginationContent>\n              <PaginationItem>\n                <PaginationPrevious \n                  onClick={onPrevPage} \n                  className={currentPage === 1 ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                />\n              </PaginationItem>\n              \n              {getPageNumbers().map((page, index) => (\n                page === 'ellipsis1' || page === 'ellipsis2' ? (\n                  <PaginationItem key={`ellipsis-${index}`}>\n                    <PaginationEllipsis />\n                  </PaginationItem>\n                ) : (\n                  <PaginationItem key={`page-${page}`}>\n                    <PaginationLink\n                      onClick={() => typeof page === 'number' && goToPage(page)}\n                      isActive={currentPage === page}\n                    >\n                      {page}\n                    </PaginationLink>\n                  </PaginationItem>\n                )\n              ))}\n              \n              <PaginationItem>\n                <PaginationNext \n                  onClick={onNextPage} \n                  className={currentPage === totalPages ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                />\n              </PaginationItem>\n            </PaginationContent>\n          </Pagination>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default RestaurantsContent;\n","\nimport React from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Restaurant } from '../types/restaurantTypes';\nimport { \n  MapPin, \n  Phone, \n  Clock, \n  Star, \n  Utensils, \n  DollarSign,\n  Wifi,\n  Car,\n  Music,\n  Users,\n  CreditCard,\n  Coffee,\n  Salad\n} from 'lucide-react';\n\ninterface RestaurantDetailsDialogProps {\n  restaurant: Restaurant;\n  isOpen: boolean;\n  onClose: () => void;\n  onEdit: () => void;\n}\n\nconst RestaurantDetailsDialog: React.FC<RestaurantDetailsDialogProps> = ({\n  restaurant,\n  isOpen,\n  onClose,\n  onEdit\n}) => {\n  const renderFeatures = () => {\n    const features = [];\n    \n    if (restaurant.features.wifi) features.push({ icon: <Wifi className=\"w-4 h-4 mr-1\" />, label: 'Wi-Fi' });\n    if (restaurant.features.parking) features.push({ icon: <Car className=\"w-4 h-4 mr-1\" />, label: 'Parking' });\n    if (restaurant.features.liveMusic) features.push({ icon: <Music className=\"w-4 h-4 mr-1\" />, label: 'Live Music' });\n    if (restaurant.features.privateRooms) features.push({ icon: <Users className=\"w-4 h-4 mr-1\" />, label: 'Private Rooms' });\n    if (restaurant.features.outdoorSeating) features.push({ icon: <Utensils className=\"w-4 h-4 mr-1\" />, label: 'Outdoor Seating' });\n    if (restaurant.features.cardAccepted) features.push({ icon: <CreditCard className=\"w-4 h-4 mr-1\" />, label: 'Card Accepted' });\n    \n    if (features.length === 0) return <p className=\"text-gray-500\">No special features</p>;\n    \n    return (\n      <div className=\"flex flex-wrap gap-2\">\n        {features.map((feature, index) => (\n          <Badge key={index} variant=\"outline\" className=\"flex items-center\">\n            {feature.icon} {feature.label}\n          </Badge>\n        ))}\n      </div>\n    );\n  };\n  \n  const renderMealTypes = () => {\n    const meals = [];\n    \n    if (restaurant.mealTypes.breakfast) meals.push('Breakfast');\n    if (restaurant.mealTypes.lunch) meals.push('Lunch');\n    if (restaurant.mealTypes.dinner) meals.push('Dinner');\n    if (restaurant.mealTypes.snacks) meals.push('Snacks');\n    if (restaurant.mealTypes.beverages) meals.push('Beverages');\n    \n    if (meals.length === 0) return <p className=\"text-gray-500\">No meal types specified</p>;\n    \n    return (\n      <div className=\"flex flex-wrap gap-2\">\n        {meals.map((meal, index) => (\n          <Badge key={index} variant=\"outline\">\n            {meal}\n          </Badge>\n        ))}\n      </div>\n    );\n  };\n  \n  const renderDietaryOptions = () => {\n    const options = [];\n    \n    if (restaurant.dietaryOptions?.pureVeg) options.push({ icon: <Salad className=\"w-4 h-4 mr-1\" />, label: 'Pure Vegetarian' });\n    if (restaurant.dietaryOptions?.veganFriendly) options.push({ icon: <Salad className=\"w-4 h-4 mr-1\" />, label: 'Vegan Friendly' });\n    if (restaurant.dietaryOptions?.vegetarian) options.push({ icon: <Salad className=\"w-4 h-4 mr-1\" />, label: 'Vegetarian Options' });\n    if (restaurant.dietaryOptions?.seafood) options.push({ label: 'Seafood' });\n    if (restaurant.dietaryOptions?.poultry) options.push({ label: 'Poultry' });\n    if (restaurant.dietaryOptions?.redMeat) options.push({ label: 'Red Meat' });\n    if (restaurant.dietaryOptions?.aLaCarte) options.push({ label: 'A La Carte' });\n    \n    if (options.length === 0) return <p className=\"text-gray-500\">No dietary options specified</p>;\n    \n    return (\n      <div className=\"flex flex-wrap gap-2\">\n        {options.map((option, index) => (\n          <Badge key={index} variant=\"outline\" className=\"flex items-center\">\n            {option.icon && option.icon} {option.label}\n          </Badge>\n        ))}\n      </div>\n    );\n  };\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"text-2xl font-bold\">{restaurant.name}</DialogTitle>\n            {restaurant.isPreferred && (\n              <Badge className=\"bg-red-500 hover:bg-red-600\">Preferred</Badge>\n            )}\n          </div>\n          <DialogDescription className=\"flex items-center text-sm\">\n            <MapPin className=\"h-4 w-4 mr-1\" />\n            {restaurant.location || `${restaurant.city}, ${restaurant.country}${restaurant.area ? ` (${restaurant.area})` : ''}`}\n          </DialogDescription>\n        </DialogHeader>\n        \n        {/* Restaurant Image */}\n        <div className=\"w-full h-64 overflow-hidden rounded-md\">\n          <img \n            src={restaurant.imageUrl} \n            alt={restaurant.name} \n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4\">\n          {/* Left Column */}\n          <div className=\"space-y-4\">\n            {/* Basic Info */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Basic Information</h3>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center\">\n                  <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                  <span>{restaurant.address}</span>\n                </div>\n                <div className=\"flex items-center\">\n                  <Clock className=\"h-4 w-4 mr-2 text-gray-500\" />\n                  <span>\n                    {restaurant.openingHours || `${restaurant.openingTime} - ${restaurant.closingTime}`}\n                  </span>\n                </div>\n                <div className=\"flex items-center\">\n                  <Star className=\"h-4 w-4 mr-2 text-yellow-400\" />\n                  <span>{restaurant.rating} ({restaurant.reviewCount} reviews)</span>\n                </div>\n                <div className=\"flex items-center\">\n                  <DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />\n                  <span>\n                    {restaurant.priceCategory}{restaurant.priceRange ? `  ${restaurant.priceRange}` : ''}  Average price: {restaurant.currencySymbol}{restaurant.averagePrice ?? restaurant.averageCost}\n                  </span>\n                </div>\n              </div>\n            </div>\n            \n            {/* Cuisine Types */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Cuisine Types</h3>\n              <div className=\"flex flex-wrap gap-2\">\n                {restaurant.cuisineTypes.map((cuisine, index) => (\n                  <Badge key={index} variant=\"secondary\">\n                    {cuisine}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n            \n            {/* Description */}\n            {restaurant.description && (\n              <div>\n                <h3 className=\"text-lg font-medium mb-2\">Description</h3>\n                <p className=\"text-gray-700 dark:text-gray-300\">{restaurant.description}</p>\n              </div>\n            )}\n          </div>\n          \n          {/* Right Column */}\n          <div className=\"space-y-4\">\n            {/* Features */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Features</h3>\n              {renderFeatures()}\n            </div>\n            \n            {/* Meal Types */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Meal Types</h3>\n              {renderMealTypes()}\n            </div>\n            \n            {/* Dietary Options */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Dietary Options</h3>\n              {renderDietaryOptions()}\n            </div>\n            \n            {/* Status */}\n            <div>\n              <h3 className=\"text-lg font-medium mb-2\">Status</h3>\n              <Badge variant={restaurant.status === 'active' ? \"success\" : \"destructive\"}>\n                {restaurant.status === 'active' ? 'Active' : 'Inactive'}\n              </Badge>\n            </div>\n          </div>\n        </div>\n        \n        <DialogFooter className=\"mt-6\">\n          <Button variant=\"outline\" onClick={onClose}>Close</Button>\n          <Button onClick={onEdit} className=\"bg-brand-blue hover:bg-brand-blue/90\">\n            Edit Restaurant\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default RestaurantDetailsDialog;\n","\nimport React, { useRef, useState } from 'react';\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Download, Upload, AlertCircle, CheckCircle2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Restaurant } from '../types/restaurantTypes';\nimport { useRestaurantImportExport } from '../hooks/useRestaurantImportExport';\n\ninterface ImportExportDrawerProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  restaurants: Restaurant[];\n  filteredRestaurants: Restaurant[];\n  saveRestaurants: (restaurants: Restaurant[]) => Promise<boolean>;\n  setRestaurants: React.Dispatch<React.SetStateAction<Restaurant[]>>;\n  onImportComplete?: () => void;\n}\n\nconst ImportExportDrawer: React.FC<ImportExportDrawerProps> = ({\n  open,\n  onOpenChange,\n  restaurants,\n  filteredRestaurants,\n  saveRestaurants,\n  setRestaurants,\n  onImportComplete\n}) => {\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [activeTab, setActiveTab] = useState('export');\n  const [importing, setImporting] = useState(false);\n  const [importStatus, setImportStatus] = useState<'idle' | 'success' | 'error'>('idle');\n  const [importMessage, setImportMessage] = useState('');\n\n  const { importRestaurants, exportRestaurants } = useRestaurantImportExport(\n    restaurants,\n    filteredRestaurants, \n    setRestaurants,\n    saveRestaurants\n  );\n\n  const handleExport = async () => {\n    try {\n      const success = await exportRestaurants();\n      if (success) {\n        toast({\n          title: \"Export successful\",\n          description: \"Restaurants data has been exported to Excel\",\n        });\n      }\n    } catch (error) {\n      console.error('Error exporting restaurants:', error);\n      toast({\n        title: \"Export failed\",\n        description: \"An error occurred while exporting restaurants\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    setImporting(true);\n    setImportStatus('idle');\n    setImportMessage('');\n\n    try {\n      const result = await importRestaurants(file);\n      if (result && result.length > 0) {\n        setImportStatus('success');\n        setImportMessage(`Successfully imported ${result.length} restaurants.`);\n        \n        if (onImportComplete) {\n          onImportComplete();\n        }\n        \n        toast({\n          title: \"Import successful\",\n          description: `Imported ${result.length} restaurants`,\n        });\n      } else {\n        setImportStatus('error');\n        setImportMessage('No valid restaurant data found in the import file.');\n        \n        toast({\n          title: \"Import warning\",\n          description: \"No valid restaurant data found in the import file\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Import error:', error);\n      setImportStatus('error');\n      setImportMessage(error instanceof Error ? error.message : 'Unknown error during import');\n      \n      toast({\n        title: \"Import failed\",\n        description: error instanceof Error ? error.message : 'Unknown error during import',\n        variant: \"destructive\"\n      });\n    } finally {\n      setImporting(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const triggerFileInput = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"sm:max-w-md md:max-w-lg\">\n        <SheetHeader>\n          <SheetTitle>Import / Export Restaurants</SheetTitle>\n          <SheetDescription>\n            Import restaurants from Excel or export your current restaurants data.\n          </SheetDescription>\n        </SheetHeader>\n        \n        <Tabs defaultValue=\"export\" className=\"mt-6\" value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"export\">Export</TabsTrigger>\n            <TabsTrigger value=\"import\">Import</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"export\" className=\"mt-4 space-y-4\">\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-medium\">Export Restaurants</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Download your restaurants data as an Excel file. The export will include all restaurant data and can be used for backup or bulk editing.\n              </p>\n            </div>\n            \n            <div className=\"flex flex-col gap-4 mt-6\">\n              <div className=\"border rounded-md p-4 bg-muted/30\">\n                <h4 className=\"font-medium mb-2\">Export Options</h4>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Total restaurants to export:</span>\n                  <span className=\"font-medium\">{filteredRestaurants.length}</span>\n                </div>\n              </div>\n              \n              <Button \n                className=\"w-full\"\n                onClick={handleExport}\n                disabled={filteredRestaurants.length === 0}\n              >\n                <Download className=\"mr-2 h-4 w-4\" />\n                Export to Excel\n              </Button>\n            </div>\n          </TabsContent>\n          \n          <TabsContent value=\"import\" className=\"mt-4 space-y-4\">\n            <div className=\"space-y-2\">\n              <h3 className=\"text-lg font-medium\">Import Restaurants</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Upload an Excel file to import restaurant data. The file should follow the export format.\n              </p>\n            </div>\n            \n            <div className=\"border rounded-md p-4 bg-muted/30\">\n              <h4 className=\"font-medium mb-2\">Import Requirements</h4>\n              <ul className=\"text-sm space-y-2 list-disc pl-5\">\n                <li>File must be in .xlsx format</li>\n                <li>Required columns: Restaurant Name, City, Country, Cuisine Types</li>\n                <li>Optional: Description, Price Category, Rating, etc.</li>\n                <li>Download a template by exporting first</li>\n              </ul>\n            </div>\n            \n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              onChange={handleFileChange}\n              accept=\".xlsx\"\n              className=\"hidden\"\n            />\n            \n            <Button \n              className=\"w-full\"\n              onClick={triggerFileInput}\n              disabled={importing}\n            >\n              <Upload className=\"mr-2 h-4 w-4\" />\n              {importing ? 'Importing...' : 'Select Excel File'}\n            </Button>\n            \n            {importStatus !== 'idle' && (\n              <Alert variant={importStatus === 'success' ? 'default' : 'destructive'}>\n                {importStatus === 'success' ? (\n                  <CheckCircle2 className=\"h-4 w-4\" />\n                ) : (\n                  <AlertCircle className=\"h-4 w-4\" />\n                )}\n                <AlertDescription>{importMessage}</AlertDescription>\n              </Alert>\n            )}\n          </TabsContent>\n        </Tabs>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default ImportExportDrawer;\n","\nimport { useState } from 'react';\nimport { Restaurant, CuisineType } from '../types/restaurantTypes';\nimport { useToast } from '@/hooks/use-toast';\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\n\nexport const useRestaurantImportExport = (\n  restaurants: Restaurant[], \n  filteredRestaurants: Restaurant[], \n  setRestaurants: React.Dispatch<React.SetStateAction<Restaurant[]>>,\n  saveRestaurants: (restaurants: Restaurant[]) => Promise<boolean>\n) => {\n  const { toast } = useToast();\n  \n  // Import restaurants data from Excel\n  const importRestaurants = async (file: File): Promise<Restaurant[] | null> => {\n    try {\n      // Read the Excel file\n      const data = await file.arrayBuffer();\n      const workbook = XLSX.read(data, { type: 'array' });\n      \n      // Check if there's a Restaurants sheet\n      if (!workbook.SheetNames.includes('Restaurants')) {\n        throw new Error(\"Import file must contain a 'Restaurants' sheet\");\n      }\n      \n      // Parse the Restaurants sheet\n      const restaurantsSheet = workbook.Sheets['Restaurants'];\n      const importedData = XLSX.utils.sheet_to_json(restaurantsSheet);\n      \n      if (!Array.isArray(importedData) || importedData.length === 0) {\n        throw new Error('No restaurant data found in the import file');\n      }\n      \n      console.log('Importing restaurants from Excel:', importedData);\n      \n      // Process imported data to match Restaurant type\n      const importedRestaurants: Restaurant[] = importedData.map((row: any, index) => {\n        // Parse cuisine types from string or array\n        let cuisineTypes: CuisineType[] = [];\n        if (row['Cuisine Types']) {\n          const cuisineStr = row['Cuisine Types']?.toString() || '';\n          cuisineTypes = cuisineStr.split(',')\n            .map(c => c.trim())\n            .filter(c => c) as CuisineType[];\n        }\n        \n        // Generate ID for new restaurant\n        const newId = `rest${(Date.now() + index).toString(36)}`;\n        \n        // Build restaurant object with mandatory and fallback values\n        const restaurant: Restaurant = {\n          id: newId,\n          externalId: row['External ID'] || undefined,\n          name: row['Restaurant Name'] || `Imported Restaurant ${index + 1}`,\n          address: row['Address'] || '',\n          city: row['City'] || '',\n          country: row['Country'] || '',\n          area: row['Area'] || '',\n          description: row['Description'] || '',\n          cuisine: row['Cuisine'] || undefined,\n          location: row['Location'] || undefined,\n          priceRange: row['Price Range'] || undefined,\n          priceCategory: (row['Price Category'] || '$') as '$' | '$$' | '$$$' | '$$$$',\n          averageCost: parseFloat(row['Average Cost'] || '0'),\n          averagePrice: parseFloat(row['Average Price'] || '0'),\n          rating: parseFloat(row['Rating'] || '4'),\n          reviewCount: parseInt(row['Review Count'] || '0'),\n          openingTime: row['Opening Time'] || '09:00',\n          closingTime: row['Closing Time'] || '22:00',\n          openingHours: row['Opening Hours'] || undefined,\n          imageUrl: row['Image URL'] || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2070',\n          cuisineTypes,\n          features: {\n            outdoorSeating: row['Outdoor Seating'] === 'true' || row['Outdoor Seating'] === true,\n            privateRooms: row['Private Rooms'] === 'true' || row['Private Rooms'] === true,\n            wifi: row['WiFi'] === 'true' || row['WiFi'] === true,\n            parking: row['Parking'] === 'true' || row['Parking'] === true,\n            liveMusic: row['Live Music'] === 'true' || row['Live Music'] === true,\n            cardAccepted: row['Card Accepted'] === 'true' || row['Card Accepted'] === true\n          },\n          mealTypes: {\n            breakfast: row['Breakfast'] === 'true' || row['Breakfast'] === true,\n            lunch: row['Lunch'] === 'true' || row['Lunch'] === true,\n            dinner: row['Dinner'] === 'true' || row['Dinner'] === true,\n            snacks: row['Snacks'] === 'true' || row['Snacks'] === true,\n            beverages: row['Beverages'] === 'true' || row['Beverages'] === true\n          },\n          dietaryOptions: {\n            pureVeg: row['Pure Veg'] === 'true' || row['Pure Veg'] === true,\n            veganFriendly: row['Vegan Friendly'] === 'true' || row['Vegan Friendly'] === true,\n            vegetarian: row['Vegetarian'] === 'true' || row['Vegetarian'] === true,\n            seafood: row['Seafood'] === 'true' || row['Seafood'] === true,\n            poultry: row['Poultry'] === 'true' || row['Poultry'] === true,\n            redMeat: row['Red Meat'] === 'true' || row['Red Meat'] === true,\n            aLaCarte: row['A La Carte'] === 'true' || row['A La Carte'] === true\n          },\n          currencySymbol: row['Currency Symbol'] || '$',\n          currencyCode: row['Currency Code'] || 'USD',\n          status: (row['Status']?.toLowerCase() === 'inactive' ? 'inactive' : 'active') as 'active' | 'inactive',\n          isPreferred: row['Preferred'] === 'true' || row['Preferred'] === true,\n          lastUpdated: new Date().toISOString(),\n          vegOptions: row['Veg Options'] === 'true' || row['Veg Options'] === true\n        };\n        \n        return restaurant;\n      });\n      // Fill derived fields if missing\n      importedRestaurants.forEach(r => {\n        if (!r.location) {\n          r.location = [r.city, r.country].filter(Boolean).join(', ');\n        }\n        if (!r.openingHours) {\n          r.openingHours = `${r.openingTime} - ${r.closingTime}`;\n        }\n      });\n      \n      // Merge with existing restaurants and persist via Supabase upsert\n      const updatedRestaurants = [...restaurants, ...importedRestaurants];\n      await saveRestaurants(updatedRestaurants);\n      \n      return importedRestaurants;\n    } catch (error) {\n      console.error('Error importing restaurants:', error);\n      throw error;\n    }\n  };\n  \n  // Export restaurants data to Excel\n  const exportRestaurants = async (): Promise<boolean> => {\n    try {\n      // Prepare restaurant data for export\n      const exportData = filteredRestaurants.map(restaurant => ({\n        'External ID': restaurant.externalId || '',\n        'Restaurant Name': restaurant.name,\n        'Location': restaurant.location || `${restaurant.city}${restaurant.country ? `, ${restaurant.country}` : ''}`,\n        'City': restaurant.city,\n        'Country': restaurant.country, \n        'Address': restaurant.address,\n        'Area': restaurant.area || '',\n        'Description': restaurant.description,\n        'Cuisine': restaurant.cuisine || (restaurant.cuisineTypes[0] || ''),\n        'Cuisine Types': restaurant.cuisineTypes.join(', '),\n        'Price Range': restaurant.priceRange || '',\n        'Price Category': restaurant.priceCategory,\n        'Average Cost': restaurant.averageCost,\n        'Average Price': restaurant.averagePrice ?? '',\n        'Rating': restaurant.rating,\n        'Review Count': restaurant.reviewCount,\n        'Opening Time': restaurant.openingTime,\n        'Closing Time': restaurant.closingTime,\n        'Opening Hours': restaurant.openingHours || `${restaurant.openingTime} - ${restaurant.closingTime}`,\n        'Image URL': restaurant.imageUrl,\n        'Outdoor Seating': restaurant.features.outdoorSeating ? 'true' : 'false',\n        'Private Rooms': restaurant.features.privateRooms ? 'true' : 'false',\n        'WiFi': restaurant.features.wifi ? 'true' : 'false',\n        'Parking': restaurant.features.parking ? 'true' : 'false',\n        'Live Music': restaurant.features.liveMusic ? 'true' : 'false',\n        'Card Accepted': restaurant.features.cardAccepted ? 'true' : 'false',\n        'Breakfast': restaurant.mealTypes.breakfast ? 'true' : 'false',\n        'Lunch': restaurant.mealTypes.lunch ? 'true' : 'false',\n        'Dinner': restaurant.mealTypes.dinner ? 'true' : 'false',\n        'Snacks': restaurant.mealTypes.snacks ? 'true' : 'false',\n        'Beverages': restaurant.mealTypes.beverages ? 'true' : 'false',\n        'Pure Veg': restaurant.dietaryOptions.pureVeg ? 'true' : 'false',\n        'Vegan Friendly': restaurant.dietaryOptions.veganFriendly ? 'true' : 'false',\n        'Vegetarian': restaurant.dietaryOptions.vegetarian ? 'true' : 'false',\n        'Seafood': restaurant.dietaryOptions.seafood ? 'true' : 'false',\n        'Poultry': restaurant.dietaryOptions.poultry ? 'true' : 'false',\n        'Red Meat': restaurant.dietaryOptions.redMeat ? 'true' : 'false',\n        'A La Carte': restaurant.dietaryOptions.aLaCarte ? 'true' : 'false',\n        'Currency Symbol': restaurant.currencySymbol || '$',\n        'Currency Code': restaurant.currencyCode || 'USD',\n        'Status': restaurant.status,\n        'Preferred': restaurant.isPreferred ? 'true' : 'false',\n        'Last Updated': restaurant.lastUpdated || new Date().toISOString(),\n        'Veg Options': restaurant.vegOptions ? 'true' : 'false'\n      }));\n      \n      // Create workbook and worksheet\n      const workbook = XLSX.utils.book_new();\n      const worksheet = XLSX.utils.json_to_sheet(exportData);\n      \n      // Add worksheet to workbook\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Restaurants');\n      \n      // Generate Excel file\n      const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\n      const data = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n      \n      // Save file\n      saveAs(data, `Restaurants_Export_${new Date().toISOString().split('T')[0]}.xlsx`);\n      \n      return true;\n    } catch (error) {\n      console.error('Error exporting restaurants:', error);\n      throw error;\n    }\n  };\n  \n  return {\n    importRestaurants,\n    exportRestaurants\n  };\n};\n\nexport default useRestaurantImportExport;\n","\nimport React, { useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { \n  Plus, \n  Search, \n  MapPin, \n  CircleDollarSign,\n  Utensils,\n  X,\n  Eye,\n  Edit,\n  Trash2,\n  FileText,\n} from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\nimport { useRestaurantsData } from './hooks/useRestaurantsData';\nimport RestaurantsContent from './components/RestaurantsContent';\nimport RestaurantDetailsDialog from './components/RestaurantDetailsDialog';\nimport ImportExportDrawer from './components/ImportExportDrawer';\nimport { \n  AlertDialog, \n  AlertDialogAction, \n  AlertDialogCancel, \n  AlertDialogContent, \n  AlertDialogDescription, \n  AlertDialogFooter, \n  AlertDialogHeader, \n  AlertDialogTitle \n} from '@/components/ui/alert-dialog';\n\nconst RestaurantsPage: React.FC = () => {\n  const [viewMode, setViewMode] = useState<'grid' | 'table'>('grid');\n  \n  const {\n    restaurants,\n    filteredRestaurants,\n    currentRestaurants,\n    totalPages,\n    currentPage,\n    itemsPerPage,\n    searchQuery,\n    locationFilter,\n    priceRangeFilter,\n    cuisineFilter,\n    locations,\n    cuisineTypes,\n    selectedRestaurant,\n    isDetailsDialogOpen,\n    isDeleteDialogOpen,\n    isImportExportOpen,\n    handleAddRestaurant,\n    handleImportExport,\n    handleViewDetails,\n    handleEditRestaurant,\n    handleDeleteClick,\n    handleDeleteConfirm,\n    handleImportComplete,\n    saveRestaurants,\n    setRestaurants,\n    setSearchQuery,\n    setLocationFilter,\n    setPriceRangeFilter,\n    setCuisineFilter,\n    setItemsPerPage,\n    nextPage,\n    prevPage,\n    goToPage,\n    resetFilters,\n    setIsDetailsDialogOpen,\n    setIsDeleteDialogOpen,\n    setIsImportExportOpen\n  } = useRestaurantsData();\n\n  // Calculate the indices for the results display\n  const indexOfFirstRestaurant = (currentPage - 1) * itemsPerPage;\n  const indexOfLastRestaurant = Math.min(currentPage * itemsPerPage, filteredRestaurants.length);\n\n  // Calculate page numbers for pagination\n  const getPageNumbers = () => {\n    const pageNumbers = [];\n    const maxPagesToShow = 5;\n    \n    if (totalPages <= maxPagesToShow) {\n      // Show all pages if total pages is less than max pages to show\n      for (let i = 1; i <= totalPages; i++) {\n        pageNumbers.push(i);\n      }\n    } else {\n      // Always show first page\n      pageNumbers.push(1);\n      \n      let startPage = Math.max(2, currentPage - 1);\n      let endPage = Math.min(totalPages - 1, currentPage + 1);\n      \n      // Adjust start and end page based on current page\n      if (currentPage <= 2) {\n        endPage = 3;\n      } else if (currentPage >= totalPages - 1) {\n        startPage = totalPages - 2;\n      }\n      \n      // Add ellipsis after first page if needed\n      if (startPage > 2) {\n        pageNumbers.push('ellipsis1');\n      }\n      \n      // Add pages around current page\n      for (let i = startPage; i <= endPage; i++) {\n        pageNumbers.push(i);\n      }\n      \n      // Add ellipsis before last page if needed\n      if (endPage < totalPages - 1) {\n        pageNumbers.push('ellipsis2');\n      }\n      \n      // Always show last page\n      if (totalPages > 1) {\n        pageNumbers.push(totalPages);\n      }\n    }\n    \n    return pageNumbers;\n  };\n\n  return (\n    <PageLayout\n      title=\"Restaurant Management - Tour Inventory System\"\n      description=\"Comprehensive restaurant inventory management for tour operators. Add, edit, and manage restaurant listings with pricing, cuisine types, locations, and booking details.\"\n      keywords={['restaurant management', 'tour inventory', 'dining options', 'restaurant booking', 'cuisine management', 'food services']}\n    >\n      <div className=\"p-4 md:p-6 space-y-6\">\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Restaurant Management</h1>\n            <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n              Add and manage restaurants in your inventory\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <div className=\"flex gap-2\">\n              <Button\n                variant={viewMode === 'grid' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setViewMode('grid')}\n              >\n                Grid\n              </Button>\n              <Button\n                variant={viewMode === 'table' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setViewMode('table')}\n              >\n                Table\n              </Button>\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"sm\" \n              onClick={handleImportExport}\n            >\n              <FileText className=\"mr-2 h-4 w-4\" />\n              Import/Export\n            </Button>\n            <Button \n              onClick={handleAddRestaurant}\n              className=\"bg-brand-blue hover:bg-brand-blue/90\"\n            >\n              <Plus className=\"mr-2 h-4 w-4\" /> Add Restaurant\n            </Button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n          <div className=\"relative md:col-span-2 lg:col-span-2\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <Input\n              placeholder=\"Search restaurants...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n\n          <Select\n            value={locationFilter}\n            onValueChange={setLocationFilter}\n          >\n            <SelectTrigger className=\"flex items-center\">\n              <MapPin className=\"mr-2 h-4 w-4\" />\n              <SelectValue placeholder=\"Filter by location\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Locations</SelectItem>\n              {locations.map((location) => (\n                <SelectItem key={location} value={location}>\n                  {location}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n\n          <Select\n            value={priceRangeFilter}\n            onValueChange={setPriceRangeFilter}\n          >\n            <SelectTrigger className=\"flex items-center\">\n              <CircleDollarSign className=\"mr-2 h-4 w-4\" />\n              <SelectValue placeholder=\"Filter by price\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Prices</SelectItem>\n              <SelectItem value=\"Budget\">Budget</SelectItem>\n              <SelectItem value=\"Mid-Range\">Mid-Range</SelectItem>\n              <SelectItem value=\"Fine Dining\">Fine Dining</SelectItem>\n              <SelectItem value=\"Luxury\">Luxury</SelectItem>\n            </SelectContent>\n          </Select>\n\n          <Select\n            value={cuisineFilter}\n            onValueChange={setCuisineFilter}\n          >\n            <SelectTrigger className=\"flex items-center\">\n              <Utensils className=\"mr-2 h-4 w-4\" />\n              <SelectValue placeholder=\"Filter by cuisine\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Cuisines</SelectItem>\n              {cuisineTypes.map((cuisine) => (\n                <SelectItem key={cuisine} value={cuisine}>\n                  {cuisine}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Active Filters */}\n        {(locationFilter !== 'all' || priceRangeFilter !== 'all' || cuisineFilter !== 'all' || searchQuery) && (\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <span className=\"text-sm text-gray-500 dark:text-gray-400\">Active filters:</span>\n            \n            {searchQuery && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"h-7 px-2 text-xs rounded-full\"\n                onClick={() => setSearchQuery('')}\n              >\n                Search: {searchQuery}\n                <X className=\"ml-1 h-3 w-3\" />\n              </Button>\n            )}\n            \n            {locationFilter !== 'all' && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"h-7 px-2 text-xs rounded-full\"\n                onClick={() => setLocationFilter('all')}\n              >\n                Location: {locationFilter}\n                <X className=\"ml-1 h-3 w-3\" />\n              </Button>\n            )}\n            \n            {priceRangeFilter !== 'all' && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"h-7 px-2 text-xs rounded-full\"\n                onClick={() => setPriceRangeFilter('all')}\n              >\n                Price: {priceRangeFilter}\n                <X className=\"ml-1 h-3 w-3\" />\n              </Button>\n            )}\n            \n            {cuisineFilter !== 'all' && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"h-7 px-2 text-xs rounded-full\"\n                onClick={() => setCuisineFilter('all')}\n              >\n                Cuisine: {cuisineFilter}\n                <X className=\"ml-1 h-3 w-3\" />\n              </Button>\n            )}\n            \n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              className=\"h-7 text-xs text-blue-600 hover:text-blue-800\"\n              onClick={resetFilters}\n            >\n              Reset all\n            </Button>\n          </div>\n        )}\n\n        {/* Restaurant Display - Table or Grid */}\n        {viewMode === 'grid' ? (\n          <RestaurantsContent\n            filteredRestaurants={filteredRestaurants}\n            currentRestaurants={currentRestaurants}\n            currentPage={currentPage}\n            totalPages={totalPages}\n            onViewDetails={handleViewDetails}\n            onEdit={handleEditRestaurant}\n            onDelete={handleDeleteClick}\n            onAddRestaurant={handleAddRestaurant}\n            onNextPage={nextPage}\n            onPrevPage={prevPage}\n          />\n        ) : (\n          <div className=\"rounded-md border\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Location</TableHead>\n                  <TableHead>Cuisine</TableHead>\n                  <TableHead>Price</TableHead>\n                  <TableHead>Operating Hours</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {currentRestaurants.length > 0 ? (\n                  currentRestaurants.map((restaurant) => (\n                    <TableRow key={restaurant.id}>\n                      <TableCell className=\"font-medium\">\n                        <div className=\"flex items-center\">\n                          {restaurant.name}\n                          {restaurant.isPreferred && (\n                            <Badge className=\"ml-2 bg-red-500 hover:bg-red-600 text-xs\">Preferred</Badge>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>{restaurant.location || `${restaurant.city}, ${restaurant.country}`}</TableCell>\n                      <TableCell>\n                        <div className=\"flex flex-wrap gap-1\">\n                          {restaurant.cuisineTypes.slice(0, 2).map((cuisine) => (\n                            <Badge key={cuisine} variant=\"outline\" className=\"text-xs\">\n                              {cuisine}\n                            </Badge>\n                          ))}\n                          {restaurant.cuisineTypes.length > 2 && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              +{restaurant.cuisineTypes.length - 2}\n                            </Badge>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        {(restaurant.priceRange || restaurant.priceCategory)}  {restaurant.currencySymbol}{restaurant.averagePrice ?? restaurant.averageCost}\n                      </TableCell>\n                      <TableCell>{restaurant.openingHours || `${restaurant.openingTime} - ${restaurant.closingTime}`}</TableCell>\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex justify-end gap-2\">\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\"\n                            onClick={() => handleViewDetails(restaurant)}\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </Button>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\"\n                            onClick={() => handleEditRestaurant(restaurant)}\n                            className=\"text-blue-600\"\n                          >\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\"\n                            onClick={() => handleDeleteClick(restaurant)}\n                            className=\"text-red-600\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"text-center py-6\">\n                      <div className=\"flex flex-col items-center justify-center\">\n                        <Utensils className=\"h-12 w-12 text-gray-300 mb-4\" />\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-1\">No restaurants found</h3>\n                        <p className=\"text-gray-500 dark:text-gray-400 text-center max-w-sm\">\n                          There are no restaurants matching your search criteria. Try adjusting your filters or add a new restaurant.\n                        </p>\n                        <Button \n                          className=\"mt-4 bg-brand-blue hover:bg-brand-blue/90\"\n                          onClick={handleAddRestaurant}\n                        >\n                          <Plus className=\"mr-2 h-4 w-4\" />\n                          Add Restaurant\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n\n            {/* Enhanced Table Pagination */}\n            {filteredRestaurants.length > 0 && totalPages > 1 && (\n              <div className=\"flex flex-col md:flex-row items-center justify-between py-4 px-4 border-t\">\n                <div className=\"text-sm text-muted-foreground mb-4 md:mb-0\">\n                  Showing {indexOfFirstRestaurant + 1} to {Math.min(indexOfLastRestaurant, filteredRestaurants.length)} of {filteredRestaurants.length} restaurants\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  <Select\n                    value={itemsPerPage.toString()}\n                    onValueChange={(value) => setItemsPerPage(Number(value))}\n                  >\n                    <SelectTrigger className=\"h-8 w-[70px]\">\n                      <SelectValue placeholder={itemsPerPage.toString()} />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"6\">6</SelectItem>\n                      <SelectItem value=\"10\">10</SelectItem>\n                      <SelectItem value=\"20\">20</SelectItem>\n                      <SelectItem value=\"50\">50</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  \n                  <Pagination>\n                    <PaginationContent>\n                      <PaginationItem>\n                        <PaginationPrevious \n                          onClick={prevPage} \n                          className={currentPage === 1 ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                        />\n                      </PaginationItem>\n                      \n                      {getPageNumbers().map((page, index) => (\n                        page === 'ellipsis1' || page === 'ellipsis2' ? (\n                          <PaginationItem key={`ellipsis-${index}`}>\n                            <PaginationEllipsis />\n                          </PaginationItem>\n                        ) : (\n                          <PaginationItem key={`page-${page}`}>\n                            <PaginationLink\n                              onClick={() => typeof page === 'number' && goToPage(page)}\n                              isActive={currentPage === page}\n                            >\n                              {page}\n                            </PaginationLink>\n                          </PaginationItem>\n                        )\n                      ))}\n                      \n                      <PaginationItem>\n                        <PaginationNext \n                          onClick={nextPage} \n                          className={currentPage === totalPages ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"}\n                        />\n                      </PaginationItem>\n                    </PaginationContent>\n                  </Pagination>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Restaurant Details Dialog */}\n        {selectedRestaurant && (\n          <RestaurantDetailsDialog\n            restaurant={selectedRestaurant}\n            isOpen={isDetailsDialogOpen}\n            onClose={() => setIsDetailsDialogOpen(false)}\n            onEdit={() => {\n              setIsDetailsDialogOpen(false);\n              handleEditRestaurant(selectedRestaurant);\n            }}\n          />\n        )}\n\n        {/* Delete Confirmation Dialog */}\n        <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Are you sure you want to delete this restaurant?</AlertDialogTitle>\n              <AlertDialogDescription>\n                This action cannot be undone. This will permanently delete the restaurant\n                and remove it from the system.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel>Cancel</AlertDialogCancel>\n              <AlertDialogAction \n                onClick={handleDeleteConfirm}\n                className=\"bg-red-600 hover:bg-red-700\"\n              >\n                Delete\n              </AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n\n        {/* Import/Export Drawer */}\n        <ImportExportDrawer\n          open={isImportExportOpen}\n          onOpenChange={setIsImportExportOpen}\n          restaurants={restaurants}\n          filteredRestaurants={filteredRestaurants}\n          saveRestaurants={saveRestaurants}\n          setRestaurants={setRestaurants}\n          onImportComplete={handleImportComplete}\n        />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default RestaurantsPage;\n","\nimport React, { useState } from 'react';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card } from '@/components/ui/card';\nimport TransportRoutesTab from './routes/TransportRoutesTab';\nimport TransportTypesTab from './types/TransportTypesTab';\nimport LocationCodesManager from './locationCodes/LocationCodesManager';\nimport TransportErrorBoundary from '@/components/error/TransportErrorBoundary';\n\nconst TransportTabs: React.FC = () => {\n  const [activeTab, setActiveTab] = useState(\"routes\");\n\n  return (\n    <Tabs defaultValue=\"routes\" value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n      <div className=\"mb-4 mt-2\">\n        <h1 className=\"text-2xl font-bold mb-2\">Transport Management</h1>\n        <p className=\"text-sm text-muted-foreground\">Manage transport routes, types, and location codes</p>\n      </div>\n      <TabsList className=\"grid grid-cols-3 w-full max-w-md mb-4\">\n        <TabsTrigger value=\"routes\">Routes</TabsTrigger>\n        <TabsTrigger value=\"types\">Transport Types</TabsTrigger>\n        <TabsTrigger value=\"locations\">Location Codes</TabsTrigger>\n      </TabsList>\n      <Card className=\"p-4\">\n        <TabsContent value=\"routes\" className=\"mt-0\">\n          <TransportErrorBoundary>\n            <TransportRoutesTab />\n          </TransportErrorBoundary>\n        </TabsContent>\n        <TabsContent value=\"types\" className=\"mt-0\">\n          <TransportTypesTab />\n        </TabsContent>\n        <TabsContent value=\"locations\" className=\"mt-0\">\n          <LocationCodesManager />\n        </TabsContent>\n      </Card>\n    </Tabs>\n  );\n};\n\nexport default TransportTabs;\n","\nimport React from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport TransportTabs from './transport/components/TransportTabs';\n\nconst TransportPage: React.FC = () => {\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-4 px-2 sm:px-6\">\n        <TransportTabs />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default TransportPage;\n","/**\n * Utility functions for handling country flag URLs\n */\n\n/**\n * Generates a flag URL from flagcdn.com based on country code\n * @param countryCode - ISO 3166-1 alpha-2 country code (e.g., 'US', 'GB', 'IN')\n * @param size - Flag size: 'w20', 'w40', 'w80', 'w160', 'w320', 'w640', 'w1280'\n * @returns Flag URL from flagcdn.com\n */\nexport function generateFlagUrl(countryCode: string, size: string = 'w40'): string {\n  if (!countryCode || countryCode.length !== 2) {\n    return '';\n  }\n  \n  // Convert to lowercase as required by flagcdn.com\n  const code = countryCode.toLowerCase();\n  return `https://flagcdn.com/${size}/${code}.png`;\n}\n\n/**\n * Gets the flag URL for a country, either from the stored flagUrl or generates one from country code\n * @param country - Country object with code and optional flagUrl\n * @param size - Flag size for generated URL\n * @returns Flag URL string\n */\nexport function getFlagUrl(country: { code?: string; flagUrl?: string }, size: string = 'w40'): string {\n  // If flagUrl is already set and not empty, use it (prioritize database data)\n  if (country.flagUrl && country.flagUrl.trim() && country.flagUrl !== '') {\n    return country.flagUrl;\n  }\n  \n  // Otherwise, generate from country code if available\n  if (country.code && country.code.trim()) {\n    return generateFlagUrl(country.code, size);\n  }\n  \n  // Fallback to empty string\n  return '';\n}\n\n/**\n * Updates a country object with a generated flag URL if it doesn't have one\n * @param country - Country object to update\n * @param size - Flag size for generated URL\n * @returns Updated country object with flagUrl\n */\nexport function ensureFlagUrl<T extends { code?: string; flagUrl?: string }>(\n  country: T, \n  size: string = 'w40'\n): T {\n  // Only generate flag URL if none exists and we have a valid country code\n  if ((!country.flagUrl || country.flagUrl.trim() === '') && country.code && country.code.trim()) {\n    return {\n      ...country,\n      flagUrl: generateFlagUrl(country.code, size)\n    };\n  }\n  \n  return country;\n}","\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Eye, Edit, Trash2, ChevronLeft, ChevronRight, ToggleLeft, AlertTriangle } from \"lucide-react\";\nimport { Country } from '../types/country';\nimport { cn } from \"@/lib/utils\";\nimport { getFlagUrl } from '../utils/flagUtils';\nimport { getCurrencyDisplayInfo } from '../utils/currencyUtils';\n\ninterface CountriesTableProps {\n  countries: Country[];\n  loading?: boolean;\n  currentPage: number;\n  totalPages: number;\n  itemsPerPage?: number;\n  totalCountries?: number;\n  selectedCountries?: string[];\n  onNextPage: () => void;\n  onPrevPage: () => void;\n  onPageSelect: (page: number) => void;\n  onItemsPerPageChange?: (itemsPerPage: number) => void;\n  onView: (country: Country) => void;\n  onEdit: (country: Country) => void;\n  onDelete: (country: Country) => void;\n  onToggleStatus: (id: string) => void;\n  onSelectCountry?: (id: string) => void;\n  onSelectAll?: (selected: boolean) => void;\n  onBulkDelete?: (ids: string[]) => void;\n  onBulkToggleStatus?: (ids: string[]) => void;\n  onBulkEdit?: () => void;\n}\n\nconst CountriesTable: React.FC<CountriesTableProps> = ({\n  countries,\n  loading,\n  currentPage,\n  totalPages,\n  itemsPerPage = 5,\n  totalCountries,\n  selectedCountries = [],\n  onNextPage,\n  onPrevPage,\n  onPageSelect,\n  onItemsPerPageChange,\n  onView,\n  onEdit,\n  onDelete,\n  onToggleStatus,\n  onSelectCountry,\n  onSelectAll,\n  onBulkDelete,\n  onBulkToggleStatus,\n  onBulkEdit\n}) => {\n  // State for confirmation dialog\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const [countryToToggle, setCountryToToggle] = useState<Country | null>(null);\n\n  // Handle toggle status with confirmation\n  const handleToggleStatusClick = (country: Country) => {\n    setCountryToToggle(country);\n    setShowConfirmDialog(true);\n  };\n\n  const confirmToggleStatus = () => {\n    if (countryToToggle) {\n      onToggleStatus(countryToToggle.id);\n    }\n    setShowConfirmDialog(false);\n    setCountryToToggle(null);\n  };\n\n  const cancelToggleStatus = () => {\n    setShowConfirmDialog(false);\n    setCountryToToggle(null);\n  };\n  const isAllSelected = countries.length > 0 && countries.every(country => selectedCountries.includes(country.id));\n  const isIndeterminate = selectedCountries.length > 0 && !isAllSelected;\n\n  const handleSelectAll = (checked: boolean) => {\n    if (onSelectAll) {\n      onSelectAll(checked);\n    }\n  };\n\n  const handleSelectCountry = (id: string) => {\n    if (onSelectCountry) {\n      onSelectCountry(id);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"rounded-lg border border-border bg-card\">\n          <Table>\n            <TableHeader>\n              <TableRow className=\"border-border\">\n                <TableHead className=\"w-12\">\n                  <div className=\"h-4 bg-muted rounded animate-pulse\"></div>\n                </TableHead>\n                <TableHead className=\"w-16\">\n                  <div className=\"h-4 bg-muted rounded w-8 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-20 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-16 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-24 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-20 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-16 animate-pulse\"></div>\n                </TableHead>\n                <TableHead>\n                  <div className=\"h-4 bg-muted rounded w-20 animate-pulse\"></div>\n                </TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {[...Array(5)].map((_, i) => (\n                <TableRow key={i} className=\"border-border\">\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-8 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-24 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-12 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-20 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-20 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"h-4 bg-muted rounded w-16 animate-pulse\"></div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex space-x-2\">\n                      <div className=\"h-8 bg-muted rounded w-8 animate-pulse\"></div>\n                      <div className=\"h-8 bg-muted rounded w-8 animate-pulse\"></div>\n                      <div className=\"h-8 bg-muted rounded w-8 animate-pulse\"></div>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Bulk Operations Bar */}\n      {selectedCountries.length > 0 && (\n        <div className=\"bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n              {selectedCountries.length} {selectedCountries.length === 1 ? 'country' : 'countries'} selected\n            </span>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onBulkEdit?.()}\n                className=\"border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50\"\n              >\n                <Edit className=\"h-4 w-4 mr-2\" />\n                Edit Selected\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => onBulkToggleStatus?.(selectedCountries)}\n                className=\"border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50\"\n              >\n                <ToggleLeft className=\"h-4 w-4 mr-2\" />\n                Toggle Status\n              </Button>\n              <Button\n                variant=\"destructive\"\n                size=\"sm\"\n                onClick={() => onBulkDelete?.(selectedCountries)}\n              >\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                Delete Selected\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Desktop Table View - Hidden on mobile */}\n      <div className=\"hidden md:block rounded-lg border border-border bg-card overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <Table className=\"min-w-full\">\n            <TableHeader>\n              <TableRow className=\"border-border bg-muted/50\">\n                <TableHead className=\"w-12 sticky left-0 bg-background z-20 shadow-sm\">\n                  <Checkbox\n                    checked={isAllSelected}\n                    ref={(el: HTMLButtonElement | null) => {\n                      if (el) (el as any).indeterminate = isIndeterminate;\n                    }}\n                    onCheckedChange={handleSelectAll}\n                  />\n                </TableHead>\n                <TableHead className=\"font-semibold text-foreground w-16 sticky left-12 bg-background z-20 shadow-sm\">#</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[150px] sticky left-28 bg-background z-20 shadow-sm\">Country</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[80px]\">Code</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[100px]\">Region</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[120px]\">Continent</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[100px]\">Currency</TableHead>\n                <TableHead className=\"font-semibold text-foreground min-w-[80px]\">Status</TableHead>\n                <TableHead className=\"font-semibold text-foreground text-center min-w-[120px] sticky right-0 bg-background z-20 shadow-sm\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n            {countries.map((country, index) => {\n              const isSelected = selectedCountries.includes(country.id);\n              const rowNumber = (currentPage - 1) * itemsPerPage + index + 1;\n              return (\n                <TableRow\n                  key={country.id}\n                  className={cn(\n                    \"border-border transition-all duration-200 hover:bg-muted/50\",\n                    isSelected && \"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 hover:from-blue-100 hover:to-indigo-100 dark:hover:from-blue-950/50 dark:hover:to-indigo-950/50 border-l-4 border-l-blue-500 dark:border-l-blue-400 shadow-sm\"\n                  )}\n                >\n                  <TableCell className={cn(\n                    \"sticky left-0 z-10 shadow-sm\",\n                    isSelected \n                      ? \"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30\" \n                      : \"bg-background\"\n                  )}>\n                    <Checkbox\n                      checked={isSelected}\n                      onCheckedChange={() => handleSelectCountry(country.id)}\n                      className={isSelected ? \"border-blue-500 dark:border-blue-400\" : \"\"}\n                    />\n                  </TableCell>\n                  <TableCell className={cn(\n                    \"sticky left-12 z-10 shadow-sm\",\n                    isSelected \n                      ? \"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30\" \n                      : \"bg-background\"\n                  )}>\n                    <span className={cn(\n                      \"text-sm font-mono\",\n                      isSelected ? \"text-blue-700 dark:text-blue-300 font-semibold\" : \"text-muted-foreground\"\n                    )}>\n                      {rowNumber}\n                    </span>\n                  </TableCell>\n                  <TableCell className={cn(\n                    \"sticky left-28 z-10 shadow-sm\",\n                    isSelected \n                      ? \"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30\" \n                      : \"bg-background\"\n                  )}>\n                    <div className=\"flex items-center gap-3\">\n                      <img\n                        src={getFlagUrl(country)}\n                        alt={`${country.name} flag`}\n                        className=\"w-6 h-4 object-cover rounded border border-border\"\n                        onError={(e) => {\n                          // Fallback to a default flag or hide if image fails to load\n                          const target = e.target as HTMLImageElement;\n                          target.style.display = 'none';\n                        }}\n                      />\n                      <span className=\"font-medium text-foreground\">{country.name}</span>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"font-mono text-sm bg-muted px-2 py-1 rounded text-foreground\">\n                      {country.code}\n                    </span>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"text-muted-foreground\">{country.region}</span>\n                  </TableCell>\n                  <TableCell>\n                    <span className=\"text-muted-foreground\">{country.continent}</span>\n                  </TableCell>\n                  <TableCell>\n                    {(() => {\n                      const currencyInfo = getCurrencyDisplayInfo(country);\n                      return (\n                        <div className=\"text-sm\">\n                          <span className=\"font-medium text-foreground\">{currencyInfo.displayCurrency}</span>\n                          <span className=\"text-muted-foreground ml-1\">({currencyInfo.displaySymbol})</span>\n                          {currencyInfo.hasPricingOverride && (\n                            <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">\n                              Pricing: {currencyInfo.pricingCurrency} ({currencyInfo.pricingSymbol})\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })()}\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center justify-center\">\n                      <Button\n                        variant={country.status === 'active' ? 'default' : 'outline'}\n                        size=\"sm\"\n                        onClick={() => onToggleStatus(country.id)}\n                        className={cn(\n                          \"transition-all duration-200 hover:scale-105\",\n                          country.status === 'active' \n                            ? 'bg-green-600 hover:bg-green-700 text-white border-green-600' \n                            : 'border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-800'\n                        )}\n                      >\n                        {country.status === 'active' ? 'Active' : 'Inactive'}\n                      </Button>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"sticky right-0 bg-background z-10 shadow-sm\">\n                    <div className=\"flex items-center justify-center gap-1\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onView(country)}\n                        className=\"h-8 w-8 p-0 hover:bg-muted\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onEdit(country)}\n                        className=\"h-8 w-8 p-0 hover:bg-muted\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => onDelete(country)}\n                        className=\"h-8 w-8 p-0 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-950/30\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n        </div>\n      </div>\n\n      {/* Enhanced Mobile Card View - Modern Design */}\n      <div className=\"md:hidden space-y-4\">\n        {countries.map((country, index) => {\n          const isSelected = selectedCountries.includes(country.id);\n          const rowNumber = (currentPage - 1) * itemsPerPage + index + 1;\n          return (\n            <div\n              key={country.id}\n              className={cn(\n                \"bg-gradient-to-br from-card to-card/80 border-2 border-border/50 rounded-xl p-5 space-y-4 transition-all duration-300 shadow-sm hover:shadow-md hover:border-border\",\n                isSelected && \"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-950/30 dark:to-blue-900/20 border-blue-300 dark:border-blue-600 shadow-blue-100 dark:shadow-blue-900/20\"\n              )}\n            >\n              {/* Enhanced Header with improved layout */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"relative\">\n                    <Checkbox\n                      checked={isSelected}\n                      onCheckedChange={() => handleSelectCountry(country.id)}\n                      className=\"h-5 w-5 border-2 data-[state=checked]:bg-primary data-[state=checked]:border-primary\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-mono bg-muted/80 text-muted-foreground px-2 py-1 rounded-md border\">\n                      #{rowNumber}\n                    </span>\n                    {country.status === 'active' && (\n                      <div className=\"h-2 w-2 bg-green-500 rounded-full animate-pulse\"></div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Enhanced Action Buttons */}\n                <div className=\"flex items-center gap-1 bg-muted/30 rounded-lg p-1\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => onView(country)}\n                    className=\"h-8 w-8 p-0 hover:bg-blue-100 dark:hover:bg-blue-900/30 hover:text-blue-600 dark:hover:text-blue-400 transition-colors\"\n                  >\n                    <Eye className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => onEdit(country)}\n                    className=\"h-8 w-8 p-0 hover:bg-amber-100 dark:hover:bg-amber-900/30 hover:text-amber-600 dark:hover:text-amber-400 transition-colors\"\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => onDelete(country)}\n                    className=\"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-100 dark:hover:bg-red-950/30 transition-colors\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              {/* Enhanced Country Info Section */}\n              <div className=\"bg-muted/20 rounded-lg p-3 border border-border/30\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"relative\">\n                    <img\n                      src={getFlagUrl(country)}\n                      alt={`${country.name} flag`}\n                      className=\"w-10 h-7 object-cover rounded-md border-2 border-border shadow-sm\"\n                      onError={(e) => {\n                        // Fallback to a default flag or hide if image fails to load\n                        const target = e.target as HTMLImageElement;\n                        target.style.display = 'none';\n                      }}\n                    />\n                    <div className=\"absolute -bottom-1 -right-1 w-3 h-3 bg-background border border-border rounded-full flex items-center justify-center\">\n                      <span className=\"text-[8px]\"></span>\n                    </div>\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-bold text-foreground text-lg leading-tight truncate\">{country.name}</h3>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <span className=\"font-mono bg-primary/10 text-primary px-2 py-0.5 rounded-md text-xs font-semibold border border-primary/20\">\n                        {country.code}\n                      </span>\n                      <span className=\"text-sm text-muted-foreground font-medium\">{country.region}</span>\n                      <span className=\"text-xs text-muted-foreground/80\"> {country.continent}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Enhanced Currency and Status Grid */}\n              <div className=\"grid grid-cols-1 gap-4\">\n                {/* Currency Information */}\n                <div className=\"bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"h-6 w-6 bg-amber-100 dark:bg-amber-900/50 rounded-md flex items-center justify-center\">\n                        <span className=\"text-amber-600 dark:text-amber-400 text-xs font-bold\"></span>\n                      </div>\n                      <span className=\"text-sm font-medium text-amber-800 dark:text-amber-200\">Currency</span>\n                    </div>\n                    <div className=\"text-right\">\n                      {(() => {\n                        const currencyInfo = getCurrencyDisplayInfo(country);\n                        return (\n                          <>\n                            <div className=\"text-sm font-bold text-amber-900 dark:text-amber-100\">\n                              {currencyInfo.displayCurrency} ({currencyInfo.displaySymbol})\n                            </div>\n                            {currencyInfo.hasPricingOverride && (\n                              <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1 bg-blue-100 dark:bg-blue-900/30 px-2 py-0.5 rounded-md border border-blue-200 dark:border-blue-800\">\n                                Pricing: {currencyInfo.pricingCurrency} ({currencyInfo.pricingSymbol})\n                              </div>\n                            )}\n                          </>\n                        );\n                      })()}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Status Information */}\n                <div className={cn(\n                  \"border rounded-lg p-3 transition-colors\",\n                  country.status === 'active' \n                    ? \"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border-green-200 dark:border-green-800\"\n                    : \"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800/50 dark:to-slate-800/50 border-gray-200 dark:border-gray-700\"\n                )}>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                      Status\n                    </span>\n                    <Button\n                      variant={country.status === 'active' ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => handleToggleStatusClick(country)}\n                      className={cn(\n                        \"transition-all duration-200 hover:scale-105\",\n                        country.status === 'active' \n                          ? 'bg-green-600 hover:bg-green-700 text-white border-green-600' \n                          : 'border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-800'\n                      )}\n                    >\n                      {country.status === 'active' ? 'Active' : 'Inactive'}\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Modern Unified Pagination Footer */}\n      <div className=\"bg-gradient-to-r from-card to-card/80 border border-border rounded-xl p-6 shadow-sm\">\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6\">\n          \n          {/* Left Section: Items per page & Info */}\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-4\">\n            {/* Items per page selector */}\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm font-medium text-muted-foreground\">Rows per page:</span>\n              <Select\n                value={itemsPerPage.toString()}\n                onValueChange={(value) => onItemsPerPageChange?.(parseInt(value))}\n              >\n                <SelectTrigger className=\"w-20 h-9 border-2 border-border/50 hover:border-border transition-colors\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"5\">5</SelectItem>\n                  <SelectItem value=\"10\">10</SelectItem>\n                  <SelectItem value=\"20\">20</SelectItem>\n                  <SelectItem value=\"50\">50</SelectItem>\n                  <SelectItem value=\"100\">100</SelectItem>\n                  <SelectItem value=\"200\">200</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            \n            {/* Results info */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-4 w-px bg-border\"></div>\n              <div className=\"text-sm text-muted-foreground\">\n                <span className=\"font-medium text-foreground\">\n                  {Math.min((currentPage - 1) * itemsPerPage + 1, countries.length)}{Math.min(currentPage * itemsPerPage, countries.length)}\n                </span>\n                {\" \"}of{\" \"}\n                <span className=\"font-medium text-foreground\">{countries.length}</span>\n                {\" \"}countries\n              </div>\n            </div>\n          </div>\n\n          {/* Right Section: Pagination Controls */}\n          {totalPages > 1 && (\n            <div className=\"flex items-center gap-3\">\n              {/* Page info for mobile */}\n              <div className=\"lg:hidden\">\n                <span className=\"text-sm font-medium text-muted-foreground\">\n                  Page {currentPage} of {totalPages}\n                </span>\n              </div>\n              \n              {/* Navigation buttons */}\n              <div className=\"flex items-center gap-1\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={onPrevPage}\n                  disabled={currentPage === 1}\n                  className=\"h-9 px-3 border-2 border-border/50 hover:border-border disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\n                >\n                  <ChevronLeft className=\"h-4 w-4\" />\n                  <span className=\"hidden sm:inline ml-1\">Previous</span>\n                </Button>\n                \n                {/* Page numbers - Enhanced responsive design */}\n                <div className=\"hidden sm:flex items-center gap-1 mx-2\">\n                  {(() => {\n                    const pages = [];\n                    const maxVisible = 5;\n                    \n                    if (totalPages <= maxVisible) {\n                      // Show all pages if total is small\n                      for (let i = 1; i <= totalPages; i++) {\n                        pages.push(i);\n                      }\n                    } else {\n                      // Smart pagination logic\n                      if (currentPage <= 3) {\n                        pages.push(1, 2, 3, 4, '...', totalPages);\n                      } else if (currentPage >= totalPages - 2) {\n                        pages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);\n                      } else {\n                        pages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);\n                      }\n                    }\n                    \n                    return pages.map((page, index) => {\n                      if (page === '...') {\n                        return (\n                          <span key={`ellipsis-${index}`} className=\"px-2 text-muted-foreground\">\n                            ...\n                          </span>\n                        );\n                      }\n                      \n                      return (\n                        <Button\n                          key={page}\n                          variant={page === currentPage ? \"default\" : \"outline\"}\n                          size=\"sm\"\n                          onClick={() => onPageSelect(page as number)}\n                          className={cn(\n                            \"w-9 h-9 p-0 border-2 transition-all duration-200\",\n                            page === currentPage\n                              ? \"bg-primary border-primary text-primary-foreground shadow-md\"\n                              : \"border-border/50 hover:border-border hover:bg-accent\"\n                          )}\n                        >\n                          {page}\n                        </Button>\n                      );\n                    });\n                  })()}\n                </div>\n                \n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={onNextPage}\n                  disabled={currentPage === totalPages}\n                  className=\"h-9 px-3 border-2 border-border/50 hover:border-border disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\n                >\n                  <span className=\"hidden sm:inline mr-1\">Next</span>\n                  <ChevronRight className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Status Toggle Confirmation Dialog */}\n      <Dialog open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5 text-amber-500\" />\n              Confirm Status Change\n            </DialogTitle>\n            <DialogDescription className=\"text-left\">\n              {countryToToggle && (\n                <>\n                  Are you sure you want to {countryToToggle.status === 'active' ? 'deactivate' : 'activate'}{' '}\n                  <span className=\"font-semibold text-foreground\">{countryToToggle.name}</span>?\n                  <br />\n                  <br />\n                  This will change the country status from{' '}\n                  <span className={cn(\n                    \"font-semibold\",\n                    countryToToggle.status === 'active' ? 'text-green-600' : 'text-gray-600'\n                  )}>\n                    {countryToToggle.status === 'active' ? 'Active' : 'Inactive'}\n                  </span>{' '}\n                  to{' '}\n                  <span className={cn(\n                    \"font-semibold\",\n                    countryToToggle.status === 'active' ? 'text-gray-600' : 'text-green-600'\n                  )}>\n                    {countryToToggle.status === 'active' ? 'Inactive' : 'Active'}\n                  </span>.\n                </>\n              )}\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={cancelToggleStatus}\n              className=\"w-full sm:w-auto\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={confirmToggleStatus}\n              className={cn(\n                \"w-full sm:w-auto\",\n                countryToToggle?.status === 'active'\n                  ? 'bg-red-600 hover:bg-red-700 text-white'\n                  : 'bg-green-600 hover:bg-green-700 text-white'\n              )}\n            >\n              {countryToToggle?.status === 'active' ? 'Deactivate' : 'Activate'} Country\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default CountriesTable;\n","\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogDescription\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Country } from '../../types/country';\nimport { AspectRatio } from \"@/components/ui/aspect-ratio\";\nimport { getCurrencyDisplayInfo } from '../../utils/currencyUtils';\n\ninterface CountryViewDrawerProps {\n  deleteDrawerOpen: boolean;\n  setDeleteDrawerOpen: (open: boolean) => void;\n  selectedCountry: Country;\n  handleConfirmDelete: () => void;\n}\n\nconst CountryViewDrawer: React.FC<CountryViewDrawerProps> = ({\n  deleteDrawerOpen,\n  setDeleteDrawerOpen,\n  selectedCountry,\n  handleConfirmDelete\n}) => {\n  return (\n    <Dialog open={deleteDrawerOpen} onOpenChange={setDeleteDrawerOpen}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {selectedCountry.flag_url && (\n              <div className=\"w-6 h-4 overflow-hidden rounded\">\n                <AspectRatio ratio={3/2}>\n                  <img \n                    src={selectedCountry.flag_url} \n                    alt={`${selectedCountry.name} flag`} \n                    className=\"object-cover w-full h-full\"\n                  />\n                </AspectRatio>\n              </div>\n            )}\n            {selectedCountry.name} ({selectedCountry.code})\n          </DialogTitle>\n          <DialogDescription>\n            Country details\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"grid gap-4 py-4\">\n          <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n            <span className=\"font-medium\">Continent:</span>\n            <span>{selectedCountry.continent}</span>\n          </div>\n          \n          <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n            <span className=\"font-medium\">Region:</span>\n            <span>{selectedCountry.region}</span>\n          </div>\n          \n          {(() => {\n            const currencyInfo = getCurrencyDisplayInfo(selectedCountry);\n            return (\n              <>\n                <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n                  <span className=\"font-medium\">Currency:</span>\n                  <span>{currencyInfo.displaySymbol} {currencyInfo.displayCurrency}</span>\n                </div>\n                \n                {/* Currency Override Section */}\n                {currencyInfo.hasPricingOverride && (\n                  <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n                    <span className=\"font-medium\">Pricing:</span>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-xs font-medium\">\n                        Override: {currencyInfo.pricingSymbol} {currencyInfo.pricingCurrency}\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </>\n            );\n          })()}\n          \n          <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n            <span className=\"font-medium\">Status:</span>\n            <span className={`px-2 py-1 rounded text-xs font-medium ${\n              selectedCountry.status === 'active' \n                ? 'bg-green-100 text-green-800' \n                : 'bg-red-100 text-red-800'\n            }`}>\n              {selectedCountry.status === 'active' ? 'Active' : 'Inactive'}\n            </span>\n          </div>\n          \n          <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n            <span className=\"font-medium\">Popular:</span>\n            <span>{selectedCountry.is_popular ? 'Yes' : 'No'}</span>\n          </div>\n          \n          <div className=\"grid grid-cols-[100px_1fr] items-center gap-4\">\n            <span className=\"font-medium\">Visa Required:</span>\n            <span>{selectedCountry.visa_required ? 'Yes' : 'No'}</span>\n          </div>\n          \n          {selectedCountry.languages && selectedCountry.languages.length > 0 && (\n            <div className=\"grid grid-cols-[100px_1fr] items-start gap-4\">\n              <span className=\"font-medium\">Languages:</span>\n              <div className=\"flex flex-wrap gap-1\">\n                {selectedCountry.languages.map((lang, idx) => (\n                  <span \n                    key={`${lang}-${idx}`} \n                    className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded\"\n                  >\n                    {lang}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => setDeleteDrawerOpen(false)}>\n            Close\n          </Button>\n          <Button onClick={handleConfirmDelete}>\n            Edit\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default CountryViewDrawer;\n","import React from 'react';\nimport { Country } from '../types/country';\n\ninterface FlagDisplayProps {\n  country: Country;\n  size?: 'small' | 'medium' | 'large';\n  className?: string;\n}\n\nconst FlagDisplay: React.FC<FlagDisplayProps> = ({ \n  country, \n  size = 'medium',\n  className = '' \n}) => {\n  const getSizeClasses = () => {\n    switch (size) {\n      case 'small':\n        return 'w-8 h-6';\n      case 'large':\n        return 'w-16 h-12';\n      default:\n        return 'w-12 h-8';\n    }\n  };\n\n  const fallbackSvg = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjI4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNiAxMEwyNCAxOE0yNCAxMEwxNiAxOCIgc3Ryb2tlPSIjOUI5QjlCIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K';\n\n  if (!country.flagUrl) {\n    return (\n      <div className={`${getSizeClasses()} bg-gray-100 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600 flex items-center justify-center ${className}`}>\n        <span className=\"text-xs text-gray-400\">No flag</span>\n      </div>\n    );\n  }\n\n  return (\n    <img\n      src={country.flagUrl}\n      alt={`${country.name} flag`}\n      className={`${getSizeClasses()} object-cover rounded border border-gray-200 dark:border-gray-600 shadow-sm ${className}`}\n      onError={(e) => {\n        e.currentTarget.src = fallbackSvg;\n      }}\n    />\n  );\n};\n\nexport default FlagDisplay;","\nimport React, { useState } from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetDescription,\n  SheetFooter\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Country } from '../types/country';\nimport { DollarSign, AlertCircle, Flag, Wand2 } from 'lucide-react';\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport FlagDisplay from './FlagDisplay';\nimport FlagGenerator from './FlagGenerator';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\n\ninterface CountryEditSheetProps {\n  formData: Country;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: () => void;\n  onChange: (field: keyof Country, value: any) => void;\n}\n\nconst CountryEditSheet: React.FC<CountryEditSheetProps> = ({\n  formData,\n  isOpen,\n  onClose,\n  onSave,\n  onChange\n}) => {\n  const [showFlagGenerator, setShowFlagGenerator] = useState(false);\n\n  const handleFlagUrlGenerated = (url: string) => {\n    onChange('flag_url', url);\n    setShowFlagGenerator(false);\n  };\n\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-[400px] sm:w-[540px] overflow-y-auto\">\n        <SheetHeader className=\"pb-6\">\n          <SheetTitle className=\"flex items-center gap-2\">\n            <DollarSign className=\"h-5 w-5\" />\n            Edit Country\n          </SheetTitle>\n          <SheetDescription>\n            Update country details and currency pricing settings\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-6 py-4\">\n          {/* Basic Information Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Basic Information</h3>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Country Name</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => onChange('name', e.target.value)}\n                placeholder=\"e.g., United Arab Emirates\"\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"code\">Country Code</Label>\n                <Input\n                  id=\"code\"\n                  value={formData.code}\n                  onChange={(e) => onChange('code', e.target.value)}\n                  placeholder=\"ISO code (e.g., AE, TH)\"\n                  className=\"font-mono\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"region\">Region</Label>\n                <Input\n                  id=\"region\"\n                  value={formData.region}\n                  onChange={(e) => onChange('region', e.target.value)}\n                  placeholder=\"e.g., Southeast Asia, Middle East\"\n                />\n              </div>\n            </div>\n\n            {/* Flag Display */}\n            <div className=\"space-y-3\">\n              <Label className=\"flex items-center gap-2\">\n                <Flag className=\"h-4 w-4\" />\n                Flag\n              </Label>\n              \n              <div className=\"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border\">\n                <FlagDisplay country={formData} size=\"medium\" />\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n                    {formData.name || 'Country Name'}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"continent\">Continent</Label>\n              <Input\n                id=\"continent\"\n                value={formData.continent}\n                onChange={(e) => onChange('continent', e.target.value)}\n                placeholder=\"e.g., Asia, Europe\"\n              />\n            </div>\n          </div>\n\n          {/* Default Currency Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Default Currency</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currency\">Currency Code</Label>\n                <Input\n                  id=\"currency\"\n                  value={formData.currency}\n                  onChange={(e) => onChange('currency', e.target.value)}\n                  placeholder=\"e.g., AED, THB\"\n                  className=\"font-mono\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currencySymbol\">Currency Symbol</Label>\n                <Input\n                  id=\"currencySymbol\"\n                  value={formData.currency_symbol}\n                  onChange={(e) => onChange('currency_symbol', e.target.value)}\n                  placeholder=\"e.g., ., \"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Enhanced Pricing Currency Override Section */}\n          <div className=\"space-y-4 border rounded-lg p-4 bg-blue-50/30 dark:bg-blue-950/30 dark:border-blue-800\">\n            <div className=\"flex items-center gap-2\">\n              <DollarSign className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n              <h3 className=\"text-lg font-medium text-blue-900 dark:text-blue-100\">Pricing Currency Override</h3>\n            </div>\n            \n            <Alert className=\"border-blue-200 dark:border-blue-700 bg-blue-50/50 dark:bg-blue-950/50\">\n              <AlertCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n              <AlertDescription className=\"text-blue-800 dark:text-blue-200\">\n                Use this feature when you want to price services in a different currency than the country's default currency. This affects all pricing calculations and itineraries.\n              </AlertDescription>\n            </Alert>\n            \n            <div className=\"flex items-center justify-between pt-2\">\n              <div className=\"space-y-1\">\n                <Label htmlFor=\"pricingCurrencyOverride\" className=\"text-sm font-medium text-foreground\">\n                  Enable Pricing Currency Override\n                </Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Override the default currency for all pricing calculations\n                </p>\n              </div>\n              <Switch\n                id=\"pricingCurrencyOverride\"\n                checked={Boolean(formData.pricing_currency_override)}\n                onCheckedChange={(checked) => onChange('pricing_currency_override', checked)}\n              />\n            </div>\n\n            {formData.pricing_currency_override && (\n              <div className=\"space-y-4 pl-4 border-l-4 border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-900 p-4 rounded-r-lg\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"pricingCurrency\" className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n                      Pricing Currency Code\n                    </Label>\n                    <Input\n                      id=\"pricingCurrency\"\n                      value={formData.pricing_currency || ''}\n                      onChange={(e) => onChange('pricing_currency', e.target.value)}\n                      placeholder=\"e.g., USD, EUR, GBP\"\n                      className=\"border-blue-200 dark:border-blue-700 focus:border-blue-400 dark:focus:border-blue-500 bg-white dark:bg-gray-800\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"pricingCurrencySymbol\" className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n                      Pricing Currency Symbol\n                    </Label>\n                    <Input\n                      id=\"pricingCurrencySymbol\"\n                      value={formData.pricing_currency_symbol || ''}\n                      onChange={(e) => onChange('pricing_currency_symbol', e.target.value)}\n                      placeholder=\"e.g., $, , \"\n                      className=\"border-blue-200 dark:border-blue-700 focus:border-blue-400 dark:focus:border-blue-500 bg-white dark:bg-gray-800\"\n                    />\n                  </div>\n                </div>\n                \n                {formData.pricing_currency_override && formData.pricing_currency && (\n                  <div className=\"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-700 rounded-lg p-3\">\n                    <div className=\"flex items-center gap-2 text-green-800 dark:text-green-200\">\n                      <DollarSign className=\"h-4 w-4\" />\n                      <span className=\"text-sm font-medium\">\n                        All pricing will be calculated in {formData.pricing_currency} ({formData.pricing_currency_symbol})\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          \n          {/* Additional Information Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Additional Information</h3>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"flagUrl\">Flag URL</Label>\n              <Input\n                id=\"flagUrl\"\n                value={formData.flag_url || ''}\n                onChange={(e) => onChange('flag_url', e.target.value)}\n                placeholder=\"https://example.com/flag.png\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"languages\">Languages (comma separated)</Label>\n              <Input\n                id=\"languages\"\n                value={formData.languages?.join(', ') || ''}\n                onChange={(e) => onChange('languages', e.target.value.split(',').map(lang => lang.trim()))}\n                placeholder=\"English, Arabic, French\"\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex items-center justify-between pt-2\">\n                <Label htmlFor=\"isPopular\">Popular Destination</Label>\n                <Switch\n                  id=\"isPopular\"\n                  checked={formData.is_popular}\n                  onCheckedChange={(checked) => onChange('is_popular', checked)}\n                />\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-2\">\n                <Label htmlFor=\"visaRequired\">Visa Required</Label>\n                <Switch\n                  id=\"visaRequired\"\n                  checked={formData.visa_required}\n                  onCheckedChange={(checked) => onChange('visa_required', checked)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <SheetFooter className=\"pt-6 border-t\">\n          <Button variant=\"outline\" onClick={onClose} className=\"mr-2\">\n            Cancel\n          </Button>\n          <Button onClick={onSave} className=\"bg-blue-600 hover:bg-blue-700\">\n            Save Changes\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default CountryEditSheet;\n","import React, { useState, useEffect } from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Flag, Download, Copy, RefreshCw, Globe, AlertCircle } from 'lucide-react';\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface FlagGeneratorProps {\n  onFlagUrlGenerated?: (url: string) => void;\n  initialCountryCode?: string;\n  initialCountryName?: string;\n}\n\ntype FlagSize = 'w20' | 'w40' | 'w80' | 'w160' | 'w320' | 'w640' | 'w1280';\n\nconst FlagGenerator: React.FC<FlagGeneratorProps> = ({\n  onFlagUrlGenerated,\n  initialCountryCode = '',\n  initialCountryName = ''\n}) => {\n  const { toast } = useToast();\n  \n  const [countryCode, setCountryCode] = useState(initialCountryCode);\n  const [countryName, setCountryName] = useState(initialCountryName);\n  const [flagSize, setFlagSize] = useState<FlagSize>('w320');\n  const [generatedUrl, setGeneratedUrl] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [flagError, setFlagError] = useState(false);\n\n  // Common country codes for quick selection\n  const commonCountries = [\n    { code: 'US', name: 'United States' },\n    { code: 'GB', name: 'United Kingdom' },\n    { code: 'FR', name: 'France' },\n    { code: 'DE', name: 'Germany' },\n    { code: 'IT', name: 'Italy' },\n    { code: 'ES', name: 'Spain' },\n    { code: 'JP', name: 'Japan' },\n    { code: 'CN', name: 'China' },\n    { code: 'IN', name: 'India' },\n    { code: 'BR', name: 'Brazil' },\n    { code: 'CA', name: 'Canada' },\n    { code: 'AU', name: 'Australia' },\n    { code: 'RU', name: 'Russia' },\n    { code: 'KR', name: 'South Korea' },\n    { code: 'MX', name: 'Mexico' },\n    { code: 'AR', name: 'Argentina' },\n    { code: 'NL', name: 'Netherlands' },\n    { code: 'SE', name: 'Sweden' },\n    { code: 'NO', name: 'Norway' },\n    { code: 'CH', name: 'Switzerland' }\n  ];\n\n  const flagSizeOptions = [\n    { value: 'w20', label: '20px width', description: 'Very small' },\n    { value: 'w40', label: '40px width', description: 'Small' },\n    { value: 'w80', label: '80px width', description: 'Medium' },\n    { value: 'w160', label: '160px width', description: 'Large' },\n    { value: 'w320', label: '320px width', description: 'Extra Large' },\n    { value: 'w640', label: '640px width', description: 'HD' },\n    { value: 'w1280', label: '1280px width', description: 'Full HD' }\n  ];\n\n  // Generate flag URL using flagcdn.com API\n  const generateFlagUrl = (code: string, size: FlagSize = 'w320'): string => {\n    if (!code || code.length !== 2) {\n      throw new Error('Valid 2-letter country code is required');\n    }\n    return `https://flagcdn.com/${size}/${code.toLowerCase()}.png`;\n  };\n\n  // Convert image URL to base64 data URL for database storage\n  const convertToDataUrl = async (imageUrl: string): Promise<string> => {\n    try {\n      const response = await fetch(imageUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch flag: ${response.status}`);\n      }\n      \n      const blob = await response.blob();\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      });\n    } catch (error) {\n      throw new Error(`Failed to convert flag to data URL: ${error}`);\n    }\n  };\n\n  // Validate country code and generate flag\n  const generateDataUrl = async (): Promise<string> => {\n    if (!countryCode.trim()) {\n      throw new Error('Country code is required');\n    }\n\n    if (countryCode.length !== 2) {\n      throw new Error('Country code must be exactly 2 letters (ISO 3166-1 alpha-2)');\n    }\n\n    const flagUrl = generateFlagUrl(countryCode, flagSize);\n    return await convertToDataUrl(flagUrl);\n  };\n\n  const handleGenerate = async () => {\n    if (!countryCode.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a country code\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsGenerating(true);\n    setFlagError(false);\n    \n    try {\n      const dataUrl = await generateDataUrl();\n      setGeneratedUrl(dataUrl);\n      \n      if (onFlagUrlGenerated) {\n        onFlagUrlGenerated(dataUrl);\n      }\n      \n      toast({\n        title: \"Success\",\n        description: `Flag for ${countryCode.toUpperCase()} generated successfully!`,\n      });\n    } catch (error) {\n      setFlagError(true);\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to generate flag\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleCountrySelect = (selectedCountry: { code: string; name: string }) => {\n    setCountryCode(selectedCountry.code);\n    setCountryName(selectedCountry.name);\n    \n    // Auto-generate when country is selected\n    setTimeout(() => {\n      handleGenerate();\n    }, 100);\n  };\n\n  // Auto-generate when country code changes (if valid)\n  useEffect(() => {\n    if (countryCode.length === 2 && !isGenerating) {\n      const timeoutId = setTimeout(() => {\n        handleGenerate();\n      }, 500);\n      \n      return () => clearTimeout(timeoutId);\n    }\n  }, [countryCode, flagSize]);\n\n  const handleCopyUrl = async () => {\n    if (!generatedUrl) return;\n    \n    try {\n      await navigator.clipboard.writeText(generatedUrl);\n      toast({\n        title: \"URL Copied\",\n        description: \"Flag URL has been copied to clipboard\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Copy Failed\",\n        description: \"Failed to copy URL to clipboard\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleDownloadFlag = () => {\n    if (!generatedUrl) return;\n    \n    const link = document.createElement('a');\n    link.href = generatedUrl;\n    link.download = `flag-${countryCode.toLowerCase()}-${flagSize}.png`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    \n    toast({\n      title: \"Download Started\",\n      description: \"Flag image download has started\",\n    });\n  };\n\n\n\n  return (\n    <Card className=\"w-full max-w-4xl mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Globe className=\"h-5 w-5\" />\n          Flag Generator\n        </CardTitle>\n        <CardDescription>\n          Generate real flag images using flagcdn.com API and get data URLs for database storage\n        </CardDescription>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        {/* Country Information */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"countryCode\">Country Code (ISO 3166-1 alpha-2)</Label>\n            <Input\n              id=\"countryCode\"\n              value={countryCode}\n              onChange={(e) => setCountryCode(e.target.value.toUpperCase())}\n              placeholder=\"e.g., US, GB, FR\"\n              maxLength={2}\n              className=\"uppercase\"\n            />\n            {flagError && (\n              <Alert variant=\"destructive\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  Invalid country code. Please use a valid 2-letter ISO code.\n                </AlertDescription>\n              </Alert>\n            )}\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"countryName\">Country Name (Optional)</Label>\n            <Input\n              id=\"countryName\"\n              value={countryName}\n              onChange={(e) => setCountryName(e.target.value)}\n              placeholder=\"e.g., United States\"\n            />\n          </div>\n        </div>\n\n        {/* Flag Size Selection */}\n        <div className=\"space-y-2\">\n          <Label>Flag Size</Label>\n          <Select value={flagSize} onValueChange={(value: FlagSize) => setFlagSize(value)}>\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {flagSizeOptions.map((option) => (\n                <SelectItem key={option.value} value={option.value}>\n                  {option.label} - {option.description}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Quick Country Selection */}\n        <div className=\"space-y-3\">\n          <Label>Quick Country Selection</Label>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-2\">\n            {commonCountries.map((country) => (\n              <Button\n                key={country.code}\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleCountrySelect(country)}\n                className=\"text-xs justify-start\"\n                title={country.name}\n              >\n                <Flag className=\"h-3 w-3 mr-1\" />\n                {country.code}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* Preview */}\n        {generatedUrl && (\n          <div className=\"space-y-3\">\n            <Label>Preview</Label>\n            <div className=\"flex justify-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border\">\n              <img \n                src={generatedUrl} \n                alt={`Flag of ${countryCode}`}\n                className=\"max-w-xs border shadow-sm\"\n                style={{ aspectRatio: '3/2' }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Generated URL */}\n        {generatedUrl && (\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"generatedUrl\">Generated Flag URL</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"generatedUrl\"\n                value={generatedUrl}\n                readOnly\n                className=\"font-mono text-xs\"\n              />\n              <Button variant=\"outline\" size=\"sm\" onClick={handleCopyUrl}>\n                <Copy className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"sm\" onClick={handleDownloadFlag}>\n                <Download className=\"h-4 w-4\" />\n              </Button>\n            </div>\n            <p className=\"text-xs text-gray-500\">\n              This data URL can be stored directly in your database as the flag_url field.\n            </p>\n          </div>\n        )}\n\n        {/* Generate Button */}\n        <Button \n          onClick={handleGenerate} \n          disabled={isGenerating || !countryCode.trim() || countryCode.length !== 2}\n          className=\"w-full\"\n        >\n          {isGenerating ? (\n            <>\n              <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />\n              Loading Flag...\n            </>\n          ) : (\n            <>\n              <Globe className=\"mr-2 h-4 w-4\" />\n              Generate Flag from flagcdn.com\n            </>\n          )}\n        </Button>\n\n        {/* Preview and Results */}\n        {generatedUrl && (\n          <div className=\"space-y-4\">\n            <Label>Generated Flag</Label>\n            <div className=\"border rounded-lg p-4 bg-gray-50\">\n              <div className=\"flex flex-col items-center space-y-4\">\n                <img \n                  src={generatedUrl} \n                  alt={`Flag of ${countryName || countryCode}`}\n                  className=\"max-w-xs border border-gray-200 rounded shadow-sm\"\n                />\n                \n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={handleCopyUrl}\n                    className=\"flex items-center gap-1\"\n                  >\n                    <Copy className=\"h-3 w-3\" />\n                    Copy URL\n                  </Button>\n                  \n                  <Button\n                     variant=\"outline\"\n                     size=\"sm\"\n                     onClick={handleDownloadFlag}\n                     className=\"flex items-center gap-1\"\n                   >\n                     <Download className=\"h-3 w-3\" />\n                     Download\n                   </Button>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label>Data URL (for database)</Label>\n              <div className=\"p-3 bg-gray-100 rounded border text-xs font-mono break-all max-h-32 overflow-y-auto\">\n                {generatedUrl}\n              </div>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default FlagGenerator;","\nimport React, { useState } from 'react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetDescription,\n  SheetFooter\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Country } from '../types/country';\nimport { DollarSign, Plus, AlertCircle, Flag, Wand2 } from 'lucide-react';\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport FlagDisplay from './FlagDisplay';\nimport FlagGenerator from './FlagGenerator';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\n\ninterface CountryAddSheetProps {\n  formData: Omit<Country, 'id' | 'created_at' | 'updated_at'>;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: () => void;\n  onChange: (field: keyof Omit<Country, 'id' | 'created_at' | 'updated_at'>, value: any) => void;\n}\n\nconst CountryAddSheet: React.FC<CountryAddSheetProps> = ({\n  formData,\n  isOpen,\n  onClose,\n  onSave,\n  onChange\n}) => {\n  const [showFlagGenerator, setShowFlagGenerator] = useState(false);\n\n  const handleFlagUrlGenerated = (url: string) => {\n    onChange('flag_url', url);\n    setShowFlagGenerator(false);\n  };\n\n  const isFormValid = formData.name && formData.code && formData.currency && formData.currency_symbol;\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-[400px] sm:w-[540px] overflow-y-auto\">\n        <SheetHeader className=\"pb-6\">\n          <SheetTitle className=\"flex items-center gap-2\">\n            <Plus className=\"h-5 w-5\" />\n            Add New Country\n          </SheetTitle>\n          <SheetDescription>\n            Create a new country with currency and pricing settings\n          </SheetDescription>\n        </SheetHeader>\n        \n        <div className=\"space-y-6 py-4\">\n          {/* Basic Information Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Basic Information</h3>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Country Name *</Label>\n              <Input\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => onChange('name', e.target.value)}\n                placeholder=\"e.g., Thailand, Singapore\"\n                required\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"code\">Country Code *</Label>\n                <Input\n                  id=\"code\"\n                  value={formData.code}\n                  onChange={(e) => onChange('code', e.target.value.toUpperCase())}\n                  placeholder=\"TH, SG, AE\"\n                  className=\"font-mono\"\n                  maxLength={2}\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"region\">Region</Label>\n                <Input\n                  id=\"region\"\n                  value={formData.region}\n                  onChange={(e) => onChange('region', e.target.value)}\n                  placeholder=\"e.g., Southeast Asia, Middle East\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"continent\">Continent</Label>\n              <Input\n                id=\"continent\"\n                value={formData.continent}\n                onChange={(e) => onChange('continent', e.target.value)}\n                placeholder=\"e.g., Asia, Europe\"\n              />\n            </div>\n\n            {/* Flag Display */}\n            <div className=\"space-y-3\">\n              <Label className=\"flex items-center gap-2\">\n                <Flag className=\"h-4 w-4\" />\n                Flag\n              </Label>\n              \n              <div className=\"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border\">\n                <FlagDisplay country={formData as Country} size=\"medium\" />\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n                    {formData.name || 'Country Name'}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Default Currency Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Default Currency</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currency\">Currency Code *</Label>\n                <Input\n                  id=\"currency\"\n                  value={formData.currency}\n                  onChange={(e) => onChange('currency', e.target.value.toUpperCase())}\n                  placeholder=\"THB, USD, EUR\"\n                  className=\"font-mono\"\n                  maxLength={3}\n                  required\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currency_symbol\">Currency Symbol *</Label>\n                <Input\n                  id=\"currency_symbol\"\n                  value={formData.currency_symbol}\n                  onChange={(e) => onChange('currency_symbol', e.target.value)}\n                  placeholder=\", $, \"\n                  required\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Enhanced Pricing Currency Override Section */}\n          <div className=\"space-y-4 border rounded-lg p-4 bg-blue-50/30 dark:bg-blue-950/30 dark:border-blue-800\">\n            <div className=\"flex items-center gap-2\">\n              <DollarSign className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n              <h3 className=\"text-lg font-medium text-blue-900 dark:text-blue-100\">Pricing Currency Override</h3>\n            </div>\n            \n            <Alert className=\"border-blue-200 dark:border-blue-700 bg-blue-50/50 dark:bg-blue-950/50\">\n              <AlertCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n              <AlertDescription className=\"text-blue-800 dark:text-blue-200\">\n                Enable this when you want to price services in a different currency than the country's default currency. Perfect for countries where USD or EUR pricing is preferred.\n              </AlertDescription>\n            </Alert>\n            \n            <div className=\"flex items-center justify-between pt-2\">\n              <div className=\"space-y-1\">\n                <Label htmlFor=\"pricing_currency_override\" className=\"text-sm font-medium text-foreground\">\n                  Enable Pricing Currency Override\n                </Label>\n                <p className=\"text-xs text-muted-foreground\">\n                  Use a different currency for pricing calculations\n                </p>\n              </div>\n              <Switch\n                id=\"pricing_currency_override\"\n                key={`pricing-override-add-${formData.name || 'new'}`}\n                checked={Boolean(formData.pricing_currency_override)}\n                onCheckedChange={(checked) => {\n                  onChange('pricing_currency_override', checked);\n                  // Clear currency override fields when toggle is turned off\n                  if (!checked) {\n                    onChange('pricing_currency', '');\n                    onChange('pricing_currency_symbol', '');\n                  }\n                }}\n              />\n            </div>\n\n            {formData.pricing_currency_override && (\n              <div className=\"space-y-4 pl-4 border-l-4 border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-900 p-4 rounded-r-lg\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"pricing_currency\" className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n                      Pricing Currency Code\n                    </Label>\n                    <Input\n                      id=\"pricing_currency\"\n                      value={formData.pricing_currency || ''}\n                      onChange={(e) => onChange('pricing_currency', e.target.value.toUpperCase())}\n                      placeholder=\"e.g., USD, EUR, GBP\"\n                      className=\"border-blue-200 dark:border-blue-700 focus:border-blue-400 dark:focus:border-blue-500 bg-white dark:bg-gray-800 font-mono\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"pricing_currency_symbol\" className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n                      Pricing Currency Symbol\n                    </Label>\n                    <Input\n                      id=\"pricing_currency_symbol\"\n                      value={formData.pricing_currency_symbol || ''}\n                      onChange={(e) => onChange('pricing_currency_symbol', e.target.value)}\n                      placeholder=\"e.g., $, , \"\n                      className=\"border-blue-200 dark:border-blue-700 focus:border-blue-400 dark:focus:border-blue-500 bg-white dark:bg-gray-800\"\n                    />\n                  </div>\n                </div>\n                \n                {formData.pricing_currency_override && formData.pricing_currency && (\n                  <div className=\"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-700 rounded-lg p-3\">\n                    <div className=\"flex items-center gap-2 text-green-800 dark:text-green-200\">\n                      <DollarSign className=\"h-4 w-4\" />\n                      <span className=\"text-sm font-medium\">\n                        All pricing will be calculated in {formData.pricing_currency} ({formData.pricing_currency_symbol})\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          \n          {/* Additional Information Section */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-medium border-b pb-2\">Additional Information</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"flag_url\">Flag URL</Label>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setShowFlagGenerator(!showFlagGenerator)}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Wand2 className=\"h-4 w-4\" />\n                  {showFlagGenerator ? 'Hide Generator' : 'Generate Flag'}\n                </Button>\n              </div>\n              \n              <Input\n                id=\"flag_url\"\n                value={formData.flag_url || ''}\n                onChange={(e) => onChange('flag_url', e.target.value)}\n                placeholder=\"https://flagcdn.com/th.svg or data:image/svg+xml;base64,...\"\n              />\n              \n              {formData.flag_url && (\n                <div className=\"flex justify-center p-2 bg-gray-50 dark:bg-gray-800 rounded border\">\n                  <img \n                    src={formData.flag_url} \n                    alt={`Flag of ${formData.name || formData.code}`}\n                    className=\"max-w-24 h-auto border shadow-sm\"\n                    style={{ aspectRatio: '3/2' }}\n                    onError={(e) => {\n                      e.currentTarget.style.display = 'none';\n                    }}\n                  />\n                </div>\n              )}\n\n              <Collapsible open={showFlagGenerator} onOpenChange={setShowFlagGenerator}>\n                <CollapsibleContent className=\"space-y-4\">\n                  <div className=\"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800\">\n                    <FlagGenerator\n                      onFlagUrlGenerated={handleFlagUrlGenerated}\n                      initialCountryCode={formData.code}\n                      initialCountryName={formData.name}\n                    />\n                  </div>\n                </CollapsibleContent>\n              </Collapsible>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"languages\">Languages (comma separated)</Label>\n              <Input\n                id=\"languages\"\n                value={formData.languages?.join(', ') || ''}\n                onChange={(e) => onChange('languages', e.target.value.split(',').map(lang => lang.trim()))}\n                placeholder=\"English, Thai, Arabic\"\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex items-center justify-between pt-2\">\n                <Label htmlFor=\"is_popular\">Popular Destination</Label>\n                <Switch\n                  id=\"is_popular\"\n                  checked={formData.is_popular}\n                  onCheckedChange={(checked) => onChange('is_popular', checked)}\n                />\n              </div>\n              \n              <div className=\"flex items-center justify-between pt-2\">\n                <Label htmlFor=\"visa_required\">Visa Required</Label>\n                <Switch\n                  id=\"visa_required\"\n                  checked={formData.visa_required}\n                  onCheckedChange={(checked) => onChange('visa_required', checked)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <SheetFooter className=\"pt-6 border-t\">\n          <Button variant=\"outline\" onClick={onClose} className=\"mr-2\">\n            Cancel\n          </Button>\n          <Button \n            onClick={onSave} \n            disabled={!isFormValid}\n            className=\"bg-green-600 hover:bg-green-700\"\n          >\n            Add Country\n          </Button>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default CountryAddSheet;\n","\nimport React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { type Country } from '../../types/country';\n\ninterface CountryDeleteDrawerProps {\n  deleteDrawerOpen: boolean;\n  setDeleteDrawerOpen: (open: boolean) => void;\n  selectedCountry: Country | null;\n  handleConfirmDelete: () => void;\n  fileRef?: React.RefObject<HTMLInputElement>;\n}\n\nconst CountryDeleteDrawer: React.FC<CountryDeleteDrawerProps> = ({\n  deleteDrawerOpen,\n  setDeleteDrawerOpen,\n  selectedCountry,\n  handleConfirmDelete,\n  fileRef\n}) => {\n  return (\n    <Dialog open={deleteDrawerOpen} onOpenChange={setDeleteDrawerOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>\n            {fileRef ? \"Import Countries\" : selectedCountry ? \"Confirm Deletion\" : \"Add Country\"}\n          </DialogTitle>\n          <DialogDescription>\n            {fileRef ? \"Import countries from file\" : selectedCountry ? \"This action cannot be undone\" : \"Add a new country\"}\n          </DialogDescription>\n        </DialogHeader>\n        \n        {selectedCountry && !fileRef && (\n          <p className=\"py-4\">\n            Are you sure you want to delete {selectedCountry.name}? This action cannot be undone.\n          </p>\n        )}\n        \n        {fileRef && (\n          <div className=\"py-4\">\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              Upload a file containing country data to import.\n            </p>\n            <input \n              type=\"file\" \n              ref={fileRef}\n              className=\"w-full\"\n              accept=\".xlsx,.xls,.csv\"\n            />\n          </div>\n        )}\n        \n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => setDeleteDrawerOpen(false)}>\n            Cancel\n          </Button>\n          {!fileRef && (\n            <Button \n              variant={selectedCountry ? \"destructive\" : \"default\"}\n              onClick={handleConfirmDelete}\n            >\n              {selectedCountry ? \"Delete\" : \"Save\"}\n            </Button>\n          )}\n          {fileRef && (\n            <Button onClick={handleConfirmDelete}>\n              Import\n            </Button>\n          )}\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default CountryDeleteDrawer;\n","\nimport React from 'react';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Search, Filter, X } from 'lucide-react';\n\nexport type SearchType = 'all' | 'name' | 'code' | 'currency';\n\ninterface CountriesFiltersProps {\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  searchType: SearchType;\n  setSearchType: (type: SearchType) => void;\n  continentFilter: string;\n  setContinentFilter: (continent: string) => void;\n  statusFilter: string;\n  setStatusFilter: (status: string) => void;\n}\n\nconst CountriesFilters: React.FC<CountriesFiltersProps> = ({\n  searchQuery,\n  setSearchQuery,\n  searchType,\n  setSearchType,\n  continentFilter,\n  setContinentFilter,\n  statusFilter,\n  setStatusFilter,\n}) => {\n  const getSearchPlaceholder = () => {\n    switch (searchType) {\n      case 'name':\n        return 'Search by country name...';\n      case 'code':\n        return 'Search by country code (e.g., US, GB)...';\n      case 'currency':\n        return 'Search by currency code (e.g., USD, EUR)...';\n      default:\n        return 'Search countries...';\n    }\n  };\n\n  const handleClearSearch = () => {\n    setSearchQuery('');\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n      <div className=\"md:col-span-2 space-y-2\">\n        <div className=\"flex gap-2\">\n          <Select value={searchType} onValueChange={setSearchType}>\n            <SelectTrigger className=\"w-[180px]\">\n              <SelectValue placeholder=\"Search type\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Fields</SelectItem>\n              <SelectItem value=\"name\">Country Name</SelectItem>\n              <SelectItem value=\"code\">Country Code</SelectItem>\n              <SelectItem value=\"currency\">Currency Code</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <Input\n              placeholder={getSearchPlaceholder()}\n              className=\"pl-10 pr-10\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n            {searchQuery && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-gray-100\"\n                onClick={handleClearSearch}\n              >\n                <X className=\"h-4 w-4 text-gray-400\" />\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"flex items-center space-x-2\">\n        <Select value={continentFilter} onValueChange={setContinentFilter}>\n          <SelectTrigger className=\"w-full\">\n            <Filter className=\"h-4 w-4 mr-2 text-gray-400\" />\n            <SelectValue placeholder=\"Filter by continent\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Continents</SelectItem>\n            {Array.from(new Set([\"Asia\", \"Africa\", \"Europe\", \"North America\", \"South America\", \"Australia\", \"Antarctica\"])).map((continent) => (\n              <SelectItem key={continent} value={continent}>\n                {continent}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-full\">\n            <SelectValue placeholder=\"Filter by status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"active\">Active</SelectItem>\n            <SelectItem value=\"inactive\">Inactive</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n      \n\n    </div>\n  );\n};\n\nexport default CountriesFilters;\n","import { useState, useRef, useCallback } from 'react';\nimport { CountriesService, CountryRow } from '@/services/countriesService';\nimport { Country } from '../types/country';\nimport { mapDbCountriesToFrontend, mapFrontendCountryToDbInsert } from '@/services/countryMapper';\nimport * as XLSX from 'xlsx';\n\n// Enhanced interfaces for advanced import\nexport interface ImportValidationError {\n  row: number;\n  field: string;\n  value: any;\n  message: string;\n  severity: 'error' | 'warning' | 'info';\n  suggestion?: string;\n}\n\nexport interface ImportStatistics {\n  totalRecords: number;\n  validRecords: number;\n  invalidRecords: number;\n  duplicateRecords: number;\n  newRecords: number;\n  updateRecords: number;\n  skippedRecords: number;\n  processedRecords: number;\n}\n\nexport interface ImportProgress {\n  stage: 'idle' | 'parsing' | 'validating' | 'processing' | 'saving' | 'completed' | 'error';\n  percentage: number;\n  currentStep: string;\n  estimatedTimeRemaining?: number;\n  recordsProcessed: number;\n  totalRecords: number;\n}\n\nexport interface ProcessedCountryData {\n  id?: string;\n  name: string;\n  code: string;\n  continent: string;\n  region: string;\n  currency: string;\n  currency_symbol: string;\n  status: 'active' | 'inactive';\n  flag_url?: string;\n  is_popular?: boolean;\n  visa_required?: boolean;\n  pricing_currency_override?: boolean;\n  pricing_currency?: string;\n  pricing_currency_symbol?: string;\n  isNew: boolean;\n  isUpdate: boolean;\n  isDuplicate: boolean;\n  validationErrors: ImportValidationError[];\n  originalRowIndex: number;\n}\n\nexport interface ImportOptions {\n  mode: 'create_only' | 'update_only' | 'create_and_update' | 'preview_only';\n  skipDuplicates: boolean;\n  validateOnly: boolean;\n  batchSize: number;\n  allowPartialImport: boolean;\n  autoFixMinorErrors: boolean;\n}\n\ninterface UseAdvancedCountryImportProps {\n  onImportComplete?: (stats: ImportStatistics) => void;\n  onImportError?: (error: string) => void;\n  refreshCountries?: () => Promise<void>;\n  toast?: any;\n}\n\nexport const useAdvancedCountryImport = ({\n  onImportComplete,\n  onImportError,\n  refreshCountries,\n  toast\n}: UseAdvancedCountryImportProps) => {\n  // State management\n  const [isImporting, setIsImporting] = useState(false);\n  const [importProgress, setImportProgress] = useState<ImportProgress>({\n    stage: 'idle',\n    percentage: 0,\n    currentStep: 'Ready to import',\n    recordsProcessed: 0,\n    totalRecords: 0\n  });\n  const [importStatistics, setImportStatistics] = useState<ImportStatistics>({\n    totalRecords: 0,\n    validRecords: 0,\n    invalidRecords: 0,\n    duplicateRecords: 0,\n    newRecords: 0,\n    updateRecords: 0,\n    skippedRecords: 0,\n    processedRecords: 0\n  });\n  const [processedData, setProcessedData] = useState<ProcessedCountryData[]>([]);\n  const [validationErrors, setValidationErrors] = useState<ImportValidationError[]>([]);\n  const [importOptions, setImportOptions] = useState<ImportOptions>({\n    mode: 'create_and_update',\n    skipDuplicates: false,\n    validateOnly: false,\n    batchSize: 50,\n    allowPartialImport: true,\n    autoFixMinorErrors: true\n  });\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Validation functions\n  const validateCountryCode = (code: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    \n    if (!code || typeof code !== 'string') {\n      errors.push({\n        row: 0,\n        field: 'code',\n        value: code,\n        message: 'Country code is required',\n        severity: 'error'\n      });\n      return errors;\n    }\n\n    const cleanCode = code.trim().toUpperCase();\n    \n    if (cleanCode.length !== 2) {\n      errors.push({\n        row: 0,\n        field: 'code',\n        value: code,\n        message: 'Country code must be exactly 2 characters',\n        severity: 'error',\n        suggestion: 'Use ISO 3166-1 alpha-2 format (e.g., US, GB, FR)'\n      });\n    }\n\n    if (!/^[A-Z]{2}$/.test(cleanCode)) {\n      errors.push({\n        row: 0,\n        field: 'code',\n        value: code,\n        message: 'Country code must contain only letters',\n        severity: 'error',\n        suggestion: 'Use only uppercase letters (A-Z)'\n      });\n    }\n\n    return errors;\n  };\n\n  const validateCountryName = (name: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    \n    if (!name || typeof name !== 'string') {\n      errors.push({\n        row: 0,\n        field: 'name',\n        value: name,\n        message: 'Country name is required',\n        severity: 'error'\n      });\n      return errors;\n    }\n\n    const cleanName = name.trim();\n    \n    if (cleanName.length < 2) {\n      errors.push({\n        row: 0,\n        field: 'name',\n        value: name,\n        message: 'Country name must be at least 2 characters',\n        severity: 'error'\n      });\n    }\n\n    if (cleanName.length > 100) {\n      errors.push({\n        row: 0,\n        field: 'name',\n        value: name,\n        message: 'Country name must be less than 100 characters',\n        severity: 'error'\n      });\n    }\n\n    return errors;\n  };\n\n  const validateCurrency = (currency: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    \n    if (!currency || typeof currency !== 'string') {\n      errors.push({\n        row: 0,\n        field: 'currency',\n        value: currency,\n        message: 'Currency code is required',\n        severity: 'error'\n      });\n      return errors;\n    }\n\n    const cleanCurrency = currency.trim().toUpperCase();\n    \n    if (cleanCurrency.length !== 3) {\n      errors.push({\n        row: 0,\n        field: 'currency',\n        value: currency,\n        message: 'Currency code must be exactly 3 characters',\n        severity: 'error',\n        suggestion: 'Use ISO 4217 format (e.g., USD, EUR, GBP)'\n      });\n    }\n\n    if (!/^[A-Z]{3}$/.test(cleanCurrency)) {\n      errors.push({\n        row: 0,\n        field: 'currency',\n        value: currency,\n        message: 'Currency code must contain only letters',\n        severity: 'error'\n      });\n    }\n\n    return errors;\n  };\n\n  const validateStatus = (status: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    const validStatuses = ['active', 'inactive'];\n    \n    if (!status || typeof status !== 'string') {\n      errors.push({\n        row: 0,\n        field: 'status',\n        value: status,\n        message: 'Status is required',\n        severity: 'error'\n      });\n      return errors;\n    }\n\n    const cleanStatus = status.trim().toLowerCase();\n    \n    if (!validStatuses.includes(cleanStatus)) {\n      errors.push({\n        row: 0,\n        field: 'status',\n        value: status,\n        message: 'Status must be either \"active\" or \"inactive\"',\n        severity: 'error',\n        suggestion: 'Use \"active\" or \"inactive\"'\n      });\n    }\n\n    return errors;\n  };\n\n  const validateUrl = (url: string, fieldName: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    \n    if (!url) return errors; // Optional field\n    \n    try {\n      new URL(url);\n    } catch {\n      errors.push({\n        row: 0,\n        field: fieldName,\n        value: url,\n        message: 'Invalid URL format',\n        severity: 'warning',\n        suggestion: 'Ensure URL starts with http:// or https://'\n      });\n    }\n\n    return errors;\n  };\n\n  const validateBoolean = (value: any, fieldName: string): ImportValidationError[] => {\n    const errors: ImportValidationError[] = [];\n    \n    if (value === undefined || value === null || value === '') return errors; // Optional field\n    \n    const stringValue = String(value).toLowerCase().trim();\n    const validBooleans = ['true', 'false', '1', '0', 'yes', 'no'];\n    \n    if (!validBooleans.includes(stringValue)) {\n      errors.push({\n        row: 0,\n        field: fieldName,\n        value: value,\n        message: 'Invalid boolean value',\n        severity: 'warning',\n        suggestion: 'Use true/false, 1/0, or yes/no'\n      });\n    }\n\n    return errors;\n  };\n\n  // Data processing functions\n  const parseFileContent = async (file: File): Promise<any[]> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      \n      reader.onload = (e) => {\n        try {\n          const data = e.target?.result;\n          let jsonData: any[] = [];\n\n          if (file.name.endsWith('.csv')) {\n            // Parse CSV\n            const text = data as string;\n            const lines = text.split('\\n').filter(line => line.trim());\n            if (lines.length < 2) {\n              reject(new Error('CSV file must contain at least a header row and one data row'));\n              return;\n            }\n\n            const headers = lines[0].split(',').map(h => h.trim().replace(/\"/g, ''));\n            jsonData = lines.slice(1).map((line, index) => {\n              const values = line.split(',').map(v => v.trim().replace(/\"/g, ''));\n              const row: any = {};\n              headers.forEach((header, i) => {\n                row[header] = values[i] || '';\n              });\n              row._originalRowIndex = index + 2; // +2 because we skip header and arrays are 0-indexed\n              return row;\n            });\n          } else {\n            // Parse Excel\n            const workbook = XLSX.read(data, { type: 'binary' });\n            const sheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[sheetName];\n            jsonData = XLSX.utils.sheet_to_json(worksheet, { defval: '' });\n            \n            // Add row index for tracking\n            jsonData = jsonData.map((row, index) => ({\n              ...row,\n              _originalRowIndex: index + 2 // +2 because Excel rows start at 1 and we skip header\n            }));\n          }\n\n          // Normalize column headers to match expected format\n          jsonData = jsonData.map(row => normalizeRowHeaders(row));\n\n          resolve(jsonData);\n        } catch (error) {\n          reject(new Error(`Failed to parse file: ${error instanceof Error ? error.message : 'Unknown error'}`));\n        }\n      };\n\n      reader.onerror = () => reject(new Error('Failed to read file'));\n\n      if (file.name.endsWith('.csv')) {\n        reader.readAsText(file);\n      } else {\n        reader.readAsBinaryString(file);\n      }\n    });\n  };\n\n  // Normalize column headers from export format to import format\n  const normalizeRowHeaders = (row: any): any => {\n    const normalized: any = {};\n    \n    // Create mapping from export headers to import field names\n    const headerMapping: { [key: string]: string } = {\n      'Country Name': 'name',\n      'Country Code': 'code',\n      'Continent': 'continent',\n      'Region': 'region',\n      'Currency': 'currency',\n      'Currency Symbol': 'currency_symbol',\n      'Status': 'status',\n      'Flag URL': 'flag_url',\n      'Is Popular': 'is_popular',\n      'Visa Required': 'visa_required',\n      'Pricing Currency Override': 'pricing_currency_override',\n      'Pricing Currency': 'pricing_currency',\n      'Pricing Currency Symbol': 'pricing_currency_symbol'\n    };\n\n    // Map export headers to import field names\n    Object.keys(row).forEach(key => {\n      if (headerMapping[key]) {\n        let value = row[key];\n        \n        // Convert Yes/No to boolean for boolean fields\n        if (['Is Popular', 'Visa Required', 'Pricing Currency Override'].includes(key)) {\n          if (typeof value === 'string') {\n            const lowerValue = value.toLowerCase().trim();\n            value = lowerValue === 'yes' || lowerValue === 'true' || lowerValue === '1';\n          }\n        }\n        \n        normalized[headerMapping[key]] = value;\n      } else {\n        // Keep original key if no mapping found (for direct field names)\n        normalized[key] = row[key];\n      }\n    });\n\n    // Preserve special fields\n    if (row._originalRowIndex) {\n      normalized._originalRowIndex = row._originalRowIndex;\n    }\n\n    return normalized;\n  };\n\n  const normalizeBoolean = (value: any): boolean | undefined => {\n    if (value === undefined || value === null || value === '') return undefined;\n    \n    const stringValue = String(value).toLowerCase().trim();\n    \n    if (['true', '1', 'yes', 'y'].includes(stringValue)) return true;\n    if (['false', '0', 'no', 'n'].includes(stringValue)) return false;\n    \n    return undefined;\n  };\n\n  const processRawData = async (rawData: any[], existingCountries: Country[]): Promise<ProcessedCountryData[]> => {\n    const processed: ProcessedCountryData[] = [];\n    const existingCodes = new Set(existingCountries.map(c => c.code.toUpperCase()));\n    const existingNames = new Set(existingCountries.map(c => c.name.toLowerCase()));\n    const processedCodes = new Set<string>();\n    const processedNames = new Set<string>();\n\n    for (let i = 0; i < rawData.length; i++) {\n      const row = rawData[i];\n      const rowIndex = row._originalRowIndex || i + 2;\n      const errors: ImportValidationError[] = [];\n\n      // Extract and validate required fields\n      const name = row.name?.toString().trim() || '';\n      const code = row.code?.toString().trim().toUpperCase() || '';\n      const continent = row.continent?.toString().trim() || '';\n      const region = row.region?.toString().trim() || '';\n      const currency = row.currency?.toString().trim().toUpperCase() || '';\n      const currency_symbol = row.currency_symbol?.toString().trim() || '';\n      const status = row.status?.toString().trim().toLowerCase() || '';\n\n      // Extract optional fields\n      const flag_url = row.flag_url?.toString().trim() || '';\n      const is_popular = normalizeBoolean(row.is_popular);\n      const visa_required = normalizeBoolean(row.visa_required);\n      const pricing_currency_override = normalizeBoolean(row.pricing_currency_override);\n      const pricing_currency = row.pricing_currency?.toString().trim().toUpperCase() || '';\n      const pricing_currency_symbol = row.pricing_currency_symbol?.toString().trim() || '';\n\n      // Validate all fields\n      errors.push(...validateCountryName(name).map(e => ({ ...e, row: rowIndex })));\n      errors.push(...validateCountryCode(code).map(e => ({ ...e, row: rowIndex })));\n      errors.push(...validateCurrency(currency).map(e => ({ ...e, row: rowIndex })));\n      errors.push(...validateStatus(status).map(e => ({ ...e, row: rowIndex })));\n\n      if (flag_url) {\n        errors.push(...validateUrl(flag_url, 'flag_url').map(e => ({ ...e, row: rowIndex })));\n      }\n\n      if (row.is_popular !== undefined && row.is_popular !== null && row.is_popular !== '') {\n        errors.push(...validateBoolean(row.is_popular, 'is_popular').map(e => ({ ...e, row: rowIndex })));\n      }\n\n      if (row.visa_required !== undefined && row.visa_required !== null && row.visa_required !== '') {\n        errors.push(...validateBoolean(row.visa_required, 'visa_required').map(e => ({ ...e, row: rowIndex })));\n      }\n\n      if (row.pricing_currency_override !== undefined && row.pricing_currency_override !== null && row.pricing_currency_override !== '') {\n        errors.push(...validateBoolean(row.pricing_currency_override, 'pricing_currency_override').map(e => ({ ...e, row: rowIndex })));\n      }\n\n      // Validate required fields are not empty\n      if (!continent) {\n        errors.push({\n          row: rowIndex,\n          field: 'continent',\n          value: continent,\n          message: 'Continent is required',\n          severity: 'error'\n        });\n      }\n\n      if (!region) {\n        errors.push({\n          row: rowIndex,\n          field: 'region',\n          value: region,\n          message: 'Region is required',\n          severity: 'error'\n        });\n      }\n\n      if (!currency_symbol) {\n        errors.push({\n          row: rowIndex,\n          field: 'currency_symbol',\n          value: currency_symbol,\n          message: 'Currency symbol is required',\n          severity: 'error'\n        });\n      }\n\n      // Check for duplicates within the file\n      const isDuplicateCode = processedCodes.has(code);\n      const isDuplicateName = processedNames.has(name.toLowerCase());\n\n      if (isDuplicateCode && code) {\n        errors.push({\n          row: rowIndex,\n          field: 'code',\n          value: code,\n          message: 'Duplicate country code in file',\n          severity: 'error'\n        });\n      }\n\n      if (isDuplicateName && name) {\n        errors.push({\n          row: rowIndex,\n          field: 'name',\n          value: name,\n          message: 'Duplicate country name in file',\n          severity: 'warning'\n        });\n      }\n\n      // Check for duplicates with existing data\n      const isExistingCode = existingCodes.has(code);\n      const isExistingName = existingNames.has(name.toLowerCase());\n\n      if (isExistingCode && importOptions.mode === 'create_only') {\n        errors.push({\n          row: rowIndex,\n          field: 'code',\n          value: code,\n          message: 'Country code already exists (create-only mode)',\n          severity: 'error'\n        });\n      }\n\n      if (!isExistingCode && importOptions.mode === 'update_only') {\n        errors.push({\n          row: rowIndex,\n          field: 'code',\n          value: code,\n          message: 'Country code does not exist (update-only mode)',\n          severity: 'error'\n        });\n      }\n\n      // Add to processed sets\n      if (code) processedCodes.add(code);\n      if (name) processedNames.add(name.toLowerCase());\n\n      // Create processed data entry\n      const processedEntry: ProcessedCountryData = {\n        name,\n        code,\n        continent,\n        region,\n        currency,\n        currency_symbol,\n        status: (status === 'active' || status === 'inactive') ? status as 'active' | 'inactive' : 'active',\n        flag_url: flag_url || undefined,\n        is_popular,\n        visa_required,\n        pricing_currency_override,\n        pricing_currency: pricing_currency || undefined,\n        pricing_currency_symbol: pricing_currency_symbol || undefined,\n        isNew: !isExistingCode,\n        isUpdate: isExistingCode,\n        isDuplicate: isDuplicateCode || isDuplicateName,\n        validationErrors: errors,\n        originalRowIndex: rowIndex\n      };\n\n      processed.push(processedEntry);\n    }\n\n    return processed;\n  };\n\n  // Main import function\n  const handleFileImport = useCallback(async (file: File) => {\n    if (!file) return;\n\n    // Reset state\n    setIsImporting(true);\n    setValidationErrors([]);\n    setProcessedData([]);\n    setImportStatistics({\n      totalRecords: 0,\n      validRecords: 0,\n      invalidRecords: 0,\n      duplicateRecords: 0,\n      newRecords: 0,\n      updateRecords: 0,\n      skippedRecords: 0,\n      processedRecords: 0\n    });\n\n    // Create abort controller\n    abortControllerRef.current = new AbortController();\n\n    try {\n      // Stage 1: Parsing\n      setImportProgress({\n        stage: 'parsing',\n        percentage: 10,\n        currentStep: 'Parsing file content...',\n        recordsProcessed: 0,\n        totalRecords: 0\n      });\n\n      const rawData = await parseFileContent(file);\n      \n      if (rawData.length === 0) {\n        throw new Error('No data found in file');\n      }\n\n      // Stage 2: Validating\n      setImportProgress({\n        stage: 'validating',\n        percentage: 30,\n        currentStep: 'Validating data...',\n        recordsProcessed: 0,\n        totalRecords: rawData.length\n      });\n\n      // Get existing countries for duplicate checking\n      const existingCountriesResponse = await CountriesService.getAllCountries();\n      \n      if (!existingCountriesResponse.success || !existingCountriesResponse.data) {\n        throw new Error(existingCountriesResponse.error || 'Failed to fetch existing countries');\n      }\n      \n      // Map CountryRow[] to Country[] for processing\n      const existingCountries = mapDbCountriesToFrontend(existingCountriesResponse.data);\n      \n      // Process and validate data\n      const processed = await processRawData(rawData, existingCountries);\n      \n      // Calculate statistics\n      const stats: ImportStatistics = {\n        totalRecords: processed.length,\n        validRecords: processed.filter(p => p.validationErrors.filter(e => e.severity === 'error').length === 0).length,\n        invalidRecords: processed.filter(p => p.validationErrors.filter(e => e.severity === 'error').length > 0).length,\n        duplicateRecords: processed.filter(p => p.isDuplicate).length,\n        newRecords: processed.filter(p => p.isNew && p.validationErrors.filter(e => e.severity === 'error').length === 0).length,\n        updateRecords: processed.filter(p => p.isUpdate && p.validationErrors.filter(e => e.severity === 'error').length === 0).length,\n        skippedRecords: 0,\n        processedRecords: 0\n      };\n\n      // Collect all validation errors\n      const allErrors = processed.flatMap(p => p.validationErrors);\n\n      setProcessedData(processed);\n      setValidationErrors(allErrors);\n      setImportStatistics(stats);\n\n      // Stage 3: Completed validation\n      setImportProgress({\n        stage: 'completed',\n        percentage: 100,\n        currentStep: 'Validation completed',\n        recordsProcessed: processed.length,\n        totalRecords: processed.length\n      });\n\n      toast?.({\n        title: \"File Processed\",\n        description: `Processed ${stats.totalRecords} records. ${stats.validRecords} valid, ${stats.invalidRecords} with errors.`,\n      });\n\n    } catch (error) {\n      setImportProgress({\n        stage: 'error',\n        percentage: 0,\n        currentStep: 'Import failed',\n        recordsProcessed: 0,\n        totalRecords: 0\n      });\n\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      onImportError?.(errorMessage);\n      \n      toast?.({\n        title: \"Import Failed\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsImporting(false);\n      abortControllerRef.current = null;\n    }\n  }, [importOptions, onImportError, toast]);\n\n  // Execute import function\n  const executeImport = useCallback(async () => {\n    if (!processedData.length) return;\n\n    setIsImporting(true);\n    \n    try {\n      // Filter valid records based on import mode\n      const validRecords = processedData.filter(record => {\n        const hasErrors = record.validationErrors.filter(e => e.severity === 'error').length > 0;\n        if (hasErrors && !importOptions.allowPartialImport) return false;\n        \n        switch (importOptions.mode) {\n          case 'create_only':\n            return record.isNew && !hasErrors;\n          case 'update_only':\n            return record.isUpdate && !hasErrors;\n          case 'create_and_update':\n            return !hasErrors;\n          default:\n            return false;\n        }\n      });\n\n      if (validRecords.length === 0) {\n        throw new Error('No valid records to import');\n      }\n\n      // Stage 4: Processing\n      setImportProgress({\n        stage: 'processing',\n        percentage: 0,\n        currentStep: 'Processing records...',\n        recordsProcessed: 0,\n        totalRecords: validRecords.length\n      });\n\n      // Process in batches\n      const batchSize = importOptions.batchSize;\n      let processedCount = 0;\n      const results = [];\n\n      for (let i = 0; i < validRecords.length; i += batchSize) {\n        if (abortControllerRef.current?.signal.aborted) {\n          throw new Error('Import cancelled');\n        }\n\n        const batch = validRecords.slice(i, i + batchSize);\n        \n        // Update progress\n        setImportProgress(prev => ({\n          ...prev,\n          percentage: Math.round((processedCount / validRecords.length) * 80) + 10, // 10-90%\n          currentStep: `Processing batch ${Math.floor(i / batchSize) + 1} of ${Math.ceil(validRecords.length / batchSize)}...`,\n          recordsProcessed: processedCount\n        }));\n\n        // Process batch\n        for (const record of batch) {\n          try {\n            const countryData: Omit<Country, 'id'> = {\n              name: record.name,\n              code: record.code,\n              continent: record.continent,\n              region: record.region,\n              currency: record.currency,\n              currency_symbol: record.currency_symbol,\n              status: record.status,\n              flag_url: record.flag_url,\n              is_popular: record.is_popular ?? false,\n              visa_required: record.visa_required ?? false,\n              languages: [], // Default empty array for languages\n              pricing_currency_override: record.pricing_currency_override ?? false,\n              pricing_currency: record.pricing_currency,\n              pricing_currency_symbol: record.pricing_currency_symbol,\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString()\n            };\n\n            let result;\n            if (record.isNew) {\n              const mappedData = mapFrontendCountryToDbInsert(countryData);\n              result = await CountriesService.createCountry(mappedData);\n            } else {\n              // Find existing country by code\n              const existingCountriesResponse = await CountriesService.getAllCountries();\n              if (existingCountriesResponse.success && existingCountriesResponse.data) {\n                const existing = existingCountriesResponse.data.find(c => c.code === record.code);\n                if (existing) {\n                  const mappedData = mapFrontendCountryToDbInsert(countryData);\n                  result = await CountriesService.updateCountry(existing.id, mappedData);\n                }\n              }\n            }\n\n            results.push({ success: true, record, result });\n            processedCount++;\n          } catch (error) {\n            results.push({ \n              success: false, \n              record, \n              error: error instanceof Error ? error.message : 'Unknown error' \n            });\n          }\n        }\n\n        // Small delay to prevent overwhelming the API\n        await new Promise(resolve => setTimeout(resolve, 100));\n      }\n\n      // Stage 5: Saving\n      setImportProgress({\n        stage: 'saving',\n        percentage: 95,\n        currentStep: 'Finalizing import...',\n        recordsProcessed: processedCount,\n        totalRecords: validRecords.length\n      });\n\n      // Calculate final statistics\n      const finalStats: ImportStatistics = {\n        ...importStatistics,\n        processedRecords: results.filter(r => r.success).length,\n        skippedRecords: results.filter(r => !r.success).length\n      };\n\n      setImportStatistics(finalStats);\n\n      // Stage 6: Completed\n      setImportProgress({\n        stage: 'completed',\n        percentage: 100,\n        currentStep: 'Import completed successfully',\n        recordsProcessed: processedCount,\n        totalRecords: validRecords.length\n      });\n\n      // Refresh data\n      if (refreshCountries) {\n        await refreshCountries();\n      }\n\n      onImportComplete?.(finalStats);\n\n      toast?.({\n        title: \"Import Completed\",\n        description: `Successfully imported ${finalStats.processedRecords} of ${finalStats.totalRecords} records.`,\n      });\n\n    } catch (error) {\n      setImportProgress({\n        stage: 'error',\n        percentage: 0,\n        currentStep: 'Import failed',\n        recordsProcessed: 0,\n        totalRecords: 0\n      });\n\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      onImportError?.(errorMessage);\n      \n      toast?.({\n        title: \"Import Failed\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsImporting(false);\n    }\n  }, [processedData, importOptions, importStatistics, onImportComplete, onImportError, refreshCountries, toast]);\n\n  // Cancel import function\n  const cancelImport = useCallback(() => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    setIsImporting(false);\n    setImportProgress({\n      stage: 'idle',\n      percentage: 0,\n      currentStep: 'Ready to import',\n      recordsProcessed: 0,\n      totalRecords: 0\n    });\n  }, []);\n\n  // Reset function\n  const resetImport = useCallback(() => {\n    setProcessedData([]);\n    setValidationErrors([]);\n    setImportStatistics({\n      totalRecords: 0,\n      validRecords: 0,\n      invalidRecords: 0,\n      duplicateRecords: 0,\n      newRecords: 0,\n      updateRecords: 0,\n      skippedRecords: 0,\n      processedRecords: 0\n    });\n    setImportProgress({\n      stage: 'idle',\n      percentage: 0,\n      currentStep: 'Ready to import',\n      recordsProcessed: 0,\n      totalRecords: 0\n    });\n  }, []);\n\n  return {\n    // State\n    isImporting,\n    importProgress,\n    importStatistics,\n    processedData,\n    validationErrors,\n    importOptions,\n    fileInputRef,\n\n    // Actions\n    handleFileImport,\n    executeImport,\n    cancelImport,\n    resetImport,\n    setImportOptions,\n\n    // Computed values\n    hasValidData: processedData.length > 0 && importStatistics.validRecords > 0,\n    canExecuteImport: processedData.length > 0 && importStatistics.validRecords > 0 && !isImporting,\n    hasErrors: validationErrors.filter(e => e.severity === 'error').length > 0,\n    hasWarnings: validationErrors.filter(e => e.severity === 'warning').length > 0\n  };\n};","import React, { useState, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Upload, FileText, CheckCircle, AlertTriangle, X, Download, XCircle, Info, Settings, Play, Square, RotateCcw, Eye, TrendingUp, Clock, Users, Database, FileCheck, AlertCircle } from 'lucide-react';\nimport { useAdvancedCountryImport, ImportOptions } from '../hooks/useAdvancedCountryImport';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface AdvancedCountryImportProps {\n  refreshCountries?: () => Promise<void>;\n  trigger?: React.ReactNode;\n}\n\nconst AdvancedCountryImport: React.FC<AdvancedCountryImportProps> = ({\n  refreshCountries,\n  trigger\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeTab, setActiveTab] = useState('upload');\n  const { toast } = useToast();\n\n  const {\n    isImporting,\n    importProgress,\n    importStatistics,\n    processedData,\n    validationErrors,\n    importOptions,\n    fileInputRef,\n    handleFileImport,\n    executeImport,\n    cancelImport,\n    resetImport,\n    setImportOptions,\n    hasValidData,\n    canExecuteImport,\n    hasErrors,\n    hasWarnings\n  } = useAdvancedCountryImport({\n    refreshCountries,\n    toast,\n    onImportComplete: (stats) => {\n      toast({\n        title: \"Import Completed Successfully\",\n        description: `Imported ${stats.processedRecords} countries successfully.`,\n      });\n      setActiveTab('results');\n    },\n    onImportError: (error) => {\n      toast({\n        title: \"Import Failed\",\n        description: error,\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      handleFileImport(file);\n      setActiveTab('validation');\n    }\n  };\n\n  const handleOptionsChange = (key: keyof ImportOptions, value: any) => {\n    setImportOptions(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const downloadTemplate = () => {\n    const headers = [\n      'name',\n      'code',\n      'continent',\n      'region',\n      'currency',\n      'currency_symbol',\n      'status',\n      'flag_url',\n      'is_popular',\n      'visa_required',\n      'pricing_currency_override',\n      'pricing_currency'\n    ];\n\n    const sampleData = [\n      [\n        'United States',\n        'US',\n        'North America',\n        'Northern America',\n        'USD',\n        '$',\n        'active',\n        'https://flagcdn.com/us.svg',\n        'true',\n        'false',\n        'false',\n        ''\n      ],\n      [\n        'United Kingdom',\n        'GB',\n        'Europe',\n        'Northern Europe',\n        'GBP',\n        '',\n        'active',\n        'https://flagcdn.com/gb.svg',\n        'true',\n        'false',\n        'false',\n        ''\n      ]\n    ];\n\n    const csvContent = [headers, ...sampleData]\n      .map(row => row.map(cell => `\"${cell}\"`).join(','))\n      .join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'countries-import-template.csv';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const getErrorIcon = (severity: 'error' | 'warning' | 'info') => {\n    switch (severity) {\n      case 'error':\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\n      case 'info':\n        return <Info className=\"h-4 w-4 text-blue-500\" />;\n    }\n  };\n\n  const getStageIcon = (stage: string) => {\n    switch (stage) {\n      case 'parsing':\n        return <FileText className=\"h-4 w-4\" />;\n      case 'validating':\n        return <FileCheck className=\"h-4 w-4\" />;\n      case 'processing':\n        return <Database className=\"h-4 w-4\" />;\n      case 'saving':\n        return <Upload className=\"h-4 w-4\" />;\n      case 'completed':\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case 'error':\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return <Clock className=\"h-4 w-4\" />;\n    }\n  };\n\n  const StatCard = ({ title, value, icon, description, color = \"default\" }: {\n    title: string;\n    value: number;\n    icon: React.ReactNode;\n    description?: string;\n    color?: \"default\" | \"green\" | \"red\" | \"yellow\" | \"blue\";\n  }) => {\n    const colorClasses = {\n      default: \"border-gray-200\",\n      green: \"border-green-200 bg-green-50\",\n      red: \"border-red-200 bg-red-50\",\n      yellow: \"border-yellow-200 bg-yellow-50\",\n      blue: \"border-blue-200 bg-blue-50\"\n    };\n\n    return (\n      <Card className={`${colorClasses[color]}`}>\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">{title}</p>\n              <p className=\"text-2xl font-bold\">{value}</p>\n              {description && (\n                <p className=\"text-xs text-gray-500 mt-1\">{description}</p>\n              )}\n            </div>\n            <div className=\"text-gray-400\">\n              {icon}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        {trigger || (\n          <Button variant=\"outline\" className=\"gap-2\">\n            <Upload className=\"h-4 w-4\" />\n            Advanced Import\n          </Button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-6xl max-h-[90vh] overflow-hidden\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Advanced Country Import\n          </DialogTitle>\n          <DialogDescription>\n            Import countries from CSV or Excel files with advanced validation and processing options.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"upload\" className=\"gap-2\">\n              <Upload className=\"h-4 w-4\" />\n              Upload\n            </TabsTrigger>\n            <TabsTrigger value=\"validation\" className=\"gap-2\" disabled={!hasValidData && processedData.length === 0}>\n              <FileCheck className=\"h-4 w-4\" />\n              Validation\n            </TabsTrigger>\n            <TabsTrigger value=\"settings\" className=\"gap-2\">\n              <Settings className=\"h-4 w-4\" />\n              Settings\n            </TabsTrigger>\n            <TabsTrigger value=\"results\" className=\"gap-2\" disabled={importProgress.stage !== 'completed'}>\n              <TrendingUp className=\"h-4 w-4\" />\n              Results\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Upload Tab */}\n          <TabsContent value=\"upload\" className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Upload className=\"h-5 w-5\" />\n                    Upload File\n                  </CardTitle>\n                  <CardDescription>\n                    Select a CSV or Excel file containing country data\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <Upload className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-lg font-medium text-gray-900 mb-2\">\n                      Choose a file to upload\n                    </p>\n                    <p className=\"text-sm text-gray-500 mb-4\">\n                      Supports CSV and Excel files up to 10MB\n                    </p>\n                    <Button\n                      onClick={() => fileInputRef.current?.click()}\n                      disabled={isImporting}\n                      className=\"gap-2\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      Select File\n                    </Button>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".csv,.xlsx,.xls\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                  </div>\n\n                  {isImporting && (\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          {getStageIcon(importProgress.stage)}\n                          <span className=\"text-sm font-medium\">\n                            {importProgress.currentStep}\n                          </span>\n                        </div>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={cancelImport}\n                          className=\"gap-2\"\n                        >\n                          <Square className=\"h-3 w-3\" />\n                          Cancel\n                        </Button>\n                      </div>\n                      <Progress value={importProgress.percentage} className=\"w-full\" />\n                      <div className=\"flex justify-between text-xs text-gray-500\">\n                        <span>{importProgress.recordsProcessed} of {importProgress.totalRecords} records</span>\n                        <span>{importProgress.percentage}%</span>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Download className=\"h-5 w-5\" />\n                    Template & Guidelines\n                  </CardTitle>\n                  <CardDescription>\n                    Download template and review import guidelines\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={downloadTemplate}\n                    className=\"w-full gap-2\"\n                  >\n                    <Download className=\"h-4 w-4\" />\n                    Download CSV Template\n                  </Button>\n\n                  <div className=\"space-y-2\">\n                    <h4 className=\"font-medium text-sm\">Required Fields:</h4>\n                    <ul className=\"text-xs text-gray-600 space-y-1\">\n                      <li> <strong>name:</strong> Country name (2-100 characters)</li>\n                      <li> <strong>code:</strong> 2-letter ISO country code (e.g., US, GB)</li>\n                      <li> <strong>continent:</strong> Continent name</li>\n                      <li> <strong>region:</strong> Geographic region</li>\n                      <li> <strong>currency:</strong> 3-letter currency code (e.g., USD)</li>\n                      <li> <strong>currency_symbol:</strong> Currency symbol (e.g., $)</li>\n                      <li> <strong>status:</strong> active or inactive</li>\n                    </ul>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <h4 className=\"font-medium text-sm\">Optional Fields:</h4>\n                    <ul className=\"text-xs text-muted-foreground space-y-1\">\n                      <li> <strong>flag_url:</strong> URL to flag image</li>\n                      <li> <strong>is_popular:</strong> true/false</li>\n                      <li> <strong>visa_required:</strong> true/false</li>\n                      <li> <strong>pricing_currency_override:</strong> true/false</li>\n                      <li> <strong>pricing_currency:</strong> Override currency code</li>\n                    </ul>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Validation Tab */}\n          <TabsContent value=\"validation\" className=\"space-y-4\">\n            {processedData.length > 0 && (\n              <>\n                {/* Statistics Overview */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <StatCard\n                    title=\"Total Records\"\n                    value={importStatistics.totalRecords}\n                    icon={<Users className=\"h-5 w-5\" />}\n                    color=\"blue\"\n                  />\n                  <StatCard\n                    title=\"Valid Records\"\n                    value={importStatistics.validRecords}\n                    icon={<CheckCircle className=\"h-5 w-5\" />}\n                    color=\"green\"\n                  />\n                  <StatCard\n                    title=\"Invalid Records\"\n                    value={importStatistics.invalidRecords}\n                    icon={<XCircle className=\"h-5 w-5\" />}\n                    color=\"red\"\n                  />\n                  <StatCard\n                    title=\"Duplicates\"\n                    value={importStatistics.duplicateRecords}\n                    icon={<AlertTriangle className=\"h-5 w-5\" />}\n                    color=\"yellow\"\n                  />\n                </div>\n\n                {/* Validation Errors */}\n                {validationErrors.length > 0 && (\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <AlertCircle className=\"h-5 w-5\" />\n                        Validation Issues ({validationErrors.length})\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <ScrollArea className=\"h-48\">\n                        <div className=\"space-y-2\">\n                          {validationErrors.map((error, index) => (\n                            <Alert key={index} className={`\n                              ${error.severity === 'error' ? 'border-red-500/50 bg-red-500/10 dark:border-red-400/50 dark:bg-red-400/10' : ''}\n                              ${error.severity === 'warning' ? 'border-yellow-500/50 bg-yellow-500/10 dark:border-yellow-400/50 dark:bg-yellow-400/10' : ''}\n                              ${error.severity === 'info' ? 'border-blue-500/50 bg-blue-500/10 dark:border-blue-400/50 dark:bg-blue-400/10' : ''}\n                            `}>\n                              <div className=\"flex items-start gap-2\">\n                                {getErrorIcon(error.severity)}\n                                <div className=\"flex-1\">\n                                  <AlertDescription>\n                                    <strong>Row {error.row}, {error.field}:</strong> {error.message}\n                                    {error.suggestion && (\n                                      <div className=\"text-xs mt-1 text-muted-foreground\">\n                                         {error.suggestion}\n                                      </div>\n                                    )}\n                                  </AlertDescription>\n                                </div>\n                              </div>\n                            </Alert>\n                          ))}\n                        </div>\n                      </ScrollArea>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {/* Data Preview */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Eye className=\"h-5 w-5\" />\n                      Data Preview\n                    </CardTitle>\n                    <CardDescription>\n                      Preview of processed data (showing first 10 records)\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ScrollArea className=\"h-64\">\n                      <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Row</TableHead>\n                            <TableHead>Name</TableHead>\n                            <TableHead>Code</TableHead>\n                            <TableHead>Status</TableHead>\n                            <TableHead>Type</TableHead>\n                            <TableHead>Issues</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {processedData.slice(0, 10).map((record, index) => (\n                            <TableRow key={index}>\n                              <TableCell>{record.originalRowIndex}</TableCell>\n                              <TableCell className=\"font-medium\">{record.name}</TableCell>\n                              <TableCell>{record.code}</TableCell>\n                              <TableCell>\n                                <Badge variant={record.status === 'active' ? 'default' : 'secondary'}>\n                                  {record.status}\n                                </Badge>\n                              </TableCell>\n                              <TableCell>\n                                <Badge variant={record.isNew ? 'default' : 'outline'}>\n                                  {record.isNew ? 'New' : 'Update'}\n                                </Badge>\n                              </TableCell>\n                              <TableCell>\n                                {record.validationErrors.length > 0 ? (\n                                  <div className=\"flex gap-1\">\n                                    {record.validationErrors.filter(e => e.severity === 'error').length > 0 && (\n                                      <Badge variant=\"destructive\" className=\"text-xs\">\n                                        {record.validationErrors.filter(e => e.severity === 'error').length} errors\n                                      </Badge>\n                                    )}\n                                    {record.validationErrors.filter(e => e.severity === 'warning').length > 0 && (\n                                      <Badge variant=\"outline\" className=\"text-xs\">\n                                        {record.validationErrors.filter(e => e.severity === 'warning').length} warnings\n                                      </Badge>\n                                    )}\n                                  </div>\n                                ) : (\n                                  <Badge variant=\"outline\" className=\"text-xs text-green-600 dark:text-green-400\">\n                                    Valid\n                                  </Badge>\n                                )}\n                              </TableCell>\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                      </Table>\n                    </ScrollArea>\n                  </CardContent>\n                </Card>\n\n                {/* Action Buttons */}\n                <div className=\"flex justify-between\">\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={resetImport}\n                      className=\"gap-2\"\n                    >\n                      <RotateCcw className=\"h-4 w-4\" />\n                      Reset\n                    </Button>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setActiveTab('settings')}\n                      className=\"gap-2\"\n                    >\n                      <Settings className=\"h-4 w-4\" />\n                      Configure\n                    </Button>\n                    <Button\n                      onClick={executeImport}\n                      disabled={!canExecuteImport}\n                      className=\"gap-2\"\n                    >\n                      <Play className=\"h-4 w-4\" />\n                      Execute Import\n                    </Button>\n                  </div>\n                </div>\n              </>\n            )}\n          </TabsContent>\n\n          {/* Settings Tab */}\n          <TabsContent value=\"settings\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Import Options</CardTitle>\n                <CardDescription>\n                  Configure how the import should be processed\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"import-mode\">Import Mode</Label>\n                      <Select\n                        value={importOptions.mode}\n                        onValueChange={(value) => handleOptionsChange('mode', value)}\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"create_only\">Create Only</SelectItem>\n                          <SelectItem value=\"update_only\">Update Only</SelectItem>\n                          <SelectItem value=\"create_and_update\">Create & Update</SelectItem>\n                          <SelectItem value=\"preview_only\">Preview Only</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Choose how to handle existing countries\n                      </p>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"batch-size\">Batch Size</Label>\n                      <Input\n                        id=\"batch-size\"\n                        type=\"number\"\n                        min=\"1\"\n                        max=\"100\"\n                        value={importOptions.batchSize}\n                        onChange={(e) => handleOptionsChange('batchSize', parseInt(e.target.value))}\n                      />\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Number of records to process at once (1-100)\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <Label htmlFor=\"skip-duplicates\">Skip Duplicates</Label>\n                        <p className=\"text-xs text-gray-500\">\n                          Skip records that already exist\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"skip-duplicates\"\n                        checked={importOptions.skipDuplicates}\n                        onCheckedChange={(checked) => handleOptionsChange('skipDuplicates', checked)}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <Label htmlFor=\"allow-partial\">Allow Partial Import</Label>\n                        <p className=\"text-xs text-gray-500\">\n                          Continue import even if some records fail\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"allow-partial\"\n                        checked={importOptions.allowPartialImport}\n                        onCheckedChange={(checked) => handleOptionsChange('allowPartialImport', checked)}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <Label htmlFor=\"auto-fix\">Auto-fix Minor Errors</Label>\n                        <p className=\"text-xs text-gray-500\">\n                          Automatically fix common formatting issues\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"auto-fix\"\n                        checked={importOptions.autoFixMinorErrors}\n                        onCheckedChange={(checked) => handleOptionsChange('autoFixMinorErrors', checked)}\n                      />\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <Label htmlFor=\"validate-only\">Validate Only</Label>\n                        <p className=\"text-xs text-gray-500\">\n                          Only validate data without importing\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"validate-only\"\n                        checked={importOptions.validateOnly}\n                        onCheckedChange={(checked) => handleOptionsChange('validateOnly', checked)}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Results Tab */}\n          <TabsContent value=\"results\" className=\"space-y-4\">\n            {importProgress.stage === 'completed' && (\n              <>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <StatCard\n                    title=\"Processed\"\n                    value={importStatistics.processedRecords}\n                    icon={<CheckCircle className=\"h-5 w-5\" />}\n                    color=\"green\"\n                    description=\"Successfully imported\"\n                  />\n                  <StatCard\n                    title=\"Skipped\"\n                    value={importStatistics.skippedRecords}\n                    icon={<XCircle className=\"h-5 w-5\" />}\n                    color=\"red\"\n                    description=\"Failed to import\"\n                  />\n                  <StatCard\n                    title=\"New Countries\"\n                    value={importStatistics.newRecords}\n                    icon={<Users className=\"h-5 w-5\" />}\n                    color=\"blue\"\n                    description=\"Newly created\"\n                  />\n                  <StatCard\n                    title=\"Updated\"\n                    value={importStatistics.updateRecords}\n                    icon={<Database className=\"h-5 w-5\" />}\n                    color=\"yellow\"\n                    description=\"Existing countries updated\"\n                  />\n                </div>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <TrendingUp className=\"h-5 w-5\" />\n                      Import Summary\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <Alert>\n                        <CheckCircle className=\"h-4 w-4\" />\n                        <AlertDescription>\n                          Import completed successfully! {importStatistics.processedRecords} out of {importStatistics.totalRecords} records were imported.\n                        </AlertDescription>\n                      </Alert>\n\n                      <div className=\"flex justify-between\">\n                        <Button\n                          variant=\"outline\"\n                          onClick={() => {\n                            resetImport();\n                            setActiveTab('upload');\n                          }}\n                          className=\"gap-2\"\n                        >\n                          <Upload className=\"h-4 w-4\" />\n                          Import More\n                        </Button>\n                        <Button\n                          onClick={() => setIsOpen(false)}\n                          className=\"gap-2\"\n                        >\n                          <CheckCircle className=\"h-4 w-4\" />\n                          Done\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </>\n            )}\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AdvancedCountryImport;","import React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { Keyboard, HelpCircle } from 'lucide-react';\n\ninterface KeyboardShortcut {\n  key: string;\n  description: string;\n  requiresSelection?: boolean;\n}\n\ninterface KeyboardShortcutsHelpProps {\n  shortcuts: KeyboardShortcut[];\n  selectedCount: number;\n}\n\nconst KeyboardShortcutsHelp: React.FC<KeyboardShortcutsHelpProps> = ({\n  shortcuts,\n  selectedCount\n}) => {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"gap-2\"\n        >\n          <Keyboard className=\"w-4 h-4\" />\n          <HelpCircle className=\"w-3 h-3\" />\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Keyboard className=\"w-5 h-5\" />\n            Keyboard Shortcuts\n          </DialogTitle>\n          <DialogDescription>\n            Use these keyboard shortcuts to quickly perform bulk operations.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-3\">\n          {shortcuts.map((shortcut, index) => (\n            <div\n              key={index}\n              className={`flex items-center justify-between p-3 rounded-lg border ${\n                shortcut.requiresSelection && selectedCount === 0\n                  ? 'bg-muted/50 opacity-60'\n                  : 'bg-background'\n              }`}\n            >\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium\">{shortcut.description}</p>\n                {shortcut.requiresSelection && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Requires selection ({selectedCount} selected)\n                  </p>\n                )}\n              </div>\n              <Badge \n                variant=\"secondary\" \n                className=\"font-mono text-xs\"\n              >\n                {shortcut.key}\n              </Badge>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800\">\n          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n            <strong>Tip:</strong> Shortcuts are disabled when dialogs are open or when typing in input fields.\n          </p>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default KeyboardShortcutsHelp;","import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Country } from '../types/country';\nimport { Edit3, AlertTriangle } from 'lucide-react';\n\ninterface BulkEditDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  selectedCountries: Country[];\n  onBulkUpdate: (updates: BulkUpdateData) => Promise<void>;\n}\n\nexport interface BulkUpdateData {\n  status?: 'active' | 'inactive';\n  continent?: string;\n  region?: string;\n  currency?: string;\n  currency_symbol?: string;\n  pricing_currency_override?: boolean;\n  pricing_currency?: string;\n  pricing_currency_symbol?: string;\n}\n\nconst BulkEditDialog: React.FC<BulkEditDialogProps> = ({\n  isOpen,\n  onClose,\n  selectedCountries,\n  onBulkUpdate,\n}) => {\n  const [formData, setFormData] = useState<BulkUpdateData>({});\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Filter out empty values\n    const updates: BulkUpdateData = {};\n    Object.entries(formData).forEach(([key, value]) => {\n      if (value !== undefined && value !== '' && value !== null) {\n        (updates as any)[key] = value;\n      }\n    });\n\n    if (Object.keys(updates).length === 0) {\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await onBulkUpdate(updates);\n      setFormData({});\n      onClose();\n    } catch (error) {\n      console.error('Bulk update error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleReset = () => {\n    setFormData({});\n  };\n\n  const continents = [\n    'Africa', 'Antarctica', 'Asia', 'Europe', 'North America', 'Oceania', 'South America'\n  ];\n\n  const currencies = [\n    'USD', 'EUR', 'GBP', 'JPY', 'AUD', 'CAD', 'CHF', 'CNY', 'SEK', 'NZD'\n  ];\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"w-[95vw] max-w-[600px] max-h-[95vh] overflow-y-auto mx-auto\">\n        <DialogHeader className=\"space-y-2 pb-4\">\n          <DialogTitle className=\"flex items-center gap-2 text-lg sm:text-xl\">\n            <Edit3 className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n            Bulk Edit Countries\n          </DialogTitle>\n          <DialogDescription className=\"text-sm\">\n            Edit {selectedCountries?.length || 0} selected countries. Only fields with values will be updated.\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-6\">\n          {/* Selected Countries Preview */}\n          <div className=\"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <AlertTriangle className=\"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0\" />\n              <div className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\n                Selected Countries ({selectedCountries?.length || 0})\n              </div>\n            </div>\n            <div className=\"text-xs text-blue-600 dark:text-blue-400 max-h-16 sm:max-h-20 overflow-y-auto break-words\">\n              {selectedCountries?.map((country, index) => (\n                <span key={country.id}>\n                  {country.name}\n                  {index < (selectedCountries?.length || 0) - 1 && ', '}\n                </span>\n              )) || 'No countries selected'}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n            {/* Status */}\n            <div className=\"space-y-1.5 sm:space-y-2\">\n              <Label htmlFor=\"status\" className=\"text-sm font-medium\">Status</Label>\n              <Select\n                value={formData.status || ''}\n                onValueChange={(value) => setFormData(prev => ({ ...prev, status: value as 'active' | 'inactive' }))}\n              >\n                <SelectTrigger className=\"h-9 sm:h-10\">\n                  <SelectValue placeholder=\"Select status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"inactive\">Inactive</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Continent */}\n            <div className=\"space-y-1.5 sm:space-y-2\">\n              <Label htmlFor=\"continent\" className=\"text-sm font-medium\">Continent</Label>\n              <Select\n                value={formData.continent || ''}\n                onValueChange={(value) => setFormData(prev => ({ ...prev, continent: value }))}\n              >\n                <SelectTrigger className=\"h-9 sm:h-10\">\n                  <SelectValue placeholder=\"Select continent\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {continents.map((continent) => (\n                    <SelectItem key={continent} value={continent}>\n                      {continent}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Region */}\n            <div className=\"space-y-1.5 sm:space-y-2\">\n              <Label htmlFor=\"region\" className=\"text-sm font-medium\">Region</Label>\n              <Input\n                id=\"region\"\n                value={formData.region || ''}\n                onChange={(e) => setFormData(prev => ({ ...prev, region: e.target.value }))}\n                placeholder=\"Enter region\"\n                className=\"h-9 sm:h-10\"\n              />\n            </div>\n\n            {/* Currency */}\n            <div className=\"space-y-1.5 sm:space-y-2\">\n              <Label htmlFor=\"currency\" className=\"text-sm font-medium\">Currency</Label>\n              <Select\n                value={formData.currency || ''}\n                onValueChange={(value) => setFormData(prev => ({ ...prev, currency: value }))}\n              >\n                <SelectTrigger className=\"h-9 sm:h-10\">\n                  <SelectValue placeholder=\"Select currency\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {currencies.map((currency) => (\n                    <SelectItem key={currency} value={currency}>\n                      {currency}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Currency Symbol */}\n            <div className=\"space-y-1.5 sm:space-y-2\">\n              <Label htmlFor=\"currency_symbol\" className=\"text-sm font-medium\">Currency Symbol</Label>\n              <Input\n                id=\"currency_symbol\"\n                value={formData.currency_symbol || ''}\n                onChange={(e) => setFormData(prev => ({ ...prev, currency_symbol: e.target.value }))}\n                placeholder=\"Enter currency symbol\"\n                className=\"h-9 sm:h-10\"\n              />\n            </div>\n\n            {/* Pricing Currency Override */}\n            <div className=\"space-y-1.5 sm:space-y-2 sm:col-span-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"pricing_currency_override\"\n                  checked={formData.pricing_currency_override || false}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, pricing_currency_override: checked }))}\n                />\n                <Label htmlFor=\"pricing_currency_override\" className=\"text-sm font-medium\">Override Pricing Currency</Label>\n              </div>\n            </div>\n\n            {/* Pricing Currency */}\n            {formData.pricing_currency_override && (\n              <>\n                <div className=\"space-y-1.5 sm:space-y-2\">\n                  <Label htmlFor=\"pricing_currency\" className=\"text-sm font-medium\">Pricing Currency</Label>\n                  <Select\n                    value={formData.pricing_currency || ''}\n                    onValueChange={(value) => setFormData(prev => ({ ...prev, pricing_currency: value }))}\n                  >\n                    <SelectTrigger className=\"h-9 sm:h-10\">\n                      <SelectValue placeholder=\"Select pricing currency\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {currencies.map((currency) => (\n                        <SelectItem key={currency} value={currency}>\n                          {currency}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Pricing Currency Symbol */}\n                <div className=\"space-y-1.5 sm:space-y-2\">\n                  <Label htmlFor=\"pricing_currency_symbol\" className=\"text-sm font-medium\">Pricing Currency Symbol</Label>\n                  <Input\n                    id=\"pricing_currency_symbol\"\n                    value={formData.pricing_currency_symbol || ''}\n                    onChange={(e) => setFormData(prev => ({ ...prev, pricing_currency_symbol: e.target.value }))}\n                    placeholder=\"Enter pricing currency symbol\"\n                    className=\"h-9 sm:h-10\"\n                  />\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Removed Description field: 'countries' table has no 'description' column */}\n\n          <DialogFooter className=\"flex flex-col sm:flex-row gap-2 sm:gap-2 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleReset}\n              disabled={isLoading}\n              className=\"w-full sm:w-auto order-2 sm:order-1\"\n            >\n              Reset\n            </Button>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={onClose}\n              disabled={isLoading}\n              className=\"w-full sm:w-auto order-3 sm:order-2\"\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isLoading || Object.keys(formData).length === 0}\n              className=\"w-full sm:w-auto order-1 sm:order-3\"\n            >\n              {isLoading ? 'Updating...' : `Update ${selectedCountries.length} Countries`}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default BulkEditDialog;","\nimport React, { useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Download, Upload, Search, Trash2, RotateCcw } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport CountriesTable from './components/CountriesTable';\nimport { useCountriesData } from './hooks/useCountriesData';\nimport { useCountryActions } from './hooks/useCountryActions';\nimport { useCountryImportExport } from './hooks/useCountryImportExport';\nimport { useKeyboardShortcuts } from './hooks/useKeyboardShortcuts';\nimport CountryViewDrawer from './components/drawers/CountryViewDrawer';\nimport CountryEditSheet from './components/CountryEditSheet';\nimport CountryAddSheet from './components/CountryAddSheet';\nimport CountryDeleteDrawer from './components/drawers/CountryDeleteDrawer';\nimport CountriesFilters from './components/CountriesFilters';\nimport AdvancedCountryImport from './components/AdvancedCountryImport';\nimport KeyboardShortcutsHelp from './components/KeyboardShortcutsHelp';\nimport BulkEditDialog, { BulkUpdateData } from './components/BulkEditDialog';\nimport { CountriesService } from '@/services/countriesService';\n\nconst CountriesPage: React.FC = () => {\n  // Selection state\n  const [selectedCountries, setSelectedCountries] = useState<string[]>([]);\n  \n  // UI-only hidden countries state\n  const [hiddenCountries, setHiddenCountries] = useState<string[]>([]);\n  \n  // Bulk edit state\n  const [bulkEditDialogOpen, setBulkEditDialogOpen] = useState(false);\n\n  const {\n    countries,\n    currentCountries,\n    searchQuery,\n    setSearchQuery,\n    searchType,\n    setSearchType,\n    continentFilter,\n    setContinentFilter,\n    statusFilter,\n    setStatusFilter,\n    currentPage,\n    totalPages,\n    itemsPerPage,\n    goToPage,\n    nextPage,\n    prevPage,\n    selectedCountry,\n    setSelectedCountry,\n    editFormData,\n    setEditFormData,\n    newCountryData,\n    setNewCountryData,\n    viewDrawerOpen,\n    setViewDrawerOpen,\n    editDrawerOpen,\n    setEditDrawerOpen,\n    deleteDrawerOpen,\n    setDeleteDrawerOpen,\n    addDrawerOpen,\n    setAddDrawerOpen,\n    importDrawerOpen,\n    setImportDrawerOpen,\n    importFileRef,\n    resetNewCountryForm,\n    loading,\n    toast,\n    setItemsPerPage,\n    refreshCountries\n  } = useCountriesData(hiddenCountries);\n  \n  const countryActions = useCountryActions({\n    countries,\n    setSelectedCountry,\n    setEditFormData,\n    setViewDrawerOpen,\n    setEditDrawerOpen,\n    setDeleteDrawerOpen,\n    selectedCountry,\n    editFormData,\n    newCountryData,\n    setAddDrawerOpen,\n    setImportDrawerOpen,\n    resetNewCountryForm,\n    setNewCountryData,\n    refreshCountries,\n    toast\n  });\n\n  // Import/Export functionality\n  const importExport = useCountryImportExport({\n    countries,\n    setImportDrawerOpen,\n    importFileRef,\n    toast,\n    searchQuery,\n    statusFilter,\n    continentFilter\n  });\n\n  // Selection handlers\n  const handleSelectCountry = (id: string) => {\n    setSelectedCountries(prev => \n      prev.includes(id) \n        ? prev.filter(countryId => countryId !== id)\n        : [...prev, id]\n    );\n  };\n\n  const handleSelectAll = (selected: boolean) => {\n    if (selected) {\n      const allIds = currentCountries.map(country => country.id);\n      setSelectedCountries(allIds);\n    } else {\n      setSelectedCountries([]);\n    }\n  };\n\n  const handleClearSelection = () => {\n    setSelectedCountries([]);\n  };\n\n  const handleSelectAllCountries = () => {\n    setSelectedCountries(currentCountries.map(country => country.id));\n  };\n\n  const handleRemoveFromUI = () => {\n    if (selectedCountries.length === 0) {\n      toast({\n        title: \"No Selection\",\n        description: \"Please select countries to remove from UI\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Add selected countries to hidden list\n    setHiddenCountries(prev => [...prev, ...selectedCountries]);\n    \n    // Clear selection after hiding\n    setSelectedCountries([]);\n    \n    toast({\n      title: \"Countries Hidden\",\n      description: `${selectedCountries.length} countries have been hidden from the UI`,\n    });\n  };\n\n\n\n\n\n  const handleBulkDelete = async (ids: string[]) => {\n    try {\n      if (ids.length === 0) {\n        toast({\n          title: \"No Selection\",\n          description: \"Please select countries to delete\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Get country names for confirmation\n      const selectedCountryNames = countries\n        .filter(country => ids.includes(country.id))\n        .map(country => country.name)\n        .slice(0, 3); // Show first 3 names\n      \n      const displayNames = selectedCountryNames.join(', ') + \n        (ids.length > 3 ? ` and ${ids.length - 3} more` : '');\n\n      if (window.confirm(\n        `Are you sure you want to permanently delete ${ids.length} ${ids.length === 1 ? 'country' : 'countries'}?\\n\\n` +\n        `Countries: ${displayNames}\\n\\n` +\n        `This action cannot be undone.`\n      )) {\n        // Show loading toast\n        const loadingToast = toast({\n          title: \"Deleting Countries\",\n          description: `Deleting ${ids.length} countries...`,\n        });\n\n        const response = await CountriesService.bulkDeleteCountries(ids);\n        \n        if (response.success) {\n          toast({\n            title: \"Delete Successful\",\n            description: `Successfully deleted ${ids.length} ${ids.length === 1 ? 'country' : 'countries'}`,\n          });\n          setSelectedCountries([]);\n          // Refresh the data\n          await refreshCountries();\n        } else {\n          toast({\n            title: \"Delete Failed\",\n            description: response.error || \"Failed to delete countries\",\n            variant: \"destructive\",\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Bulk delete error:', error);\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to delete countries\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleBulkToggleStatus = async (ids: string[]) => {\n    try {\n      if (ids.length === 0) {\n        toast({\n          title: \"No Selection\",\n          description: \"Please select countries to toggle status\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Get selected countries and determine the most common status to toggle to\n      const selectedCountries = countries.filter(country => ids.includes(country.id));\n      const activeCount = selectedCountries.filter(c => c.status === 'active').length;\n      const inactiveCount = selectedCountries.filter(c => c.status === 'inactive').length;\n      \n      // If more countries are active, toggle to inactive, otherwise toggle to active\n      const newStatus = activeCount >= inactiveCount ? 'inactive' : 'active';\n      const statusAction = newStatus === 'active' ? 'activate' : 'deactivate';\n      \n      // Get country names for confirmation\n      const selectedCountryNames = selectedCountries\n        .map(country => country.name)\n        .slice(0, 3); // Show first 3 names\n      \n      const displayNames = selectedCountryNames.join(', ') + \n        (ids.length > 3 ? ` and ${ids.length - 3} more` : '');\n\n      if (window.confirm(\n        `Are you sure you want to ${statusAction} ${ids.length} ${ids.length === 1 ? 'country' : 'countries'}?\\n\\n` +\n        `Countries: ${displayNames}\\n\\n` +\n        `New status will be: ${newStatus.toUpperCase()}`\n      )) {\n        // Show loading toast\n        const loadingToast = toast({\n          title: \"Updating Status\",\n          description: `${statusAction === 'activate' ? 'Activating' : 'Deactivating'} ${ids.length} countries...`,\n        });\n\n        const response = await CountriesService.bulkToggleStatus(ids, newStatus);\n        \n        if (response.success) {\n          toast({\n            title: \"Status Update Successful\",\n            description: `Successfully ${statusAction}d ${ids.length} ${ids.length === 1 ? 'country' : 'countries'}`,\n          });\n          setSelectedCountries([]);\n          // Refresh the data\n          await refreshCountries();\n        } else {\n          toast({\n            title: \"Status Update Failed\",\n            description: response.error || \"Failed to update country status\",\n            variant: \"destructive\",\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Bulk status toggle error:', error);\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to toggle status for countries\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleBulkEdit = () => {\n    if (selectedCountries.length > 0) {\n      setBulkEditDialogOpen(true);\n    }\n  };\n\n  const handleBulkUpdate = async (updateData: BulkUpdateData) => {\n    try {\n      if (selectedCountries.length === 0) {\n        toast({\n          title: \"No Selection\",\n          description: \"Please select countries to update\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Show loading toast\n      const loadingToast = toast({\n        title: \"Updating Countries\",\n        description: `Updating ${selectedCountries.length} countries...`,\n      });\n\n      const response = await CountriesService.bulkUpdateCountries(selectedCountries, updateData);\n      \n      if (response.success) {\n        toast({\n          title: \"Bulk Update Successful\",\n          description: `Successfully updated ${selectedCountries.length} ${selectedCountries.length === 1 ? 'country' : 'countries'}`,\n        });\n        setSelectedCountries([]);\n        setBulkEditDialogOpen(false);\n        // Refresh the data\n        await refreshCountries();\n      } else {\n        toast({\n          title: \"Bulk Update Failed\",\n          description: response.error || \"Failed to update countries\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Bulk update error:', error);\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to update countries\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n\n  // Keyboard shortcuts\n  const { shortcuts } = useKeyboardShortcuts({\n    selectedCountries,\n    onSelectAll: handleSelectAllCountries,\n    onClearSelection: handleClearSelection,\n    onBulkDelete: () => handleBulkDelete(selectedCountries),\n    onBulkEdit: handleBulkEdit,\n    onBulkToggleStatus: () => handleBulkToggleStatus(selectedCountries),\n    isDialogOpen: bulkEditDialogOpen || viewDrawerOpen || editDrawerOpen || deleteDrawerOpen || addDrawerOpen\n  });\n\n  return (\n    <PageLayout>\n      <div className=\"p-3 sm:p-6\">\n        {/* Header Section - Mobile Optimized */}\n        <div className=\"flex flex-col space-y-4 mb-6\">\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center\">\n            <h1 className=\"text-xl sm:text-2xl font-bold\">Countries Management</h1>\n            \n            {/* Action Buttons - Mobile Responsive */}\n            <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto mt-3 sm:mt-0\">\n              <div className=\"flex gap-2\">\n                <AdvancedCountryImport \n                  refreshCountries={refreshCountries}\n                  trigger={\n                    <Button \n                      variant=\"outline\"\n                      className=\"flex items-center flex-1 sm:flex-none\"\n                      size=\"sm\"\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      <span className=\"hidden xs:inline\">Import</span>\n                    </Button>\n                  }\n                />\n                <Button \n                  variant=\"outline\"\n                  onClick={() => importExport.handleExport()}\n                  className=\"flex items-center flex-1 sm:flex-none\"\n                  size=\"sm\"\n                >\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  <span className=\"hidden xs:inline\">Export</span>\n                </Button>\n                <Button \n                   onClick={countryActions.handleAddCountry}\n                   className=\"flex items-center flex-1 sm:flex-none\"\n                   size=\"sm\"\n                 >\n                   <Plus className=\"w-4 h-4 mr-2\" />\n                   <span className=\"hidden xs:inline\">Add Country</span>\n                 </Button>\n                <KeyboardShortcutsHelp \n                  shortcuts={shortcuts}\n                  selectedCount={selectedCountries.length}\n                />\n              </div>\n            </div>\n          </div>\n          \n\n        </div>\n        \n        {/* Enhanced Search and Filters */}\n        <div className=\"mb-4 relative\">\n          <CountriesFilters\n            searchQuery={searchQuery}\n            setSearchQuery={setSearchQuery}\n            searchType={searchType}\n            setSearchType={setSearchType}\n            continentFilter={continentFilter}\n            setContinentFilter={setContinentFilter}\n            statusFilter={statusFilter}\n            setStatusFilter={setStatusFilter}\n          />\n        </div>\n        \n        {/* Combined Status Overview and Filters Section - Single Row Layout */}\n        <div className=\"bg-card border border-border rounded-lg p-4 mb-6 relative\">\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\n            \n            {/* Status Overview Cards - Compact Row Layout */}\n            <div className=\"grid grid-cols-3 gap-3 flex-1\">\n              <div className=\"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-8 w-8 bg-blue-100 dark:bg-blue-900/50 rounded-md flex items-center justify-center\">\n                    <span className=\"text-blue-600 dark:text-blue-400 text-sm font-bold\"></span>\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-medium text-blue-700 dark:text-blue-300\">Total</p>\n                    <p className=\"text-lg font-bold text-blue-900 dark:text-blue-100\">{countries.length}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-lg p-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-8 w-8 bg-green-100 dark:bg-green-900/50 rounded-md flex items-center justify-center\">\n                    <span className=\"text-green-600 dark:text-green-400 text-sm font-bold\"></span>\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-medium text-green-700 dark:text-green-300\">Active</p>\n                    <p className=\"text-lg font-bold text-green-900 dark:text-green-100\">\n                      {countries.filter(country => country.status === 'active').length}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-8 w-8 bg-gray-100 dark:bg-gray-700 rounded-md flex items-center justify-center\">\n                    <span className=\"text-gray-600 dark:text-gray-400 text-sm font-bold\"></span>\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">Inactive</p>\n                    <p className=\"text-lg font-bold text-gray-900 dark:text-gray-100\">\n                      {countries.filter(country => country.status === 'inactive').length}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Filter Pills - Aligned to Right */}\n            {/* <div className=\"flex flex-wrap gap-2 lg:justify-end\">\n              <div className=\"flex items-center gap-1\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2\">Filter:</span>\n                <Button \n                  variant={statusFilter === 'all' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setStatusFilter('all')}\n                  className=\"text-xs h-7\"\n                >\n                  All\n                </Button>\n                <Button \n                  variant={statusFilter === 'active' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setStatusFilter('active')}\n                  className=\"text-xs h-7\"\n                >\n                  Active\n                </Button>\n                <Button \n                  variant={statusFilter === 'inactive' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setStatusFilter('inactive')}\n                  className=\"text-xs h-7\"\n                >\n                  Inactive\n                </Button>\n                {continentFilter !== 'all' && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"ml-1 text-xs h-7\"\n                    onClick={() => setContinentFilter('all')}\n                  >\n                    {continentFilter} \n                  </Button>\n                )}\n              </div>\n            </div> */}\n          </div>\n        </div>\n        \n        <div className=\"relative\">\n          <CountriesTable \n            countries={currentCountries}\n            loading={loading}\n            currentPage={currentPage}\n            totalPages={totalPages}\n            itemsPerPage={itemsPerPage}\n            totalCountries={countries.length}\n            selectedCountries={selectedCountries}\n            onNextPage={nextPage}\n            onPrevPage={prevPage}\n            onPageSelect={goToPage}\n            onItemsPerPageChange={setItemsPerPage}\n            onView={countryActions.handleViewCountry}\n            onEdit={countryActions.handleEditCountry}\n            onDelete={countryActions.handleDeleteCountry}\n            onToggleStatus={countryActions.handleToggleStatus}\n            onSelectCountry={handleSelectCountry}\n            onSelectAll={handleSelectAll}\n            onBulkDelete={handleBulkDelete}\n            onBulkToggleStatus={handleBulkToggleStatus}\n            onBulkEdit={handleBulkEdit}\n          />\n        </div>\n        \n        {/* Drawers and Sheets */}\n        {selectedCountry && (\n          <>\n            <CountryViewDrawer \n              deleteDrawerOpen={viewDrawerOpen}\n              setDeleteDrawerOpen={setViewDrawerOpen}\n              selectedCountry={selectedCountry}\n              handleConfirmDelete={countryActions.handleEditFromView}\n            />\n            \n            <CountryDeleteDrawer \n              deleteDrawerOpen={deleteDrawerOpen}\n              setDeleteDrawerOpen={setDeleteDrawerOpen}\n              selectedCountry={selectedCountry}\n              handleConfirmDelete={countryActions.handleConfirmDelete}\n            />\n          </>\n        )}\n        \n        {editFormData && (\n          <CountryEditSheet \n            formData={editFormData}\n            isOpen={editDrawerOpen}\n            onClose={() => setEditDrawerOpen(false)}\n            onSave={countryActions.handleSaveEdit}\n            onChange={countryActions.handleFormInputChange}\n          />\n        )}\n        \n        <CountryAddSheet \n          formData={newCountryData}\n          isOpen={addDrawerOpen}\n          onClose={() => setAddDrawerOpen(false)}\n          onSave={countryActions.handleSaveNewCountry}\n          onChange={countryActions.handleNewCountryInputChange}\n        />\n\n        <BulkEditDialog\n          isOpen={bulkEditDialogOpen}\n          onClose={() => setBulkEditDialogOpen(false)}\n          selectedCountries={countries.filter(country => selectedCountries.includes(country.id))}\n          onBulkUpdate={handleBulkUpdate}\n        />\n\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default CountriesPage;\n","\nimport { useState, useEffect, useRef } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Country } from '../types/country';\nimport { CountriesService } from '@/services/countriesService';\nimport { mapDbCountriesToFrontend } from '@/services/countryMapper';\nimport { useRealTimeCountries } from '@/hooks/useRealTimeCountries';\nimport { SearchType } from '../components/CountriesFilters';\n\nexport const useCountriesData = (hiddenCountries: string[] = []) => {\n  // Use real-time countries hook\n  const { countries, loading, refreshCountries } = useRealTimeCountries();\n  \n  const [filteredCountries, setFilteredCountries] = useState<Country[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchType, setSearchType] = useState<SearchType>('all');\n  const [continentFilter, setContinentFilter] = useState<string>('all');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(5);\n  \n  // Add missing state variables\n  const [selectedCountry, setSelectedCountry] = useState<Country | null>(null);\n  const [editFormData, setEditFormData] = useState<Country | null>(null);\n  const [newCountryData, setNewCountryData] = useState<Omit<Country, 'id' | 'created_at' | 'updated_at'>>({\n    name: '',\n    code: '',\n    continent: '',\n    region: '',\n    currency: '',\n    currency_symbol: '',\n    flag_url: '',\n    is_popular: false,\n    visa_required: false,\n    languages: [],\n    status: 'active',\n    pricing_currency_override: false,\n    pricing_currency: '',\n    pricing_currency_symbol: ''\n  });\n  const [viewDrawerOpen, setViewDrawerOpen] = useState(false);\n  const [editDrawerOpen, setEditDrawerOpen] = useState(false);\n  const [deleteDrawerOpen, setDeleteDrawerOpen] = useState(false);\n  const [addDrawerOpen, setAddDrawerOpen] = useState(false);\n  const [importDrawerOpen, setImportDrawerOpen] = useState(false);\n  const importFileRef = useRef<HTMLInputElement>(null);\n  \n  const { toast } = useToast();\n\n  // Filter countries based on search query and filters\n  useEffect(() => {\n    const filtered = countries.filter(country => {\n      // First check if the country is hidden from UI\n      const isHidden = hiddenCountries.includes(country.id);\n      if (isHidden) return false;\n      \n      let matchesSearch = true;\n      \n      if (searchQuery.trim()) {\n        const query = searchQuery.toLowerCase().trim();\n        \n        switch (searchType) {\n          case 'name':\n            matchesSearch = country.name.toLowerCase().includes(query);\n            break;\n          case 'code':\n            matchesSearch = country.code.toLowerCase().includes(query);\n            break;\n          case 'currency':\n            matchesSearch = country.currency.toLowerCase().includes(query);\n            break;\n          case 'all':\n          default:\n            matchesSearch = \n              country.name.toLowerCase().includes(query) || \n              country.code.toLowerCase().includes(query) ||\n              country.currency.toLowerCase().includes(query);\n            break;\n        }\n      }\n      \n      const matchesContinent = continentFilter === 'all' || country.continent === continentFilter;\n      const matchesStatus = statusFilter === 'all' || country.status === statusFilter;\n      \n      return matchesSearch && matchesContinent && matchesStatus;\n    });\n    \n    setFilteredCountries(filtered);\n  }, [searchQuery, searchType, continentFilter, statusFilter, countries, hiddenCountries]);\n\n  // Reset to first page only when filters change (not when countries data updates)\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchQuery, searchType, continentFilter, statusFilter]);\n\n  // Get paginated data\n  const safeItemsPerPage = itemsPerPage && itemsPerPage > 0 ? itemsPerPage : 5; // Default to 5 if invalid\n  const indexOfLastItem = currentPage * safeItemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - safeItemsPerPage;\n  const currentCountries = filteredCountries.slice(indexOfFirstItem, indexOfLastItem);\n  const totalPages = filteredCountries.length > 0 ? Math.ceil(filteredCountries.length / safeItemsPerPage) : 1;\n\n  // Get unique continents for the filter\n  const availableContinents = Array.from(new Set(countries.map(country => country.continent)));\n\n  // Pagination functions\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n  \n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n  \n  const goToPage = (pageNumber: number) => {\n    if (pageNumber >= 1 && pageNumber <= totalPages) {\n      setCurrentPage(pageNumber);\n    }\n  };\n\n  // Function to reset the new country form\n  const resetNewCountryForm = () => {\n    setNewCountryData({\n      name: '',\n      code: '',\n      continent: '',\n      region: '',\n      currency: '',\n      currency_symbol: '',\n      flag_url: '',\n      is_popular: false,\n      visa_required: false,\n      languages: [],\n      status: 'active',\n      pricing_currency_override: false,\n      pricing_currency: '',\n      pricing_currency_symbol: ''\n    });\n  };\n\n  return {\n    countries,\n    currentCountries,\n    filteredCountries,\n    searchQuery,\n    setSearchQuery,\n    searchType,\n    setSearchType,\n    continentFilter,\n    setContinentFilter,\n    statusFilter,\n    setStatusFilter,\n    currentPage,\n    totalPages,\n    itemsPerPage: safeItemsPerPage,\n    setItemsPerPage,\n    availableContinents,\n    nextPage,\n    prevPage,\n    goToPage,\n    indexOfFirstItem,\n    selectedCountry,\n    setSelectedCountry,\n    editFormData,\n    setEditFormData,\n    newCountryData,\n    setNewCountryData,\n    viewDrawerOpen,\n    setViewDrawerOpen,\n    editDrawerOpen,\n    setEditDrawerOpen,\n    deleteDrawerOpen,\n    setDeleteDrawerOpen,\n    addDrawerOpen,\n    setAddDrawerOpen,\n    importDrawerOpen,\n    setImportDrawerOpen,\n    importFileRef,\n    resetNewCountryForm,\n    loading,\n    toast,\n    refreshCountries\n  };\n};\n","import { useState } from 'react';\nimport { Country } from '../types/country';\nimport { CountriesService } from '@/services/countriesService';\nimport { mapDbCountryToFrontend, mapFrontendCountryToDbInsert, mapFrontendCountryToDbUpdate } from '@/services/countryMapper';\n\ntype CountryActionProps = {\n  countries: Country[];\n  setSelectedCountry: React.Dispatch<React.SetStateAction<Country | null>>;\n  setEditFormData: React.Dispatch<React.SetStateAction<Country | null>>;\n  setViewDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setEditDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setDeleteDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  selectedCountry: Country | null;\n  editFormData: Country | null;\n  newCountryData: Omit<Country, 'id' | 'created_at' | 'updated_at'>;\n  setAddDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setImportDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  resetNewCountryForm: () => void;\n  setNewCountryData: React.Dispatch<React.SetStateAction<Omit<Country, 'id' | 'created_at' | 'updated_at'>>>;\n  refreshCountries: () => Promise<void>;\n  toast: any;\n};\n\nexport const useCountryActions = ({\n  countries,\n  setSelectedCountry,\n  setEditFormData,\n  setViewDrawerOpen,\n  setEditDrawerOpen,\n  setDeleteDrawerOpen,\n  selectedCountry,\n  editFormData,\n  newCountryData,\n  setAddDrawerOpen,\n  setImportDrawerOpen,\n  resetNewCountryForm,\n  setNewCountryData,\n  refreshCountries,\n  toast\n}: CountryActionProps) => {\n  \n  // Handle view country\n  const handleViewCountry = (country: Country) => {\n    setSelectedCountry(country);\n    setViewDrawerOpen(true);\n  };\n\n  // Handle edit country\n  const handleEditCountry = (country: Country) => {\n    setSelectedCountry(country);\n    setEditFormData({ \n      ...country,\n      // Ensure pricing_currency_override is properly initialized\n      pricing_currency_override: Boolean(country.pricing_currency_override)\n    });\n    setEditDrawerOpen(true);\n  };\n\n  // Handle edit from view\n  const handleEditFromView = () => {\n    if (selectedCountry) {\n      setEditFormData({ \n        ...selectedCountry,\n        // Ensure pricing_currency_override is properly initialized\n        pricing_currency_override: Boolean(selectedCountry.pricing_currency_override)\n      });\n      setViewDrawerOpen(false);\n      setEditDrawerOpen(true);\n    }\n  };\n\n  // Handle delete country\n  const handleDeleteCountry = (country: Country) => {\n    setSelectedCountry(country);\n    setDeleteDrawerOpen(true);\n  };\n\n  // Handle save edit\n  const handleSaveEdit = async () => {\n    if (!editFormData) return;\n    \n    try {\n      // Validation checks\n      if (!editFormData.name || !editFormData.code) {\n        toast({\n          title: \"Validation Error\",\n          description: \"Country name and code are required fields.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n      \n      // Check for duplicate country codes\n      const isDuplicateCode = countries.some(\n        country => country.id !== editFormData.id && country.code === editFormData.code\n      );\n      \n      if (isDuplicateCode) {\n        toast({\n          title: \"Validation Error\",\n          description: `Country code \"${editFormData.code}\" is already in use.`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n      \n      // Update country in database\n      const updateData = mapFrontendCountryToDbUpdate(editFormData);\n      const response = await CountriesService.updateCountry(editFormData.id.toString(), updateData);\n      \n      if (response.success && response.data) {\n        const updatedCountry = mapDbCountryToFrontend(response.data);\n        \n        // Refresh the countries list to reflect the changes\n        await refreshCountries();\n        \n        setEditDrawerOpen(false);\n        toast({\n          title: \"Country Updated\",\n          description: `${updatedCountry.name} has been successfully updated.`,\n        });\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to update country in database.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Error updating country:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update country. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Handle confirm delete\n  const handleConfirmDelete = async () => {\n    if (!selectedCountry) return;\n    \n    try {\n      const response = await CountriesService.deleteCountry(selectedCountry.id.toString());\n      \n      if (response.success) {\n        // Refresh the countries list to reflect the changes\n        await refreshCountries();\n        \n        setDeleteDrawerOpen(false);\n        toast({\n          title: \"Country Deleted\",\n          description: `${selectedCountry.name} has been removed from the system.`,\n        });\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to delete country from database.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Error deleting country:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete country. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Handle add new country\n  const handleAddCountry = () => {\n    setAddDrawerOpen(true);\n  };\n\n  // Handle save new country\n  const handleSaveNewCountry = async () => {\n    try {\n      // Validate required fields\n      if (!newCountryData.name || !newCountryData.code) {\n        toast({\n          title: \"Validation Error\",\n          description: \"Country name and code are required fields.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n      \n      // Check for duplicate country codes\n      const isDuplicateCode = countries.some(country => country.code === newCountryData.code);\n      \n      if (isDuplicateCode) {\n        toast({\n          title: \"Validation Error\",\n          description: `Country code \"${newCountryData.code}\" is already in use.`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n      \n      // Create country in database\n      const insertData = mapFrontendCountryToDbInsert(newCountryData);\n      const response = await CountriesService.createCountry(insertData);\n      \n      if (response.success && response.data) {\n        const newCountry = mapDbCountryToFrontend(response.data);\n        \n        // Refresh the countries list to reflect the changes\n        await refreshCountries();\n        \n        setAddDrawerOpen(false);\n        \n        toast({\n          title: \"Country Added\",\n          description: `${newCountry.name} has been successfully added.`,\n        });\n        \n        // Reset the form data\n        resetNewCountryForm();\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to create country in database.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Error adding country:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to add country. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Handle toggle status\n  const handleToggleStatus = async (id: string) => {\n    try {\n      const country = countries.find(c => c.id === id);\n      if (!country) return;\n      \n      const newStatus = country.status === 'active' ? 'inactive' : 'active';\n      const updateData = mapFrontendCountryToDbUpdate({ status: newStatus });\n      \n      const response = await CountriesService.updateCountry(id, updateData);\n      \n      if (response.success && response.data) {\n        const updatedCountry = mapDbCountryToFrontend(response.data);\n        const statusText = newStatus === 'active' ? 'Active' : 'Inactive';\n        \n        // Real-time hook will automatically update the state\n        toast({\n          title: \"Country Status Updated\",\n          description: `${updatedCountry.name} status updated to ${statusText}.`,\n        });\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to update country status in database.\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Error toggling country status:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update country status. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Handle form input change for editing\n  const handleFormInputChange = (field: keyof Country, value: any) => {\n    if (editFormData) {\n      // Special handling for pricing currency override toggle\n      if (field === 'pricing_currency_override') {\n        if (value === false) {\n          // When turning off the override, clear the pricing currency fields\n          setEditFormData({\n            ...editFormData,\n            pricing_currency_override: false,\n            pricing_currency: '',\n            pricing_currency_symbol: ''\n          });\n        } else {\n          // When turning on the override, just set the flag\n          setEditFormData({\n            ...editFormData,\n            pricing_currency_override: true\n          });\n        }\n      } else {\n        // Normal field update\n        setEditFormData({\n          ...editFormData,\n          [field]: value\n        });\n      }\n    }\n  };\n\n  // Handle flag URL change specifically\n  const handleFlagUrlChange = (url: string) => {\n    if (editFormData) {\n      setEditFormData({\n        ...editFormData,\n        flag_url: url\n      });\n    }\n  };\n\n  // Handle form input change for new country\n  const handleNewCountryInputChange = (field: keyof Omit<Country, 'id' | 'created_at' | 'updated_at'>, value: any) => {\n    setNewCountryData({\n      ...newCountryData,\n      [field]: value\n    });\n  };\n\n  // Handle flag URL change for new country\n  const handleNewCountryFlagUrlChange = (url: string) => {\n    setNewCountryData({\n      ...newCountryData,\n      flag_url: url\n    });\n  };\n\n  // Return both state values and handlers\n  return {\n    selectedCountry,\n    editFormData,\n    newCountryData,\n    setNewCountryData,\n    isViewSheetOpen: setViewDrawerOpen,\n    setIsViewSheetOpen: setViewDrawerOpen,\n    isEditSheetOpen: setEditDrawerOpen,\n    setIsEditSheetOpen: setEditDrawerOpen,\n    isDeleteDialogOpen: setDeleteDrawerOpen,\n    setIsDeleteDialogOpen: setDeleteDrawerOpen,\n    isAddSheetOpen: setAddDrawerOpen,\n    setIsAddSheetOpen: setAddDrawerOpen,\n    handleViewCountry,\n    handleEditCountry,\n    handleDeleteCountry,\n    handleSaveEdit,\n    handleConfirmDelete,\n    handleAddCountry,\n    handleSaveNewCountry,\n    handleToggleStatus,\n    handleFormInputChange,\n    handleFlagUrlChange,\n    handleNewCountryInputChange,\n    handleNewCityInputChange: handleNewCountryInputChange, // Alias for compatibility\n    handleNewCountryFlagUrlChange,\n    handleEditFromView\n  };\n};\n","import { useCallback } from 'react';\nimport { Country } from '../types/country';\nimport * as XLSX from 'xlsx';\n\ninterface UseCountryImportExportProps {\n  countries: Country[];\n  setImportDrawerOpen: (open: boolean) => void;\n  importFileRef: React.RefObject<HTMLInputElement>;\n  toast: any;\n  searchQuery?: string;\n  statusFilter?: string;\n  continentFilter?: string;\n}\n\nexport const useCountryImportExport = ({\n  countries,\n  setImportDrawerOpen,\n  importFileRef,\n  toast,\n  searchQuery,\n  statusFilter,\n  continentFilter\n}: UseCountryImportExportProps) => {\n\n  const handleImportClick = useCallback(() => {\n    setImportDrawerOpen(true);\n  }, [setImportDrawerOpen]);\n\n  const handleExport = useCallback((includeAll: boolean = false) => {\n    try {\n      let dataToExport = countries;\n\n      // Apply filters if not exporting all\n      if (!includeAll) {\n        dataToExport = countries.filter(country => {\n          let matches = true;\n\n          // Apply search filter\n          if (searchQuery) {\n            const query = searchQuery.toLowerCase();\n            matches = matches && (\n              country.name.toLowerCase().includes(query) ||\n              country.code.toLowerCase().includes(query) ||\n              country.continent.toLowerCase().includes(query) ||\n              country.region.toLowerCase().includes(query)\n            );\n          }\n\n          // Apply status filter\n          if (statusFilter && statusFilter !== 'all') {\n            matches = matches && country.status === statusFilter;\n          }\n\n          // Apply continent filter\n          if (continentFilter && continentFilter !== 'all') {\n            matches = matches && country.continent === continentFilter;\n          }\n\n          return matches;\n        });\n      }\n\n      // Prepare main countries data for export\n      const exportData = dataToExport.map(country => ({\n        'Country Name': country.name,\n        'Country Code': country.code,\n        Continent: country.continent,\n        Region: country.region,\n        Currency: country.currency,\n        'Currency Symbol': country.currency_symbol,\n        'Flag URL': country.flag_url,\n        'Is Popular': country.is_popular ? 'Yes' : 'No',\n        'Visa Required': country.visa_required ? 'Yes' : 'No',\n        Status: country.status,\n        'Pricing Currency Override': country.pricing_currency_override ? 'Yes' : 'No',\n        'Pricing Currency': country.pricing_currency || '',\n        'Pricing Currency Symbol': country.pricing_currency_symbol || ''\n      }));\n\n      // Prepare Currency Override table data (countries with overrides only)\n      const currencyOverrideData = dataToExport\n        .filter(country => country.pricing_currency_override)\n        .map(country => ({\n          'Country Name': country.name,\n          'Country Code': country.code,\n          'Local Currency': country.currency,\n          'Local Currency Symbol': country.currency_symbol,\n          'Override Currency': country.pricing_currency || '',\n          'Override Currency Symbol': country.pricing_currency_symbol || '',\n          'Override Status': 'Active',\n          'Applied Date': new Date().toISOString().split('T')[0], // Current date as placeholder\n          'Continent': country.continent,\n          'Region': country.region\n        }));\n\n      // Create workbook\n      const wb = XLSX.utils.book_new();\n\n      // Add main countries worksheet\n      const ws = XLSX.utils.json_to_sheet(exportData);\n      XLSX.utils.book_append_sheet(wb, ws, 'Countries');\n\n      // Add Currency Override table worksheet if there are overrides\n      if (currencyOverrideData.length > 0) {\n        const currencyWs = XLSX.utils.json_to_sheet(currencyOverrideData);\n        XLSX.utils.book_append_sheet(wb, currencyWs, 'Currency Overrides');\n      }\n\n      // Generate filename with timestamp\n      const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');\n      const filename = `countries-export-${timestamp}.xlsx`;\n\n      // Write file\n      XLSX.writeFile(wb, filename);\n\n      const overrideMessage = currencyOverrideData.length > 0 \n        ? ` including ${currencyOverrideData.length} currency overrides` \n        : '';\n\n      toast({\n        title: \"Export Successful\",\n        description: `Exported ${dataToExport.length} countries${overrideMessage} to ${filename}`,\n      });\n\n    } catch (error) {\n      console.error('Export error:', error);\n      toast({\n        title: \"Export Failed\",\n        description: \"There was an error exporting the countries data.\",\n        variant: \"destructive\",\n      });\n    }\n  }, [countries, searchQuery, statusFilter, continentFilter, toast]);\n\n  return {\n    handleImportClick,\n    handleExport\n  };\n};","import { useEffect } from 'react';\n\ninterface UseKeyboardShortcutsProps {\n  selectedCountries: string[];\n  onSelectAll: () => void;\n  onClearSelection: () => void;\n  onBulkDelete: () => void;\n  onBulkEdit: () => void;\n  onBulkToggleStatus: () => void;\n  isDialogOpen?: boolean;\n}\n\nexport const useKeyboardShortcuts = ({\n  selectedCountries,\n  onSelectAll,\n  onClearSelection,\n  onBulkDelete,\n  onBulkEdit,\n  onBulkToggleStatus,\n  isDialogOpen = false\n}: UseKeyboardShortcutsProps) => {\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // Don't trigger shortcuts when dialogs are open or when typing in inputs\n      if (\n        isDialogOpen ||\n        event.target instanceof HTMLInputElement ||\n        event.target instanceof HTMLTextAreaElement ||\n        event.target instanceof HTMLSelectElement ||\n        (event.target as HTMLElement)?.contentEditable === 'true'\n      ) {\n        return;\n      }\n\n      const isCtrlOrCmd = event.ctrlKey || event.metaKey;\n\n      // Ctrl/Cmd + A - Select All\n      if (isCtrlOrCmd && event.key === 'a') {\n        event.preventDefault();\n        onSelectAll();\n        return;\n      }\n\n      // Escape - Clear Selection\n      if (event.key === 'Escape') {\n        event.preventDefault();\n        onClearSelection();\n        return;\n      }\n\n      // Only proceed with other shortcuts if countries are selected\n      if (selectedCountries.length === 0) {\n        return;\n      }\n\n      // Ctrl/Cmd + E - Bulk Edit\n      if (isCtrlOrCmd && event.key === 'e') {\n        event.preventDefault();\n        onBulkEdit();\n        return;\n      }\n\n      // Delete - Bulk Delete\n      if (event.key === 'Delete') {\n        event.preventDefault();\n        onBulkDelete();\n        return;\n      }\n\n      // Ctrl/Cmd + T - Bulk Toggle Status\n      if (isCtrlOrCmd && event.key === 't') {\n        event.preventDefault();\n        onBulkToggleStatus();\n        return;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [\n    selectedCountries,\n    onSelectAll,\n    onClearSelection,\n    onBulkDelete,\n    onBulkEdit,\n    onBulkToggleStatus,\n    isDialogOpen\n  ]);\n\n  // Return keyboard shortcuts info for display\n  return {\n    shortcuts: [\n      { key: 'Ctrl/Cmd + A', description: 'Select all countries' },\n      { key: 'Escape', description: 'Clear selection', requiresSelection: true },\n      { key: 'Delete', description: 'Delete selected countries', requiresSelection: true },\n      { key: 'Ctrl/Cmd + E', description: 'Edit selected countries', requiresSelection: true },\n      { key: 'Ctrl/Cmd + T', description: 'Toggle status of selected countries', requiresSelection: true }\n    ]\n  };\n};","import React, { useState } from 'react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport { Keyboard, HelpCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface Shortcut {\n  key: string;\n  description: string;\n  requiresSelection?: boolean;\n}\n\ninterface KeyboardShortcutsPopupProps {\n  shortcuts: Shortcut[];\n  selectedCount: number;\n}\n\nconst KeyboardShortcutsPopup: React.FC<KeyboardShortcutsPopupProps> = ({\n  shortcuts,\n  selectedCount\n}) => {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button \n          variant=\"outline\" \n          size=\"sm\" \n          className=\"gap-2\"\n          title=\"Keyboard Shortcuts\"\n        >\n          <Keyboard className=\"h-4 w-4\" />\n          <span className=\"hidden sm:inline\">Shortcuts</span>\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-0\" align=\"end\">\n        <div className=\"p-4\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Keyboard className=\"h-4 w-4\" />\n            <h3 className=\"font-semibold text-sm\">Keyboard Shortcuts</h3>\n          </div>\n          \n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n            {shortcuts.map((shortcut, index) => (\n              <div \n                key={index}\n                className={cn(\n                  \"flex items-center justify-between p-2 rounded-md border bg-background/50\",\n                  shortcut.requiresSelection && selectedCount === 0\n                    ? \"opacity-50\"\n                    : \"\"\n                )}\n              >\n                <div className=\"flex-1 min-w-0 pr-2\">\n                  <p className=\"text-xs font-medium truncate\">{shortcut.description}</p>\n                  {shortcut.requiresSelection && (\n                    <p className=\"text-xs text-muted-foreground mt-0.5\">\n                      {selectedCount === 0 ? 'Requires selection' : `${selectedCount} selected`}\n                    </p>\n                  )}\n                </div>\n                <Badge \n                  variant=\"secondary\" \n                  className=\"font-mono text-xs shrink-0\"\n                >\n                  {shortcut.key}\n                </Badge>\n              </div>\n            ))}\n          </div>\n          \n          {selectedCount > 0 && (\n            <div className=\"mt-3 p-2 bg-blue-50 dark:bg-blue-950/20 rounded-md border border-blue-200 dark:border-blue-800\">\n              <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                <strong>{selectedCount}</strong> {selectedCount === 1 ? 'city' : 'cities'} selected. \n                Selection-based shortcuts are active.\n              </p>\n            </div>\n          )}\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default KeyboardShortcutsPopup;","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Download, Upload, Search, Trash2, RotateCcw, Eye, Edit, Filter, ToggleLeft, ToggleRight, Keyboard } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from '@/components/ui/sheet';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { CitiesService, CityRow } from '@/services/citiesService';\nimport { CountriesService, CountryRow } from '@/services/countriesService';\nimport { useKeyboardShortcuts } from './cities/hooks/useKeyboardShortcuts';\nimport KeyboardShortcutsPopup from './cities/components/KeyboardShortcutsPopup';\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\n\ninterface City extends CityRow {\n  country_name?: string;\n}\n\nconst CitiesPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { user, loading: authLoading } = useAuth();\n  const { toast } = useToast();\n\n  // State management\n  const [cities, setCities] = useState<City[]>([]);\n  const [countries, setCountries] = useState<CountryRow[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCountry, setSelectedCountry] = useState<string>('all');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const [selectedCities, setSelectedCities] = useState<string[]>([]);\n  const [selectedCity, setSelectedCity] = useState<City | null>(null);\n  const [addDialogOpen, setAddDialogOpen] = useState(false);\n  const [editSheetOpen, setEditSheetOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [viewSheetOpen, setViewSheetOpen] = useState(false);\n  const [bulkEditSheetOpen, setBulkEditSheetOpen] = useState(false);\n  const [keyboardShortcutsOpen, setKeyboardShortcutsOpen] = useState(false);\n\n  // Form data states - updated to match new service interfaces\n  const [addFormData, setAddFormData] = useState<CityInsert>({\n    name: '',\n    region: '',\n    country: '',\n    status: 'active',\n    is_popular: false,\n    has_airport: false\n  });\n\n  const [editFormData, setEditFormData] = useState<CityUpdate>({});\n\n  const [bulkEditFormData, setBulkEditFormData] = useState({\n    status: '' as '' | 'active' | 'disabled'\n  });\n\n  // Additional missing state variables - updated to match new service\n  const [newCityData, setNewCityData] = useState<CityInsert>({\n    name: '',\n    region: '',\n    country: '',\n    status: 'active',\n    is_popular: false,\n    has_airport: false\n  });\n  const [addSheetOpen, setAddSheetOpen] = useState(false);\n  const [viewDialogOpen, setViewDialogOpen] = useState(false);\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\n  // Quick Import (text-based) states\n  const [quickImportOpen, setQuickImportOpen] = useState(false);\n  const [quickImportCountry, setQuickImportCountry] = useState<string>('');\n  const [quickImportRegion, setQuickImportRegion] = useState<string>('');\n  const [quickImportText, setQuickImportText] = useState<string>('');\n  const [quickImportStatus, setQuickImportStatus] = useState<'active' | 'disabled'>('active');\n\n  // Data loading function\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      console.log(' Starting data load...');\n      console.log(' Current cities state:', cities.length);\n      \n      // Load cities with proper pagination parameters\n      console.log(' Loading cities...');\n      const citiesResponse = await CitiesService.getAllCities(1, 1000); // Load up to 1000 cities\n      console.log(' Cities response:', citiesResponse);\n      \n      if (citiesResponse.success && citiesResponse.data) {\n        console.log(' Cities loaded successfully:', citiesResponse.data.cities.length, 'cities');\n        setCities(citiesResponse.data.cities);\n      } else {\n        console.error(' Failed to load cities:', citiesResponse.error);\n        toast({\n          title: \"Error\",\n          description: `Failed to load cities: ${citiesResponse.error}`,\n          variant: \"destructive\"\n        });\n      }\n      \n      // Load active countries using CitiesService\n      console.log(' Loading active countries...');\n      const countriesResponse = await CitiesService.getActiveCountries();\n      console.log(' Countries response:', countriesResponse);\n      \n      if (countriesResponse.success && countriesResponse.data) {\n        console.log(' Active countries loaded successfully:', countriesResponse.data.length);\n        setCountries(countriesResponse.data);\n      } else {\n        console.error(' Failed to load active countries:', countriesResponse.error);\n        toast({\n          title: \"Error\",\n          description: `Failed to load active countries: ${countriesResponse.error}`,\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error loading data:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to load data\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setLoading(false);\n      console.log(' Data loading completed');\n    }\n  };\n\n  // Initial data loading\n  useEffect(() => {\n    console.log(' Cities component mounted, calling loadData...');\n    loadData();\n  }, []);\n\n  const handleAddCity = () => {\n    setNewCityData({\n      name: '',\n      region: '',\n      country: '',\n      status: 'active',\n      is_popular: false,\n      has_airport: false\n    });\n    setAddSheetOpen(true);\n  };\n\n  // Quick import submit handler\n  const handleQuickImportSubmit = async () => {\n    try {\n      // Basic validation\n      if (!quickImportCountry) {\n        toast({ title: 'Validation Error', description: 'Please select a country.', variant: 'destructive' });\n        return;\n      }\n      if (!quickImportText.trim()) {\n        toast({ title: 'Validation Error', description: 'Please enter one or more city names.', variant: 'destructive' });\n        return;\n      }\n\n      // Split by commas or newlines, trim, dedupe, and filter empty\n      const rawEntries = quickImportText\n        .split(/\\n|,/)\n        .map((s) => s.trim())\n        .filter((s) => s.length > 0);\n      const uniqueCityNames = Array.from(new Set(rawEntries));\n\n      let successCount = 0;\n      let failureCount = 0;\n\n      for (const name of uniqueCityNames) {\n        const res = await CitiesService.createCity({\n          name,\n          country: quickImportCountry,\n          region: quickImportRegion || '',\n          status: quickImportStatus,\n          has_airport: false,\n          is_popular: false,\n        });\n\n        if (res.success) successCount++; else failureCount++;\n      }\n\n      toast({\n        title: 'Quick Import Complete',\n        description: `${successCount} cities imported${failureCount ? `, ${failureCount} failed` : ''}.`,\n      });\n\n      // Refresh and reset\n      await loadData();\n      setQuickImportOpen(false);\n      setQuickImportCountry('');\n      setQuickImportRegion('');\n      setQuickImportText('');\n      setQuickImportStatus('active');\n    } catch (err) {\n      console.error('Quick import error:', err);\n      toast({ title: 'Error', description: 'Failed to import cities.', variant: 'destructive' });\n    }\n  };\n\n  const handleViewCity = (city: City) => {\n    setSelectedCity(city);\n    setViewDialogOpen(true);\n  };\n\n  const handleEditCity = (city: City) => {\n    setSelectedCity(city);\n    setEditFormData({ \n      name: city.name,\n      region: city.region,\n      country: city.country,\n      status: city.status,\n      is_popular: city.is_popular,\n      has_airport: city.has_airport\n    });\n    setEditSheetOpen(true);\n  };\n\n  const handleDeleteCity = (city: City) => {\n    setSelectedCity(city);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleSaveNewCity = async () => {\n    try {\n      // Validation\n      if (!newCityData.name || !newCityData.region || !newCityData.country) {\n        toast({\n          title: \"Validation Error\",\n          description: \"Please fill in all required fields (name, region, and country).\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Check for duplicates\n      const existingCity = cities.find(\n        city => city.name.toLowerCase() === newCityData.name.toLowerCase() && \n                city.region?.toLowerCase() === newCityData.region?.toLowerCase()\n      );\n\n      if (existingCity) {\n        toast({\n          title: \"Validation Error\",\n          description: `City \"${newCityData.name}\" already exists in ${newCityData.region}.`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const response = await CitiesService.createCity(newCityData);\n\n      if (response.success) {\n        toast({\n          title: \"City Added\",\n          description: `${newCityData.name} has been successfully added.`,\n        });\n        setAddSheetOpen(false);\n        loadData();\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to add city\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error adding city:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to add city\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleSaveEditCity = async () => {\n    if (!selectedCity || !editFormData) return;\n\n    try {\n      // Validation\n      if (!editFormData.name || (!editFormData.region && !selectedCity.region)) {\n        toast({\n          title: \"Validation Error\",\n          description: \"City name and region are required fields.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Check for duplicates (excluding current city)\n      const existingCity = cities.find(\n        city => city.id !== selectedCity.id &&\n                city.name.toLowerCase() === (editFormData.name || selectedCity.name).toLowerCase() && \n                city.region?.toLowerCase() === (editFormData.region || selectedCity.region)?.toLowerCase()\n      );\n\n      if (existingCity) {\n        toast({\n          title: \"Validation Error\",\n          description: `City \"${editFormData.name || selectedCity.name}\" already exists in ${editFormData.region || selectedCity.region}.`,\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const response = await CitiesService.updateCity(selectedCity.id.toString(), editFormData);\n\n      if (response.success) {\n        toast({\n          title: \"City Updated\",\n          description: `${editFormData.name || selectedCity.name} has been successfully updated.`,\n        });\n        setEditSheetOpen(false);\n        loadData();\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to update city\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error updating city:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update city\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!selectedCity) return;\n\n    try {\n      const response = await CitiesService.deleteCity(selectedCity.id.toString());\n\n      if (response.success) {\n        toast({\n          title: \"City Deleted\",\n          description: `${selectedCity.name} has been successfully deleted.`,\n        });\n        setDeleteDialogOpen(false);\n        loadData();\n      } else {\n        toast({\n          title: \"Error\",\n          description: response.error || \"Failed to delete city\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Error deleting city:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete city\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Bulk operations\n  const handleBulkToggleStatus = async (status: 'active' | 'disabled') => {\n    if (selectedCities.length === 0) {\n      toast({\n        title: \"No Selection\",\n        description: \"Please select cities to update status\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    try {\n      const promises = selectedCities.map(cityId => \n        CitiesService.updateCity(cityId, { status })\n      );\n\n      const results = await Promise.all(promises);\n      const successCount = results.filter(r => r.success).length;\n      const failureCount = results.length - successCount;\n\n      if (successCount > 0) {\n        toast({\n          title: \"Status Updated\",\n          description: `${successCount} cities updated to ${status}${failureCount > 0 ? `, ${failureCount} failed` : ''}`,\n        });\n        loadData();\n        setSelectedCities([]);\n      }\n    } catch (error) {\n      console.error('Error in bulk status update:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to update city status\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Per-row status toggle\n  const handleToggleCityStatus = async (city: City) => {\n    try {\n      const newStatus: 'active' | 'disabled' = city.status === 'active' ? 'disabled' : 'active';\n      const response = await CitiesService.updateCity(city.id.toString(), { status: newStatus });\n\n      if (response.success) {\n        toast({\n          title: 'Status Updated',\n          description: `${city.name} status changed to ${newStatus}.`,\n        });\n        loadData();\n      } else {\n        toast({\n          title: 'Error',\n          description: response.error || 'Failed to update city status',\n          variant: 'destructive',\n        });\n      }\n    } catch (error) {\n      console.error('Error toggling city status:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to update city status',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedCities.length === 0) {\n      toast({\n        title: \"No Selection\",\n        description: \"Please select cities to delete\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    try {\n      const promises = selectedCities.map(cityId => \n        CitiesService.deleteCity(cityId)\n      );\n\n      const results = await Promise.all(promises);\n      const successCount = results.filter(r => r.success).length;\n      const failureCount = results.length - successCount;\n\n      if (successCount > 0) {\n        toast({\n          title: \"Cities Deleted\",\n          description: `${successCount} cities deleted${failureCount > 0 ? `, ${failureCount} failed` : ''}`,\n        });\n        loadData();\n        setSelectedCities([]);\n      }\n    } catch (error) {\n      console.error('Error in bulk delete:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete cities\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const handleBulkEdit = async () => {\n    if (selectedCities.length === 0) {\n      toast({\n        title: \"No Selection\",\n        description: \"Please select cities to edit\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    setBulkEditSheetOpen(true);\n  };\n\n  // Selection handlers\n  const handleSelectCity = (cityId: string) => {\n    setSelectedCities(prev => \n      prev.includes(cityId) \n        ? prev.filter(id => id !== cityId)\n        : [...prev, cityId]\n    );\n  };\n\n  const handleSelectAll = () => {\n    if (selectedCities.length === filteredCities.length && filteredCities.length > 0) {\n      setSelectedCities([]);\n    } else {\n      setSelectedCities(filteredCities.map(city => city.id.toString()));\n    }\n  };\n\n  const handleClearSelection = () => {\n    setSelectedCities([]);\n  };\n\n\n\n  // Reset page when filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchTerm, selectedCountry, statusFilter]);\n\n  // Fixed filtering logic - updated for new service structure\n  const filteredCities = cities.filter(city => {\n    const matchesSearch = !searchTerm || \n      city.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      city.region?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      city.country?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCountry = selectedCountry === 'all' || city.country === selectedCountry;\n    const matchesStatus = statusFilter === 'all' || city.status === statusFilter;\n    \n    return matchesSearch && matchesCountry && matchesStatus;\n  });\n\n  const totalItems = filteredCities.length;\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n  // Get paginated cities for current page\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const paginatedCities = filteredCities.slice(startIndex, endIndex);\n\n  // Status counts for compact status bar\n  const totalCitiesCount = cities.length;\n  const activeCitiesCount = cities.filter(c => c.status === 'active').length;\n  const disabledCitiesCount = cities.filter(c => c.status === 'disabled').length;\n\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  const goToPage = (page: number) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n\n  // Enhanced Export functionality - updated for new service structure\n  const handleExport = () => {\n    const dataToExport = filteredCities.length > 0 ? filteredCities : cities;\n    \n    const worksheet = XLSX.utils.json_to_sheet(dataToExport.map(city => ({\n      ID: city.id,\n      Name: city.name,\n      Region: city.region || '',\n      Country: city.country || '',\n      'Has Airport': city.has_airport ? 'Yes' : 'No',\n      'Is Popular': city.is_popular ? 'Yes' : 'No',\n      Status: city.status,\n      'Created At': city.created_at,\n      'Updated At': city.updated_at\n    })));\n    \n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Cities\");\n    \n    // Generate an Excel file as a binary string\n    const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });\n    const data = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n    \n    // Save the file\n    saveAs(data, `cities_export_${new Date().toISOString().split('T')[0]}.xlsx`);\n    \n    toast({\n      title: \"Export Successful\",\n      description: `${dataToExport.length} cities exported to Excel file.`,\n    });\n  };\n\n  // Enhanced Import functionality\n  const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const data = e.target?.result;\n        const workbook = XLSX.read(data, { type: 'binary' });\n        const sheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[sheetName];\n        const importedData = XLSX.utils.sheet_to_json(worksheet);\n        \n        if (importedData.length > 0) {\n          // Process and validate imported data - updated for new service structure\n          const processedData = importedData.map((row: any) => {\n            const statusValue = (row['Status'] || '').toString().toLowerCase() === 'active' ? 'active' : 'disabled';\n            \n            return {\n              name: row['Name'] || 'Unknown City',\n              region: row['Region'] || '',\n              country: row['Country'] || '',\n              is_popular: (row['Is Popular'] || '').toString().toLowerCase() === 'yes',\n              has_airport: (row['Has Airport'] || '').toString().toLowerCase() === 'yes',\n              status: statusValue as 'active' | 'disabled'\n            };\n          });\n          \n          // Import cities one by one\n          const importCities = async () => {\n            let successCount = 0;\n            let failureCount = 0;\n            \n            for (const cityData of processedData) {\n              try {\n                const response = await CitiesService.createCity(cityData);\n                if (response.success) {\n                  successCount++;\n                } else {\n                  failureCount++;\n                }\n              } catch (error) {\n                failureCount++;\n              }\n            }\n            \n            toast({\n              title: \"Import Complete\",\n              description: `${successCount} cities imported successfully${failureCount > 0 ? `, ${failureCount} failed` : ''}`,\n            });\n            \n            loadData();\n          };\n          \n          importCities();\n          setImportDialogOpen(false);\n        }\n      } catch (error) {\n        console.error('Error importing data:', error);\n        toast({\n          title: \"Import Failed\",\n          description: \"There was an error importing the data. Please check the file format and try again.\",\n          variant: \"destructive\"\n        });\n      }\n    };\n    \n    reader.readAsBinaryString(file);\n    // Reset the input\n    event.target.value = '';\n  };\n\n  // Keyboard shortcuts\n  const shortcuts = [\n    { key: 'Ctrl/Cmd + N', description: 'Add new city' },\n    { key: 'Ctrl/Cmd + F', description: 'Focus search input' },\n    { key: 'Ctrl/Cmd + A', description: 'Select all cities' },\n    { key: 'Escape', description: 'Clear selection' },\n    { key: 'Delete', description: 'Delete selected cities', requiresSelection: true },\n    { key: 'Ctrl/Cmd + E', description: 'Edit selected cities', requiresSelection: true },\n    { key: 'Ctrl/Cmd + T', description: 'Toggle status of selected cities', requiresSelection: true }\n  ];\n\n  // Keyboard shortcuts implementation\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // Don't trigger shortcuts when dialogs are open or when typing in inputs\n      if (\n        addSheetOpen || editSheetOpen || deleteDialogOpen || viewSheetOpen || bulkEditSheetOpen || keyboardShortcutsOpen ||\n        event.target instanceof HTMLInputElement ||\n        event.target instanceof HTMLTextAreaElement ||\n        event.target instanceof HTMLSelectElement ||\n        (event.target as HTMLElement)?.contentEditable === 'true'\n      ) {\n        return;\n      }\n\n      const isCtrlOrCmd = event.ctrlKey || event.metaKey;\n\n      // Ctrl/Cmd + N - Add new city\n      if (isCtrlOrCmd && event.key === 'n') {\n        event.preventDefault();\n        handleAddCity();\n        return;\n      }\n\n      // Ctrl/Cmd + F - Focus search input\n      if (isCtrlOrCmd && event.key === 'f') {\n        event.preventDefault();\n        const searchInput = document.getElementById('search-input');\n        if (searchInput) {\n          searchInput.focus();\n        }\n        return;\n      }\n\n      // Ctrl/Cmd + A - Select All\n      if (isCtrlOrCmd && event.key === 'a') {\n        event.preventDefault();\n        handleSelectAll();\n        return;\n      }\n\n      // Escape - Clear Selection\n      if (event.key === 'Escape') {\n        event.preventDefault();\n        handleClearSelection();\n        return;\n      }\n\n      // Only proceed with other shortcuts if cities are selected\n      if (selectedCities.length === 0) {\n        return;\n      }\n\n      // Ctrl/Cmd + E - Bulk Edit\n      if (isCtrlOrCmd && event.key === 'e') {\n        event.preventDefault();\n        handleBulkEdit();\n        return;\n      }\n\n      // Delete - Bulk Delete\n      if (event.key === 'Delete') {\n        event.preventDefault();\n        handleBulkDelete();\n        return;\n      }\n\n      // Ctrl/Cmd + T - Bulk Toggle Status\n      if (isCtrlOrCmd && event.key === 't') {\n        event.preventDefault();\n        handleBulkToggleStatus(selectedCities.length > 0 ? 'active' : 'disabled');\n        return;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [selectedCities, addSheetOpen, editSheetOpen, deleteDialogOpen, viewSheetOpen, bulkEditSheetOpen, keyboardShortcutsOpen]);\n\n  if (authLoading || !user) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <PageLayout>\n      <div className=\"space-y-6\">\n\n\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n          <div>\n            <h1 className=\"text-2xl sm:text-3xl font-bold tracking-tight\">Cities Management</h1>\n            <p className=\"text-muted-foreground text-sm sm:text-base\">\n              Manage cities and their details across all countries\n            </p>\n          </div>\n          <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto\">\n            {/* Primary Actions */}\n            <div className=\"flex flex-wrap gap-2\">\n              <Button onClick={handleAddCity} className=\"gap-2 flex-1 sm:flex-none\">\n                <Plus className=\"h-4 w-4\" />\n                <span className=\"hidden xs:inline\">Add City</span>\n                <span className=\"xs:hidden\">Add</span>\n              </Button>\n              <Button variant=\"outline\" onClick={() => setImportDialogOpen(true)} className=\"gap-2 flex-1 sm:flex-none\">\n                <Upload className=\"h-4 w-4\" />\n                <span className=\"hidden xs:inline\">Import</span>\n              </Button>\n              <Button variant=\"outline\" onClick={() => setQuickImportOpen(true)} className=\"gap-2 flex-1 sm:flex-none\">\n                <Upload className=\"h-4 w-4\" />\n                <span className=\"hidden xs:inline\">Quick Import</span>\n              </Button>\n              <Button variant=\"outline\" onClick={handleExport} className=\"gap-2 flex-1 sm:flex-none\">\n                <Download className=\"h-4 w-4\" />\n                <span className=\"hidden xs:inline\">Export</span>\n              </Button>\n              <KeyboardShortcutsPopup shortcuts={shortcuts} selectedCount={selectedCities.length} />\n            </div>\n            \n            {/* Bulk Actions - Hidden on mobile, shown in mobile bulk actions card */}\n            {selectedCities.length > 0 && (\n              <div className=\"hidden md:flex flex-wrap gap-2\">\n                <Button variant=\"outline\" onClick={() => handleBulkToggleStatus('active')} className=\"gap-2\">\n                  <ToggleRight className=\"h-4 w-4\" />\n                  Activate ({selectedCities.length})\n                </Button>\n                <Button variant=\"outline\" onClick={() => handleBulkToggleStatus('disabled')} className=\"gap-2\">\n                  <ToggleLeft className=\"h-4 w-4\" />\n                  Disable ({selectedCities.length})\n                </Button>\n                <Button variant=\"outline\" onClick={handleBulkEdit} className=\"gap-2\">\n                  <Edit className=\"h-4 w-4\" />\n                  Edit ({selectedCities.length})\n                </Button>\n                <Button variant=\"destructive\" onClick={handleBulkDelete} className=\"gap-2\">\n                  <Trash2 className=\"h-4 w-4\" />\n                  Delete ({selectedCities.length})\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Compact Status Bar with Counts */}\n        <div className=\"grid grid-cols-3 gap-2 sm:gap-3\">\n          <div className=\"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-md p-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-6 w-6 bg-blue-100 dark:bg-blue-900/50 rounded-sm flex items-center justify-center\">\n                <span className=\"text-blue-600 dark:text-blue-400 text-xs font-bold\"></span>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-blue-700 dark:text-blue-300\">Total</p>\n                <p className=\"text-base font-bold text-blue-900 dark:text-blue-100\">{totalCitiesCount}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded-md p-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-6 w-6 bg-green-100 dark:bg-green-900/50 rounded-sm flex items-center justify-center\">\n                <span className=\"text-green-600 dark:text-green-400 text-xs font-bold\"></span>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-green-700 dark:text-green-300\">Active</p>\n                <p className=\"text-base font-bold text-green-900 dark:text-green-100\">{activeCitiesCount}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-md p-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-6 w-6 bg-gray-100 dark:bg-gray-700 rounded-sm flex items-center justify-center\">\n                <span className=\"text-gray-600 dark:text-gray-400 text-xs font-bold\"></span>\n              </div>\n              <div>\n                <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300\">Disabled</p>\n                <p className=\"text-base font-bold text-gray-900 dark:text-gray-100\">{disabledCitiesCount}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters - redesigned: compact, no heading, mobile-first grid */}\n        <Card className=\"border-muted\">\n          <CardContent className=\"p-3 sm:p-4\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\n              {/* Search */}\n              <div>\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    id=\"search-input\"\n                    placeholder=\"Search cities\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10 h-9\"\n                  />\n                </div>\n              </div>\n              {/* Status */}\n              <div>\n                <Select value={statusFilter} onValueChange={(value: any) => setStatusFilter(value)}>\n                  <SelectTrigger className=\"h-9\">\n                    <SelectValue placeholder=\"Status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Status</SelectItem>\n                    <SelectItem value=\"active\">Active</SelectItem>\n                    <SelectItem value=\"disabled\">Disabled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              {/* Country */}\n              <div>\n                <Select value={selectedCountry} onValueChange={setSelectedCountry}>\n                  <SelectTrigger className=\"h-9\">\n                    <SelectValue placeholder=\"Country\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"max-h-64\">\n                    <SelectItem value=\"all\">All Countries</SelectItem>\n                    {countries.map((country) => (\n                      <SelectItem key={country.id} value={country.name}>\n                        {country.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              {/* Items per page */}\n              <div>\n                <Select value={itemsPerPage.toString()} onValueChange={(value) => setItemsPerPage(Number(value))}>\n                  <SelectTrigger className=\"h-9\">\n                    <SelectValue placeholder=\"Items per page\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"5\">5</SelectItem>\n                    <SelectItem value=\"10\">10</SelectItem>\n                    <SelectItem value=\"25\">25</SelectItem>\n                    <SelectItem value=\"50\">50</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n\n\n        {/* Desktop Table */}\n        <Card className=\"hidden md:block\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-12\">\n                  <Checkbox\n                    checked={selectedCities.length === filteredCities.length && filteredCities.length > 0}\n                    onCheckedChange={handleSelectAll}\n                  />\n                </TableHead>\n                <TableHead className=\"whitespace-nowrap\">Name</TableHead>\n                <TableHead className=\"whitespace-nowrap lg:table-cell\">Region</TableHead>\n                <TableHead className=\"whitespace-nowrap\">Country</TableHead>\n                <TableHead className=\"whitespace-nowrap\">Airport</TableHead>\n                <TableHead className=\"whitespace-nowrap lg:table-cell\">Popular</TableHead>\n                <TableHead className=\"whitespace-nowrap\">Status</TableHead>\n                <TableHead className=\"text-right whitespace-nowrap\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {loading ? (\n                <TableRow>\n                  <TableCell colSpan={8} className=\"text-center py-8\">\n                    Loading cities...\n                  </TableCell>\n                </TableRow>\n              ) : paginatedCities.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={8} className=\"text-center py-8\">\n                    No cities found\n                  </TableCell>\n                </TableRow>\n              ) : (\n                paginatedCities.map((city) => (\n                  <TableRow key={city.id} className=\"hover:bg-muted/50\">\n                    <TableCell className=\"py-2\">\n                      <Checkbox\n                        checked={selectedCities.includes(city.id.toString())}\n                        onCheckedChange={() => handleSelectCity(city.id.toString())}\n                      />\n                    </TableCell>\n                    <TableCell className=\"font-medium text-sm truncate max-w-[220px]\">{city.name}</TableCell>\n                    <TableCell className=\"text-sm lg:table-cell\">{city.region || '-'}</TableCell>\n                    <TableCell className=\"text-sm truncate max-w-[160px]\">{city.country || '-'}</TableCell>\n                    <TableCell className=\"text-sm\">\n                      {city.has_airport ? (\n                        <Badge variant=\"secondary\"> Yes</Badge>\n                      ) : (\n                        <Badge variant=\"outline\">No</Badge>\n                      )}\n                    </TableCell>\n                    <TableCell className=\"text-sm lg:table-cell\">\n                      {city.is_popular ? (\n                        <Badge variant=\"secondary\">Yes</Badge>\n                      ) : (\n                        <Badge variant=\"outline\">No</Badge>\n                      )}\n                    </TableCell>\n                    <TableCell className=\"text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={city.status === 'active' ? 'default' : 'secondary'}>\n                          {city.status}\n                        </Badge>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          title={city.status === 'active' ? 'Disable' : 'Activate'}\n                          onClick={() => handleToggleCityStatus(city)}\n                          className=\"h-8 px-2\"\n                        >\n                          {city.status === 'active' ? (\n                            <ToggleLeft className=\"h-4 w-4\" />\n                          ) : (\n                            <ToggleRight className=\"h-4 w-4\" />\n                          )}\n                        </Button>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleViewCity(city)}\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleEditCity(city)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleDeleteCity(city)}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </Card>\n\n        {/* Mobile Cards */}\n        <div className=\"md:hidden space-y-3\">\n          {/* Mobile Bulk Actions */}\n          {selectedCities.length > 0 && (\n            <Card className=\"bg-blue-50 border-blue-200\">\n              <CardContent className=\"p-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm font-medium text-blue-900\">\n                    {selectedCities.length} cities selected\n                  </span>\n                  <div className=\"flex gap-1\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleBulkToggleStatus('active')}\n                      className=\"h-8 px-2 text-xs\"\n                    >\n                      <ToggleRight className=\"h-3 w-3 mr-1\" />\n                      Activate\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleBulkToggleStatus('disabled')}\n                      className=\"h-8 px-2 text-xs\"\n                    >\n                      <ToggleLeft className=\"h-3 w-3 mr-1\" />\n                      Disable\n                    </Button>\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={handleBulkDelete}\n                      className=\"h-8 px-2 text-xs\"\n                    >\n                      <Trash2 className=\"h-3 w-3 mr-1\" />\n                      Delete\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {loading ? (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                Loading cities...\n              </CardContent>\n            </Card>\n          ) : paginatedCities.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-6 text-center\">\n                No cities found\n              </CardContent>\n            </Card>\n          ) : (\n            paginatedCities.map((city) => (\n              <Card key={city.id} className=\"overflow-hidden\">\n                <CardContent className=\"p-0\">\n                  <div className=\"flex items-center p-3\">\n                    <Checkbox\n                      checked={selectedCities.includes(city.id.toString())}\n                      onCheckedChange={() => handleSelectCity(city.id.toString())}\n                      className=\"mr-3\"\n                    />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 min-w-0\">\n                          <h3 className=\"font-medium text-base truncate\">{city.name}</h3>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <span className=\"text-sm text-muted-foreground\">\n                              {city.country || 'Unknown'}\n                            </span>\n                            {city.region && (\n                              <>\n                                <span className=\"text-muted-foreground\"></span>\n                                <span className=\"text-sm text-muted-foreground\">{city.region}</span>\n                              </>\n                            )}\n                          </div>\n                          <div className=\"flex gap-1 mt-2 flex-wrap\">\n                            <Badge \n                              variant={city.status === 'active' ? 'default' : 'secondary'}\n                              className=\"text-xs\"\n                            >\n                              {city.status}\n                            </Badge>\n                            {city.has_airport && (\n                              <Badge variant=\"outline\" className=\"text-xs\"> Airport</Badge>\n                            )}\n                            {city.is_popular && (\n                              <Badge variant=\"outline\" className=\"text-xs\"> Popular</Badge>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex gap-1 ml-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleViewCity(city)}\n                            className=\"h-8 w-8 p-0\"\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleEditCity(city)}\n                            className=\"h-8 w-8 p-0\"\n                          >\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleDeleteCity(city)}\n                            className=\"h-8 w-8 p-0 text-destructive hover:text-destructive\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\">\n              Showing {((currentPage - 1) * itemsPerPage) + 1} to {Math.min(currentPage * itemsPerPage, totalItems)} of {totalItems} cities\n            </p>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={prevPage}\n                disabled={currentPage === 1}\n              >\n                Previous\n              </Button>\n              {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                const page = i + 1;\n                return (\n                  <Button\n                    key={page}\n                    variant={currentPage === page ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => goToPage(page)}\n                  >\n                    {page}\n                  </Button>\n                );\n              })}\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={nextPage}\n                disabled={currentPage === totalPages}\n              >\n                Next\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* View City Dialog */}\n        <Dialog open={viewDialogOpen} onOpenChange={setViewDialogOpen}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>City Details</DialogTitle>\n              <DialogDescription>\n                View detailed information about this city\n              </DialogDescription>\n            </DialogHeader>\n            {selectedCity && (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Name</Label>\n                    <p className=\"text-sm mt-1\">{selectedCity.name}</p>\n                  </div>\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Region</Label>\n                    <p className=\"text-sm mt-1\">{selectedCity.region || '-'}</p>\n                  </div>\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Country</Label>\n                    <p className=\"text-sm mt-1\">{selectedCity.country || '-'}</p>\n                  </div>\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Has Airport</Label>\n                    <div className=\"mt-1\">\n                      <Badge variant={selectedCity.has_airport ? 'default' : 'secondary'}>\n                        {selectedCity.has_airport ? 'Yes' : 'No'}\n                      </Badge>\n                    </div>\n                  </div>\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Status</Label>\n                    <div className=\"mt-1 flex items-center gap-2\">\n                      <Badge variant={selectedCity.status === 'active' ? 'default' : 'secondary'}>\n                        {selectedCity.status}\n                      </Badge>\n                    </div>\n                  </div>\n                  <div className=\"p-3 rounded-md border\">\n                    <Label className=\"text-sm font-medium\">Popular</Label>\n                    <p className=\"text-sm mt-1\">{selectedCity.is_popular ? 'Yes' : 'No'}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setViewDialogOpen(false)}>\n                Close\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Add City Sheet */}\n        <Sheet open={addSheetOpen} onOpenChange={setAddSheetOpen}>\n          <SheetContent className=\"w-full sm:max-w-md\">\n            <SheetHeader>\n              <SheetTitle className=\"flex items-center gap-2\">\n                <Plus className=\"w-5 h-5\" />\n                Add New City\n              </SheetTitle>\n              <SheetDescription>\n                Create a new city entry with all the required information.\n              </SheetDescription>\n            </SheetHeader>\n            \n            <div className=\"space-y-6 py-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"city-name\">City Name *</Label>\n                <Input\n                  id=\"city-name\"\n                  placeholder=\"Enter city name\"\n                  value={newCityData.name}\n                  onChange={(e) => setNewCityData({ ...newCityData, name: e.target.value })}\n                  className=\"border-2 focus:border-primary\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"city-region\">Regions (state/province/zone)</Label>\n                <Input\n                  id=\"city-region\"\n                  placeholder=\"Enter region\"\n                  value={newCityData.region || ''}\n                  onChange={(e) => setNewCityData({ ...newCityData, region: e.target.value })}\n                  className=\"border-2 focus:border-primary\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <Label htmlFor=\"city-country\">Country</Label>\n                <Select \n                  value={newCityData.country}\n                  onValueChange={(value) => setNewCityData({ ...newCityData, country: value })}\n                >\n                  <SelectTrigger id=\"city-country\" className=\"border-2 focus:border-primary\">\n                    <SelectValue placeholder=\"Select country\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {countries.map((country) => (\n                      <SelectItem key={country.id} value={country.name}>\n                        {country.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"city-has-airport\">Has Airport</Label>\n                  <div className=\"flex items-center justify-between rounded-md border p-3\">\n                    <span className=\"text-sm\">{newCityData.has_airport ? 'Yes' : 'No'}</span>\n                    <Switch\n                      id=\"city-has-airport\"\n                      checked={newCityData.has_airport || false}\n                      onCheckedChange={(checked) => setNewCityData({ ...newCityData, has_airport: checked })}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"status-toggle\">Status</Label>\n                  <div className=\"flex items-center justify-between rounded-md border p-3\">\n                    <span className=\"text-sm\">{newCityData.status === 'active' ? 'Active' : 'Disabled'}</span>\n                    <Switch\n                      id=\"status-toggle\"\n                      checked={newCityData.status === 'active'}\n                      onCheckedChange={(checked) => setNewCityData({ ...newCityData, status: checked ? 'active' : 'disabled' })}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2 sm:col-span-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"is-popular\">Is Popular Destination</Label>\n                    <Switch\n                      id=\"is-popular\"\n                      checked={newCityData.is_popular}\n                      onCheckedChange={(checked) => setNewCityData({ ...newCityData, is_popular: checked })}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <SheetFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setAddSheetOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSaveNewCity} className=\"gap-2\">\n                <Plus className=\"w-4 h-4\" />\n                Add City\n              </Button>\n            </SheetFooter>\n          </SheetContent>\n        </Sheet>\n\n        {/* Edit City Sheet */}\n        <Sheet open={editSheetOpen} onOpenChange={setEditSheetOpen}>\n          <SheetContent className=\"w-full sm:max-w-md\">\n            <SheetHeader>\n              <SheetTitle className=\"flex items-center gap-2\">\n                <Edit className=\"w-5 h-5\" />\n                Edit City\n              </SheetTitle>\n              <SheetDescription>\n                Update the city information below.\n              </SheetDescription>\n            </SheetHeader>\n            \n            {selectedCity && (\n              <div className=\"space-y-6 py-6\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-city-name\">City Name *</Label>\n                  <Input\n                    id=\"edit-city-name\"\n                    placeholder=\"Enter city name\"\n                    value={editFormData.name || ''}\n                    onChange={(e) => setEditFormData({ ...editFormData, name: e.target.value })}\n                    className=\"border-2 focus:border-primary\"\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-city-region\">Region</Label>\n                  <Input\n                    id=\"edit-city-region\"\n                    placeholder=\"Enter region (optional)\"\n                    value={editFormData.region || ''}\n                    onChange={(e) => setEditFormData({ ...editFormData, region: e.target.value })}\n                    className=\"border-2 focus:border-primary\"\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-city-country\">Country</Label>\n                  <Select \n                    value={editFormData.country || ''}\n                    onValueChange={(value) => setEditFormData({ ...editFormData, country: value })}\n                  >\n                    <SelectTrigger id=\"edit-city-country\" className=\"border-2 focus:border-primary\">\n                      <SelectValue placeholder=\"Select country\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {countries.map((country) => (\n                        <SelectItem key={country.id} value={country.name}>\n                          {country.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-city-has-airport\">Has Airport</Label>\n                  <div className=\"flex items-center space-x-2\">\n                    <Switch\n                      id=\"edit-city-has-airport\"\n                      checked={editFormData.has_airport || false}\n                      onCheckedChange={(checked) => setEditFormData({ ...editFormData, has_airport: checked })}\n                    />\n                    <Label htmlFor=\"edit-city-has-airport\" className=\"text-sm text-muted-foreground\">\n                      City has an airport\n                    </Label>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"edit-is-popular\">Is Popular Destination</Label>\n                    <Switch\n                      id=\"edit-is-popular\"\n                      checked={editFormData.is_popular || false}\n                      onCheckedChange={(checked) => setEditFormData({ ...editFormData, is_popular: checked })}\n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label>Status</Label>\n                    <Select \n                      value={editFormData.status || 'active'} \n                      onValueChange={(value: 'active' | 'disabled') => setEditFormData({ ...editFormData, status: value })}\n                    >\n                      <SelectTrigger className=\"border-2 focus:border-primary\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"active\">Active</SelectItem>\n                        <SelectItem value=\"disabled\">Disabled</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <SheetFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setEditSheetOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSaveEditCity} className=\"gap-2\">\n                <Edit className=\"w-4 h-4\" />\n                Save Changes\n              </Button>\n            </SheetFooter>\n          </SheetContent>\n        </Sheet>\n\n        {/* View City Sheet */}\n        <Sheet open={viewSheetOpen} onOpenChange={setViewSheetOpen}>\n          <SheetContent className=\"w-full sm:max-w-md\">\n            <SheetHeader>\n              <SheetTitle className=\"flex items-center gap-2\">\n                <Eye className=\"w-5 h-5\" />\n                City Details\n              </SheetTitle>\n              <SheetDescription>\n                View detailed information about this city.\n              </SheetDescription>\n            </SheetHeader>\n            \n            {selectedCity && (\n              <div className=\"space-y-6 py-6\">\n                <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-primary/10 to-primary/5 rounded-lg border\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-primary/30 to-primary/10 rounded-xl flex items-center justify-center\">\n                    <span className=\"text-lg font-bold text-primary\">\n                      {selectedCity.name.charAt(0).toUpperCase()}\n                    </span>\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold\">{selectedCity.name}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{selectedCity.country}</p>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">REGION</Label>\n                    <p className=\"text-sm font-medium\">{selectedCity.region || 'Not specified'}</p>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">STATUS</Label>\n                    <Badge \n                      variant={selectedCity.status === 'active' ? 'default' : 'secondary'}\n                      className={selectedCity.status === 'active' \n                        ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300' \n                        : 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300'\n                      }\n                    >\n                      {selectedCity.status === 'active' ? ' Active' : ' Disabled'}\n                    </Badge>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">HAS AIRPORT</Label>\n                    <div className=\"flex items-center gap-2\">\n                      {selectedCity.has_airport ? (\n                        <Badge variant=\"secondary\" className=\"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300\">\n                           Yes\n                        </Badge>\n                      ) : (\n                        <Badge variant=\"outline\" className=\"text-muted-foreground\">\n                          No\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">POPULAR DESTINATION</Label>\n                    <div className=\"flex items-center gap-2\">\n                      {selectedCity.is_popular ? (\n                        <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300\">\n                           Popular\n                        </Badge>\n                      ) : (\n                        <Badge variant=\"outline\" className=\"text-muted-foreground\">\n                          Regular\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4 pt-4 border-t\">\n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">CREATED</Label>\n                    <p className=\"text-sm\">{new Date(selectedCity.created_at).toLocaleDateString()}</p>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label className=\"text-xs font-medium text-muted-foreground\">LAST UPDATED</Label>\n                    <p className=\"text-sm\">{new Date(selectedCity.updated_at).toLocaleDateString()}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <SheetFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setViewSheetOpen(false)}>\n                Close\n              </Button>\n              {selectedCity && (\n                <Button onClick={() => {\n                  setViewSheetOpen(false);\n                  handleEditCity(selectedCity);\n                }} className=\"gap-2\">\n                  <Edit className=\"w-4 h-4\" />\n                  Edit City\n                </Button>\n              )}\n            </SheetFooter>\n          </SheetContent>\n        </Sheet>\n\n        {/* Delete Confirmation Dialog */}\n        <Dialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2 text-destructive\">\n                <Trash2 className=\"w-5 h-5\" />\n                Delete City\n              </DialogTitle>\n              <DialogDescription>\n                Are you sure you want to delete \"{selectedCity?.name}\"? This action cannot be undone.\n              </DialogDescription>\n            </DialogHeader>\n            \n            <div className=\"flex items-center gap-3 p-4 bg-destructive/10 rounded-lg border border-destructive/20\">\n              <div className=\"w-10 h-10 bg-destructive/20 rounded-full flex items-center justify-center\">\n                <Trash2 className=\"w-5 h-5 text-destructive\" />\n              </div>\n              <div>\n                <p className=\"font-medium text-destructive\">This will permanently delete:</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {selectedCity?.name} in {selectedCity?.country}\n                </p>\n              </div>\n            </div>\n            \n            <DialogFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setDeleteDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button variant=\"destructive\" onClick={handleConfirmDelete} className=\"gap-2\">\n                <Trash2 className=\"w-4 h-4\" />\n                Delete City\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Quick Import Dialog */}\n        <Dialog open={quickImportOpen} onOpenChange={setQuickImportOpen}>\n          <DialogContent className=\"sm:max-w-lg\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <Upload className=\"w-5 h-5\" />\n                Quick Import Cities\n              </DialogTitle>\n              <DialogDescription>\n                Paste city names (one per line or comma-separated) to import into the selected active country. For Region use (state/province/zone).\n              </DialogDescription>\n            </DialogHeader>\n\n            <div className=\"space-y-4 py-2\">\n              <div className=\"space-y-2\">\n                <Label>Country</Label>\n                <Select value={quickImportCountry} onValueChange={setQuickImportCountry}>\n                  <SelectTrigger className=\"border-2 focus:border-primary\">\n                    <SelectValue placeholder=\"Select active country\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {countries.filter(c => c.status === 'active').map(c => (\n                      <SelectItem key={c.id} value={c.name}>{c.name}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Regions (state/province/zone)</Label>\n                <Input\n                  value={quickImportRegion}\n                  onChange={(e) => setQuickImportRegion(e.target.value)}\n                  placeholder=\"Enter region\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Cities</Label>\n                <Textarea\n                  value={quickImportText}\n                  onChange={(e) => setQuickImportText(e.target.value)}\n                  placeholder=\"One city per line, or comma-separated\"\n                  className=\"min-h-[160px]\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  Example: Lagos, Abuja, Port Harcourt\n                </p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Status</Label>\n                <Select value={quickImportStatus} onValueChange={(value: 'active' | 'disabled') => setQuickImportStatus(value)}>\n                  <SelectTrigger className=\"border-2 focus:border-primary\">\n                    <SelectValue placeholder=\"Select status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"active\">Active</SelectItem>\n                    <SelectItem value=\"disabled\">Disabled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <DialogFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setQuickImportOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleQuickImportSubmit} className=\"gap-2\">\n                <Upload className=\"w-4 h-4\" />\n                Import Cities\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Import Dialog */}\n        <Dialog open={importDialogOpen} onOpenChange={setImportDialogOpen}>\n          <DialogContent className=\"sm:max-w-md\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <Upload className=\"w-5 h-5\" />\n                Import Cities\n              </DialogTitle>\n              <DialogDescription>\n                Upload an Excel or CSV file exported from the Cities page.\n              </DialogDescription>\n            </DialogHeader>\n\n            <div className=\"space-y-4 py-2\">\n              <input\n                id=\"cities-import-file\"\n                type=\"file\"\n                accept=\".xlsx,.csv\"\n                onChange={handleImport}\n                className=\"hidden\"\n              />\n\n              <Button\n                type=\"button\"\n                onClick={() => {\n                  const el = document.getElementById('cities-import-file') as HTMLInputElement | null;\n                  el?.click();\n                }}\n                className=\"gap-2\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                Choose File\n              </Button>\n\n              <p className=\"text-xs text-muted-foreground\">\n                Expected columns: <code>Name</code>, <code>Region</code>, <code>Country</code>, <code>Has Airport</code>, <code>Is Popular</code>, <code>Status</code>.\n              </p>\n            </div>\n\n            <DialogFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setImportDialogOpen(false)}>\n                Close\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n\n        {/* Bulk Edit Sheet */}\n        <Sheet open={bulkEditSheetOpen} onOpenChange={setBulkEditSheetOpen}>\n          <SheetContent className=\"w-full sm:max-w-md\">\n            <SheetHeader>\n              <SheetTitle className=\"flex items-center gap-2\">\n                <Edit className=\"w-5 h-5\" />\n                Bulk Edit Cities\n              </SheetTitle>\n              <SheetDescription>\n                Edit multiple cities at once. Only filled fields will be updated.\n              </SheetDescription>\n            </SheetHeader>\n            \n            <div className=\"space-y-6 py-6\">\n              <div className=\"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800\">\n                <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                  <strong>{selectedCities.length} cities selected</strong> for bulk editing\n                </p>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>Country</Label>\n                  <Select \n                    value={bulkEditFormData.country} \n                    onValueChange={(value) => setBulkEditFormData({ ...bulkEditFormData, country: value })}\n                  >\n                    <SelectTrigger className=\"border-2 focus:border-primary\">\n                      <SelectValue placeholder=\"Select country (optional)\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"\">No change</SelectItem>\n                      {countries.map((country) => (\n                        <SelectItem key={country.id} value={country.name}>\n                          {country.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label>Status</Label>\n                  <Select \n                    value={bulkEditFormData.status} \n                    onValueChange={(value: '' | 'active' | 'disabled') => setBulkEditFormData({ ...bulkEditFormData, status: value })}\n                  >\n                    <SelectTrigger className=\"border-2 focus:border-primary\">\n                      <SelectValue placeholder=\"Select status (optional)\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"\">No change</SelectItem>\n                      <SelectItem value=\"active\">Active</SelectItem>\n                      <SelectItem value=\"disabled\">Disabled</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              \n              <div className=\"p-3 bg-yellow-50 dark:bg-yellow-950/30 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                <p className=\"text-xs text-yellow-700 dark:text-yellow-300\">\n                  <strong>Note:</strong> Only the fields you select will be updated. Empty fields will remain unchanged.\n                </p>\n              </div>\n            </div>\n            \n            <SheetFooter className=\"gap-2\">\n              <Button variant=\"outline\" onClick={() => setBulkEditSheetOpen(false)}>\n                Cancel\n              </Button>\n              <Button \n                onClick={async () => {\n                  // Implement bulk edit logic\n                  const updates: any = {};\n                  if (bulkEditFormData.country) updates.country = bulkEditFormData.country;\n                  if (bulkEditFormData.status) updates.status = bulkEditFormData.status;\n                  \n                  if (Object.keys(updates).length > 0) {\n                    try {\n                      const promises = selectedCities.map(cityId => \n                        CitiesService.updateCity(cityId, updates)\n                      );\n                      \n                      const results = await Promise.all(promises);\n                      const successCount = results.filter(r => r.success).length;\n                      const failureCount = results.length - successCount;\n                      \n                      if (successCount > 0) {\n                        toast({\n                          title: \"Bulk Edit Complete\",\n                          description: `${successCount} cities updated${failureCount > 0 ? `, ${failureCount} failed` : ''}`,\n                        });\n                        loadData();\n                        setSelectedCities([]);\n                        setBulkEditSheetOpen(false);\n                        setBulkEditFormData({ country: '', status: '' });\n                      }\n                    } catch (error) {\n                      console.error('Error in bulk edit:', error);\n                      toast({\n                        title: \"Error\",\n                        description: \"Failed to update cities\",\n                        variant: \"destructive\"\n                      });\n                    }\n                  } else {\n                    toast({\n                      title: \"No Changes\",\n                      description: \"Please select at least one field to update\",\n                      variant: \"destructive\"\n                    });\n                  }\n                }}\n                className=\"gap-2\"\n              >\n                <Edit className=\"w-4 h-4\" />\n                Update Cities\n              </Button>\n            </SheetFooter>\n          </SheetContent>\n        </Sheet>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default CitiesPage;\n","\nimport { Sightseeing } from '@/types/sightseeing';\n\nexport type ExpirationStatus = 'valid' | 'expiring-soon' | 'expired' | 'no-period';\n\n/**\n * Get the expiration status of a sightseeing item\n */\nexport const getExpirationStatus = (sightseeing: Sightseeing): ExpirationStatus => {\n  if (!sightseeing.validityPeriod) {\n    return 'no-period';\n  }\n\n  const now = new Date();\n  const endDate = new Date(sightseeing.validityPeriod.endDate);\n  const daysUntilExpiration = Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n\n  if (daysUntilExpiration < 0) {\n    return 'expired';\n  } else if (daysUntilExpiration <= 30) {\n    return 'expiring-soon';\n  } else {\n    return 'valid';\n  }\n};\n\n/**\n * Check if a sightseeing item is expired\n */\nexport const isExpired = (sightseeing: Sightseeing): boolean => {\n  return getExpirationStatus(sightseeing) === 'expired';\n};\n\n/**\n * Check if a sightseeing item is expiring soon (within 30 days)\n */\nexport const isExpiringSoon = (sightseeing: Sightseeing): boolean => {\n  return getExpirationStatus(sightseeing) === 'expiring-soon';\n};\n\n/**\n * Get days until expiration\n */\nexport const getDaysUntilExpiration = (sightseeing: Sightseeing): number | null => {\n  if (!sightseeing.validityPeriod) {\n    return null;\n  }\n\n  const now = new Date();\n  const endDate = new Date(sightseeing.validityPeriod.endDate);\n  return Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n};\n\n/**\n * Format validity period for display\n */\nexport const formatValidityPeriod = (validityPeriod: { startDate: string; endDate: string }): string => {\n  const startDate = new Date(validityPeriod.startDate);\n  const endDate = new Date(validityPeriod.endDate);\n  \n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  return `${formatDate(startDate)} - ${formatDate(endDate)}`;\n};\n\n/**\n * Get expiration warning message\n */\nexport const getExpirationWarning = (sightseeing: Sightseeing): string | null => {\n  const status = getExpirationStatus(sightseeing);\n  const days = getDaysUntilExpiration(sightseeing);\n\n  switch (status) {\n    case 'expired':\n      return 'This sightseeing has expired and should be updated or removed.';\n    case 'expiring-soon':\n      return `This sightseeing expires in ${days} day${days === 1 ? '' : 's'}. Consider updating the validity period.`;\n    default:\n      return null;\n  }\n};\n\n/**\n * Filter sightseeings by expiration status\n */\nexport const filterByExpirationStatus = (sightseeings: Sightseeing[], status: ExpirationStatus): Sightseeing[] => {\n  return sightseeings.filter(sightseeing => getExpirationStatus(sightseeing) === status);\n};\n\n/**\n * Get expiration statistics\n */\nexport const getExpirationStats = (sightseeings: Sightseeing[]) => {\n  const stats = {\n    total: sightseeings.length,\n    valid: 0,\n    expiringSoon: 0,\n    expired: 0,\n    noPeriod: 0\n  };\n\n  sightseeings.forEach(sightseeing => {\n    const status = getExpirationStatus(sightseeing);\n    switch (status) {\n      case 'valid':\n        stats.valid++;\n        break;\n      case 'expiring-soon':\n        stats.expiringSoon++;\n        break;\n      case 'expired':\n        stats.expired++;\n        break;\n      case 'no-period':\n        stats.noPeriod++;\n        break;\n    }\n  });\n\n  return stats;\n};\n","// Currency mapping for countries\nexport const countryCurrencyMap: Record<string, { code: string; symbol: string }> = {\n  'Thailand': { code: 'THB', symbol: '' },\n  'UAE': { code: 'AED', symbol: '.' },\n  'Japan': { code: 'JPY', symbol: '' },\n  'Singapore': { code: 'SGD', symbol: 'S$' },\n  'Malaysia': { code: 'MYR', symbol: 'RM' },\n  'India': { code: 'INR', symbol: '' },\n  'Nepal': { code: 'NPR', symbol: 'Rs' },\n  'Sri Lanka': { code: 'LKR', symbol: 'Rs' },\n  'Maldives': { code: 'MVR', symbol: 'Rf' },\n  'Turkey': { code: 'TRY', symbol: '' },\n  'Egypt': { code: 'EGP', symbol: 'E' },\n  'South Korea': { code: 'KRW', symbol: '' },\n  'China': { code: 'CNY', symbol: '' },\n  'Indonesia': { code: 'IDR', symbol: 'Rp' },\n  'Philippines': { code: 'PHP', symbol: '' },\n  'Vietnam': { code: 'VND', symbol: '' },\n  'Cambodia': { code: 'KHR', symbol: '' },\n  'Laos': { code: 'LAK', symbol: '' },\n  'Myanmar': { code: 'MMK', symbol: 'K' },\n  'United States': { code: 'USD', symbol: '$' },\n  'United Kingdom': { code: 'GBP', symbol: '' },\n  'Australia': { code: 'AUD', symbol: 'A$' },\n  'Canada': { code: 'CAD', symbol: 'C$' },\n  'New Zealand': { code: 'NZD', symbol: 'NZ$' },\n  'South Africa': { code: 'ZAR', symbol: 'R' },\n  'Kenya': { code: 'KES', symbol: 'KSh' },\n  'Tanzania': { code: 'TZS', symbol: 'TSh' },\n  'Morocco': { code: 'MAD', symbol: '..' },\n  'Jordan': { code: 'JOD', symbol: '.' },\n  'Lebanon': { code: 'LBP', symbol: '.' },\n  'Qatar': { code: 'QAR', symbol: '.' },\n  'Kuwait': { code: 'KWD', symbol: '.' },\n  'Saudi Arabia': { code: 'SAR', symbol: '.' },\n  'Oman': { code: 'OMR', symbol: '..' },\n  'Bahrain': { code: 'BHD', symbol: '..' },\n  'Iran': { code: 'IRR', symbol: '' },\n  'Israel': { code: 'ILS', symbol: '' },\n  'Georgia': { code: 'GEL', symbol: '' },\n  'Armenia': { code: 'AMD', symbol: '' },\n  'Azerbaijan': { code: 'AZN', symbol: '' },\n  'Kazakhstan': { code: 'KZT', symbol: '' },\n  'Uzbekistan': { code: 'UZS', symbol: '' },\n  'Kyrgyzstan': { code: 'KGS', symbol: '' },\n  'Tajikistan': { code: 'TJS', symbol: '' },\n  'Turkmenistan': { code: 'TMT', symbol: 'T' },\n  'Afghanistan': { code: 'AFN', symbol: '' },\n  'Pakistan': { code: 'PKR', symbol: 'Rs' },\n  'Bangladesh': { code: 'BDT', symbol: '' },\n  'Bhutan': { code: 'BTN', symbol: 'Nu.' },\n  'Mongolia': { code: 'MNT', symbol: '' },\n  'Brazil': { code: 'BRL', symbol: 'R$' },\n  'Argentina': { code: 'ARS', symbol: '$' },\n  'Chile': { code: 'CLP', symbol: '$' },\n  'Peru': { code: 'PEN', symbol: 'S/' },\n  'Colombia': { code: 'COP', symbol: '$' },\n  'Ecuador': { code: 'USD', symbol: '$' },\n  'Bolivia': { code: 'BOB', symbol: 'Bs' },\n  'Uruguay': { code: 'UYU', symbol: '$U' },\n  'Paraguay': { code: 'PYG', symbol: '' },\n  'Venezuela': { code: 'VES', symbol: 'Bs.S' },\n  'Mexico': { code: 'MXN', symbol: '$' },\n  'Guatemala': { code: 'GTQ', symbol: 'Q' },\n  'Costa Rica': { code: 'CRC', symbol: '' },\n  'Panama': { code: 'PAB', symbol: 'B/.' },\n  'Nicaragua': { code: 'NIO', symbol: 'C$' },\n  'Honduras': { code: 'HNL', symbol: 'L' },\n  'El Salvador': { code: 'USD', symbol: '$' },\n  'Belize': { code: 'BZD', symbol: 'BZ$' },\n  'Jamaica': { code: 'JMD', symbol: 'J$' },\n  'Cuba': { code: 'CUP', symbol: '' },\n  'Dominican Republic': { code: 'DOP', symbol: 'RD$' },\n  'Haiti': { code: 'HTG', symbol: 'G' },\n  'Puerto Rico': { code: 'USD', symbol: '$' },\n  'Barbados': { code: 'BBD', symbol: 'Bds$' },\n  'Trinidad and Tobago': { code: 'TTD', symbol: 'TT$' },\n  'Bahamas': { code: 'BSD', symbol: 'B$' },\n  'Iceland': { code: 'ISK', symbol: 'kr' },\n  'Norway': { code: 'NOK', symbol: 'kr' },\n  'Sweden': { code: 'SEK', symbol: 'kr' },\n  'Denmark': { code: 'DKK', symbol: 'kr' },\n  'Finland': { code: 'EUR', symbol: '' },\n  'Estonia': { code: 'EUR', symbol: '' },\n  'Latvia': { code: 'EUR', symbol: '' },\n  'Lithuania': { code: 'EUR', symbol: '' },\n  'Poland': { code: 'PLN', symbol: 'z' },\n  'Czech Republic': { code: 'CZK', symbol: 'K' },\n  'Slovakia': { code: 'EUR', symbol: '' },\n  'Hungary': { code: 'HUF', symbol: 'Ft' },\n  'Slovenia': { code: 'EUR', symbol: '' },\n  'Croatia': { code: 'EUR', symbol: '' },\n  'Bosnia and Herzegovina': { code: 'BAM', symbol: 'KM' },\n  'Serbia': { code: 'RSD', symbol: '.' },\n  'Montenegro': { code: 'EUR', symbol: '' },\n  'North Macedonia': { code: 'MKD', symbol: '' },\n  'Albania': { code: 'ALL', symbol: 'L' },\n  'Bulgaria': { code: 'BGN', symbol: '' },\n  'Romania': { code: 'RON', symbol: 'lei' },\n  'Moldova': { code: 'MDL', symbol: 'L' },\n  'Ukraine': { code: 'UAH', symbol: '' },\n  'Belarus': { code: 'BYN', symbol: 'Br' },\n  'Russia': { code: 'RUB', symbol: '' },\n  'Germany': { code: 'EUR', symbol: '' },\n  'France': { code: 'EUR', symbol: '' },\n  'Italy': { code: 'EUR', symbol: '' },\n  'Spain': { code: 'EUR', symbol: '' },\n  'Portugal': { code: 'EUR', symbol: '' },\n  'Netherlands': { code: 'EUR', symbol: '' },\n  'Belgium': { code: 'EUR', symbol: '' },\n  'Luxembourg': { code: 'EUR', symbol: '' },\n  'Austria': { code: 'EUR', symbol: '' },\n  'Switzerland': { code: 'CHF', symbol: 'CHF' },\n  'Liechtenstein': { code: 'CHF', symbol: 'CHF' },\n  'Greece': { code: 'EUR', symbol: '' },\n  'Cyprus': { code: 'EUR', symbol: '' },\n  'Malta': { code: 'EUR', symbol: '' },\n  'Ireland': { code: 'EUR', symbol: '' },\n  'Monaco': { code: 'EUR', symbol: '' },\n  'San Marino': { code: 'EUR', symbol: '' },\n  'Vatican City': { code: 'EUR', symbol: '' },\n  'Andorra': { code: 'EUR', symbol: '' }\n};\n\nexport const getCurrencyByCountry = (country: string) => {\n  return countryCurrencyMap[country] || { code: 'USD', symbol: '$' };\n};\n\nexport const formatCurrency = (amount: number, country: string, includeCode: boolean = false) => {\n  const currency = getCurrencyByCountry(country);\n  if (includeCode) {\n    return `${currency.symbol}${amount.toFixed(2)} ${currency.code}`;\n  }\n  return `${currency.symbol}${amount.toFixed(2)}`;\n};","\nimport React from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport ImageWithFallback from '@/components/ui/image-with-fallback';\nimport { \n  MapPin, \n  Eye, \n  Edit, \n  Trash, \n  Copy, \n  Calendar,\n  DollarSign,\n  Car,\n  Users,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  Clock,\n  User\n} from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { getExpirationStatus, formatValidityPeriod } from '../services/expirationService';\nimport { formatCurrency } from '../utils/currency';\n\ninterface SightseeingCardProps {\n  sightseeing: Sightseeing;\n  onView: () => void;\n  onEdit: () => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onToggleStatus: () => void;\n}\n\nconst SightseeingCard: React.FC<SightseeingCardProps> = ({\n  sightseeing,\n  onView,\n  onEdit,\n  onDelete,\n  onDuplicate,\n  onToggleStatus\n}) => {\n  // Get primary image or fallback\n  const primaryImage = sightseeing.images?.find(img => img.isPrimary)?.url || \n                      sightseeing.images?.[0]?.url || \n                      sightseeing.imageUrl ||\n                      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2070';\n\n  // Format price with currency symbol (using shared util)\n  const formatPrice = (price: number | undefined): string => {\n    if (price === undefined || price === 0) return 'Free';\n    return formatCurrency(price, sightseeing.country);\n  };\n\n  // Get pricing display\n  const getPricingDisplay = () => {\n    if (sightseeing.isFree) {\n      return <Badge className=\"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700\">Free</Badge>;\n    }\n    \n    if (sightseeing.price && (sightseeing.price.adult > 0 || sightseeing.price.child > 0)) {\n      return (\n        <div className=\"text-sm\">\n          <div className=\"font-semibold text-gray-900 dark:text-white\">{formatPrice(sightseeing.price.adult)}</div>\n          <div className=\"text-gray-500 dark:text-gray-400\">per adult</div>\n        </div>\n      );\n    }\n    \n    return <span className=\"text-sm text-gray-500 dark:text-gray-400\">Price on request</span>;\n  };\n\n  // Get transfer options count\n  const getTransferOptionsCount = () => {\n    const enabledTransfers = sightseeing.transferOptions?.filter(opt => opt.isEnabled !== false) || [];\n    return enabledTransfers.length;\n  };\n\n  // Get expiration status and badge\n  const expirationStatus = sightseeing.validityPeriod ? getExpirationStatus(sightseeing) : 'no-period';\n  \n  const getExpirationBadge = () => {\n    if (!sightseeing.validityPeriod) return null;\n    \n    switch (expirationStatus) {\n      case 'expired':\n        return (\n          <Badge className=\"bg-red-500 hover:bg-red-600 text-white border-0 shadow-lg\">\n            <XCircle className=\"h-3 w-3 mr-1\" />\n            Expired\n          </Badge>\n        );\n      case 'expiring-soon':\n        return (\n          <Badge className=\"bg-yellow-500 hover:bg-yellow-600 text-white border-0 shadow-lg\">\n            <AlertTriangle className=\"h-3 w-3 mr-1\" />\n            Expiring Soon\n          </Badge>\n        );\n      case 'valid':\n        return (\n          <Badge className=\"bg-blue-500 hover:bg-blue-600 text-white border-0 shadow-lg\">\n            <Clock className=\"h-3 w-3 mr-1\" />\n            Valid Period\n          </Badge>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card className=\"group hover:shadow-xl transition-all duration-300 cursor-pointer border-0 shadow-md hover:-translate-y-2 bg-white dark:bg-gray-800 overflow-hidden rounded-2xl\" onClick={onView}>\n      {/* Banner Image */}\n      <div className=\"relative h-48 overflow-hidden\">\n        <ImageWithFallback\n          src={primaryImage} \n          alt={sightseeing.name}\n          className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n          fallbackIcon={<User className=\"h-12 w-12 text-muted-foreground\" />}\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent\" />\n        \n        {/* Status and Expiration Badges */}\n        <div className=\"absolute top-4 left-4 flex gap-2 flex-wrap\">\n          {sightseeing.status === 'active' ? (\n            <Badge className=\"bg-green-500 hover:bg-green-600 text-white border-0 shadow-lg\">\n              <CheckCircle className=\"h-3 w-3 mr-1\" />\n              Active\n            </Badge>\n          ) : (\n            <Badge className=\"bg-red-500 hover:bg-red-600 text-white border-0 shadow-lg\">\n              <XCircle className=\"h-3 w-3 mr-1\" />\n              Inactive\n            </Badge>\n          )}\n          {getExpirationBadge()}\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"absolute top-4 right-4 flex gap-2\">\n          <Button\n            size=\"sm\"\n            variant=\"secondary\"\n            className=\"h-8 w-8 p-0 bg-white/90 hover:bg-white text-gray-700 border-0 shadow-lg\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onEdit();\n            }}\n          >\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            size=\"sm\"\n            variant=\"secondary\"\n            className=\"h-8 w-8 p-0 bg-white/90 hover:bg-white text-gray-700 border-0 shadow-lg\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onView();\n            }}\n          >\n            <Eye className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Category */}\n        {sightseeing.category && (\n          <div className=\"absolute bottom-4 left-4\">\n            <Badge variant=\"outline\" className=\"bg-white/90 text-gray-700 border-0 shadow-lg\">\n              {sightseeing.category.split(', ')[0]}\n            </Badge>\n          </div>\n        )}\n      </div>\n\n      <CardContent className=\"p-6\">\n        {/* Sightseeing Name */}\n        <div className=\"flex items-start justify-between mb-3\">\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n            {sightseeing.name}\n          </h3>\n        </div>\n        \n        {/* Location */}\n        <div className=\"flex items-center gap-2 mb-4 text-sm text-gray-600 dark:text-gray-400\">\n          <MapPin className=\"h-4 w-4\" />\n          <span>{sightseeing.city}, {sightseeing.country}</span>\n        </div>\n        \n        {/* Validity Period Display */}\n        {sightseeing.validityPeriod && (\n          <div className=\"flex items-center gap-2 mb-4 text-sm\">\n            <Calendar className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n            <span className=\"text-gray-600 dark:text-gray-400\">\n              {formatValidityPeriod(sightseeing.validityPeriod)}\n            </span>\n          </div>\n        )}\n        \n        {/* Duration & Timing */}\n        {(sightseeing.duration || sightseeing.timing) && (\n          <div className=\"flex items-center gap-4 mb-4 text-sm text-gray-600 dark:text-gray-400\">\n            {sightseeing.duration && (\n              <div className=\"flex items-center gap-1\">\n                <Clock className=\"h-4 w-4\" />\n                <span>{sightseeing.duration}</span>\n              </div>\n            )}\n            {sightseeing.timing && (\n              <div className=\"flex items-center gap-1\">\n                <Calendar className=\"h-4 w-4\" />\n                <span>{sightseeing.timing}</span>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Transfer Options */}\n        {getTransferOptionsCount() > 0 && (\n          <div className=\"flex items-center gap-2 mb-4 text-sm text-gray-600 dark:text-gray-400\">\n            <Car className=\"h-4 w-4\" />\n            <span>{getTransferOptionsCount()} transfer option{getTransferOptionsCount() > 1 ? 's' : ''}</span>\n          </div>\n        )}\n\n        {/* Pricing */}\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <DollarSign className=\"h-4 w-4 text-gray-500 dark:text-gray-400\" />\n            {getPricingDisplay()}\n          </div>\n        </div>\n\n        {/* Difficulty Level */}\n        {sightseeing.difficultyLevel && (\n          <div className=\"mb-4\">\n            <Badge \n              variant=\"outline\" \n              className={`text-xs ${\n                sightseeing.difficultyLevel === 'Easy' ? 'text-green-700 border-green-200 bg-green-50 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700' :\n                sightseeing.difficultyLevel === 'Moderate' ? 'text-yellow-700 border-yellow-200 bg-yellow-50 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-700' :\n                'text-red-700 border-red-200 bg-red-50 dark:bg-red-900/30 dark:text-red-300 dark:border-red-700'\n              }`}\n            >\n              {sightseeing.difficultyLevel}\n            </Badge>\n          </div>\n        )}\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700\">\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n            Updated {new Date(sightseeing.lastUpdated).toLocaleDateString()}\n          </div>\n          \n          {/* Action Buttons */}\n          <div className=\"flex items-center gap-2\" onClick={(e) => e.stopPropagation()}>\n            <Switch\n              checked={sightseeing.status === 'active'}\n              onCheckedChange={onToggleStatus}\n              className=\"data-[state=checked]:bg-green-500\"\n            />\n            \n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 p-0 text-blue-500 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/30 dark:text-blue-400 dark:hover:text-blue-300\"\n              onClick={onDuplicate}\n            >\n              <Copy className=\"h-4 w-4\" />\n            </Button>\n            \n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/30 dark:text-red-400 dark:hover:text-red-300\"\n              onClick={onDelete}\n            >\n              <Trash className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SightseeingCard;\n","\nimport React from 'react';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent } from '@/components/ui/card';\nimport ImageWithFallback from '@/components/ui/image-with-fallback';\nimport { Eye, Edit, Trash, Copy, User } from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { formatCurrency, getCurrencyByCountry } from '../utils/currency';\n\ninterface SightseeingTableProps {\n  sightseeings: Sightseeing[];\n  onView: (id: number) => void;\n  onEdit: (id: number) => void;\n  onDelete: (id: number) => void;\n  onDuplicate: (id: number) => void;\n  onToggleStatus: (id: number) => void;\n}\n\nconst SightseeingTable: React.FC<SightseeingTableProps> = ({\n  sightseeings,\n  onView,\n  onEdit,\n  onDelete,\n  onDuplicate,\n  onToggleStatus\n}) => {\n  // Format price with currency symbol using the currency mapping utility\n  const formatPrice = (price: number | undefined, country: string): string => {\n    if (price === undefined || price === 0) return 'Free';\n    return formatCurrency(price, country);\n  };\n\n  // Get transfer options display\n  const getTransferOptions = (sightseeing: Sightseeing) => {\n    if (sightseeing.transferOptions && sightseeing.transferOptions.length > 0) {\n      const enabledOptions = sightseeing.transferOptions.filter(option => option.isEnabled !== false);\n      return (\n        <div className=\"space-y-1\">\n          {enabledOptions.slice(0, 2).map((option, index) => (\n            <div key={index} className=\"flex items-center gap-1 text-sm\">\n              <Badge variant=\"outline\" className=\"text-xs\">{option.vehicleType}</Badge>\n              {option.price ? (\n                <span className=\"text-xs\">\n                  {formatPrice(option.price, sightseeing.country)}\n                </span>\n              ) : null}\n            </div>\n          ))}\n          {enabledOptions.length > 2 && (\n            <Badge variant=\"secondary\" className=\"text-xs\">+{enabledOptions.length - 2} more</Badge>\n          )}\n        </div>\n      );\n    }\n    \n    if (sightseeing.transferTypes && sightseeing.transferTypes.length > 0) {\n      return (\n        <div className=\"flex flex-wrap gap-1\">\n          {sightseeing.transferTypes.slice(0, 2).map((type, index) => (\n            <Badge key={index} variant=\"secondary\" className=\"text-xs\">{type}</Badge>\n          ))}\n        </div>\n      );\n    }\n    \n    return <span className=\"text-muted-foreground text-sm\">No transfers</span>;\n  };\n  \n  // Get pricing display\n  const getPricingDisplay = (sightseeing: Sightseeing) => {\n    if (sightseeing.isFree) {\n      return <Badge className=\"bg-green-100 text-green-800 border-green-200\">Free</Badge>;\n    }\n    \n    if (sightseeing.price && (sightseeing.price.adult > 0 || sightseeing.price.child > 0)) {\n      return (\n        <div className=\"space-y-1\">\n          <div className=\"text-sm\">\n            <span className=\"font-medium\">A: {formatPrice(sightseeing.price.adult, sightseeing.country)}</span>\n          </div>\n          <div className=\"text-sm\">\n            <span className=\"font-medium\">C: {formatPrice(sightseeing.price.child, sightseeing.country)}</span>\n          </div>\n        </div>\n      );\n    }\n    \n    // Check pricing options\n    if (sightseeing.pricingOptions && sightseeing.pricingOptions.length > 0) {\n      const enabledOptions = sightseeing.pricingOptions.filter(opt => opt.isEnabled !== false);\n      return (\n        <div className=\"space-y-1\">\n          {enabledOptions.slice(0, 1).map((option, idx) => (\n            <div key={idx} className=\"text-sm\">\n              <Badge variant=\"secondary\" className=\"mr-1 text-xs\">{option.type}</Badge>\n              <div className=\"text-xs\">\n                A: {formatPrice(option.adultPrice, sightseeing.country)}\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n    }\n    \n    return <span className=\"text-muted-foreground text-sm\">No pricing</span>;\n  };\n\n  return (\n    <Card className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700\">\n      <CardContent className=\"p-0\">\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow className=\"border-b border-gray-200 dark:border-gray-700\">\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Sightseeing</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Location</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Category</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Transfer Options</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Pricing</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Status</TableHead>\n                <TableHead className=\"font-semibold text-gray-900 dark:text-white\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {sightseeings.map((sightseeing, index) => (\n                <TableRow key={`${sightseeing.id}-${sightseeing.createdAt ?? ''}-${index}`} className=\"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\">\n                  <TableCell>\n                    <div className=\"flex items-start gap-3\">\n                      <ImageWithFallback\n                        src={sightseeing.images?.[0]?.url || sightseeing.imageUrl || 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2070'} \n                        alt={sightseeing.name}\n                        className=\"w-12 h-12 rounded-lg object-cover flex-shrink-0\"\n                        fallbackIcon={<User className=\"h-4 w-4 text-muted-foreground\" />}\n                      />\n                      <div>\n                        <div className=\"font-medium text-gray-900 dark:text-white\">{sightseeing.name}</div>\n                        {sightseeing.duration && (\n                          <div className=\"text-sm text-gray-500\">{sightseeing.duration}</div>\n                        )}\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div>\n                      <div className=\"font-medium text-gray-900 dark:text-white\">{sightseeing.city}</div>\n                      <div className=\"text-sm text-gray-500\">{sightseeing.country}</div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    {sightseeing.category ? (\n                      <div className=\"flex flex-wrap gap-1\">\n                        {sightseeing.category.split(', ').slice(0, 2).map((cat, index) => (\n                          <Badge key={index} variant=\"outline\" className=\"text-xs\">{cat}</Badge>\n                        ))}\n                      </div>\n                    ) : (\n                      <span className=\"text-muted-foreground text-sm\">No category</span>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {getTransferOptions(sightseeing)}\n                  </TableCell>\n                  <TableCell>\n                    {getPricingDisplay(sightseeing)}\n                  </TableCell>\n                  <TableCell>\n                    <Switch\n                      checked={sightseeing.status === 'active'}\n                      onCheckedChange={() => onToggleStatus(sightseeing.id)}\n                      className=\"data-[state=checked]:bg-green-500\"\n                    />\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-1\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 text-gray-600 hover:text-blue-600 hover:bg-blue-50\"\n                        onClick={() => onView(sightseeing.id)}\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 text-gray-600 hover:text-green-600 hover:bg-green-50\"\n                        onClick={() => onEdit(sightseeing.id)}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 text-gray-600 hover:text-purple-600 hover:bg-purple-50\"\n                        onClick={() => onDuplicate(sightseeing.id)}\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 text-gray-600 hover:text-red-600 hover:bg-red-50\"\n                        onClick={() => onDelete(sightseeing.id)}\n                      >\n                        <Trash className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SightseeingTable;\n","\nimport React from 'react';\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle } from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport ImageWithFallback from '@/components/ui/image-with-fallback';\nimport { \n  Edit, \n  MapPin, \n  Calendar, \n  Clock, \n  DollarSign, \n  Car, \n  Users, \n  CheckCircle, \n  XCircle,\n  AlertTriangle,\n  ExternalLink,\n  User,\n  UserCheck,\n  Package\n} from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { getExpirationStatus, formatValidityPeriod } from '../services/expirationService';\nimport { formatCurrency, getCurrencyByCountry } from '../utils/currency';\n\n// Helpers to safely render policy fields that may be arrays or strings\nconst toStringArray = (val: unknown): string[] => {\n  if (Array.isArray(val)) {\n    return val.filter((v) => typeof v === 'string' && v.trim().length > 0);\n  }\n  if (typeof val === 'string') {\n    const t = val.trim();\n    return t.length > 0 ? [t] : [];\n  }\n  return [];\n};\n\nconst hasNonEmptyString = (val: unknown): boolean => {\n  return typeof val === 'string' && val.trim().length > 0;\n};\n\ninterface SightseeingViewDrawerProps {\n  sightseeing: Sightseeing | null;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onEdit: () => void;\n}\n\nconst SightseeingViewDrawer: React.FC<SightseeingViewDrawerProps> = ({\n  sightseeing,\n  open,\n  onOpenChange,\n  onEdit\n}) => {\n  if (!sightseeing) return null;\n\n  // Get primary image\n  const primaryImage = sightseeing.images?.find(img => img.isPrimary)?.url || \n                      sightseeing.images?.[0]?.url || \n                      sightseeing.imageUrl ||\n                      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2070';\n\n  // Format price with currency symbol (using shared util)\n  const formatPrice = (price: number | undefined): string => {\n    if (price === undefined || price === 0) return 'Free';\n    return formatCurrency(price, sightseeing.country);\n  };\n\n  // Get expiration status\n  const expirationStatus = sightseeing.validityPeriod ? getExpirationStatus(sightseeing) : null;\n  \n  const getExpirationBadge = () => {\n    if (!expirationStatus) return null;\n    \n    switch (expirationStatus) {\n      case 'expired':\n        return (\n          <Badge className=\"bg-red-500 text-white\">\n            <XCircle className=\"h-3 w-3 mr-1\" />\n            Expired\n          </Badge>\n        );\n      case 'expiring-soon':\n        return (\n          <Badge className=\"bg-yellow-500 text-white\">\n            <AlertTriangle className=\"h-3 w-3 mr-1\" />\n            Expiring Soon\n          </Badge>\n        );\n      case 'valid':\n        return (\n          <Badge className=\"bg-blue-500 text-white\">\n            <Clock className=\"h-3 w-3 mr-1\" />\n            Valid Period\n          </Badge>\n        );\n      default:\n        return null;\n    }\n  };\n\n  // Prepare policy values safely\n  const policies = sightseeing.policies || {};\n  const highlightsList = toStringArray((policies as any).highlights);\n  const inclusionsList = toStringArray((policies as any).inclusions);\n  const exclusionsList = toStringArray((policies as any).exclusions);\n  const cancellationPolicyText = hasNonEmptyString((policies as any).cancellationPolicy)\n    ? String((policies as any).cancellationPolicy)\n    : '';\n  const refundPolicyText = hasNonEmptyString((policies as any).refundPolicy)\n    ? String((policies as any).refundPolicy)\n    : '';\n  const confirmationPolicyText = hasNonEmptyString((policies as any).confirmationPolicy)\n    ? String((policies as any).confirmationPolicy)\n    : '';\n  const advisoryText = hasNonEmptyString((policies as any).advisory)\n    ? String((policies as any).advisory)\n    : '';\n  const termsConditionsText = hasNonEmptyString((policies as any).termsConditions)\n    ? String((policies as any).termsConditions)\n    : '';\n\n  // Helpers for Operational Details formatting\n  const dayLabelMap: Record<string, string> = {\n    monday: 'Mon',\n    tuesday: 'Tue',\n    wednesday: 'Wed',\n    thursday: 'Thu',\n    friday: 'Fri',\n    saturday: 'Sat',\n    sunday: 'Sun'\n  };\n  const formatDaysOfWeek = (days?: string[]) => {\n    const d = (days ?? []).map((v) => dayLabelMap[v?.toLowerCase?.() || ''] || (v || '')).filter(Boolean);\n    return d.length ? d.join(', ') : 'None';\n  };\n  const formatPickupTimeHHMM = (t?: string) => {\n    if (!t) return 'Not specified';\n    const m = t.trim().match(/^([0-1]?\\d|2[0-3]):([0-5]\\d)\\s*(AM|PM)?$/i);\n    if (!m) return t; // fallback to raw\n    let hh = parseInt(m[1], 10);\n    const mm = m[2];\n    const ampm = m[3]?.toUpperCase();\n    if (ampm === 'PM' && hh < 12) hh += 12;\n    if (ampm === 'AM' && hh === 12) hh = 0;\n    return `${String(hh).padStart(2, '0')}:${mm}`;\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-full sm:max-w-lg overflow-y-auto\">\n        <SheetHeader className=\"space-y-4\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <SheetTitle className=\"text-xl font-bold pr-8\">{sightseeing.name}</SheetTitle>\n              <SheetDescription className=\"flex items-center gap-2 mt-2\">\n                <MapPin className=\"h-4 w-4\" />\n                {sightseeing.city}, {sightseeing.country}\n              </SheetDescription>\n            </div>\n            <Button onClick={onEdit} size=\"sm\" className=\"flex items-center gap-2\">\n              <Edit className=\"h-4 w-4\" />\n              Edit\n            </Button>\n          </div>\n        </SheetHeader>\n\n        <div className=\"space-y-6 mt-6\">\n          {/* Image */}\n          <div className=\"aspect-video rounded-lg overflow-hidden\">\n            <ImageWithFallback\n              src={primaryImage} \n              alt={sightseeing.name}\n              className=\"w-full h-full object-cover\"\n              fallbackIcon={<User className=\"h-12 w-12 text-muted-foreground\" />}\n            />\n          </div>\n\n          {/* Status and Badges */}\n          <div className=\"flex flex-wrap gap-2\">\n            {sightseeing.status === 'active' ? (\n              <Badge className=\"bg-green-500 text-white\">\n                <CheckCircle className=\"h-3 w-3 mr-1\" />\n                Active\n              </Badge>\n            ) : (\n              <Badge className=\"bg-red-500 text-white\">\n                <XCircle className=\"h-3 w-3 mr-1\" />\n                Inactive\n              </Badge>\n            )}\n            {getExpirationBadge()}\n            {sightseeing.category && (\n              <Badge variant=\"outline\">\n                {sightseeing.category.split(', ')[0]}\n              </Badge>\n            )}\n          </div>\n\n          {/* Description */}\n          {sightseeing.description && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Description</h3>\n              <p className=\"text-gray-600 dark:text-gray-400 text-sm leading-relaxed\">\n                {sightseeing.description}\n              </p>\n            </div>\n          )}\n\n          <Separator />\n\n          {/* Basic Information */}\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold\">Basic Information</h3>\n            \n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <p className=\"text-gray-500 dark:text-gray-400\">Duration</p>\n                <p className=\"font-medium\">{sightseeing.duration || 'Not specified'}</p>\n              </div>\n              \n              {sightseeing.difficultyLevel && (\n                <div>\n                  <p className=\"text-gray-500 dark:text-gray-400\">Difficulty</p>\n                  <Badge \n                    variant=\"outline\" \n                    className={`text-xs ${\n                      sightseeing.difficultyLevel === 'Easy' ? 'text-green-700 border-green-200' :\n                      sightseeing.difficultyLevel === 'Moderate' ? 'text-yellow-700 border-yellow-200' :\n                      'text-red-700 border-red-200'\n                    }`}\n                  >\n                    {sightseeing.difficultyLevel}\n                  </Badge>\n                </div>\n              )}\n              \n              {sightseeing.timing && (\n                <div className=\"col-span-2\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Timing</p>\n                  <p className=\"font-medium\">{sightseeing.timing}</p>\n                </div>\n              )}\n\n              {sightseeing.allowedAgeGroup && (\n                <div className=\"col-span-2\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Age Group</p>\n                  <p className=\"font-medium\">{sightseeing.allowedAgeGroup}</p>\n                </div>\n              )}\n\n              {/* Currency Information */}\n              {(sightseeing.currency || sightseeing.pricing_currency || sightseeing.country) && (\n                <div className=\"col-span-2\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Currency</p>\n                  <div className=\"flex items-center gap-2\">\n                    <DollarSign className=\"h-4 w-4 text-gray-500\" />\n                    <div className=\"flex flex-col\">\n                      {sightseeing.currency ? (\n                        <p className=\"font-medium text-sm\">\n                          Display: {sightseeing.currency} {sightseeing.currencySymbol && `(${sightseeing.currencySymbol})`}\n                        </p>\n                      ) : sightseeing.country && (\n                        <p className=\"font-medium text-sm\">\n                          Display: {getCurrencyByCountry(sightseeing.country).code} ({getCurrencyByCountry(sightseeing.country).symbol})\n                        </p>\n                      )}\n                      {sightseeing.pricing_currency ? (\n                        <p className=\"font-medium text-sm\">\n                          Pricing: {sightseeing.pricing_currency} {sightseeing.pricing_currency_symbol && `(${sightseeing.pricing_currency_symbol})`}\n                        </p>\n                      ) : sightseeing.country && (\n                        <p className=\"font-medium text-sm\">\n                          Pricing: {getCurrencyByCountry(sightseeing.country).code} ({getCurrencyByCountry(sightseeing.country).symbol})\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Validity Period */}\n          {sightseeing.validityPeriod && (\n            <>\n              <Separator />\n              <div>\n                <h3 className=\"font-semibold mb-2\">Validity Period</h3>\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4 text-gray-500\" />\n                  <span className=\"text-sm\">{formatValidityPeriod(sightseeing.validityPeriod)}</span>\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Operational Details / Timing & Location */}\n          <Separator />\n          <div>\n            <h3 className=\"font-semibold mb-3\">Operational Details / Timing & Location</h3>\n            <div className=\"grid grid-cols-1 gap-3 text-sm\">\n              <div>\n                <p className=\"text-gray-500 dark:text-gray-400\">Activities</p>\n                {Array.isArray(sightseeing.activities) && sightseeing.activities.length > 0 ? (\n                  <p className=\"font-medium\">{sightseeing.activities.join(', ')}</p>\n                ) : (\n                  <p className=\"font-medium\">None</p>\n                )}\n              </div>\n              <div>\n                <p className=\"text-gray-500 dark:text-gray-400\">Season</p>\n                <p className=\"font-medium\">{sightseeing.season || 'Not specified'}</p>\n              </div>\n              <div>\n                <p className=\"text-gray-500 dark:text-gray-400\">Days of Week</p>\n                <p className=\"font-medium\">{formatDaysOfWeek(sightseeing.daysOfWeek)}</p>\n              </div>\n              <div>\n                <p className=\"text-gray-500 dark:text-gray-400\">Pick-up Time</p>\n                <p className=\"font-medium\">{formatPickupTimeHHMM(sightseeing.pickupTime)}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Pricing */}\n          <Separator />\n          <div>\n            <h3 className=\"font-semibold mb-3\">Pricing</h3>\n            \n            {sightseeing.isFree ? (\n              <Badge className=\"bg-green-100 text-green-800 border-green-200\">Free Entry</Badge>\n            ) : (\n              <div className=\"space-y-3\">\n                {sightseeing.price && (sightseeing.price.adult > 0 || sightseeing.price.child > 0) && (\n                  <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                    <p className=\"text-sm font-medium mb-2\">Standard Pricing</p>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>\n                        <p className=\"text-gray-500\">Adult</p>\n                        <p className=\"font-medium\">{formatPrice(sightseeing.price.adult)}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Child</p>\n                        <p className=\"font-medium\">{formatPrice(sightseeing.price.child)}</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* SIC Pricing */}\n                {sightseeing.sicAvailable && sightseeing.sicPricing && (sightseeing.sicPricing.adult > 0 || sightseeing.sicPricing.child > 0) && (\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <UserCheck className=\"h-4 w-4 text-blue-600\" />\n                      <p className=\"text-sm font-medium\">SIC (Seat-in-Coach) Pricing</p>\n                      <Badge variant=\"outline\" className=\"bg-blue-100 text-blue-700 border-blue-200 text-xs\">Available</Badge>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>\n                        <p className=\"text-gray-500\">Adult</p>\n                        <p className=\"font-medium\">{formatPrice(sightseeing.sicPricing.adult)}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-500\">Child</p>\n                        <p className=\"font-medium\">{formatPrice(sightseeing.sicPricing.child)}</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Pricing Options */}\n                {sightseeing.pricingOptions && sightseeing.pricingOptions.filter(opt => opt.isEnabled).length > 0 && (\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm font-medium\">Pricing Options</p>\n                    {sightseeing.pricingOptions\n                      .filter(opt => opt.isEnabled)\n                      .map((option) => (\n                        <div key={option.id} className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                          <p className=\"text-sm font-medium mb-1\">{option.type}</p>\n                          <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                            <div>\n                              <p className=\"text-gray-500\">Adult</p>\n                              <p className=\"font-medium\">{formatPrice(option.adultPrice)}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-gray-500\">Child</p>\n                              <p className=\"font-medium\">{formatPrice(option.childPrice)}</p>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n                )}\n\n                {/* Package Options */}\n                {sightseeing.packageOptions && sightseeing.packageOptions.filter(opt => opt.isEnabled).length > 0 && (\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Package className=\"h-4 w-4\" />\n                      <p className=\"text-sm font-medium\">Package Options</p>\n                    </div>\n                    {sightseeing.packageOptions\n                      .filter(opt => opt.isEnabled)\n                      .map((option) => (\n                        <div key={option.id} className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                          <div className=\"mb-2\">\n                            <p className=\"text-sm font-medium\">{option.name}</p>\n                            <p className=\"text-xs text-gray-500\">{option.type}</p>\n                            {option.description && (\n                              <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">{option.description}</p>\n                            )}\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                            <div>\n                              <p className=\"text-gray-500\">Adult</p>\n                              <p className=\"font-medium\">{formatPrice(option.adultPrice)}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-gray-500\">Child</p>\n                              <p className=\"font-medium\">{formatPrice(option.childPrice)}</p>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n                )}\n\n                {/* Group Size Options */}\n                {sightseeing.groupSizeOptions && sightseeing.groupSizeOptions.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"h-4 w-4\" />\n                      <p className=\"text-sm font-medium\">Group Size Options</p>\n                    </div>\n                    {sightseeing.groupSizeOptions.map((option) => (\n                      <div key={option.id} className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                        <div className=\"mb-2\">\n                          <p className=\"text-sm font-medium\">{option.minPeople} - {option.maxPeople} people</p>\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                          <div>\n                            <p className=\"text-gray-500\">Adult</p>\n                            <p className=\"font-medium\">{formatPrice(option.adultPrice)}</p>\n                          </div>\n                          <div>\n                            <p className=\"text-gray-500\">Child</p>\n                            <p className=\"font-medium\">{formatPrice(option.childPrice)}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Transfer Options */}\n          {sightseeing.transferOptions && sightseeing.transferOptions.filter(opt => opt.isEnabled).length > 0 && (\n            <>\n              <Separator />\n              <div>\n                <h3 className=\"font-semibold mb-3\">Transfer Options</h3>\n                <div className=\"space-y-2\">\n                  {sightseeing.transferOptions\n                    .filter(opt => opt.isEnabled)\n                    .map((option) => (\n                      <div key={option.id} className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <p className=\"font-medium text-sm\">{option.vehicleType}</p>\n                            <p className=\"text-xs text-gray-500\">Capacity: {option.capacity}</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"font-medium text-sm\">{formatPrice(option.price)}</p>\n                            <p className=\"text-xs text-gray-500\">{option.priceUnit}</p>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Address and Links */}\n          {(sightseeing.address || sightseeing.googleMapLink) && (\n            <>\n              <Separator />\n              <div>\n                <h3 className=\"font-semibold mb-3\">Location Details</h3>\n                {sightseeing.address && (\n                  <div className=\"mb-2\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Address</p>\n                    <p className=\"text-sm\">{sightseeing.address}</p>\n                  </div>\n                )}\n                {sightseeing.googleMapLink && (\n                  <a \n                    href={sightseeing.googleMapLink} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800\"\n                  >\n                    <ExternalLink className=\"h-3 w-3\" />\n                    View on Google Maps\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* Policies */}\n          {(highlightsList.length > 0 || inclusionsList.length > 0 || exclusionsList.length > 0 || cancellationPolicyText || refundPolicyText || confirmationPolicyText || advisoryText || termsConditionsText) && (\n            <>\n              <Separator />\n              <div className=\"space-y-4\">\n                <h3 className=\"font-semibold\">Policies & Information</h3>\n\n                {highlightsList.length > 0 && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Highlights</p>\n                    <ul className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n                      {highlightsList.map((highlight, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <span className=\"text-green-500 mt-1\"></span>\n                          {highlight}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {inclusionsList.length > 0 && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Inclusions</p>\n                    <ul className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n                      {inclusionsList.map((inclusion, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <CheckCircle className=\"h-3 w-3 text-green-500 mt-1 flex-shrink-0\" />\n                          {inclusion}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {exclusionsList.length > 0 && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Exclusions</p>\n                    <ul className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n                      {exclusionsList.map((exclusion, index) => (\n                        <li key={index} className=\"flex items-start gap-2\">\n                          <XCircle className=\"h-3 w-3 text-red-500 mt-1 flex-shrink-0\" />\n                          {exclusion}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {cancellationPolicyText && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Cancellation Policy</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{cancellationPolicyText}</p>\n                  </div>\n                )}\n\n                {refundPolicyText && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Refund Policy</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{refundPolicyText}</p>\n                  </div>\n                )}\n\n                {confirmationPolicyText && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Confirmation Policy</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{confirmationPolicyText}</p>\n                  </div>\n                )}\n\n                {advisoryText && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Advisory</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{advisoryText}</p>\n                  </div>\n                )}\n\n                {termsConditionsText && (\n                  <div>\n                    <p className=\"text-sm font-medium mb-2\">Terms & Conditions</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{termsConditionsText}</p>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* Metadata */}\n          <Separator />\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n            <p>Created: {new Date(sightseeing.createdAt).toLocaleDateString()}</p>\n            <p>Last Updated: {new Date(sightseeing.lastUpdated).toLocaleDateString()}</p>\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet>\n  );\n};\n\nexport default SightseeingViewDrawer;\n","\nimport React from 'react';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Badge } from '@/components/ui/badge';\nimport ImageWithFallback from '@/components/ui/image-with-fallback';\nimport { Trash, AlertTriangle, User } from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\n\ninterface SightseeingDeleteDialogProps {\n  sightseeing: Sightseeing | null;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n}\n\nconst SightseeingDeleteDialog: React.FC<SightseeingDeleteDialogProps> = ({\n  sightseeing,\n  open,\n  onOpenChange,\n  onConfirm\n}) => {\n  if (!sightseeing) return null;\n\n  const handleConfirm = () => {\n    onConfirm();\n    onOpenChange(false);\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle className=\"flex items-center gap-2 text-red-600\">\n            <Trash className=\"h-5 w-5\" />\n            Delete Sightseeing\n          </AlertDialogTitle>\n          <AlertDialogDescription className=\"space-y-3\">\n            <div className=\"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\">\n              <AlertTriangle className=\"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"font-medium text-red-800 dark:text-red-200 mb-1\">\n                  This action cannot be undone\n                </p>\n                <p className=\"text-red-700 dark:text-red-300 text-sm\">\n                  You are about to permanently delete this sightseeing. All associated data will be lost.\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <p className=\"font-medium text-gray-900 dark:text-white\">\n                Sightseeing to be deleted:\n              </p>\n              <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 border\">\n                <div className=\"flex items-start gap-3\">\n                  <ImageWithFallback\n                    src={sightseeing.images?.[0]?.url || sightseeing.imageUrl || 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2070'} \n                    alt={sightseeing.name}\n                    className=\"w-12 h-12 rounded-lg object-cover flex-shrink-0\"\n                    fallbackIcon={<User className=\"h-4 w-4 text-muted-foreground\" />}\n                  />\n                  <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"font-medium text-gray-900 dark:text-white truncate\">\n                      {sightseeing.name}\n                    </h4>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                      {sightseeing.city}, {sightseeing.country}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <Badge variant={sightseeing.status === 'active' ? 'default' : 'secondary'}>\n                        {sightseeing.status}\n                      </Badge>\n                      {sightseeing.category && (\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {sightseeing.category.split(', ')[0]}\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={handleConfirm}\n            className=\"bg-red-600 hover:bg-red-700 focus:ring-red-600\"\n          >\n            <Trash className=\"h-4 w-4 mr-2\" />\n            Delete Sightseeing\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};\n\nexport default SightseeingDeleteDialog;\n","\nimport React, { useState, useMemo } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport PageLayout from '@/components/layout/PageLayout';\nimport BreadcrumbNav from '@/components/navigation/BreadcrumbNav';\nimport { \n  Search, \n  Plus, \n  Filter, \n  Download, \n  Upload, \n  Grid3X3, \n  List, \n  MapPin,\n  Calendar,\n  DollarSign,\n  Eye,\n  Edit,\n  Trash2,\n  AlertTriangle,\n  CheckCircle,\n  Home\n} from 'lucide-react';\nimport type { Sightseeing as SightseeingType } from '@/types/sightseeing';\nimport { useSightseeingData } from './sightseeing/hooks/useSightseeingData';\nimport { useSightseeingActions } from './sightseeing/hooks/useSightseeingActions';\nimport SightseeingCard from './sightseeing/components/SightseeingCard';\nimport SightseeingTable from './sightseeing/components/SightseeingTable';\nimport SightseeingViewDrawer from './sightseeing/components/SightseeingViewDrawer';\nimport SightseeingDeleteDialog from './sightseeing/components/SightseeingDeleteDialog';\nimport { getExpirationStatus, getExpirationStats } from './sightseeing/services/expirationService';\n\nconst Sightseeing: React.FC = () => {\n  const {\n    sightseeings,\n    setSightseeings,\n    loading,\n    addSightseeing,\n    updateSightseeing,\n    deleteSightseeing\n  } = useSightseeingData();\n\n  const [viewMode, setViewMode] = useState<'grid' | 'table'>('grid');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCountry, setSelectedCountry] = useState<string>('all');\n  const [selectedCity, setSelectedCity] = useState<string>('all');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [selectedStatus, setSelectedStatus] = useState<string>('all');\n  const [priceFilter, setPriceFilter] = useState<string>('all');\n  const [showExpiredOnly, setShowExpiredOnly] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedSightseeing, setSelectedSightseeing] = useState<SightseeingType | null>(null);\n  const [viewDrawerOpen, setViewDrawerOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  // Import/Export removed for remote-only data policy\n\n  const {\n    handleViewSightseeing,\n    handleEditSightseeing,\n    handleDeleteSightseeing,\n    handleDuplicateSightseeing,\n    handleToggleStatus,\n    handleConfirmDelete\n  } = useSightseeingActions({\n    sightseeings,\n    setSightseeings,\n    setSelectedSightseeing,\n    setViewDrawerOpen,\n    setDeleteDialogOpen\n  });\n\n  const itemsPerPage = 12;\n\n  // Get unique filter options\n  const countries = useMemo(() => {\n    const uniqueCountries = [...new Set(sightseeings.map(s => s.country))].sort();\n    return uniqueCountries;\n  }, [sightseeings]);\n\n  const cities = useMemo(() => {\n    const filtered = selectedCountry === 'all' \n      ? sightseeings \n      : sightseeings.filter(s => s.country === selectedCountry);\n    return [...new Set(filtered.map(s => s.city))].sort();\n  }, [sightseeings, selectedCountry]);\n\n  const categories = useMemo(() => {\n    const allCategories = sightseeings\n      .map(s => s.category)\n      .filter(Boolean)\n      .flatMap(cat => cat!.split(', '))\n      .filter((cat, index, arr) => arr.indexOf(cat) === index)\n      .sort();\n    return allCategories;\n  }, [sightseeings]);\n\n  // Filter and search logic\n  const filteredSightseeings = useMemo(() => {\n    return sightseeings.filter(sightseeing => {\n      // Search filter\n      const matchesSearch = searchQuery === '' || \n        sightseeing.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        sightseeing.city.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        sightseeing.country.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (sightseeing.description && sightseeing.description.toLowerCase().includes(searchQuery.toLowerCase()));\n\n      // Country filter\n      const matchesCountry = selectedCountry === 'all' || sightseeing.country === selectedCountry;\n\n      // City filter\n      const matchesCity = selectedCity === 'all' || sightseeing.city === selectedCity;\n\n      // Category filter\n      const matchesCategory = selectedCategory === 'all' || \n        (sightseeing.category && sightseeing.category.includes(selectedCategory));\n\n      // Status filter\n      const matchesStatus = selectedStatus === 'all' || sightseeing.status === selectedStatus;\n\n      // Price filter\n      const matchesPrice = priceFilter === 'all' || \n        (priceFilter === 'free' && sightseeing.isFree) ||\n        (priceFilter === 'paid' && !sightseeing.isFree);\n\n      // Expiration filter\n      const matchesExpiration = !showExpiredOnly || getExpirationStatus(sightseeing) === 'expired';\n\n      return matchesSearch && matchesCountry && matchesCity && matchesCategory && \n             matchesStatus && matchesPrice && matchesExpiration;\n    });\n  }, [sightseeings, searchQuery, selectedCountry, selectedCity, selectedCategory, selectedStatus, priceFilter, showExpiredOnly]);\n\n  // Pagination\n  const totalPages = Math.ceil(filteredSightseeings.length / itemsPerPage);\n  const paginatedSightseeings = filteredSightseeings.slice(\n    (currentPage - 1) * itemsPerPage,\n    currentPage * itemsPerPage\n  );\n\n  // Statistics\n  const stats = getExpirationStats(sightseeings);\n\n  // Event handlers\n  const handleView = (sightseeing: SightseeingType) => {\n    handleViewSightseeing(sightseeing.id);\n  };\n\n  const handleEdit = (sightseeing: SightseeingType) => {\n    handleEditSightseeing(sightseeing.id);\n  };\n\n  const handleDelete = (sightseeing: SightseeingType) => {\n    handleDeleteSightseeing(sightseeing.id);\n  };\n\n  const handleDuplicate = (sightseeing: SightseeingType) => {\n    handleDuplicateSightseeing(sightseeing.id);\n  };\n\n  const handleToggleStatusWrapper = (sightseeing: SightseeingType) => {\n    handleToggleStatus(sightseeing.id);\n  };\n\n  const handleDeleteConfirm = () => {\n    if (selectedSightseeing) {\n      handleConfirmDelete(selectedSightseeing.id);\n      setSelectedSightseeing(null);\n    }\n  };\n\n  const handleAddNew = () => {\n    window.location.href = '/inventory/sightseeing/add';\n  };\n\n  const resetFilters = () => {\n    setSearchQuery('');\n    setSelectedCountry('all');\n    setSelectedCity('all');\n    setSelectedCategory('all');\n    setSelectedStatus('all');\n    setPriceFilter('all');\n    setShowExpiredOnly(false);\n    setCurrentPage(1);\n  };\n\n  const handleFilterExpired = () => {\n    setShowExpiredOnly(!showExpiredOnly);\n  };\n\n  if (loading) {\n    return (\n      <PageLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-lg\">Loading sightseeings...</div>\n        </div>\n      </PageLayout>\n    );\n  }\n\n  return (\n    <PageLayout>\n      <div className=\"space-y-6\">\n        {/* Breadcrumb Navigation */}\n        <BreadcrumbNav />\n        \n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Sightseeing Management</h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n              Manage your sightseeing inventory and experiences\n            </p>\n          </div>\n          <Button onClick={handleAddNew} className=\"bg-blue-600 hover:bg-blue-700\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add New Sightseeing\n          </Button>\n        </div>\n\n        {/* Statistics Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n                <MapPin className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Total Sightseeings</p>\n                <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.total}</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg\">\n                <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Active</p>\n                <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.valid}</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg\">\n                <AlertTriangle className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Expiring Soon</p>\n                <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.expiringSoon}</p>\n              </div>\n            </div>\n          </Card>\n\n          <Card className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg\">\n                <Calendar className=\"h-5 w-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Expired</p>\n                <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.expired}</p>\n              </div>\n            </div>\n          </Card>\n        </div>\n\n        {/* Search and Filters */}\n        <Card className=\"p-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-col lg:flex-row gap-4\">\n              {/* Search */}\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                  <Input\n                    placeholder=\"Search sightseeings...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-10\"\n                  />\n                </div>\n              </div>\n\n              {/* View Toggle */}\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant={viewMode === 'grid' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('grid')}\n                >\n                  <Grid3X3 className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant={viewMode === 'table' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('table')}\n                >\n                  <List className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n\n            {/* Filters */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n              <Select value={selectedCountry} onValueChange={setSelectedCountry}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Country\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Countries</SelectItem>\n                  {countries.map((country: string) => (\n                    <SelectItem key={country} value={country}>{country}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n\n              <Select value={selectedCity} onValueChange={setSelectedCity}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"City\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Cities</SelectItem>\n                  {cities.map((city: string) => (\n                    <SelectItem key={city} value={city}>{city}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n\n              <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Categories</SelectItem>\n                  {categories.map((category: string) => (\n                    <SelectItem key={category} value={category}>{category}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n\n              <Select value={selectedStatus} onValueChange={setSelectedStatus}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"inactive\">Inactive</SelectItem>\n                </SelectContent>\n              </Select>\n\n              <Select value={priceFilter} onValueChange={setPriceFilter}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Price\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Prices</SelectItem>\n                  <SelectItem value=\"free\">Free</SelectItem>\n                  <SelectItem value=\"paid\">Paid</SelectItem>\n                </SelectContent>\n              </Select>\n\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"expired-filter\"\n                  checked={showExpiredOnly}\n                  onCheckedChange={setShowExpiredOnly}\n                />\n                <Label htmlFor=\"expired-filter\" className=\"text-sm\">\n                  Expired Only\n                </Label>\n              </div>\n            </div>\n\n            {/* Filter Actions */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Showing {filteredSightseeings.length} of {sightseeings.length} sightseeings\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={resetFilters}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Filter className=\"h-4 w-4\" />\n                  Reset Filters\n                </Button>\n                {/* Import/Export removed for remote-only data policy */}\n              </div>\n            </div>\n          </div>\n        </Card>\n\n        {/* Content */}\n        <Tabs value={viewMode} onValueChange={(value) => setViewMode(value as 'grid' | 'table')}>\n          <TabsContent value=\"grid\" className=\"space-y-4\">\n            {paginatedSightseeings.length === 0 ? (\n              <Card className=\"p-12 text-center\">\n                <MapPin className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n                  No sightseeings found\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n                  {searchQuery || selectedCountry !== 'all' || selectedCity !== 'all' || selectedCategory !== 'all' || selectedStatus !== 'all'\n                    ? 'Try adjusting your filters to see more results.'\n                    : 'Get started by adding your first sightseeing experience.'\n                  }\n                </p>\n                {(!searchQuery && selectedCountry === 'all' && selectedCity === 'all' && selectedCategory === 'all' && selectedStatus === 'all') && (\n                  <Button onClick={handleAddNew} className=\"bg-blue-600 hover:bg-blue-700\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Your First Sightseeing\n                  </Button>\n                )}\n              </Card>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {paginatedSightseeings.map((sightseeing) => (\n                  <SightseeingCard\n                    key={sightseeing.id}\n                    sightseeing={sightseeing}\n                    onView={() => handleView(sightseeing)}\n                    onEdit={() => handleEdit(sightseeing)}\n                    onDelete={() => handleDelete(sightseeing)}\n                    onDuplicate={() => handleDuplicate(sightseeing)}\n                    onToggleStatus={() => handleToggleStatusWrapper(sightseeing)}\n                  />\n                ))}\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"table\">\n            <SightseeingTable\n              sightseeings={paginatedSightseeings}\n              onView={handleViewSightseeing}\n              onEdit={handleEditSightseeing}\n              onDelete={handleDeleteSightseeing}\n              onDuplicate={handleDuplicateSightseeing}\n              onToggleStatus={handleToggleStatus}\n            />\n          </TabsContent>\n        </Tabs>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"flex items-center justify-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n              disabled={currentPage === 1}\n            >\n              Previous\n            </Button>\n            \n            <div className=\"flex items-center gap-1\">\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                <Button\n                  key={page}\n                  variant={page === currentPage ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setCurrentPage(page)}\n                  className=\"w-8 h-8 p-0\"\n                >\n                  {page}\n                </Button>\n              ))}\n            </div>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n              disabled={currentPage === totalPages}\n            >\n              Next\n            </Button>\n          </div>\n        )}\n\n        {/* Dialogs and Drawers */}\n        <SightseeingViewDrawer\n          sightseeing={selectedSightseeing}\n          open={viewDrawerOpen}\n          onOpenChange={setViewDrawerOpen}\n          onEdit={() => {\n            setViewDrawerOpen(false);\n            if (selectedSightseeing) handleEdit(selectedSightseeing);\n          }}\n        />\n\n        <SightseeingDeleteDialog\n          sightseeing={selectedSightseeing}\n          open={deleteDialogOpen}\n          onOpenChange={setDeleteDialogOpen}\n          onConfirm={handleDeleteConfirm}\n        />\n\n        {/* Import/Export drawer removed for remote-only data policy */}\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default Sightseeing;\n","\nimport { useState } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  updateSightseeing as updateSightseeingDb, \n  deleteSightseeing as deleteSightseeingDb,\n  createSightseeing as createSightseeingDb\n} from '../services/sightseeingService';\n\ninterface UseSightseeingActionsProps {\n  sightseeings: Sightseeing[];\n  setSightseeings: React.Dispatch<React.SetStateAction<Sightseeing[]>>;\n  setSelectedSightseeing: React.Dispatch<React.SetStateAction<Sightseeing | null>>;\n  setViewDrawerOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setDeleteDialogOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const useSightseeingActions = ({\n  sightseeings,\n  setSightseeings,\n  setSelectedSightseeing,\n  setViewDrawerOpen,\n  setDeleteDialogOpen\n}: UseSightseeingActionsProps) => {\n  const { toast } = useToast();\n  \n  // Find a sightseeing by ID\n  const findSightseeingById = (id: number): Sightseeing | undefined => {\n    return sightseeings.find(item => item.id === id);\n  };\n  \n  // Handle viewing a sightseeing\n  const handleViewSightseeing = (id: number) => {\n    const sightseeing = findSightseeingById(id);\n    if (sightseeing) {\n      setSelectedSightseeing(sightseeing);\n      setViewDrawerOpen(true);\n    }\n  };\n  \n  // Handle editing a sightseeing\n  const handleEditSightseeing = (id: number) => {\n    window.location.href = `/inventory/sightseeing/edit/${id}`;\n  };\n  \n  // Handle deleting a sightseeing\n  const handleDeleteSightseeing = (id: number) => {\n    const sightseeing = findSightseeingById(id);\n    if (sightseeing) {\n      setSelectedSightseeing(sightseeing);\n      setDeleteDialogOpen(true);\n    }\n  };\n  \n  // Handle confirming delete\n  const handleConfirmDelete = async (id: number) => {\n    try {\n      await deleteSightseeingDb(id);\n      // Update local state\n      setSightseeings(current => current.filter(item => item.id !== id));\n      setDeleteDialogOpen(false);\n      // Emit update event for other components\n      window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n      toast({\n        title: \"Sightseeing deleted\",\n        description: \"The sightseeing has been successfully deleted.\",\n        variant: \"default\"\n      });\n    } catch (error) {\n      console.error('Error deleting sightseeing:', error);\n      toast({\n        title: \"Delete failed\",\n        description: \"An error occurred while deleting the sightseeing.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  // Handle duplicating a sightseeing\n  const handleDuplicateSightseeing = async (id: number) => {\n    const sightseeing = findSightseeingById(id);\n    if (!sightseeing) return;\n\n    try {\n      // Build duplication payload: copy all fields, set new timestamps and name\n      const nowIso = new Date().toISOString();\n      const duplicatePayload: Sightseeing = {\n        ...sightseeing,\n        id: 0, // let DB assign next external_id\n        name: `${sightseeing.name} (Copy)`,\n        createdAt: nowIso,\n        lastUpdated: nowIso\n      };\n\n      // Create duplicate in Supabase\n      const created = await createSightseeingDb(duplicatePayload);\n\n      // Update local state with the new record\n      setSightseeings(current => [...current, created]);\n\n      // Emit update event for other components\n      window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n\n      toast({\n        title: \"Sightseeing duplicated\",\n        description: `\"${sightseeing.name}\" has been duplicated and opened for editing.`,\n        variant: \"default\"\n      });\n\n      // Navigate to edit page for the new sightseeing\n      window.location.href = `/inventory/sightseeing/edit/${created.id}`;\n    } catch (error) {\n      console.error('Error duplicating sightseeing:', error);\n      toast({\n        title: \"Duplicate failed\",\n        description: \"An error occurred while duplicating the sightseeing.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  // Handle toggling sightseeing status\n  const handleToggleStatus = async (id: number) => {\n    try {\n      const sightseeing = findSightseeingById(id);\n      if (!sightseeing) return;\n      const newStatus: 'active' | 'inactive' = sightseeing.status === 'active' ? 'inactive' : 'active';\n      const updatedSightseeing: Sightseeing = {\n        ...sightseeing,\n        status: newStatus,\n        lastUpdated: new Date().toISOString()\n      };\n      // Update in Supabase\n      const updated = await updateSightseeingDb(updatedSightseeing);\n      // Update local state\n      setSightseeings(current => current.map(item => (item.id === id ? updated : item)));\n      // Emit update event\n      window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n      toast({\n        title: `Status updated to ${newStatus}`,\n        description: `\"${sightseeing.name}\" is now ${newStatus}.`,\n        variant: \"default\"\n      });\n    } catch (error) {\n      console.error('Error updating sightseeing status:', error);\n      toast({\n        title: \"Status update failed\",\n        description: \"An error occurred while updating the status.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  return {\n    handleViewSightseeing,\n    handleEditSightseeing,\n    handleDeleteSightseeing,\n    handleDuplicateSightseeing,\n    handleToggleStatus,\n    handleConfirmDelete\n  };\n};\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { useToast } from '@/hooks/use-toast';\nimport { Search, Plus, Eye, Edit, Trash2 } from 'lucide-react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { VisaService, EnhancedVisa } from '@/services/visaService';\n\nconst VisaPage = () => {\n  // Basic state\n  const [visas, setVisas] = useState<EnhancedVisa[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  const { toast } = useToast();\n  const navigate = useNavigate();\n\n  // Data fetching\n  const fetchVisas = async () => {\n    try {\n      setLoading(true);\n      const response = await VisaService.getAllVisas();\n      // Ensure we store an array; service returns { visas, total }\n      setVisas(response.data?.visas || []);\n    } catch (error) {\n      console.error('Error fetching visas:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to fetch visas\",\n        variant: \"destructive\",\n      });\n      // Defensive fallback to keep UI stable\n      setVisas([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchVisas();\n  }, []);\n\n  // Form handling\n  const handleAddVisa = () => {\n    navigate('/inventory/visa/add');\n  };\n\n  const handleEditVisa = (visa: EnhancedVisa) => {\n    navigate(`/inventory/visa/${visa.id}/edit`);\n  };\n\n  const handleViewVisa = (visa: EnhancedVisa) => {\n    navigate(`/inventory/visa/${visa.id}/view`);\n  };\n\n  const handleDeleteVisa = async (id: string) => {\n    try {\n      await VisaService.deleteVisa(id);\n      toast({ title: 'Deleted', description: 'Visa deleted successfully.' });\n      fetchVisas();\n    } catch (error) {\n      console.error('Error deleting visa:', error);\n      toast({ title: 'Error', description: 'Failed to delete visa.', variant: 'destructive' });\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Visa Management</h1>\n            <p className=\"text-gray-500 dark:text-gray-400 mt-1\">Manage visa information for different countries</p>\n          </div>\n          <Button className=\"flex items-center gap-2\" onClick={handleAddVisa}>\n            <Plus className=\"h-4 w-4\" />\n            Add Visa\n          </Button>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n          <Input\n            placeholder=\"Search by country...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n\n        {/* Visa Table */}\n        <Card>\n          <CardContent className=\"p-0\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Country</TableHead>\n                  <TableHead>Visa Type</TableHead>\n                  <TableHead>Processing Time</TableHead>\n                  <TableHead>Price</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead>Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {loading ? (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"text-center\">\n                      Loading visas...\n                    </TableCell>\n                  </TableRow>\n                ) : visas.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"text-center\">\n                      No visas found\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  (Array.isArray(visas) ? visas.filter(visa =>\n                    visa.country.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                    visa.visa_type.toLowerCase().includes(searchQuery.toLowerCase())\n                  ) : [])\n                    .map((visa) => (\n                      <TableRow key={visa.id}>\n                        <TableCell className=\"font-medium\">{visa.country}</TableCell>\n                        <TableCell>{visa.visa_type}</TableCell>\n                        <TableCell>{visa.processing_time}</TableCell>\n                        <TableCell>${visa.price}</TableCell>\n                        <TableCell>\n                          <Badge variant={visa.status === 'active' ? \"default\" : \"secondary\"}>\n                            {visa.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex space-x-2\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleViewVisa(visa)}\n                            >\n                              <Eye className=\"h-4 w-4\" />\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleEditVisa(visa)}\n                            >\n                              <Edit className=\"h-4 w-4\" />\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleDeleteVisa(visa.id)}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                )}\n              </TableBody>\n            </Table>\n          </CardContent>\n         </Card>\n\n         {/* Add Visa modal removed; use /inventory/visa/add page */}\n\n         {/* View Visa modal removed; use /inventory/visa/:id/view page */}\n\n         {/* Edit Visa modal removed; use /inventory/visa/:id/edit page */}\n       </div>\n     </PageLayout>\n   );\n };\n\nexport default VisaPage;\n","import { useEffect, useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { VisaService, EnhancedVisa, VisaDocument } from '@/services/visaService';\nimport { VisaStatus } from '@/pages/inventory/transport/types/visaTypes';\n\ntype ApplicantInfo = {\n  full_name: string;\n  email: string;\n  phone: string;\n  nationality: string;\n};\n\nconst steps = ['Applicant Info', 'Select Visa', 'Documents', 'Review & Submit'] as const;\n\nconst VisaWizard = () => {\n  const { toast } = useToast();\n  const [step, setStep] = useState(0);\n  const [visas, setVisas] = useState<EnhancedVisa[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [applicant, setApplicant] = useState<ApplicantInfo>({\n    full_name: '',\n    email: '',\n    phone: '',\n    nationality: ''\n  });\n  const [selectedVisa, setSelectedVisa] = useState<EnhancedVisa | null>(null);\n  const [selectedDocs, setSelectedDocs] = useState<VisaDocument[]>([]);\n\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        setLoading(true);\n        const res = await VisaService.getAllVisas({ status: 'active' });\n        setVisas(res.data?.visas || []);\n      } catch (e) {\n        console.error(e);\n        setVisas([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetch();\n  }, []);\n\n  const next = () => setStep(s => Math.min(s + 1, steps.length - 1));\n  const back = () => setStep(s => Math.max(s - 1, 0));\n\n  const submit = async () => {\n    try {\n      // Minimal submit flow; in real flow, integrate booking service\n      toast({ title: 'Submitted', description: 'Visa booking submitted successfully.' });\n      setStep(0);\n      setApplicant({ full_name: '', email: '', phone: '', nationality: '' });\n      setSelectedVisa(null);\n      setSelectedDocs([]);\n    } catch (e) {\n      toast({ title: 'Error', description: 'Failed to submit booking', variant: 'destructive' });\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Visa Booking Wizard</h1>\n            <p className=\"text-gray-500\">Step-by-step visa application</p>\n          </div>\n          <Badge>{steps[step]}</Badge>\n        </div>\n\n        <Card>\n          <CardContent className=\"p-6 space-y-6\">\n            {step === 0 && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium\">Full Name</label>\n                  <Input value={applicant.full_name} onChange={e => setApplicant({ ...applicant, full_name: e.target.value })} />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Email</label>\n                  <Input type=\"email\" value={applicant.email} onChange={e => setApplicant({ ...applicant, email: e.target.value })} />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Phone</label>\n                  <Input value={applicant.phone} onChange={e => setApplicant({ ...applicant, phone: e.target.value })} />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Nationality</label>\n                  <Input value={applicant.nationality} onChange={e => setApplicant({ ...applicant, nationality: e.target.value })} />\n                </div>\n              </div>\n            )}\n\n            {step === 1 && (\n              <div className=\"space-y-4\">\n                {loading ? (\n                  <p>Loading visas...</p>\n                ) : (visas.length === 0 ? (\n                  <p>No active visas found</p>\n                ) : (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {visas.map(v => (\n                      <div key={v.id} className={`border rounded p-4 ${selectedVisa?.id === v.id ? 'border-blue-500' : 'border-gray-200'}`}>\n                        <div className=\"font-semibold\">{v.country}</div>\n                        <div className=\"text-sm text-gray-600\">{v.visa_type}</div>\n                        <div className=\"text-sm\">Processing: {v.processing_time || 'N/A'}</div>\n                        <div className=\"text-sm\">Price: ${v.price ?? 0}</div>\n                        <div className=\"mt-2\">\n                          <Button variant={selectedVisa?.id === v.id ? 'default' : 'outline'} size=\"sm\" onClick={() => {\n                            setSelectedVisa(v);\n                            setSelectedDocs(v.documents_parsed || []);\n                          }}>Select</Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {step === 2 && (\n              <div className=\"space-y-3\">\n                {!selectedVisa ? (\n                  <p className=\"text-gray-600\">Please select a visa first.</p>\n                ) : (\n                  <div>\n                    <h3 className=\"font-semibold mb-2\">Required Documents</h3>\n                    <div className=\"space-y-2\">\n                      {(selectedVisa.documents_parsed || []).map(doc => (\n                        <div key={doc.id} className=\"flex items-center justify-between border rounded p-2\">\n                          <div>\n                            <div className=\"font-medium\">{doc.name}</div>\n                            {doc.description && <div className=\"text-sm text-gray-600\">{doc.description}</div>}\n                          </div>\n                          <Button variant={selectedDocs.find(d => d.id === doc.id) ? 'default' : 'outline'} size=\"sm\" onClick={() => {\n                            setSelectedDocs(prev => prev.find(d => d.id === doc.id) ? prev.filter(d => d.id !== doc.id) : [...prev, doc]);\n                          }}>{selectedDocs.find(d => d.id === doc.id) ? 'Provided' : 'Mark Provided'}</Button>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {step === 3 && (\n              <div className=\"space-y-4\">\n                <div>\n                  <h3 className=\"font-semibold\">Review</h3>\n                  <div className=\"text-sm\">Applicant: {applicant.full_name} ({applicant.email})</div>\n                  <div className=\"text-sm\">Phone: {applicant.phone}</div>\n                  <div className=\"text-sm\">Nationality: {applicant.nationality}</div>\n                  <div className=\"text-sm\">Visa: {selectedVisa ? `${selectedVisa.country} - ${selectedVisa.visa_type}` : 'Not selected'}</div>\n                  <div className=\"text-sm\">Documents marked provided: {selectedDocs.length}</div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex justify-between pt-4\">\n              <Button variant=\"outline\" onClick={back} disabled={step === 0}>Back</Button>\n              {step < steps.length - 1 ? (\n                <Button onClick={next} disabled={step === 1 && !selectedVisa}>Next</Button>\n              ) : (\n                <Button onClick={submit} disabled={!selectedVisa || applicant.full_name.trim() === ''}>Submit</Button>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default VisaWizard;","import { useEffect, useMemo, useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { VisaService, EnhancedVisa } from '@/services/visaService';\nimport { useToast } from '@/hooks/use-toast';\n\ntype BookingRow = {\n  id: string;\n  applicant_name: string;\n  email: string;\n  phone: string;\n  country: string;\n  visa_type: string;\n  status: 'pending' | 'submitted' | 'approved' | 'rejected';\n  created_at?: string;\n};\n\nconst VisaDashboard = () => {\n  const { toast } = useToast();\n  const [visas, setVisas] = useState<EnhancedVisa[]>([]);\n  const [bookings, setBookings] = useState<BookingRow[]>([]);\n  const [search, setSearch] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchAll = async () => {\n      try {\n        setLoading(true);\n        const v = await VisaService.getAllVisas();\n        setVisas(v.data?.visas || []);\n        // Try to load bookings from Supabase if table exists\n        try {\n          const { supabase } = await import('@/lib/supabaseClient');\n          // Cast Supabase client to allow querying tables not present in generated types\n          const sb: any = supabase;\n          const { data, error } = await sb\n            .from('visa_booking')\n            .select('*')\n            .order('created_at', { ascending: false });\n          if (error) {\n            console.warn('Visa bookings table not available:', error.message);\n            setBookings([]);\n          } else {\n            setBookings(((data || []) as unknown) as BookingRow[]);\n          }\n        } catch (err) {\n          console.warn('Failed to fetch visa bookings:', err);\n          setBookings([]);\n        }\n      } catch (e) {\n        console.error(e);\n        toast({ title: 'Error', description: 'Failed to load dashboard data', variant: 'destructive' });\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAll();\n  }, [toast]);\n\n  const filteredVisas = useMemo(() => {\n    const q = search.toLowerCase();\n    return (Array.isArray(visas) ? visas : []).filter(v =>\n      v.country.toLowerCase().includes(q) || v.visa_type.toLowerCase().includes(q)\n    );\n  }, [visas, search]);\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Visa Dashboard</h1>\n            <p className=\"text-gray-500\">Manage visas and monitor bookings</p>\n          </div>\n          <Button onClick={() => window.location.assign('/inventory/visa/wizard')}>Start Booking</Button>\n        </div>\n\n        <div className=\"space-y-6\">\n          <Card>\n            <CardContent className=\"p-0\">\n              <div className=\"p-4 flex gap-4 items-center\">\n                <Input placeholder=\"Search visas by country or type\" value={search} onChange={e => setSearch(e.target.value)} />\n              </div>\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Country</TableHead>\n                    <TableHead>Type</TableHead>\n                    <TableHead>Processing</TableHead>\n                    <TableHead>Price</TableHead>\n                    <TableHead>Status</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {loading ? (\n                    <TableRow><TableCell colSpan={5} className=\"text-center\">Loading...</TableCell></TableRow>\n                  ) : filteredVisas.length === 0 ? (\n                    <TableRow><TableCell colSpan={5} className=\"text-center\">No visas found</TableCell></TableRow>\n                  ) : filteredVisas.map(v => (\n                    <TableRow key={v.id}>\n                      <TableCell className=\"font-medium\">{v.country}</TableCell>\n                      <TableCell>{v.visa_type}</TableCell>\n                      <TableCell>{v.processing_time || 'N/A'}</TableCell>\n                      <TableCell>${v.price ?? 0}</TableCell>\n                      <TableCell><Badge variant={v.status === 'active' ? 'default' : 'secondary'}>{v.status}</Badge></TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-0\">\n              <div className=\"p-4\">\n                <h2 className=\"text-lg font-semibold\">Recent Bookings</h2>\n                <p className=\"text-sm text-gray-500\">Latest visa booking submissions</p>\n              </div>\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Applicant</TableHead>\n                    <TableHead>Contact</TableHead>\n                    <TableHead>Visa</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Created</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {bookings.length === 0 ? (\n                    <TableRow><TableCell colSpan={5} className=\"text-center\">No bookings yet</TableCell></TableRow>\n                  ) : bookings.map(b => (\n                    <TableRow key={b.id}>\n                      <TableCell className=\"font-medium\">{b.applicant_name}</TableCell>\n                      <TableCell>\n                        <div className=\"text-sm\">{b.email}</div>\n                        <div className=\"text-sm text-gray-600\">{b.phone}</div>\n                      </TableCell>\n                      <TableCell>{b.country} - {b.visa_type}</TableCell>\n                      <TableCell><Badge>{b.status}</Badge></TableCell>\n                      <TableCell>{b.created_at ? new Date(b.created_at).toLocaleString() : '-'}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default VisaDashboard;","import { useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectTrigger, SelectContent, SelectItem, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { VisaService, VisaInsert, VisaDocument } from '@/services/visaService';\nimport { useNavigate } from 'react-router-dom';\n\nconst AddVisa = () => {\n  const { toast } = useToast();\n  const navigate = useNavigate();\n\n  const [country, setCountry] = useState('');\n  const [visaType, setVisaType] = useState('');\n  const [processingTime, setProcessingTime] = useState('');\n  const [validity, setValidity] = useState('');\n  const [price, setPrice] = useState<number>(0);\n  const [isRushAvailable, setIsRushAvailable] = useState<boolean>(false);\n  const [rushProcessingTime, setRushProcessingTime] = useState('');\n  const [rushPrice, setRushPrice] = useState<number>(0);\n  const [requirements, setRequirements] = useState('');\n  const [status, setStatus] = useState<'active' | 'disabled'>('active');\n  const [documents, setDocuments] = useState<VisaDocument[]>([]);\n  const [saving, setSaving] = useState(false);\n\n  const addDocument = () => {\n    setDocuments(prev => ([...prev, {\n      id: crypto.randomUUID(),\n      name: '',\n      description: '',\n      required: true,\n      format: ''\n    }]));\n  };\n\n  const updateDocument = (id: string, patch: Partial<VisaDocument>) => {\n    setDocuments(prev => prev.map(d => d.id === id ? { ...d, ...patch } : d));\n  };\n\n  const removeDocument = (id: string) => {\n    setDocuments(prev => prev.filter(d => d.id !== id));\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setSaving(true);\n\n      const payload: VisaInsert = {\n        country,\n        visa_type: visaType,\n        processing_time: processingTime || null,\n        validity: validity || null,\n        price: price || 0,\n        is_rush_available: isRushAvailable,\n        rush_processing_time: isRushAvailable ? (rushProcessingTime || null) : null,\n        rush_price: isRushAvailable ? (rushPrice || 0) : 0,\n        requirements: requirements || null,\n        documents: VisaService.formatDocumentsForStorage(documents),\n        status,\n      } as VisaInsert;\n\n      const res = await VisaService.createVisa(payload);\n      if (!res.success) {\n        throw new Error(res.error || 'Failed to create visa');\n      }\n      toast({ title: 'Visa created', description: `Added ${country} (${visaType})` });\n      navigate('/inventory/visa');\n    } catch (e: any) {\n      toast({ title: 'Error', description: e.message || 'Failed to save', variant: 'destructive' });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <h1 className=\"text-2xl font-bold\">Add Visa</h1>\n        <Card>\n          <CardContent className=\"space-y-4 pt-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium\">Country</label>\n                <Input value={country} onChange={(e) => setCountry(e.target.value)} placeholder=\"Enter country\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Visa Type</label>\n                <Input value={visaType} onChange={(e) => setVisaType(e.target.value)} placeholder=\"e.g., Tourist\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Processing Time</label>\n                <Input value={processingTime} onChange={(e) => setProcessingTime(e.target.value)} placeholder=\"e.g., 5-7 business days\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Validity</label>\n                <Input value={validity} onChange={(e) => setValidity(e.target.value)} placeholder=\"e.g., 90 days\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Price</label>\n                <Input type=\"number\" value={price} onChange={(e) => setPrice(Number(e.target.value))} placeholder=\"0\" />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium\">Status</label>\n                <Select value={status} onValueChange={(v) => setStatus(v as 'active' | 'disabled')}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"active\">active</SelectItem>\n                    <SelectItem value=\"disabled\">disabled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <Switch checked={isRushAvailable} onCheckedChange={setIsRushAvailable} />\n              <span className=\"text-sm\">Is Rush Available</span>\n            </div>\n\n            {isRushAvailable && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium\">Rush Processing Time</label>\n                  <Input value={rushProcessingTime} onChange={(e) => setRushProcessingTime(e.target.value)} placeholder=\"e.g., 1-2 days\" />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Rush Price</label>\n                  <Input type=\"number\" value={rushPrice} onChange={(e) => setRushPrice(Number(e.target.value))} placeholder=\"0\" />\n                </div>\n              </div>\n            )}\n\n            <div>\n              <label className=\"text-sm font-medium\">Requirements</label>\n              <Textarea value={requirements} onChange={(e) => setRequirements(e.target.value)} placeholder=\"Enter requirements\" />\n            </div>\n\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <label className=\"text-sm font-medium\">Documents</label>\n                <Button variant=\"outline\" onClick={addDocument}>Add Document</Button>\n              </div>\n              <div className=\"space-y-3\">\n                {documents.map(doc => (\n                  <div key={doc.id} className=\"grid grid-cols-1 md:grid-cols-5 gap-3 items-end border p-3 rounded-md\">\n                    <div className=\"md:col-span-2\">\n                      <label className=\"text-xs\">Name</label>\n                      <Input value={doc.name} onChange={(e) => updateDocument(doc.id, { name: e.target.value })} />\n                    </div>\n                    <div>\n                      <label className=\"text-xs\">Format</label>\n                      <Input value={doc.format || ''} onChange={(e) => updateDocument(doc.id, { format: e.target.value })} />\n                    </div>\n                    <div>\n                      <label className=\"text-xs\">Required</label>\n                      <div className=\"mt-2\"><Switch checked={doc.required} onCheckedChange={(v) => updateDocument(doc.id, { required: v })} /></div>\n                    </div>\n                    <div className=\"md:col-span-5\">\n                      <label className=\"text-xs\">Description</label>\n                      <Textarea value={doc.description || ''} onChange={(e) => updateDocument(doc.id, { description: e.target.value })} />\n                    </div>\n                    <div className=\"md:col-span-5 flex justify-end\">\n                      <Button variant=\"destructive\" size=\"sm\" onClick={() => removeDocument(doc.id)}>Remove</Button>\n                    </div>\n                  </div>\n                ))}\n                {documents.length === 0 && (\n                  <p className=\"text-sm text-muted-foreground\">No documents added yet.</p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-3\">\n              <Button variant=\"outline\" onClick={() => navigate('/inventory/visa')}>Cancel</Button>\n              <Button onClick={handleSubmit} disabled={saving}>{saving ? 'Saving...' : 'Save Visa'}</Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddVisa;","import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectTrigger, SelectContent, SelectItem, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { VisaService, VisaUpdate, VisaDocument, EnhancedVisa } from '@/services/visaService';\n\nconst EditVisa = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  const [country, setCountry] = useState('');\n  const [visaType, setVisaType] = useState('');\n  const [processingTime, setProcessingTime] = useState('');\n  const [validity, setValidity] = useState('');\n  const [price, setPrice] = useState<number>(0);\n  const [isRushAvailable, setIsRushAvailable] = useState<boolean>(false);\n  const [rushProcessingTime, setRushProcessingTime] = useState('');\n  const [rushPrice, setRushPrice] = useState<number>(0);\n  const [requirements, setRequirements] = useState('');\n  const [status, setStatus] = useState<'active' | 'disabled'>('active');\n  const [documents, setDocuments] = useState<VisaDocument[]>([]);\n\n  useEffect(() => {\n    const load = async () => {\n      if (!id) return;\n      setLoading(true);\n      const res = await VisaService.getVisaById(id);\n      if (!res.success || !res.data) {\n        toast({ title: 'Error', description: res.error || 'Visa not found', variant: 'destructive' });\n        navigate('/inventory/visa');\n        return;\n      }\n      const v: EnhancedVisa = res.data;\n      setCountry(v.country || '');\n      setVisaType(v.visa_type || '');\n      setProcessingTime(v.processing_time || '');\n      setValidity(v.validity || '');\n      setPrice(v.price || 0);\n      setIsRushAvailable(!!v.is_rush_available);\n      setRushProcessingTime(v.rush_processing_time || '');\n      setRushPrice(v.rush_price || 0);\n      setRequirements(v.requirements || '');\n      setStatus((v.status as 'active' | 'disabled') || 'active');\n      setDocuments(v.documents_parsed || []);\n      setLoading(false);\n    };\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const addDocument = () => {\n    setDocuments(prev => ([...prev, {\n      id: crypto.randomUUID(),\n      name: '',\n      description: '',\n      required: true,\n      format: ''\n    }]));\n  };\n\n  const updateDocument = (docId: string, patch: Partial<VisaDocument>) => {\n    setDocuments(prev => prev.map(d => d.id === docId ? { ...d, ...patch } : d));\n  };\n\n  const removeDocument = (docId: string) => {\n    setDocuments(prev => prev.filter(d => d.id !== docId));\n  };\n\n  const handleSubmit = async () => {\n    if (!id) return;\n    try {\n      setSaving(true);\n      const payload: VisaUpdate = {\n        country,\n        visa_type: visaType,\n        processing_time: processingTime || null,\n        validity: validity || null,\n        price: price || 0,\n        is_rush_available: isRushAvailable,\n        rush_processing_time: isRushAvailable ? (rushProcessingTime || null) : null,\n        rush_price: isRushAvailable ? (rushPrice || 0) : 0,\n        requirements: requirements || null,\n        documents: VisaService.formatDocumentsForStorage(documents),\n        status,\n      } as VisaUpdate;\n\n      const res = await VisaService.updateVisa(id, payload);\n      if (!res.success) {\n        throw new Error(res.error || 'Failed to update visa');\n      }\n      toast({ title: 'Visa updated', description: `${country} (${visaType})` });\n      navigate('/inventory/visa');\n    } catch (e: any) {\n      toast({ title: 'Error', description: e.message || 'Failed to update', variant: 'destructive' });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <h1 className=\"text-2xl font-bold\">Edit Visa</h1>\n        <Card>\n          <CardContent className=\"space-y-4 pt-6\">\n            {loading ? (\n              <p>Loading...</p>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Country</label>\n                    <Input value={country} onChange={(e) => setCountry(e.target.value)} />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Visa Type</label>\n                    <Input value={visaType} onChange={(e) => setVisaType(e.target.value)} />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Processing Time</label>\n                    <Input value={processingTime} onChange={(e) => setProcessingTime(e.target.value)} />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Validity</label>\n                    <Input value={validity} onChange={(e) => setValidity(e.target.value)} />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Price</label>\n                    <Input type=\"number\" value={price} onChange={(e) => setPrice(Number(e.target.value))} />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Status</label>\n                    <Select value={status} onValueChange={(v) => setStatus(v as 'active' | 'disabled')}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select status\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"active\">active</SelectItem>\n                        <SelectItem value=\"disabled\">disabled</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                  <Switch checked={isRushAvailable} onCheckedChange={setIsRushAvailable} />\n                  <span className=\"text-sm\">Is Rush Available</span>\n                </div>\n\n                {isRushAvailable && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium\">Rush Processing Time</label>\n                      <Input value={rushProcessingTime} onChange={(e) => setRushProcessingTime(e.target.value)} />\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium\">Rush Price</label>\n                      <Input type=\"number\" value={rushPrice} onChange={(e) => setRushPrice(Number(e.target.value))} />\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"text-sm font-medium\">Requirements</label>\n                  <Textarea value={requirements} onChange={(e) => setRequirements(e.target.value)} />\n                </div>\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"text-sm font-medium\">Documents</label>\n                    <Button variant=\"outline\" onClick={addDocument}>Add Document</Button>\n                  </div>\n                  <div className=\"space-y-3\">\n                    {documents.map(doc => (\n                      <div key={doc.id} className=\"grid grid-cols-1 md:grid-cols-5 gap-3 items-end border p-3 rounded-md\">\n                        <div className=\"md:col-span-2\">\n                          <label className=\"text-xs\">Name</label>\n                          <Input value={doc.name} onChange={(e) => updateDocument(doc.id, { name: e.target.value })} />\n                        </div>\n                        <div>\n                          <label className=\"text-xs\">Format</label>\n                          <Input value={doc.format || ''} onChange={(e) => updateDocument(doc.id, { format: e.target.value })} />\n                        </div>\n                        <div>\n                          <label className=\"text-xs\">Required</label>\n                          <div className=\"mt-2\"><Switch checked={doc.required} onCheckedChange={(v) => updateDocument(doc.id, { required: v })} /></div>\n                        </div>\n                        <div className=\"md:col-span-5\">\n                          <label className=\"text-xs\">Description</label>\n                          <Textarea value={doc.description || ''} onChange={(e) => updateDocument(doc.id, { description: e.target.value })} />\n                        </div>\n                        <div className=\"md:col-span-5 flex justify-end\">\n                          <Button variant=\"destructive\" size=\"sm\" onClick={() => removeDocument(doc.id)}>Remove</Button>\n                        </div>\n                      </div>\n                    ))}\n                    {documents.length === 0 && (\n                      <p className=\"text-sm text-muted-foreground\">No documents listed.</p>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex justify-end gap-3\">\n                  <Button variant=\"outline\" onClick={() => navigate('/inventory/visa')}>Cancel</Button>\n                  <Button onClick={handleSubmit} disabled={saving}>{saving ? 'Saving...' : 'Update Visa'}</Button>\n                </div>\n              </>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default EditVisa;","import { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { VisaService, EnhancedVisa } from '@/services/visaService';\n\nconst ViewVisa = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [visa, setVisa] = useState<EnhancedVisa | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const load = async () => {\n      if (!id) return;\n      setLoading(true);\n      const res = await VisaService.getVisaById(id);\n      if (!res.success || !res.data) {\n        toast({ title: 'Error', description: res.error || 'Visa not found', variant: 'destructive' });\n        navigate('/inventory/visa');\n        return;\n      }\n      setVisa(res.data);\n      setLoading(false);\n    };\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  return (\n    <PageLayout>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <h1 className=\"text-2xl font-bold\">View Visa</h1>\n          <div className=\"flex gap-2\">\n            {visa && (\n              <Button variant=\"outline\" onClick={() => navigate(`/inventory/visa/${visa.id}/edit`)}>Edit</Button>\n            )}\n            <Button variant=\"outline\" onClick={() => navigate('/inventory/visa')}>Back</Button>\n          </div>\n        </div>\n        <Card>\n          <CardContent className=\"pt-6\">\n            {loading ? (\n              <p>Loading...</p>\n            ) : visa ? (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-3\">\n                  <h2 className=\"text-xl font-semibold\">{visa.country}  {visa.visa_type}</h2>\n                  <Badge variant={visa.status === 'active' ? 'default' : 'secondary'}>{visa.status}</Badge>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Processing Time</p>\n                    <p>{visa.processing_time || '-'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Validity</p>\n                    <p>{visa.validity || '-'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Price</p>\n                    <p>${visa.price ?? 0}</p>\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Rush Available</p>\n                    <p>{visa.is_rush_available ? 'Yes' : 'No'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Rush Processing Time</p>\n                    <p>{visa.rush_processing_time || '-'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Rush Price</p>\n                    <p>{visa.rush_price ? `$${visa.rush_price}` : '-'}</p>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Requirements</p>\n                  <p>{visa.requirements || '-'}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium\">Documents</p>\n                  <div className=\"space-y-2 mt-2\">\n                    {(visa.documents_parsed || []).length === 0 && <p className=\"text-sm text-muted-foreground\">No documents listed</p>}\n                    {(visa.documents_parsed || []).map(doc => (\n                      <div key={doc.id} className=\"border p-3 rounded-md\">\n                        <div className=\"flex justify-between\">\n                          <p className=\"font-medium\">{doc.name}</p>\n                          <Badge variant={doc.required ? 'default' : 'secondary'}>{doc.required ? 'Required' : 'Optional'}</Badge>\n                        </div>\n                        {doc.format && <p className=\"text-sm\">Format: {doc.format}</p>}\n                        {doc.description && <p className=\"text-sm text-muted-foreground mt-1\">{doc.description}</p>}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <p>Visa not found.</p>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default ViewVisa;","import React, { useState, useEffect } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Plus, Search, Filter, Calendar, MapPin, Users, Grid, List, LayoutGrid } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { useNavigate } from 'react-router-dom';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport PackageCard from '@/components/inventory/packages/PackageCard';\nimport { TourPackage } from '@/types/package';\nimport { tourPackageService } from '@/integrations/supabase/services/tourPackageService';\n\nconst Packages: React.FC = () => {\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [packages, setPackages] = useState<TourPackage[]>([]);\n  const [activeTab, setActiveTab] = useState<string>('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  // Load package data on component mount from Supabase\n  useEffect(() => {\n    const fetchPackages = async () => {\n      try {\n        const data = await tourPackageService.listTourPackages();\n        setPackages(data);\n      } catch (error: any) {\n        toast({\n          title: 'Failed to load packages',\n          description: error?.message ?? 'An error occurred while fetching packages.',\n          variant: 'destructive',\n        });\n      }\n    };\n    fetchPackages();\n  }, [toast]);\n\n  // Filter packages based on search query and active tab\n  const filteredPackages = packages.filter(pkg => {\n    const matchesSearch = pkg.name.toLowerCase().includes(searchQuery.toLowerCase()) || \n                        pkg.destinations.some(dest => \n                          dest.country.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                          dest.cities.some(city => city.toLowerCase().includes(searchQuery.toLowerCase()))\n                        );\n    \n    if (activeTab === 'all') return matchesSearch;\n    if (activeTab === 'published') return matchesSearch && pkg.status === 'published';\n    if (activeTab === 'drafts') return matchesSearch && pkg.status === 'draft';\n    \n    return matchesSearch;\n  });\n\n  const handleCreatePackage = () => {\n    navigate('/inventory/packages/create');\n  };\n\n  const handleDeletePackage = async (id: string) => {\n    try {\n      await tourPackageService.deleteTourPackage(id);\n      setPackages(prev => prev.filter(pkg => pkg.id !== id));\n      toast({\n        title: 'Package deleted',\n        description: 'The package has been deleted successfully.'\n      });\n    } catch (error: any) {\n      toast({\n        title: 'Delete failed',\n        description: error?.message ?? 'Could not delete the package.',\n        variant: 'destructive',\n      });\n    }\n  };\n  \n  const handleStatusChange = async (id: string, newStatus: 'draft' | 'published') => {\n    try {\n      const updated = await tourPackageService.setStatus(id, newStatus);\n      setPackages(prev => prev.map(pkg => (pkg.id === id ? updated : pkg)));\n      toast({ title: 'Status updated', description: `Package marked as ${newStatus}.` });\n    } catch (error: any) {\n      toast({\n        title: 'Status update failed',\n        description: error?.message ?? 'Could not update the package status.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900\">\n        <div className=\"p-4 max-w-7xl mx-auto\">\n          {/* Header Section */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6\">\n            <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg\">\n                    <LayoutGrid className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <h1 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n                    Tour Packages\n                  </h1>\n                </div>\n                <p className=\"text-gray-600 dark:text-gray-400 text-lg\">\n                  Create and manage custom tour packages with detailed itineraries\n                </p>\n                <div className=\"flex items-center gap-6 mt-4 text-sm text-gray-500 dark:text-gray-400\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    <span>{packages.filter(pkg => pkg.status === 'published').length} Published</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                    <span>{packages.filter(pkg => pkg.status === 'draft').length} Drafts</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                    <span>{packages.length} Total</span>\n                  </div>\n                </div>\n              </div>\n              <Button \n                onClick={handleCreatePackage} \n                className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 gap-2 px-6 py-3 text-base font-medium rounded-xl\"\n              >\n                <Plus className=\"h-5 w-5\" />\n                <span>Create Package</span>\n              </Button>\n            </div>\n          </div>\n\n          {/* Search and Filters */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n            <div className=\"flex flex-col lg:flex-row gap-4\">\n              <div className=\"relative flex-grow\">\n                <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5\" />\n                <Input\n                  placeholder=\"Search packages by name, destination, theme...\"\n                  className=\"pl-12 h-12 text-base border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                />\n              </div>\n              <div className=\"flex gap-3\">\n                <Button variant=\"outline\" className=\"h-12 px-6 rounded-xl border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 gap-2\">\n                  <Filter className=\"h-4 w-4\" />\n                  <span>Filters</span>\n                </Button>\n                <div className=\"flex bg-gray-100 dark:bg-gray-700 rounded-xl p-1\">\n                  <Button\n                    variant={viewMode === 'grid' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    onClick={() => setViewMode('grid')}\n                    className=\"rounded-lg\"\n                  >\n                    <Grid className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant={viewMode === 'list' ? 'default' : 'ghost'}\n                    size=\"sm\"\n                    onClick={() => setViewMode('list')}\n                    className=\"rounded-lg\"\n                  >\n                    <List className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tabs */}\n          <Tabs defaultValue=\"all\" className=\"space-y-4\" onValueChange={setActiveTab}>\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-2\">\n              <TabsList className=\"grid grid-cols-3 w-full bg-gray-50 dark:bg-gray-700 rounded-lg p-1 gap-1\">\n                <TabsTrigger value=\"all\" className=\"flex gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:shadow-md rounded-lg py-2 px-3 transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-600\">\n                  All Packages\n                  <Badge variant=\"secondary\" className=\"ml-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 text-xs\">\n                    {packages.length}\n                  </Badge>\n                </TabsTrigger>\n                <TabsTrigger value=\"published\" className=\"flex gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:shadow-md rounded-lg py-2 px-3 transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-600\">\n                  Published\n                  <Badge variant=\"secondary\" className=\"ml-1 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 text-xs\">\n                    {packages.filter(pkg => pkg.status === 'published').length}\n                  </Badge>\n                </TabsTrigger>\n                <TabsTrigger value=\"drafts\" className=\"flex gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:shadow-md rounded-lg py-2 px-3 transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-600\">\n                  Drafts\n                  <Badge variant=\"secondary\" className=\"ml-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 text-xs\">\n                    {packages.filter(pkg => pkg.status === 'draft').length}\n                  </Badge>\n                </TabsTrigger>\n              </TabsList>\n            </div>\n\n            <TabsContent value=\"all\" className=\"mt-0\">\n              {filteredPackages.length > 0 ? (\n                <div className={viewMode === 'grid' \n                  ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\" \n                  : \"space-y-4\"\n                }>\n                  {filteredPackages.map((pkg) => (\n                    <PackageCard \n                      key={pkg.id} \n                      packageData={pkg} \n                      onDelete={() => handleDeletePackage(pkg.id)}\n                      onStatusChange={handleStatusChange}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <Card className=\"border-dashed border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n                  <CardContent className=\"flex flex-col items-center justify-center p-12 text-center\">\n                    <div className=\"rounded-full bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900 dark:to-purple-900 p-6 mb-6\">\n                      <Calendar className=\"h-12 w-12 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-3\">No packages found</h3>\n                    <p className=\"text-gray-600 dark:text-gray-400 max-w-md mb-6 text-lg\">\n                      {searchQuery \n                        ? `No packages match your search criteria. Try adjusting your search.` \n                        : `You haven't created any packages yet. Create your first package to get started.`}\n                    </p>\n                    <Button \n                      onClick={handleCreatePackage} \n                      className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 gap-2 px-6 py-3 text-base font-medium rounded-xl\"\n                    >\n                      <Plus className=\"h-5 w-5\" />\n                      <span>Create Your First Package</span>\n                    </Button>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n            \n            <TabsContent value=\"published\" className=\"mt-0\">\n              {filteredPackages.length > 0 ? (\n                <div className={viewMode === 'grid' \n                  ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\" \n                  : \"space-y-4\"\n                }>\n                  {filteredPackages.map((pkg) => (\n                    <PackageCard \n                      key={pkg.id} \n                      packageData={pkg} \n                      onDelete={() => handleDeletePackage(pkg.id)}\n                      onStatusChange={handleStatusChange}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <Card className=\"border-dashed border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n                  <CardContent className=\"flex flex-col items-center justify-center p-12 text-center\">\n                    <div className=\"rounded-full bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900 dark:to-emerald-900 p-6 mb-6\">\n                      <Calendar className=\"h-12 w-12 text-green-600 dark:text-green-400\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-3\">No published packages</h3>\n                    <p className=\"text-gray-600 dark:text-gray-400 max-w-md mb-6 text-lg\">\n                      {searchQuery \n                        ? `No published packages match your search criteria.` \n                        : `You haven't published any packages yet. Create and publish a package to get started.`}\n                    </p>\n                    <Button \n                      onClick={handleCreatePackage} \n                      className=\"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 gap-2 px-6 py-3 text-base font-medium rounded-xl\"\n                    >\n                      <Plus className=\"h-5 w-5\" />\n                      <span>Create Package</span>\n                    </Button>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n            \n            <TabsContent value=\"drafts\" className=\"mt-0\">\n              {filteredPackages.length > 0 ? (\n                <div className={viewMode === 'grid' \n                  ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\" \n                  : \"space-y-4\"\n                }>\n                  {filteredPackages.map((pkg) => (\n                    <PackageCard \n                      key={pkg.id} \n                      packageData={pkg} \n                      onDelete={() => handleDeletePackage(pkg.id)}\n                      onStatusChange={handleStatusChange}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <Card className=\"border-dashed border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n                  <CardContent className=\"flex flex-col items-center justify-center p-12 text-center\">\n                    <div className=\"rounded-full bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900 dark:to-orange-900 p-6 mb-6\">\n                      <Calendar className=\"h-12 w-12 text-yellow-600 dark:text-yellow-400\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-3\">No draft packages</h3>\n                    <p className=\"text-gray-600 dark:text-gray-400 max-w-md mb-6 text-lg\">\n                      {searchQuery \n                        ? `No draft packages match your search criteria.` \n                        : `You don't have any packages saved as drafts.`}\n                    </p>\n                    <Button \n                      onClick={handleCreatePackage} \n                      className=\"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 gap-2 px-6 py-3 text-base font-medium rounded-xl\"\n                    >\n                      <Plus className=\"h-5 w-5\" />\n                      <span>Create Package</span>\n                    </Button>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default Packages;\n","\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { \n  Plus, MapPin, Clock, DollarSign, Star, Hotel, \n  Car, Camera, UtensilsCrossed, Sparkles \n} from 'lucide-react';\nimport { useSmartTemplateSuggestions } from '../hooks/useSmartTemplateSuggestions';\nimport { ProposalDay } from '@/components/proposal/DayPlanningInterface';\n\ninterface SmartSuggestionsPanelProps {\n  selectedCountry: string;\n  selectedCities: string[];\n  templateCategory: 'Budget' | 'Standard' | 'Premium' | 'Luxury';\n  onAddToDay: (dayId: string, item: any) => void;\n  onUseDayTemplate: (template: ProposalDay) => void;\n}\n\nconst SmartSuggestionsPanel: React.FC<SmartSuggestionsPanelProps> = ({\n  selectedCountry,\n  selectedCities,\n  templateCategory,\n  onAddToDay,\n  onUseDayTemplate\n}) => {\n  const { suggestions, loading, priceRange } = useSmartTemplateSuggestions(\n    selectedCountry,\n    selectedCities,\n    templateCategory\n  );\n  const [activeTab, setActiveTab] = useState('templates');\n\n  const getIcon = (type: string) => {\n    switch (type) {\n      case 'hotel': return Hotel;\n      case 'transport': return Car;\n      case 'sightseeing': return Camera;\n      case 'restaurant': return UtensilsCrossed;\n      default: return Plus;\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'Budget': return 'bg-green-100 text-green-800';\n      case 'Standard': return 'bg-blue-100 text-blue-800';\n      case 'Premium': return 'bg-purple-100 text-purple-800';\n      case 'Luxury': return 'bg-amber-100 text-amber-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"flex items-center justify-center p-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-2\">Loading suggestions...</span>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Sparkles className=\"h-5 w-5 text-blue-600\" />\n          Smart Suggestions\n          <Badge className={getCategoryColor(templateCategory)}>\n            {templateCategory}\n          </Badge>\n        </CardTitle>\n        <p className=\"text-sm text-muted-foreground\">\n          AI-powered suggestions based on {selectedCountry} and your template category\n        </p>\n      </CardHeader>\n      <CardContent>\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-5\">\n            <TabsTrigger value=\"templates\">Day Plans</TabsTrigger>\n            <TabsTrigger value=\"hotels\">Hotels</TabsTrigger>\n            <TabsTrigger value=\"transport\">Transport</TabsTrigger>\n            <TabsTrigger value=\"sightseeing\">Activities</TabsTrigger>\n            <TabsTrigger value=\"restaurants\">Dining</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"templates\" className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium\">Pre-built Day Templates</h4>\n              <Badge variant=\"outline\">\n                ${priceRange.min}-${priceRange.max} range\n              </Badge>\n            </div>\n            <ScrollArea className=\"h-64\">\n              <div className=\"space-y-3\">\n                {suggestions.dayTemplates.map((template) => (\n                  <div key={template.id} className=\"p-3 border rounded-lg hover:bg-gray-50\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <h5 className=\"font-medium\">{template.title}</h5>\n                        <p className=\"text-sm text-muted-foreground\">{template.description}</p>\n                        <div className=\"flex items-center gap-4 mt-2 text-xs text-muted-foreground\">\n                          <div className=\"flex items-center gap-1\">\n                            <MapPin className=\"h-3 w-3\" />\n                            {template.city}\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <DollarSign className=\"h-3 w-3\" />\n                            ${template.totalCost}\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <Clock className=\"h-3 w-3\" />\n                            {template.activities.length} activities\n                          </div>\n                        </div>\n                      </div>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => onUseDayTemplate(template)}\n                      >\n                        <Plus className=\"h-3 w-3 mr-1\" />\n                        Use\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </TabsContent>\n\n          {(['hotels', 'transport', 'sightseeing', 'restaurants'] as const).map((type) => {\n            const EmptyStateIcon = getIcon(type);\n            return (\n              <TabsContent key={type} value={type} className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h4 className=\"font-medium capitalize\">{type} Suggestions</h4>\n                  <Badge variant=\"outline\">\n                    {suggestions[type].length} options\n                  </Badge>\n                </div>\n                <ScrollArea className=\"h-64\">\n                  <div className=\"space-y-3\">\n                    {suggestions[type].map((item) => {\n                      const IconComponent = getIcon(item.type);\n                      return (\n                        <div key={item.id} className=\"p-3 border rounded-lg hover:bg-gray-50\">\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex items-start gap-3 flex-1\">\n                              <IconComponent className=\"h-4 w-4 text-blue-600 mt-1\" />\n                              <div className=\"flex-1\">\n                                <h5 className=\"font-medium\">{item.name}</h5>\n                                <p className=\"text-sm text-muted-foreground\">{item.description}</p>\n                                <div className=\"flex items-center gap-4 mt-2\">\n                                  <div className=\"flex items-center gap-1 text-sm\">\n                                    <DollarSign className=\"h-3 w-3\" />\n                                    {item.price} {item.currency}\n                                    {item.paxBased && <span className=\"text-xs\">/pax</span>}\n                                  </div>\n                                  {item.rating && (\n                                    <div className=\"flex items-center gap-1 text-sm\">\n                                      <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                                      {item.rating}\n                                    </div>\n                                  )}\n                                  <Badge variant=\"outline\" className=\"text-xs\">\n                                    {item.category}\n                                  </Badge>\n                                </div>\n                                <div className=\"flex items-center gap-2 mt-1 text-xs text-muted-foreground\">\n                                  <MapPin className=\"h-3 w-3\" />\n                                  {item.city}, {item.country}\n                                  {item.duration && (\n                                    <>\n                                      <Clock className=\"h-3 w-3 ml-2\" />\n                                      {item.duration}\n                                    </>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => onAddToDay('current', item)}\n                            >\n                              <Plus className=\"h-3 w-3 mr-1\" />\n                              Add\n                            </Button>\n                          </div>\n                        </div>\n                      );\n                    })}\n                    {suggestions[type].length === 0 && (\n                      <div className=\"text-center py-8 text-muted-foreground\">\n                        <EmptyStateIcon className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                        <p>No {type} suggestions available for selected destination</p>\n                      </div>\n                    )}\n                  </div>\n                </ScrollArea>\n              </TabsContent>\n            );\n          })}\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SmartSuggestionsPanel;\n","\nimport { useState, useEffect, useMemo } from 'react';\nimport { useInventoryData } from '@/pages/queries/hooks/useInventoryData';\nimport { ProposalDay } from '@/components/proposal/DayPlanningInterface';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\n\ninterface ModuleSuggestion {\n  id: string;\n  type: 'hotel' | 'transport' | 'sightseeing' | 'restaurant';\n  name: string;\n  description: string;\n  price: number;\n  currency: string;\n  rating?: number;\n  category: string;\n  city: string;\n  country: string;\n  duration?: string;\n  paxBased?: boolean;\n}\n\ninterface SmartSuggestions {\n  hotels: ModuleSuggestion[];\n  transport: ModuleSuggestion[];\n  sightseeing: ModuleSuggestion[];\n  restaurants: ModuleSuggestion[];\n  dayTemplates: ProposalDay[];\n}\n\nexport const useSmartTemplateSuggestions = (\n  selectedCountry: string,\n  selectedCities: string[],\n  templateCategory: 'Budget' | 'Standard' | 'Premium' | 'Luxury' = 'Standard'\n) => {\n  const { hotels, restaurants, sightseeing, transportRoutes, loading } = useInventoryData();\n  const [suggestions, setSuggestions] = useState<SmartSuggestions>({\n    hotels: [],\n    transport: [],\n    sightseeing: [],\n    restaurants: [],\n    dayTemplates: []\n  });\n\n  const categoryPriceRanges = {\n    Budget: { min: 0, max: 100 },\n    Standard: { min: 50, max: 200 },\n    Premium: { min: 150, max: 400 },\n    Luxury: { min: 300, max: 1000 }\n  };\n\n  const priceRange = categoryPriceRanges[templateCategory];\n\n  const filteredSuggestions = useMemo(() => {\n    if (!selectedCountry || loading) return suggestions;\n\n    // Filter hotels by country/cities and category\n    const hotelSuggestions: ModuleSuggestion[] = hotels\n      .filter(hotel => {\n        const matchesCountry = hotel.country?.toLowerCase() === selectedCountry.toLowerCase();\n        const matchesCity = selectedCities.length === 0 || \n          selectedCities.some(city => hotel.city?.toLowerCase().includes(city.toLowerCase()));\n        \n        // Get price for category filtering\n        const roomTypes = hotel.roomTypes || [];\n        const standardRoom = roomTypes.find(r => r.name?.toLowerCase().includes('standard')) || roomTypes[0];\n        const price = standardRoom?.adultPrice || hotel.minRate || 100;\n        \n        return matchesCountry && matchesCity && price >= priceRange.min && price <= priceRange.max;\n      })\n      .map(hotel => {\n        const roomTypes = hotel.roomTypes || [];\n        const standardRoom = roomTypes.find(r => r.name?.toLowerCase().includes('standard')) || roomTypes[0];\n        const price = standardRoom?.adultPrice || hotel.minRate || 100;\n        \n        return {\n          id: hotel.id.toString(),\n          type: 'hotel' as const,\n          name: hotel.name,\n          description: hotel.description || '',\n          price,\n          currency: hotel.currency || 'USD',\n          rating: (hotel as any).rating || undefined,\n          category: hotel.category || templateCategory,\n          city: hotel.city || '',\n          country: hotel.country || selectedCountry\n        };\n      })\n      .slice(0, 10);\n\n    // Filter transport by cities\n    const transportSuggestions: ModuleSuggestion[] = transportRoutes\n      .filter(route => {\n        const matchesCity = selectedCities.some(city => \n          route.from?.toLowerCase().includes(city.toLowerCase()) ||\n          route.to?.toLowerCase().includes(city.toLowerCase())\n        );\n        const price = route.price || 50;\n        return matchesCity && price >= priceRange.min * 0.3 && price <= priceRange.max * 0.5;\n      })\n      .map(route => ({\n        id: route.id.toString(),\n        type: 'transport' as const,\n        name: route.name || `${route.from} to ${route.to}`,\n        description: `${route.transportType} transport - ${route.duration}`,\n        price: route.price || 50,\n        currency: 'USD',\n        category: route.transportType || 'Car',\n        city: route.from || '',\n        country: route.country || selectedCountry,\n        duration: route.duration,\n        paxBased: true\n      }))\n      .slice(0, 8);\n\n    // Filter sightseeing by cities and price\n    const sightseeingSuggestions: ModuleSuggestion[] = sightseeing\n      .filter(activity => {\n        const matchesCity = selectedCities.some(city =>\n          activity.city?.toLowerCase().includes(city.toLowerCase())\n        );\n        const price = typeof activity.price === 'object' ? activity.price.adult : activity.price || 0;\n        return matchesCity && price >= priceRange.min * 0.2 && price <= priceRange.max * 0.4;\n      })\n      .map(activity => {\n        const price = typeof activity.price === 'object' ? activity.price.adult : activity.price || 0;\n        return {\n          id: activity.id.toString(),\n          type: 'sightseeing' as const,\n          name: activity.name,\n          description: activity.description || '',\n          price,\n          currency: 'USD',\n          rating: (activity as any).rating || undefined,\n          category: activity.category || 'Cultural',\n          city: activity.city || '',\n          country: selectedCountry,\n          duration: activity.duration,\n          paxBased: true\n        };\n      })\n      .slice(0, 12);\n\n    // Filter restaurants by cities and price\n    const restaurantSuggestions: ModuleSuggestion[] = restaurants\n      .filter(restaurant => {\n        const matchesCity = selectedCities.some(city =>\n          restaurant.city?.toLowerCase().includes(city.toLowerCase())\n        );\n        const price = restaurant.averageCost || 25;\n        return matchesCity && price >= priceRange.min * 0.1 && price <= priceRange.max * 0.3;\n      })\n      .map(restaurant => ({\n        id: restaurant.id.toString(),\n        type: 'restaurant' as const,\n        name: restaurant.name,\n        description: restaurant.description || '',\n        price: restaurant.averageCost || 25,\n        currency: restaurant.currencyCode || 'USD',\n        rating: restaurant.rating,\n        category: restaurant.cuisine || 'Local',\n        city: restaurant.city || '',\n        country: selectedCountry,\n        paxBased: true\n      }))\n      .slice(0, 8);\n\n    // Generate day templates based on suggestions\n    const dayTemplates = generateDayTemplates(\n      selectedCities,\n      hotelSuggestions,\n      transportSuggestions,\n      sightseeingSuggestions,\n      restaurantSuggestions\n    );\n\n    return {\n      hotels: hotelSuggestions,\n      transport: transportSuggestions,\n      sightseeing: sightseeingSuggestions,\n      restaurants: restaurantSuggestions,\n      dayTemplates\n    };\n  }, [hotels, restaurants, sightseeing, transportRoutes, selectedCountry, selectedCities, templateCategory, loading]);\n\n  const generateDayTemplates = (\n    cities: string[],\n    hotelSuggestions: ModuleSuggestion[],\n    transportSuggestions: ModuleSuggestion[],\n    sightseeingSuggestions: ModuleSuggestion[],\n    restaurantSuggestions: ModuleSuggestion[]\n  ): ProposalDay[] => {\n    const templates: ProposalDay[] = [];\n    \n    cities.forEach((city, index) => {\n      const cityHotels = hotelSuggestions.filter(h => h.city.toLowerCase().includes(city.toLowerCase()));\n      const citySightseeing = sightseeingSuggestions.filter(s => s.city.toLowerCase().includes(city.toLowerCase()));\n      const cityRestaurants = restaurantSuggestions.filter(r => r.city.toLowerCase().includes(city.toLowerCase()));\n      \n      // Arrival day template\n      templates.push({\n        id: `arrival_${city.toLowerCase()}`,\n        dayNumber: index + 1,\n        date: '',\n        city,\n        title: `Arrival in ${city}`,\n        description: `Welcome to ${city} - Check-in and initial exploration`,\n        activities: [\n          ...(index > 0 ? [{\n            id: `transport_${index}`,\n            name: `Transfer to ${city}`,\n            price: transportSuggestions[0]?.price || 50,\n            duration: '2-3 hours'\n          }] : []),\n          {\n            id: `checkin_${city}`,\n            name: 'Hotel Check-in',\n            price: 0,\n            duration: '30 minutes'\n          },\n          ...(citySightseeing.slice(0, 1).map(activity => ({\n            id: activity.id,\n            name: activity.name,\n            price: activity.price,\n            duration: activity.duration || '2 hours'\n          })))\n        ],\n        meals: { breakfast: false, lunch: true, dinner: true },\n        totalCost: calculateDayCost(cityHotels[0], citySightseeing.slice(0, 1), cityRestaurants.slice(0, 1))\n      });\n\n      // Exploration day template\n      if (citySightseeing.length > 1) {\n        templates.push({\n          id: `explore_${city.toLowerCase()}`,\n          dayNumber: index + 2,\n          date: '',\n          city,\n          title: `${city} Exploration`,\n          description: `Full day exploring the highlights of ${city}`,\n          activities: citySightseeing.slice(1, 3).map(activity => ({\n            id: activity.id,\n            name: activity.name,\n            price: activity.price,\n            duration: activity.duration || '3 hours'\n          })),\n          meals: { breakfast: true, lunch: true, dinner: false },\n          totalCost: calculateDayCost(cityHotels[0], citySightseeing.slice(1, 3), [])\n        });\n      }\n    });\n\n    return templates;\n  };\n\n  const calculateDayCost = (\n    hotel?: ModuleSuggestion,\n    activities: ModuleSuggestion[] = [],\n    restaurants: ModuleSuggestion[] = []\n  ): number => {\n    const hotelCost = hotel?.price || 0;\n    const activitiesCost = activities.reduce((sum, activity) => sum + activity.price, 0);\n    const restaurantCost = restaurants.reduce((sum, restaurant) => sum + restaurant.price, 0);\n    return hotelCost + activitiesCost + restaurantCost;\n  };\n\n  useEffect(() => {\n    setSuggestions(filteredSuggestions);\n  }, [filteredSuggestions]);\n\n  return {\n    suggestions,\n    loading,\n    priceRange,\n    refreshSuggestions: () => setSuggestions(filteredSuggestions)\n  };\n};\n","\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { \n  MapPin, Calendar, Users, DollarSign, Clock, \n  Hotel, Car, Camera, UtensilsCrossed, TrendingUp,\n  PieChart, BarChart3, Activity\n} from 'lucide-react';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\nimport { ProposalDay } from '@/components/proposal/DayPlanningInterface';\n\ninterface TemplateSummaryProps {\n  template: Partial<EnhancedProposalTemplate>;\n  dayPlan: ProposalDay[];\n}\n\nconst TemplateSummary: React.FC<TemplateSummaryProps> = ({ template, dayPlan }) => {\n  const calculateTotalCost = () => {\n    return dayPlan.reduce((sum, day) => sum + day.totalCost, 0);\n  };\n\n  const calculateActivityBreakdown = () => {\n    const breakdown = {\n      hotels: 0,\n      transport: 0,\n      sightseeing: 0,\n      restaurants: 0,\n      total: 0\n    };\n\n    dayPlan.forEach(day => {\n      day.activities.forEach(activity => {\n        breakdown.total += activity.price;\n        // Categorize based on activity name/type\n        const name = activity.name.toLowerCase();\n        if (name.includes('hotel') || name.includes('accommodation')) {\n          breakdown.hotels += activity.price;\n        } else if (name.includes('transport') || name.includes('transfer') || name.includes('taxi')) {\n          breakdown.transport += activity.price;\n        } else if (name.includes('restaurant') || name.includes('meal') || name.includes('dining')) {\n          breakdown.restaurants += activity.price;\n        } else {\n          breakdown.sightseeing += activity.price;\n        }\n      });\n    });\n\n    return breakdown;\n  };\n\n  const getMealStats = () => {\n    const stats = { breakfast: 0, lunch: 0, dinner: 0, total: 0 };\n    dayPlan.forEach(day => {\n      if (day.meals.breakfast) stats.breakfast++;\n      if (day.meals.lunch) stats.lunch++;\n      if (day.meals.dinner) stats.dinner++;\n      stats.total++;\n    });\n    return stats;\n  };\n\n  const getCityDistribution = () => {\n    const distribution: { [key: string]: number } = {};\n    dayPlan.forEach(day => {\n      distribution[day.city] = (distribution[day.city] || 0) + 1;\n    });\n    return distribution;\n  };\n\n  const getEstimatedPaxPricing = () => {\n    const baseTotal = calculateTotalCost();\n    return [\n      { pax: 1, total: baseTotal, perPerson: baseTotal },\n      { pax: 2, total: baseTotal * 1.5, perPerson: (baseTotal * 1.5) / 2 },\n      { pax: 4, total: baseTotal * 2.2, perPerson: (baseTotal * 2.2) / 4 },\n      { pax: 6, total: baseTotal * 2.8, perPerson: (baseTotal * 2.8) / 6 }\n    ];\n  };\n\n  const totalCost = calculateTotalCost();\n  const activityBreakdown = calculateActivityBreakdown();\n  const mealStats = getMealStats();\n  const cityDistribution = getCityDistribution();\n  const paxPricing = getEstimatedPaxPricing();\n\n  const getCategoryColor = (category?: string) => {\n    switch (category) {\n      case 'Budget': return 'bg-green-100 text-green-800 border-green-200';\n      case 'Standard': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'Premium': return 'bg-purple-100 text-purple-800 border-purple-200';\n      case 'Luxury': return 'bg-amber-100 text-amber-800 border-amber-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Overview Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <BarChart3 className=\"h-5 w-5 text-blue-600\" />\n            Template Overview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n              <Calendar className=\"h-8 w-8 text-blue-600 mx-auto mb-2\" />\n              <div className=\"text-2xl font-bold text-blue-600\">{dayPlan.length}</div>\n              <div className=\"text-sm text-muted-foreground\">Days</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n              <DollarSign className=\"h-8 w-8 text-green-600 mx-auto mb-2\" />\n              <div className=\"text-2xl font-bold text-green-600\">${totalCost.toLocaleString()}</div>\n              <div className=\"text-sm text-muted-foreground\">Base Cost</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n              <MapPin className=\"h-8 w-8 text-purple-600 mx-auto mb-2\" />\n              <div className=\"text-2xl font-bold text-purple-600\">{Object.keys(cityDistribution).length}</div>\n              <div className=\"text-sm text-muted-foreground\">Cities</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n              <Activity className=\"h-8 w-8 text-orange-600 mx-auto mb-2\" />\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {dayPlan.reduce((sum, day) => sum + day.activities.length, 0)}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Activities</div>\n            </div>\n          </div>\n\n          <Separator className=\"my-6\" />\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Template Details */}\n            <div>\n              <h4 className=\"font-semibold mb-3\">Template Details</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Name:</span>\n                  <span className=\"font-medium\">{template.name || 'Untitled Template'}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Category:</span>\n                  <Badge className={getCategoryColor(template.category)}>\n                    {template.category || 'Standard'}\n                  </Badge>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Destination:</span>\n                  <span className=\"font-medium\">{template.destination?.country || 'Not specified'}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-muted-foreground\">Duration:</span>\n                  <span className=\"font-medium\">\n                    {template.duration?.days || dayPlan.length}D/{template.duration?.nights || Math.max(0, dayPlan.length - 1)}N\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* City Distribution */}\n            <div>\n              <h4 className=\"font-semibold mb-3\">City Distribution</h4>\n              <div className=\"space-y-2\">\n                {Object.entries(cityDistribution).map(([city, days]) => (\n                  <div key={city} className=\"flex items-center justify-between\">\n                    <span className=\"text-muted-foreground\">{city}:</span>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"h-2 bg-blue-200 rounded-full w-16 overflow-hidden\">\n                        <div \n                          className=\"h-full bg-blue-600 rounded-full\"\n                          style={{ width: `${(days / dayPlan.length) * 100}%` }}\n                        />\n                      </div>\n                      <span className=\"text-sm font-medium\">{days} days</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Cost Breakdown */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <PieChart className=\"h-5 w-5 text-green-600\" />\n            Cost Breakdown\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Service Categories */}\n            <div>\n              <h4 className=\"font-semibold mb-3\">By Service Category</h4>\n              <div className=\"space-y-3\">\n                {[\n                  { name: 'Hotels', amount: activityBreakdown.hotels, icon: Hotel, color: 'blue' },\n                  { name: 'Transport', amount: activityBreakdown.transport, icon: Car, color: 'green' },\n                  { name: 'Sightseeing', amount: activityBreakdown.sightseeing, icon: Camera, color: 'purple' },\n                  { name: 'Restaurants', amount: activityBreakdown.restaurants, icon: UtensilsCrossed, color: 'orange' }\n                ].map(({ name, amount, icon: Icon, color }) => (\n                  <div key={name} className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <Icon className={`h-4 w-4 text-${color}-600`} />\n                      <span>{name}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"text-right\">\n                        <div className=\"font-medium\">${amount.toLocaleString()}</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {totalCost > 0 ? ((amount / totalCost) * 100).toFixed(1) : 0}%\n                        </div>\n                      </div>\n                      <div className={`h-8 bg-${color}-200 rounded w-16 overflow-hidden`}>\n                        <div \n                          className={`h-full bg-${color}-600 rounded`}\n                          style={{ width: totalCost > 0 ? `${(amount / totalCost) * 100}%` : '0%' }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* PAX-based Pricing */}\n            <div>\n              <h4 className=\"font-semibold mb-3\">Estimated Pricing by Group Size</h4>\n              <div className=\"space-y-3\">\n                {paxPricing.map(({ pax, total, perPerson }) => (\n                  <div key={pax} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"h-4 w-4 text-gray-600\" />\n                      <span>{pax} {pax === 1 ? 'Person' : 'People'}</span>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-medium\">${total.toLocaleString()}</div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        ${perPerson.toLocaleString()}/person\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Meal Plan Summary */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <UtensilsCrossed className=\"h-5 w-5 text-orange-600\" />\n            Meal Plan Summary\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-3 gap-4\">\n            {[\n              { name: 'Breakfast', count: mealStats.breakfast, total: mealStats.total },\n              { name: 'Lunch', count: mealStats.lunch, total: mealStats.total },\n              { name: 'Dinner', count: mealStats.dinner, total: mealStats.total }\n            ].map(({ name, count, total }) => (\n              <div key={name} className=\"text-center p-4 border rounded-lg\">\n                <div className=\"text-2xl font-bold text-orange-600\">{count}</div>\n                <div className=\"text-sm text-muted-foreground\">{name}</div>\n                <div className=\"text-xs text-muted-foreground mt-1\">\n                  {total > 0 ? ((count / total) * 100).toFixed(0) : 0}% coverage\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Day-by-Day Overview */}\n      {dayPlan.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Clock className=\"h-5 w-5 text-blue-600\" />\n              Day-by-Day Overview\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {dayPlan.map((day) => (\n                <div key={day.id} className=\"p-4 border rounded-lg\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <Badge variant=\"outline\">Day {day.dayNumber}</Badge>\n                        <h5 className=\"font-medium\">{day.title}</h5>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          <MapPin className=\"h-3 w-3 mr-1\" />\n                          {day.city}\n                        </Badge>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mb-2\">{day.description}</p>\n                      <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                        <span>{day.activities.length} activities</span>\n                        <span>\n                          Meals: {[day.meals.breakfast && 'B', day.meals.lunch && 'L', day.meals.dinner && 'D']\n                            .filter(Boolean).join(', ') || 'None'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-bold text-green-600\">${day.totalCost.toLocaleString()}</div>\n                      <div className=\"text-xs text-muted-foreground\">Daily cost</div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default TemplateSummary;\n","import React, { useState, useEffect } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\nimport ProposalTemplateService from '@/services/proposalTemplateService';\nimport { ProposalDay } from '@/components/proposal/DayPlanningInterface';\nimport { Plus, Trash2, Calendar, MapPin, Save, X, Sparkles } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { useInventoryData } from '@/pages/queries/hooks/useInventoryData';\nimport SmartSuggestionsPanel from './SmartSuggestionsPanel';\nimport TemplateSummary from './TemplateSummary';\n\ninterface TemplateEditorProps {\n  template: EnhancedProposalTemplate | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: () => void;\n}\n\nconst TemplateEditor: React.FC<TemplateEditorProps> = ({ template, isOpen, onClose, onSave }) => {\n  const { toast } = useToast();\n  const { countries, cities } = useInventoryData();\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    country: '',\n    cities: [''],\n    days: 1,\n    nights: 0,\n    category: 'Standard' as 'Budget' | 'Standard' | 'Premium' | 'Luxury',\n    tags: [] as string[],\n    isActive: true\n  });\n  const [dayPlan, setDayPlan] = useState<ProposalDay[]>([]);\n  const [activeTab, setActiveTab] = useState('basic');\n  const [showSmartSuggestions, setShowSmartSuggestions] = useState(false);\n\n  // Get available cities for selected country\n  const getAvailableCities = () => {\n    if (!formData.country) return [];\n    \n    // Since Country type may not have cities property, filter from cities data\n    return cities.filter(city => \n      city.country.toLowerCase() === formData.country.toLowerCase()\n    ).map(city => city.name);\n  };\n\n  const availableCities = getAvailableCities();\n\n  useEffect(() => {\n    if (template) {\n      setFormData({\n        name: template.name,\n        description: template.description,\n        country: template.destination.country,\n        cities: template.destination.cities,\n        days: template.duration.days,\n        nights: template.duration.nights,\n        category: template.category,\n        tags: template.metadata.tags,\n        isActive: template.metadata.isActive\n      });\n      setDayPlan(template.dayPlan);\n    } else {\n      // Reset for new template\n      setFormData({\n        name: '',\n        description: '',\n        country: '',\n        cities: [''],\n        days: 1,\n        nights: 0,\n        category: 'Standard',\n        tags: [],\n        isActive: true\n      });\n      setDayPlan([]);\n    }\n  }, [template]);\n\n  // Auto-update days/nights when day plan changes\n  useEffect(() => {\n    if (dayPlan.length > 0) {\n      setFormData(prev => ({\n        ...prev,\n        days: dayPlan.length,\n        nights: Math.max(0, dayPlan.length - 1)\n      }));\n    }\n  }, [dayPlan.length]);\n\n  const handleSave = async () => {\n    try {\n      const templateService = ProposalTemplateService.getInstance();\n      \n      const templateData: Partial<EnhancedProposalTemplate> = {\n        id: template?.id,\n        name: formData.name,\n        description: formData.description,\n        destination: {\n          country: formData.country,\n          cities: formData.cities.filter(city => city.trim() !== '')\n        },\n        duration: {\n          days: formData.days,\n          nights: formData.nights\n        },\n        category: formData.category,\n        dayPlan: dayPlan,\n        pricingMatrix: template?.pricingMatrix || [{\n          paxCount: 2,\n          basePrice: dayPlan.reduce((sum, day) => sum + day.totalCost, 0),\n          markup: 0.15\n        }],\n        metadata: {\n          ...template?.metadata,\n          tags: formData.tags,\n          isActive: formData.isActive,\n          usageCount: template?.metadata?.usageCount || 0,\n          averageRating: template?.metadata?.averageRating || 4.0,\n          lastUsed: template?.metadata?.lastUsed || new Date().toISOString()\n        }\n      };\n\n      templateService.saveTemplate(templateData);\n      \n      toast({\n        title: \"Template Saved\",\n        description: `${formData.name} has been saved successfully`,\n      });\n      \n      onSave();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to save template\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const addDay = () => {\n    const newDay: ProposalDay = {\n      id: `day_${Date.now()}`,\n      dayNumber: dayPlan.length + 1,\n      date: '',\n      city: formData.cities[0] || '',\n      title: `Day ${dayPlan.length + 1}`,\n      description: '',\n      activities: [],\n      meals: { breakfast: false, lunch: false, dinner: false },\n      totalCost: 0\n    };\n    setDayPlan([...dayPlan, newDay]);\n  };\n\n  const removeDay = (dayId: string) => {\n    const newDayPlan = dayPlan.filter(day => day.id !== dayId);\n    // Renumber days\n    const renumberedPlan = newDayPlan.map((day, index) => ({\n      ...day,\n      dayNumber: index + 1,\n      title: day.title.startsWith('Day ') ? `Day ${index + 1}` : day.title\n    }));\n    setDayPlan(renumberedPlan);\n  };\n\n  const updateDay = (dayId: string, updates: Partial<ProposalDay>) => {\n    setDayPlan(dayPlan.map(day => \n      day.id === dayId ? { ...day, ...updates } : day\n    ));\n  };\n\n  const addCity = () => {\n    setFormData(prev => ({\n      ...prev,\n      cities: [...prev.cities, '']\n    }));\n  };\n\n  const updateCity = (index: number, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      cities: prev.cities.map((city, i) => i === index ? value : city)\n    }));\n  };\n\n  const removeCity = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      cities: prev.cities.filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleAddToDay = (dayId: string, item: any) => {\n    if (dayId === 'current' && dayPlan.length > 0) {\n      // Add to the last day if \"current\" is selected\n      const lastDay = dayPlan[dayPlan.length - 1];\n      const newActivity = {\n        id: `activity_${Date.now()}`,\n        name: item.name,\n        price: item.price,\n        duration: item.duration || '2 hours'\n      };\n      \n      updateDay(lastDay.id, {\n        activities: [...lastDay.activities, newActivity],\n        totalCost: lastDay.totalCost + item.price\n      });\n      \n      toast({\n        title: \"Activity Added\",\n        description: `${item.name} added to ${lastDay.title}`,\n      });\n    }\n  };\n\n  const handleUseDayTemplate = (template: ProposalDay) => {\n    const newDay = {\n      ...template,\n      id: `day_${Date.now()}`,\n      dayNumber: dayPlan.length + 1\n    };\n    setDayPlan([...dayPlan, newDay]);\n    \n    toast({\n      title: \"Day Template Applied\",\n      description: `${template.title} added to itinerary`,\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-7xl max-h-[95vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            {template ? 'Edit Template' : 'Create New Template'}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowSmartSuggestions(!showSmartSuggestions)}\n              className=\"ml-auto\"\n            >\n              <Sparkles className=\"h-4 w-4 mr-2\" />\n              {showSmartSuggestions ? 'Hide' : 'Show'} AI Suggestions\n            </Button>\n          </DialogTitle>\n          <DialogDescription>\n            {template ? 'Edit template details and content' : 'Create a new template for proposals and itineraries'}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex gap-6\">\n          {/* Main Editor */}\n          <div className=\"flex-1\">\n            <Tabs value={activeTab} onValueChange={setActiveTab}>\n              <TabsList className=\"grid w-full grid-cols-4\">\n                <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\n                <TabsTrigger value=\"itinerary\">Day Plan</TabsTrigger>\n                <TabsTrigger value=\"summary\">Summary</TabsTrigger>\n                <TabsTrigger value=\"settings\">Settings</TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"basic\" className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"name\">Template Name *</Label>\n                    <Input\n                      id=\"name\"\n                      value={formData.name}\n                      onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                      placeholder=\"Enter template name\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"category\">Category</Label>\n                    <Select value={formData.category} onValueChange={(value: any) => setFormData(prev => ({ ...prev, category: value }))}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Budget\">Budget</SelectItem>\n                        <SelectItem value=\"Standard\">Standard</SelectItem>\n                        <SelectItem value=\"Premium\">Premium</SelectItem>\n                        <SelectItem value=\"Luxury\">Luxury</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"description\">Description</Label>\n                  <Textarea\n                    id=\"description\"\n                    value={formData.description}\n                    onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                    placeholder=\"Describe this template...\"\n                    rows={3}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"country\">Country *</Label>\n                    <Select value={formData.country} onValueChange={(value) => setFormData(prev => ({ ...prev, country: value, cities: [''] }))}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select country\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {countries.map((country) => (\n                          <SelectItem key={country.code} value={country.name}>\n                            {country.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"days\">Days</Label>\n                    <Input\n                      id=\"days\"\n                      type=\"number\"\n                      min=\"1\"\n                      value={formData.days}\n                      onChange={(e) => setFormData(prev => ({ ...prev, days: parseInt(e.target.value) || 1 }))}\n                      readOnly={dayPlan.length > 0}\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"nights\">Nights</Label>\n                    <Input\n                      id=\"nights\"\n                      type=\"number\"\n                      min=\"0\"\n                      value={formData.nights}\n                      onChange={(e) => setFormData(prev => ({ ...prev, nights: parseInt(e.target.value) || 0 }))}\n                      readOnly={dayPlan.length > 0}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label>Cities</Label>\n                  {formData.cities.map((city, index) => (\n                    <div key={index} className=\"flex gap-2\">\n                      <Select\n                        value={city}\n                        onValueChange={(value) => updateCity(index, value)}\n                      >\n                        <SelectTrigger className=\"flex-1\">\n                          <SelectValue placeholder=\"Select city\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {availableCities.map((cityName) => (\n                            <SelectItem key={cityName} value={cityName}>\n                              {cityName}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      {formData.cities.length > 1 && (\n                        <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => removeCity(index)}>\n                          Remove\n                        </Button>\n                      )}\n                    </div>\n                  ))}\n                  <Button type=\"button\" variant=\"outline\" onClick={addCity} className=\"w-full\">\n                    Add City\n                  </Button>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"itinerary\" className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-semibold\">Day-by-Day Itinerary</h3>\n                  <Button onClick={addDay} size=\"sm\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Day\n                  </Button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  {dayPlan.map((day, index) => (\n                    <Card key={day.id}>\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-2\">\n                            <Calendar className=\"h-4 w-4 text-blue-600\" />\n                            <span className=\"font-medium\">Day {day.dayNumber}</span>\n                            <Badge variant=\"outline\">{day.city}</Badge>\n                          </div>\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            onClick={() => removeDay(day.id)}\n                            className=\"text-red-600\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label>Title</Label>\n                            <Input\n                              value={day.title}\n                              onChange={(e) => updateDay(day.id, { title: e.target.value })}\n                              placeholder=\"Day title\"\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label>City</Label>\n                            <Select value={day.city} onValueChange={(value) => updateDay(day.id, { city: value })}>\n                              <SelectTrigger>\n                                <SelectValue />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {formData.cities.filter(city => city.trim()).map((city) => (\n                                  <SelectItem key={city} value={city}>{city}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n                        <div className=\"mt-4\">\n                          <Label>Description</Label>\n                          <Textarea\n                            value={day.description}\n                            onChange={(e) => updateDay(day.id, { description: e.target.value })}\n                            placeholder=\"Describe the day's activities...\"\n                            rows={2}\n                          />\n                        </div>\n                        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium\">Activities: {day.activities.length}</span>\n                            <span className=\"text-sm font-medium\">Total Cost: ${day.totalCost}</span>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n\n                {dayPlan.length === 0 && (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Calendar className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No days added yet. Click \"Add Day\" to start building your itinerary.</p>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"summary\" className=\"space-y-4\">\n                <TemplateSummary template={formData} dayPlan={dayPlan} />\n              </TabsContent>\n\n              <TabsContent value=\"settings\" className=\"space-y-4\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label>Template Status</Label>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Active templates can be used in proposal creation\n                      </p>\n                    </div>\n                    <Select \n                      value={formData.isActive ? 'active' : 'inactive'} \n                      onValueChange={(value) => setFormData(prev => ({ ...prev, isActive: value === 'active' }))}\n                    >\n                      <SelectTrigger className=\"w-32\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"active\">Active</SelectItem>\n                        <SelectItem value=\"inactive\">Inactive</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label>Tags (comma-separated)</Label>\n                    <Input\n                      value={formData.tags.join(', ')}\n                      onChange={(e) => setFormData(prev => ({ \n                        ...prev, \n                        tags: e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag) \n                      }))}\n                      placeholder=\"beach, family, budget, adventure...\"\n                    />\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Smart Suggestions Panel */}\n          {showSmartSuggestions && formData.country && (\n            <div className=\"w-96\">\n              <SmartSuggestionsPanel\n                selectedCountry={formData.country}\n                selectedCities={formData.cities.filter(city => city.trim())}\n                templateCategory={formData.category}\n                onAddToDay={handleAddToDay}\n                onUseDayTemplate={handleUseDayTemplate}\n              />\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4 border-t\">\n          <Button variant=\"outline\" onClick={onClose}>\n            <X className=\"h-4 w-4 mr-2\" />\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={!formData.name || !formData.country}>\n            <Save className=\"h-4 w-4 mr-2\" />\n            {template ? 'Update Template' : 'Create Template'}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default TemplateEditor;\n","\nimport React from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Calendar, MapPin, DollarSign, Clock, Star, Users } from 'lucide-react';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\n\ninterface TemplatePreviewProps {\n  template: EnhancedProposalTemplate;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst TemplatePreview: React.FC<TemplatePreviewProps> = ({ template, isOpen, onClose }) => {\n  const totalCost = template.dayPlan.reduce((sum, day) => sum + day.totalCost, 0);\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{template.name}</DialogTitle>\n          <DialogDescription>\n            Preview of template details and day-by-day itinerary\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Template Overview */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Template Overview</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"flex items-center gap-2\">\n                  <MapPin className=\"h-4 w-4 text-blue-600\" />\n                  <span>{template.destination.country}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-4 w-4 text-green-600\" />\n                  <span>{template.duration.days}D/{template.duration.nights}N</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <DollarSign className=\"h-4 w-4 text-purple-600\" />\n                  <span>${totalCost.toLocaleString()}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Users className=\"h-4 w-4 text-orange-600\" />\n                  <span>{template.metadata.usageCount} uses</span>\n                </div>\n              </div>\n              \n              <div className=\"mt-4\">\n                <p className=\"text-muted-foreground\">{template.description}</p>\n              </div>\n              \n              <div className=\"flex items-center gap-2 mt-4\">\n                <Badge variant=\"outline\">{template.category}</Badge>\n                {template.metadata.tags.map((tag) => (\n                  <Badge key={tag} variant=\"secondary\">{tag}</Badge>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Day Plan */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Day-by-Day Itinerary</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {template.dayPlan.map((day) => (\n                  <div key={day.id} className=\"p-4 border rounded-lg\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div>\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <Badge>Day {day.dayNumber}</Badge>\n                          <h4 className=\"font-semibold\">{day.title}</h4>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground\">{day.description}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"font-semibold text-green-600\">${day.totalCost}</div>\n                        <div className=\"text-xs text-muted-foreground\">{day.city}</div>\n                      </div>\n                    </div>\n                    \n                    {day.activities.length > 0 && (\n                      <div className=\"space-y-2\">\n                        <h5 className=\"text-sm font-medium\">Activities:</h5>\n                        {day.activities.map((activity) => (\n                          <div key={activity.id} className=\"flex items-center justify-between text-sm bg-gray-50 p-2 rounded\">\n                            <span>{activity.name}</span>\n                            <div className=\"flex items-center gap-2\">\n                              <Clock className=\"h-3 w-3\" />\n                              <span>{activity.duration}</span>\n                              <span className=\"font-medium\">${activity.price}</span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default TemplatePreview;\n","\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Badge } from '@/components/ui/badge';\nimport { Filter, X } from 'lucide-react';\n\ninterface FilterOptions {\n  category?: string;\n  country?: string;\n  minDays?: number;\n  maxDays?: number;\n  status?: string;\n}\n\ninterface TemplateFiltersProps {\n  onFilterChange: (filters: FilterOptions) => void;\n}\n\nconst TemplateFilters: React.FC<TemplateFiltersProps> = ({ onFilterChange }) => {\n  const [filters, setFilters] = useState<FilterOptions>({});\n  const [isOpen, setIsOpen] = useState(false);\n\n  const updateFilter = (key: keyof FilterOptions, value: any) => {\n    // Convert \"all\" values to undefined for consistent handling\n    const processedValue = value === \"all\" ? undefined : value;\n    const newFilters = { ...filters, [key]: processedValue };\n    setFilters(newFilters);\n    onFilterChange(newFilters);\n  };\n\n  const clearFilters = () => {\n    setFilters({});\n    onFilterChange({});\n  };\n\n  const activeFilterCount = Object.values(filters).filter(v => v !== undefined && v !== '').length;\n\n  return (\n    <Popover open={isOpen} onOpenChange={setIsOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" className=\"gap-2\">\n          <Filter className=\"h-4 w-4\" />\n          Filters\n          {activeFilterCount > 0 && (\n            <Badge variant=\"secondary\" className=\"ml-1 h-5 w-5 p-0 text-xs\">\n              {activeFilterCount}\n            </Badge>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-4\" align=\"end\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"font-medium\">Filter Templates</h4>\n            {activeFilterCount > 0 && (\n              <Button variant=\"ghost\" size=\"sm\" onClick={clearFilters}>\n                <X className=\"h-4 w-4 mr-1\" />\n                Clear\n              </Button>\n            )}\n          </div>\n\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"text-sm font-medium\">Category</label>\n              <Select value={filters.category || 'all'} onValueChange={(value) => updateFilter('category', value)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"All categories\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All categories</SelectItem>\n                  <SelectItem value=\"Budget\">Budget</SelectItem>\n                  <SelectItem value=\"Standard\">Standard</SelectItem>\n                  <SelectItem value=\"Premium\">Premium</SelectItem>\n                  <SelectItem value=\"Luxury\">Luxury</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Status</label>\n              <Select value={filters.status || 'all'} onValueChange={(value) => updateFilter('status', value)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"All statuses\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All statuses</SelectItem>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"inactive\">Inactive</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium\">Duration (Days)</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <Input\n                  type=\"number\"\n                  placeholder=\"Min\"\n                  value={filters.minDays || ''}\n                  onChange={(e) => updateFilter('minDays', e.target.value ? parseInt(e.target.value) : undefined)}\n                />\n                <Input\n                  type=\"number\"\n                  placeholder=\"Max\"\n                  value={filters.maxDays || ''}\n                  onChange={(e) => updateFilter('maxDays', e.target.value ? parseInt(e.target.value) : undefined)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default TemplateFilters;\n","\nimport React, { useState } from 'react';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { \n  Plus, Search, Filter, Download, Upload, BookTemplate, \n  Calendar, MapPin, Users, DollarSign, Star, Trash2, \n  Edit, Copy, Eye, BarChart3, TrendingUp\n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\nimport ProposalTemplateService from '@/services/proposalTemplateService';\nimport TemplateEditor from './templates/components/TemplateEditor';\nimport TemplatePreview from './templates/components/TemplatePreview';\nimport TemplateFilters from './templates/components/TemplateFilters';\nimport { useTemplateData } from './templates/hooks/useTemplateData';\n\nconst Templates: React.FC = () => {\n  const { toast } = useToast();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeTab, setActiveTab] = useState('all');\n  const [showEditor, setShowEditor] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<EnhancedProposalTemplate | null>(null);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  \n  const {\n    templates,\n    loading,\n    stats,\n    refreshTemplates,\n    deleteTemplate,\n    duplicateTemplate,\n    toggleTemplateStatus\n  } = useTemplateData();\n\n  const filteredTemplates = templates.filter(template => {\n    const matchesSearch = template.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         template.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         template.destination.country.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    if (activeTab === 'all') return matchesSearch;\n    if (activeTab === 'active') return matchesSearch && template.metadata.isActive;\n    if (activeTab === 'inactive') return matchesSearch && !template.metadata.isActive;\n    if (activeTab === 'popular') return matchesSearch && template.metadata.usageCount > 5;\n    \n    return matchesSearch && template.category.toLowerCase() === activeTab;\n  });\n\n  const handleCreateNew = () => {\n    setSelectedTemplate(null);\n    setShowEditor(true);\n  };\n\n  const handleEdit = (template: EnhancedProposalTemplate) => {\n    setSelectedTemplate(template);\n    setShowEditor(true);\n  };\n\n  const handlePreview = (template: EnhancedProposalTemplate) => {\n    setSelectedTemplate(template);\n    setShowPreview(true);\n  };\n\n  const handleDuplicate = async (template: EnhancedProposalTemplate) => {\n    try {\n      await duplicateTemplate(template.id);\n      toast({\n        title: \"Template Duplicated\",\n        description: `${template.name} has been duplicated successfully`,\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to duplicate template\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDelete = async (template: EnhancedProposalTemplate) => {\n    if (window.confirm(`Are you sure you want to delete \"${template.name}\"?`)) {\n      try {\n        await deleteTemplate(template.id);\n        toast({\n          title: \"Template Deleted\",\n          description: `${template.name} has been deleted`,\n        });\n      } catch (error) {\n        toast({\n          title: \"Error\",\n          description: \"Failed to delete template\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  const handleToggleStatus = async (template: EnhancedProposalTemplate) => {\n    try {\n      await toggleTemplateStatus(template.id);\n      toast({\n        title: \"Status Updated\",\n        description: `${template.name} is now ${template.metadata.isActive ? 'inactive' : 'active'}`,\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update template status\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <PageLayout>\n      <div className=\"space-y-6 p-4 lg:p-6\">\n        {/* Header */}\n        <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n              Proposal Templates\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">\n              Manage and organize your proposal templates for efficient proposal creation\n            </p>\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" size=\"sm\">\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Import\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Download className=\"h-4 w-4 mr-2\" />\n              Export\n            </Button>\n            <Button onClick={handleCreateNew} className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Template\n            </Button>\n          </div>\n        </div>\n\n        {/* Statistics Cards */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Total Templates</p>\n                  <p className=\"text-2xl font-bold\">{stats.total}</p>\n                </div>\n                <BookTemplate className=\"h-8 w-8 text-blue-600\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Active</p>\n                  <p className=\"text-2xl font-bold text-green-600\">{stats.active}</p>\n                </div>\n                <TrendingUp className=\"h-8 w-8 text-green-600\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Most Used</p>\n                  <p className=\"text-2xl font-bold text-purple-600\">{stats.mostUsed}</p>\n                </div>\n                <Star className=\"h-8 w-8 text-purple-600\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Avg Rating</p>\n                  <p className=\"text-2xl font-bold text-orange-600\">{stats.avgRating.toFixed(1)}</p>\n                </div>\n                <BarChart3 className=\"h-8 w-8 text-orange-600\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Main Content */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <span>Template Library</span>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant={viewMode === 'grid' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('grid')}\n                >\n                  Grid\n                </Button>\n                <Button\n                  variant={viewMode === 'list' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('list')}\n                >\n                  List\n                </Button>\n              </div>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {/* Search and Filters */}\n            <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6\">\n              <div className=\"flex flex-1 items-center space-x-2\">\n                <Search className=\"h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search templates by name, description, or destination...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"max-w-sm\"\n                />\n              </div>\n              \n              <TemplateFilters onFilterChange={(filters) => console.log('Filters:', filters)} />\n            </div>\n\n            {/* Template Tabs */}\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"mb-6\">\n              <TabsList>\n                <TabsTrigger value=\"all\">All Templates</TabsTrigger>\n                <TabsTrigger value=\"active\">Active</TabsTrigger>\n                <TabsTrigger value=\"popular\">Popular</TabsTrigger>\n                <TabsTrigger value=\"budget\">Budget</TabsTrigger>\n                <TabsTrigger value=\"luxury\">Luxury</TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            {/* Template Grid/List */}\n            {loading ? (\n              <div className=\"flex justify-center items-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\n              </div>\n            ) : (\n              <div className={viewMode === 'grid' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' : 'space-y-4'}>\n                {filteredTemplates.map((template) => (\n                  <Card key={template.id} className=\"hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <h3 className=\"font-semibold text-lg\">{template.name}</h3>\n                          <p className=\"text-sm text-muted-foreground mt-1\">{template.description}</p>\n                        </div>\n                        <Badge variant={template.metadata.isActive ? 'default' : 'secondary'}>\n                          {template.metadata.isActive ? 'Active' : 'Inactive'}\n                        </Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center gap-4 text-sm\">\n                          <div className=\"flex items-center gap-1\">\n                            <MapPin className=\"h-4 w-4 text-blue-600\" />\n                            <span>{template.destination.country}</span>\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <Calendar className=\"h-4 w-4 text-green-600\" />\n                            <span>{template.duration.days}D/{template.duration.nights}N</span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"outline\">{template.category}</Badge>\n                            <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                              <Star className=\"h-3 w-3 fill-current text-yellow-500\" />\n                              <span>{template.metadata.averageRating.toFixed(1)}</span>\n                            </div>\n                          </div>\n                          <span className=\"text-sm text-muted-foreground\">\n                            Used {template.metadata.usageCount} times\n                          </span>\n                        </div>\n\n                        <div className=\"flex items-center gap-2 pt-2\">\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => handlePreview(template)}>\n                            <Eye className=\"h-3 w-3 mr-1\" />\n                            Preview\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => handleEdit(template)}>\n                            <Edit className=\"h-3 w-3 mr-1\" />\n                            Edit\n                          </Button>\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => handleDuplicate(template)}>\n                            <Copy className=\"h-3 w-3 mr-1\" />\n                            Duplicate\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\" \n                            onClick={() => handleDelete(template)}\n                            className=\"text-red-600 hover:text-red-700\"\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n\n            {filteredTemplates.length === 0 && !loading && (\n              <div className=\"text-center py-12\">\n                <BookTemplate className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">No templates found</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  Create your first template to get started\n                </p>\n                <Button onClick={handleCreateNew}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Template\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Template Editor Dialog */}\n        {showEditor && (\n          <TemplateEditor\n            template={selectedTemplate}\n            isOpen={showEditor}\n            onClose={() => {\n              setShowEditor(false);\n              setSelectedTemplate(null);\n            }}\n            onSave={() => {\n              setShowEditor(false);\n              setSelectedTemplate(null);\n              refreshTemplates();\n            }}\n          />\n        )}\n\n        {/* Template Preview Dialog */}\n        {showPreview && selectedTemplate && (\n          <TemplatePreview\n            template={selectedTemplate}\n            isOpen={showPreview}\n            onClose={() => {\n              setShowPreview(false);\n              setSelectedTemplate(null);\n            }}\n          />\n        )}\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default Templates;\n","\nimport { useState, useEffect } from 'react';\nimport { EnhancedProposalTemplate } from '@/services/proposalTemplateService';\nimport ProposalTemplateService from '@/services/proposalTemplateService';\n\ninterface TemplateStats {\n  total: number;\n  active: number;\n  inactive: number;\n  mostUsed: number;\n  avgRating: number;\n}\n\nexport const useTemplateData = () => {\n  const [templates, setTemplates] = useState<EnhancedProposalTemplate[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState<TemplateStats>({\n    total: 0,\n    active: 0,\n    inactive: 0,\n    mostUsed: 0,\n    avgRating: 0\n  });\n\n  const templateService = ProposalTemplateService.getInstance();\n\n  const loadTemplates = async () => {\n    try {\n      setLoading(true);\n      const allTemplates = templateService.getAllTemplates();\n      setTemplates(allTemplates);\n      \n      // Calculate stats\n      const activeTemplates = allTemplates.filter(t => t.metadata.isActive);\n      const inactiveTemplates = allTemplates.filter(t => !t.metadata.isActive);\n      const mostUsed = Math.max(...allTemplates.map(t => t.metadata.usageCount), 0);\n      const avgRating = allTemplates.length > 0 \n        ? allTemplates.reduce((sum, t) => sum + t.metadata.averageRating, 0) / allTemplates.length\n        : 0;\n\n      setStats({\n        total: allTemplates.length,\n        active: activeTemplates.length,\n        inactive: inactiveTemplates.length,\n        mostUsed,\n        avgRating\n      });\n    } catch (error) {\n      console.error('Error loading templates:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteTemplate = async (templateId: string) => {\n    // Implementation would depend on service capabilities\n    console.log('Delete template:', templateId);\n    await loadTemplates(); // Refresh after delete\n  };\n\n  const duplicateTemplate = async (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    if (template) {\n      const duplicated = {\n        ...template,\n        id: undefined,\n        name: `${template.name} (Copy)`,\n        metadata: {\n          ...template.metadata,\n          usageCount: 0,\n          createdFrom: template.id\n        }\n      };\n      \n      templateService.saveTemplate(duplicated);\n      await loadTemplates();\n    }\n  };\n\n  const toggleTemplateStatus = async (templateId: string) => {\n    const template = templates.find(t => t.id === templateId);\n    if (template) {\n      template.metadata.isActive = !template.metadata.isActive;\n      templateService.saveTemplate(template);\n      await loadTemplates();\n    }\n  };\n\n  const refreshTemplates = () => {\n    loadTemplates();\n  };\n\n  useEffect(() => {\n    loadTemplates();\n  }, []);\n\n  return {\n    templates,\n    loading,\n    stats,\n    refreshTemplates,\n    deleteTemplate,\n    duplicateTemplate,\n    toggleTemplateStatus\n  };\n};\n","\nimport React, { useEffect } from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Label } from '@/components/ui/label';\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { CountryOption, CityOption, Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantBasicInfoFormProps {\n  formData: Partial<Restaurant>;\n  handleInputChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  handleSelectChange: (name: string, value: string) => void;\n  handleCheckboxChange: (name: string, checked: boolean) => void;\n  countryOptions: CountryOption[];\n  filteredCityOptions: CityOption[];\n}\n\nconst RestaurantBasicInfoForm: React.FC<RestaurantBasicInfoFormProps> = ({\n  formData,\n  handleInputChange,\n  handleSelectChange,\n  handleCheckboxChange,\n  countryOptions,\n  filteredCityOptions,\n}) => {\n  // For debugging\n  useEffect(() => {\n    console.log(\"Current form country:\", formData.country);\n    console.log(\"Current form city:\", formData.city || \"No city selected\");\n    console.log(\"Available countries:\", countryOptions.length);\n    console.log(\"Available cities for selected country:\", filteredCityOptions.length);\n    \n    // Check if country exists in available options\n    if (formData.country) {\n      const countryExists = countryOptions.some(c => c.name === formData.country);\n      console.log(`Country \"${formData.country}\" exists in options: ${countryExists}`);\n    }\n    \n    // Check if city exists in available options for the selected country\n    if (formData.city && formData.country) {\n      const cityExists = filteredCityOptions.some(c => c.name === formData.city);\n      console.log(`City \"${formData.city}\" exists in filtered options: ${cityExists}`);\n      \n      if (!cityExists && filteredCityOptions.length > 0) {\n        console.warn(`City \"${formData.city}\" not found in filtered options despite being set in form data!`);\n      }\n      \n      // Log all available city options for the selected country\n      console.log(\"Available cities:\", filteredCityOptions.map(c => c.name).join(\", \"));\n    }\n  }, [formData.country, formData.city, countryOptions, filteredCityOptions]);\n\n  // This effect runs once when the component mounts to verify the city is available\n  useEffect(() => {\n    if (formData.city && formData.country && filteredCityOptions.length > 0) {\n      const cityExists = filteredCityOptions.some(c => c.name === formData.city);\n      if (!cityExists) {\n        console.warn(`On mount: City \"${formData.city}\" not found in filtered options!`);\n      } else {\n        console.log(`On mount: City \"${formData.city}\" verified in filtered options.`);\n      }\n    }\n  }, []);\n\n  return (\n    <div>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"name\" className=\"text-sm font-medium\">\n            Restaurant Name <span className=\"text-red-500\">*</span>\n          </Label>\n          <Input\n            id=\"name\"\n            name=\"name\"\n            placeholder=\"Enter restaurant name\"\n            value={formData.name || ''}\n            onChange={handleInputChange}\n            required\n          />\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"country\" className=\"text-sm font-medium\">\n            Country <span className=\"text-red-500\">*</span>\n          </Label>\n          <Select\n            value={formData.country || ''}\n            onValueChange={(value) => handleSelectChange('country', value)}\n          >\n            <SelectTrigger id=\"country\">\n              <SelectValue placeholder=\"Select Country\" />\n            </SelectTrigger>\n            <SelectContent className=\"bg-background z-50\">\n              {countryOptions.map((country) => (\n                <SelectItem key={country.id} value={country.name}>\n                  {country.name}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          {countryOptions.length === 0 && (\n            <p className=\"text-xs text-amber-500\">\n              No countries available. Please add countries in the Countries Management module.\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* External ID is now auto-generated and hidden; field removed from UI */}\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"city\" className=\"text-sm font-medium\">\n            City <span className=\"text-red-500\">*</span>\n          </Label>\n          <Select\n            key={`city-select-${formData.country || 'no-country'}`}\n            value={formData.city || ''}\n            onValueChange={(value) => handleSelectChange('city', value)}\n            disabled={!formData.country}\n          >\n            <SelectTrigger id=\"city\">\n              <SelectValue placeholder={\n                !formData.country \n                  ? \"Select Country First\" \n                  : filteredCityOptions.length === 0 \n                  ? \"No cities available for this country\" \n                  : \"Select City\"\n              } />\n            </SelectTrigger>\n            <SelectContent className=\"bg-background z-50\">\n              {filteredCityOptions.map((city) => (\n                <SelectItem key={city.id} value={city.name}>\n                  {city.name}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          {formData.city && (\n            <p className=\"text-xs text-blue-500\">\n              Selected city: {formData.city}\n            </p>\n          )}\n          {formData.country && filteredCityOptions.length === 0 && (\n            <p className=\"text-xs text-amber-500\">\n              No cities available for {formData.country}. Please add cities in the Cities Management module.\n            </p>\n          )}\n        </div>\n        \n        <div className=\"space-y-2\">\n          <Label htmlFor=\"area\" className=\"text-sm font-medium\">\n            Restaurant Area\n          </Label>\n          <Input\n            id=\"area\"\n            name=\"area\"\n            placeholder=\"e.g., Downtown, West Side\"\n            value={formData.area || ''}\n            onChange={handleInputChange}\n          />\n        </div>\n      </div>\n\n      <div className=\"mt-4 space-y-2\">\n        <Label htmlFor=\"location\" className=\"text-sm font-medium\">\n          Location\n        </Label>\n        <Input\n          id=\"location\"\n          name=\"location\"\n          placeholder=\"Auto-computed from City, Country\"\n          value={formData.location || ''}\n          onChange={handleInputChange}\n        />\n        <p className=\"text-xs text-gray-500\">Auto-fills from city/country; editable if needed.</p>\n      </div>\n      \n      <div className=\"mt-4 space-y-2\">\n        <Label htmlFor=\"address\" className=\"text-sm font-medium\">\n          Address <span className=\"text-red-500\">*</span>\n        </Label>\n        <Textarea\n          id=\"address\"\n          name=\"address\"\n          placeholder=\"Enter complete address\"\n          value={formData.address || ''}\n          onChange={handleInputChange}\n          className=\"resize-none\"\n          rows={3}\n          required\n        />\n      </div>\n      \n      <div className=\"mt-4 space-y-2\">\n        <Label htmlFor=\"description\" className=\"text-sm font-medium\">\n          Description\n        </Label>\n        <Textarea\n          id=\"description\"\n          name=\"description\"\n          placeholder=\"Describe the restaurant, ambiance, and specialties\"\n          value={formData.description || ''}\n          onChange={handleInputChange}\n          className=\"resize-none\"\n          rows={4}\n        />\n      </div>\n\n      {/* Contact & Ratings */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"contact\" className=\"text-sm font-medium\">\n            Contact\n          </Label>\n          <Input\n            id=\"contact\"\n            name=\"contact\"\n            placeholder=\"Phone, email, or website\"\n            value={formData.contact || ''}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"rating\" className=\"text-sm font-medium\">\n            Rating\n          </Label>\n          <Input\n            id=\"rating\"\n            name=\"rating\"\n            type=\"number\"\n            min={0}\n            max={5}\n            step={0.1}\n            placeholder=\"0 - 5\"\n            value={typeof formData.rating === 'number' ? formData.rating : ''}\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"reviewCount\" className=\"text-sm font-medium\">\n            Review Count\n          </Label>\n          <Input\n            id=\"reviewCount\"\n            name=\"reviewCount\"\n            type=\"number\"\n            min={0}\n            step={1}\n            placeholder=\"Number of reviews\"\n            value={typeof formData.reviewCount === 'number' ? formData.reviewCount : ''}\n            onChange={handleInputChange}\n          />\n        </div>\n      </div>\n      \n      <div className=\"mt-4 flex flex-col gap-4\">\n        <div className=\"flex items-center space-x-2\">\n          <Checkbox\n            id=\"isPreferred\"\n            checked={formData.isPreferred || false}\n            onCheckedChange={(checked) => handleCheckboxChange('isPreferred', checked === true)}\n          />\n          <Label htmlFor=\"isPreferred\" className=\"text-sm font-medium cursor-pointer\">\n            Mark as Preferred Restaurant\n          </Label>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <Checkbox\n            id=\"status\"\n            checked={formData.status === 'active'}\n            onCheckedChange={(checked) => \n              handleSelectChange('status', checked ? 'active' : 'inactive')\n            }\n          />\n          <Label htmlFor=\"status\" className=\"text-sm font-medium cursor-pointer\">\n            Active Status\n          </Label>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RestaurantBasicInfoForm;\n","\nimport React from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Upload, Utensils } from 'lucide-react';\nimport { Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantImageFormProps {\n  formData: Partial<Restaurant>;\n  handleInputChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n}\n\nconst RestaurantImageForm: React.FC<RestaurantImageFormProps> = ({\n  formData,\n  handleInputChange\n}) => {\n  return (\n    <div className=\"flex flex-col md:flex-row gap-4 items-start\">\n      <div className=\"w-full md:w-1/3 aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden\">\n        {formData.imageUrl ? (\n          <img \n            src={formData.imageUrl} \n            alt={formData.name || 'Restaurant preview'} \n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <div className=\"text-gray-400 flex flex-col items-center\">\n            <Utensils className=\"h-12 w-12 mb-2\" />\n            <span className=\"text-sm\">No image</span>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"w-full md:w-2/3 space-y-4\">\n        <div>\n          <Label htmlFor=\"imageUrl\" className=\"text-sm font-medium block mb-2\">\n            Image URL\n          </Label>\n          <Input\n            id=\"imageUrl\"\n            name=\"imageUrl\"\n            placeholder=\"Enter image URL\"\n            value={formData.imageUrl || ''}\n            onChange={handleInputChange}\n          />\n        </div>\n        \n        <div className=\"text-center\">\n          <span className=\"text-sm text-gray-500\">or</span>\n        </div>\n        \n        <Button \n          type=\"button\" \n          variant=\"outline\" \n          className=\"w-full flex items-center justify-center\"\n        >\n          <Upload className=\"mr-2 h-4 w-4\" />\n          Upload Image\n        </Button>\n        \n        <p className=\"text-xs text-gray-500\">\n          Recommended resolution: 1200800 pixels. Max file size: 5MB.\n          Supported formats: JPG, PNG, WebP.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default RestaurantImageForm;\n","\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Separator } from '@/components/ui/separator';\nimport { CuisineType, Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantCuisineFormProps {\n  formData: Partial<Restaurant>;\n  cuisineOptions: CuisineType[];\n  handleCuisineTypeChange: (cuisine: CuisineType, checked: boolean) => void;\n  handleCheckboxChange: (name: string, checked: boolean) => void;\n}\n\nconst RestaurantCuisineForm: React.FC<RestaurantCuisineFormProps> = ({\n  formData,\n  cuisineOptions,\n  handleCuisineTypeChange,\n  handleCheckboxChange,\n}) => {\n  return (\n    <div className=\"space-y-5\">\n      <div>\n        <Label className=\"text-sm font-medium block mb-3\">\n          Cuisine Types <span className=\"text-red-500\">*</span>\n        </Label>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n          {cuisineOptions.map((cuisine) => (\n            <div key={cuisine} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={`cuisine-${cuisine}`}\n                checked={(formData.cuisineTypes || []).includes(cuisine)}\n                onCheckedChange={(checked) => handleCuisineTypeChange(cuisine, checked === true)}\n              />\n              <Label \n                htmlFor={`cuisine-${cuisine}`}\n                className=\"text-sm cursor-pointer\"\n              >\n                {cuisine}\n              </Label>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <Separator className=\"my-4\" />\n      \n      <div>\n        <Label className=\"text-sm font-medium block mb-3\">\n          Meal Types\n        </Label>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"mealTypes.breakfast\"\n              checked={formData.mealTypes?.breakfast || false}\n              onCheckedChange={(checked) => handleCheckboxChange('mealTypes.breakfast', checked === true)}\n            />\n            <Label \n              htmlFor=\"mealTypes.breakfast\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Breakfast\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"mealTypes.lunch\"\n              checked={formData.mealTypes?.lunch || false}\n              onCheckedChange={(checked) => handleCheckboxChange('mealTypes.lunch', checked === true)}\n            />\n            <Label \n              htmlFor=\"mealTypes.lunch\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Lunch\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"mealTypes.dinner\"\n              checked={formData.mealTypes?.dinner || false}\n              onCheckedChange={(checked) => handleCheckboxChange('mealTypes.dinner', checked === true)}\n            />\n            <Label \n              htmlFor=\"mealTypes.dinner\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Dinner\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"mealTypes.snacks\"\n              checked={formData.mealTypes?.snacks || false}\n              onCheckedChange={(checked) => handleCheckboxChange('mealTypes.snacks', checked === true)}\n            />\n            <Label \n              htmlFor=\"mealTypes.snacks\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Snacks\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"mealTypes.beverages\"\n              checked={formData.mealTypes?.beverages || false}\n              onCheckedChange={(checked) => handleCheckboxChange('mealTypes.beverages', checked === true)}\n            />\n            <Label \n              htmlFor=\"mealTypes.beverages\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Beverages\n            </Label>\n          </div>\n        </div>\n      </div>\n      \n      <Separator className=\"my-4\" />\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n        <div>\n          <Label className=\"text-sm font-medium block mb-3\">\n            Vegetarian Options\n          </Label>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.pureVeg\"\n                checked={formData.dietaryOptions?.pureVeg || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.pureVeg', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.pureVeg\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Pure Vegetarian\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.veganFriendly\"\n                checked={formData.dietaryOptions?.veganFriendly || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.veganFriendly', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.veganFriendly\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Vegan-friendly Options\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.vegetarian\"\n                checked={formData.dietaryOptions?.vegetarian || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.vegetarian', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.vegetarian\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Vegetarian Options\n              </Label>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <Label className=\"text-sm font-medium block mb-3\">\n            Non-vegetarian Options\n          </Label>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.seafood\"\n                checked={formData.dietaryOptions?.seafood || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.seafood', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.seafood\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Seafood\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.poultry\"\n                checked={formData.dietaryOptions?.poultry || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.poultry', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.poultry\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Poultry\n              </Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"dietaryOptions.redMeat\"\n                checked={formData.dietaryOptions?.redMeat || false}\n                onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.redMeat', checked === true)}\n              />\n              <Label \n                htmlFor=\"dietaryOptions.redMeat\"\n                className=\"text-sm cursor-pointer\"\n              >\n                Red Meat\n              </Label>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"flex items-center space-x-2\">\n        <Checkbox\n          id=\"dietaryOptions.aLaCarte\"\n          checked={formData.dietaryOptions?.aLaCarte || false}\n          onCheckedChange={(checked) => handleCheckboxChange('dietaryOptions.aLaCarte', checked === true)}\n        />\n        <Label \n          htmlFor=\"dietaryOptions.aLaCarte\"\n          className=\"text-sm cursor-pointer\"\n        >\n           la carte Available\n        </Label>\n      </div>\n    </div>\n  );\n};\n\nexport default RestaurantCuisineForm;\n","\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantPricingFormProps {\n  formData: Partial<Restaurant>;\n  handleInputChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  handleSelectChange: (name: string, value: string) => void;\n}\n\nconst RestaurantPricingForm: React.FC<RestaurantPricingFormProps> = ({\n  formData,\n  handleInputChange,\n  handleSelectChange,\n}) => {\n  // Default currency symbol if not provided\n  const currencySymbol = formData.currencySymbol || '$';\n  \n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <Label htmlFor=\"averagePrice\" className=\"text-sm font-medium block mb-2\">\n          Average Price per Person <span className=\"ml-1 text-xs text-gray-500\">({currencySymbol})</span>\n        </Label>\n        <div className=\"relative\">\n          <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n            {currencySymbol}\n          </div>\n          <Input\n            id=\"averagePrice\"\n            name=\"averagePrice\"\n            type=\"number\"\n            placeholder=\"Enter amount\"\n            value={formData.averagePrice || ''}\n            onChange={handleInputChange}\n            className=\"pl-8\"\n          />\n        </div>\n        <p className=\"mt-1 text-xs text-gray-500\">\n          Optional: per-person average price in {formData.currencyCode || 'USD'}\n        </p>\n      </div>\n      <div>\n        <Label htmlFor=\"averageCost\" className=\"text-sm font-medium block mb-2\">\n          Average Cost for Two \n          <span className=\"ml-1 text-xs text-gray-500\">\n            ({currencySymbol})\n          </span>\n        </Label>\n        <div className=\"relative\">\n          <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n            {currencySymbol}\n          </div>\n          <Input\n            id=\"averageCost\"\n            name=\"averageCost\"\n            type=\"number\"\n            placeholder=\"Enter amount\"\n            value={formData.averageCost || ''}\n            onChange={handleInputChange}\n            className=\"pl-8\"\n          />\n        </div>\n        <p className=\"mt-1 text-xs text-gray-500\">\n          Enter the average cost for two people in {formData.currencyCode || 'USD'}\n        </p>\n      </div>\n      \n      <div>\n        <Label className=\"text-sm font-medium block mb-2\">\n          Price Category\n        </Label>\n        <RadioGroup \n          value={formData.priceCategory || '$'} \n          onValueChange={(value) => handleSelectChange('priceCategory', value)}\n          className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"$\" id=\"price-budget\" />\n            <Label htmlFor=\"price-budget\" className=\"cursor-pointer\">\n              Budget ({currencySymbol})\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"$$\" id=\"price-midrange\" />\n            <Label htmlFor=\"price-midrange\" className=\"cursor-pointer\">\n              Mid-range ({currencySymbol}{currencySymbol})\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"$$$\" id=\"price-finedining\" />\n            <Label htmlFor=\"price-finedining\" className=\"cursor-pointer\">\n              Fine Dining ({currencySymbol}{currencySymbol}{currencySymbol})\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"$$$$\" id=\"price-luxury\" />\n            <Label htmlFor=\"price-luxury\" className=\"cursor-pointer\">\n              Luxury ({currencySymbol}{currencySymbol}{currencySymbol}{currencySymbol})\n            </Label>\n          </div>\n        </RadioGroup>\n      </div>\n\n      <div>\n        <Label className=\"text-sm font-medium block mb-2\">\n          Price Range Label\n        </Label>\n        <RadioGroup \n          value={formData.priceRange || 'Mid-Range'} \n          onValueChange={(value) => handleSelectChange('priceRange', value)}\n          className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"Budget\" id=\"pricerange-budget\" />\n            <Label htmlFor=\"pricerange-budget\" className=\"cursor-pointer\">\n              Budget\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"Mid-Range\" id=\"pricerange-midrange\" />\n            <Label htmlFor=\"pricerange-midrange\" className=\"cursor-pointer\">\n              Mid-Range\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"Fine Dining\" id=\"pricerange-finedining\" />\n            <Label htmlFor=\"pricerange-finedining\" className=\"cursor-pointer\">\n              Fine Dining\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <RadioGroupItem value=\"Luxury\" id=\"pricerange-luxury\" />\n            <Label htmlFor=\"pricerange-luxury\" className=\"cursor-pointer\">\n              Luxury\n            </Label>\n          </div>\n        </RadioGroup>\n      </div>\n\n      <div className=\"pt-2 border-t border-gray-200 dark:border-gray-700\">\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n          Current currency: {formData.currencyCode || 'USD'} ({currencySymbol})\n        </p>\n        <p className=\"text-xs text-gray-500 mt-1\">\n          Currency is automatically set based on the selected country\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default RestaurantPricingForm;\n","\nimport React from 'react';\nimport { Input } from '@/components/ui/input';\n\ninterface TimePickerInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  className?: string;\n}\n\nconst TimePickerInput: React.FC<TimePickerInputProps> = ({ \n  value, \n  onChange,\n  className\n}) => {\n  return (\n    <Input\n      type=\"time\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      className={className}\n    />\n  );\n};\n\nexport default TimePickerInput;\n","\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport TimePickerInput from './TimePickerInput';\nimport { Restaurant } from '../types/restaurantTypes';\n\ninterface RestaurantFeaturesFormProps {\n  formData: Partial<Restaurant>;\n  handleCheckboxChange: (name: string, checked: boolean) => void;\n  handleTimeChange: (name: string, value: string) => void;\n}\n\nconst RestaurantFeaturesForm: React.FC<RestaurantFeaturesFormProps> = ({\n  formData,\n  handleCheckboxChange,\n  handleTimeChange,\n}) => {\n  return (\n    <>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-5\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"openingTime\" className=\"text-sm font-medium block\">\n            Opening Time\n          </Label>\n          <TimePickerInput\n            value={formData.openingTime || '09:00'}\n            onChange={(value) => handleTimeChange('openingTime', value)}\n          />\n        </div>\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"closingTime\" className=\"text-sm font-medium block\">\n            Closing Time\n          </Label>\n          <TimePickerInput\n            value={formData.closingTime || '22:00'}\n            onChange={(value) => handleTimeChange('closingTime', value)}\n          />\n        </div>\n      </div>\n      \n      <div>\n        <Label className=\"text-sm font-medium block mb-3\">\n          Special Features\n        </Label>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.outdoorSeating\"\n              checked={formData.features?.outdoorSeating || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.outdoorSeating', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.outdoorSeating\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Outdoor Seating\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.parking\"\n              checked={formData.features?.parking || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.parking', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.parking\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Parking Available\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.wifi\"\n              checked={formData.features?.wifi || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.wifi', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.wifi\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Wi-Fi\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.liveMusic\"\n              checked={formData.features?.liveMusic || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.liveMusic', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.liveMusic\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Live Music\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.privateRooms\"\n              checked={formData.features?.privateRooms || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.privateRooms', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.privateRooms\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Private Dining\n            </Label>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"features.cardAccepted\"\n              checked={formData.features?.cardAccepted || false}\n              onCheckedChange={(checked) => handleCheckboxChange('features.cardAccepted', checked === true)}\n            />\n            <Label \n              htmlFor=\"features.cardAccepted\"\n              className=\"text-sm cursor-pointer\"\n            >\n              Card Accepted\n            </Label>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RestaurantFeaturesForm;\n","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft } from 'lucide-react';\nimport { \n  Card, \n  CardContent, \n  CardHeader, \n  CardTitle, \n  CardDescription,\n} from '@/components/ui/card';\nimport { useIsMobile } from '@/hooks/use-mobile';\nimport useRestaurantForm from './hooks/useRestaurantForm';\nimport RestaurantBasicInfoForm from './components/RestaurantBasicInfoForm';\nimport RestaurantImageForm from './components/RestaurantImageForm';\nimport RestaurantCuisineForm from './components/RestaurantCuisineForm';\nimport RestaurantPricingForm from './components/RestaurantPricingForm';\nimport RestaurantFeaturesForm from './components/RestaurantFeaturesForm';\n\nconst AddEditRestaurant: React.FC = () => {\n  const navigate = useNavigate();\n  const isMobile = useIsMobile();\n  \n  const {\n    formData,\n    isEditMode,\n    countryOptions,\n    filteredCityOptions,\n    cuisineOptions,\n    handleInputChange,\n    handleSelectChange,\n    handleCheckboxChange,\n    handleCuisineTypeChange,\n    handleTimeChange,\n    handleSubmit\n  } = useRestaurantForm();\n\n  return (\n    <PageLayout>\n      <div className=\"p-4 md:p-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button \n            variant=\"ghost\" \n            size=\"icon\" \n            className=\"mr-2\"\n            onClick={() => navigate('/inventory/restaurants')}\n          >\n            <ArrowLeft className=\"h-5 w-5\" />\n          </Button>\n          <div>\n            <h1 className=\"text-xl md:text-2xl font-bold text-gray-900 dark:text-white\">\n              {isEditMode ? 'Edit Restaurant' : 'Add Restaurant'}\n            </h1>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              {isEditMode ? 'Update restaurant details' : 'Add a new restaurant to the inventory'}\n            </p>\n          </div>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Basic Details Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Basic Details</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <RestaurantBasicInfoForm\n                formData={formData}\n                handleInputChange={handleInputChange}\n                handleSelectChange={handleSelectChange}\n                handleCheckboxChange={handleCheckboxChange}\n                countryOptions={countryOptions}\n                filteredCityOptions={filteredCityOptions}\n              />\n            </CardContent>\n          </Card>\n          \n          {/* Image Upload Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Restaurant Image</CardTitle>\n              <CardDescription>Upload high-quality images of the restaurant</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <RestaurantImageForm \n                formData={formData}\n                handleInputChange={handleInputChange}\n              />\n            </CardContent>\n          </Card>\n\n          {/* Menu Information Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Menu Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"pt-0\">\n              <RestaurantCuisineForm \n                formData={formData}\n                cuisineOptions={cuisineOptions}\n                handleCuisineTypeChange={handleCuisineTypeChange}\n                handleCheckboxChange={handleCheckboxChange}\n              />\n            </CardContent>\n          </Card>\n\n          {/* Pricing Information Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Pricing Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"pt-0\">\n              <RestaurantPricingForm\n                formData={formData}\n                handleInputChange={handleInputChange}\n                handleSelectChange={handleSelectChange}\n              />\n            </CardContent>\n          </Card>\n\n          {/* Additional Information Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Additional Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"pt-0\">\n              <RestaurantFeaturesForm\n                formData={formData}\n                handleCheckboxChange={handleCheckboxChange}\n                handleTimeChange={handleTimeChange}\n              />\n            </CardContent>\n          </Card>\n\n          {/* Form Actions */}\n          <div className=\"flex flex-col sm:flex-row gap-3 justify-end mb-6\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => navigate('/inventory/restaurants')}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" className=\"bg-brand-blue hover:bg-brand-blue/90\">\n              {isEditMode ? 'Update Restaurant' : 'Add Restaurant'}\n            </Button>\n          </div>\n        </form>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddEditRestaurant;\n","\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useParams, useLocation } from 'react-router-dom';\nimport { useRestaurantsData } from './useRestaurantsData';\nimport { useFormState } from './form/useFormState';\nimport { useLocationOptions } from './form/useLocationOptions';\nimport { useCuisineOptions } from './form/useCuisineOptions';\nimport { useFormHandlers } from './form/useFormHandlers';\nimport { useFormValidation } from './form/useFormValidation';\nimport { useFormSubmit } from './form/useFormSubmit';\nimport { useEditModeEffect } from './form/useEditModeEffect';\nimport { useCurrencyUpdate } from './form/useCurrencyUpdate';\nimport { useCountryCityEffect } from './form/useCountryCityEffect';\n\nexport const useRestaurantForm = () => {\n  const { id } = useParams<{ id: string }>();\n  const { restaurants, saveRestaurant } = useRestaurantsData();\n  \n  const isEditMode = !!id;\n  \n  // Get form state\n  const { formData, setFormData } = useFormState();\n  \n  // Get location options\n  const { \n    countryOptions, \n    cityOptions, \n    filteredCityOptions, \n    setFilteredCityOptions,\n    filterCitiesByCountry\n  } = useLocationOptions();\n  \n  // Get cuisine options\n  const { cuisineOptions } = useCuisineOptions();\n  \n  // Form handlers\n  const { \n    handleInputChange, \n    handleSelectChange, \n    handleCheckboxChange,\n    handleCuisineTypeChange,\n    handleTimeChange \n  } = useFormHandlers({ setFormData });\n  \n  // Form validation\n  const { validateForm } = useFormValidation({ formData });\n  \n  // Form submission\n  const { handleSubmit } = useFormSubmit({ \n    formData, \n    validateForm, \n    saveRestaurant \n  });\n  \n  // Handle edit mode\n  useEditModeEffect({\n    isEditMode,\n    restaurants,\n    countryOptions,\n    cityOptions,\n    setFilteredCityOptions,\n    setFormData\n  });\n  \n  // Update currency when country changes\n  useCurrencyUpdate({ formData, countryOptions, setFormData });\n  \n  // Filter cities when country changes\n  useCountryCityEffect({ \n    formData, \n    cityOptions,\n    filterCitiesByCountry \n  });\n\n  return {\n    formData,\n    isEditMode,\n    countryOptions,\n    filteredCityOptions,\n    cuisineOptions,\n    handleInputChange,\n    handleSelectChange,\n    handleCheckboxChange,\n    handleCuisineTypeChange,\n    handleTimeChange,\n    handleSubmit,\n    validateForm\n  };\n};\n\nexport default useRestaurantForm;\n","\nimport { useState } from 'react';\nimport { Restaurant } from '../../types/restaurantTypes';\n\nexport const useFormState = () => {\n  // Initialize form with a default empty restaurant\n  const [formData, setFormData] = useState<Partial<Restaurant>>({\n    name: '',\n    address: '',\n    city: '',\n    country: '',\n    location: '',\n    area: '',\n    cuisineTypes: [],\n    description: '',\n    priceRange: 'Mid-Range',\n    priceCategory: '$',\n    averageCost: 0,\n    averagePrice: 0,\n    openingHours: '',\n    openingTime: '09:00',\n    closingTime: '22:00',\n    vegOptions: false,\n    rating: 0,\n    reviewCount: 0,\n    imageUrl: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2070',\n    features: {\n      outdoorSeating: false,\n      privateRooms: false,\n      wifi: false,\n      parking: false,\n      liveMusic: false,\n      cardAccepted: false,\n    },\n    mealTypes: {\n      breakfast: false,\n      lunch: false,\n      dinner: false,\n      snacks: false,\n      beverages: false,\n    },\n    dietaryOptions: {\n      pureVeg: false,\n      veganFriendly: false,\n      vegetarian: false,\n      seafood: false,\n      poultry: false,\n      redMeat: false,\n      aLaCarte: false,\n    },\n    currencyCode: 'USD',\n    currencySymbol: '$',\n    status: 'active',\n    isPreferred: false,\n  });\n  \n  return {\n    formData,\n    setFormData\n  };\n};\n","\nimport { useState, useEffect } from 'react';\nimport { CountryOption, CityOption } from '../../types/restaurantTypes';\nimport { CitiesService } from '@/services/citiesService';\nimport { CountriesService } from '@/services/countriesService';\n\n\nexport const useLocationOptions = () => {\n  // Countries and cities options\n  const [countryOptions, setCountryOptions] = useState<CountryOption[]>([]);\n  const [cityOptions, setCityOptions] = useState<CityOption[]>([]);\n  const [filteredCityOptions, setFilteredCityOptions] = useState<CityOption[]>([]);\n  \n  // Initialize country and city options\n  useEffect(() => {\n    const loadLocationData = async () => {\n      try {\n        console.log('Initializing country and city options');\n        \n        // Get active countries from CitiesService\n        const countriesResponse = await CitiesService.getActiveCountries();\n        if (countriesResponse.success && countriesResponse.data) {\n          const updatedCountries = countriesResponse.data.map(country => ({\n            id: country.id,\n            name: country.name,\n            code: country.code,\n            currency: country.currency || '',\n            currencySymbol: country.currency_symbol || ''\n          }));\n          \n          console.log('Available countries:', updatedCountries.length);\n          setCountryOptions(updatedCountries);\n        }\n        \n        // Get active cities from CitiesService\n        const citiesResponse = await CitiesService.getActiveCities();\n        if (citiesResponse.success && citiesResponse.data) {\n          const allCities = citiesResponse.data.map(city => ({\n            id: city.id,\n            name: city.name,\n            country: city.country\n          }));\n          \n          console.log('Available cities:', allCities.length);\n          setCityOptions(allCities);\n        }\n      } catch (error) {\n        console.error('Error loading location data:', error);\n      }\n    };\n\n    loadLocationData();\n  }, []);\n\n  const filterCitiesByCountry = (country: string) => {\n    if (country) {\n      console.log('Filtering cities for country:', country);\n      const filtered = cityOptions.filter(city => city.country === country);\n      console.log('Filtered cities:', filtered.length, filtered.map(c => c.name).join(', '));\n      setFilteredCityOptions(filtered);\n    } else {\n      setFilteredCityOptions([]);\n    }\n  };\n\n  return {\n    countryOptions,\n    cityOptions,\n    filteredCityOptions,\n    setFilteredCityOptions,\n    filterCitiesByCountry\n  };\n};\n","\nimport { CuisineType } from '../../types/restaurantTypes';\n\nexport const useCuisineOptions = () => {\n  // Cuisine types options\n  const cuisineOptions: CuisineType[] = [\n    'Thai', 'Indian', 'Chinese', 'Japanese', 'Italian', 'French', \n    'Mexican', 'Mediterranean', 'American', 'Seafood', 'Steakhouse', \n    'Vegetarian', 'Vegan', 'Fusion', 'Street Food', 'Fine Dining', \n    'Casual Dining', 'Local', 'Pakistani', 'Middle Eastern'\n  ];\n\n  return { cuisineOptions };\n};\n","\nimport { useState, useEffect } from 'react';\nimport { CuisineType, Restaurant } from '../../types/restaurantTypes';\n\nexport interface FormHandlersProps {\n  setFormData: React.Dispatch<React.SetStateAction<Partial<Restaurant>>>;\n}\n\nexport const useFormHandlers = ({ setFormData }: FormHandlersProps) => {\n  // Track if we're in edit mode with a city already selected\n  const [isEditingWithCity, setIsEditingWithCity] = useState<boolean>(false);\n  const [previousCountry, setPreviousCountry] = useState<string | null>(null);\n\n  // Handle form input changes\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSelectChange = (name: string, value: string) => {\n    console.log(`Select changed: ${name} = ${value}`);\n    \n    if (name === 'country') {\n      // When country changes, check if we should preserve city\n      setFormData(prev => {\n        // Store previous country for comparison\n        setPreviousCountry(prev.country || null);\n        \n        // When editing a restaurant and city already exists, mark that we're editing with a city\n        if (prev.city && !isEditingWithCity) {\n          console.log('Detected editing with existing city:', prev.city);\n          setIsEditingWithCity(true);\n        }\n        \n        // If country is changing and we're not in edit mode with city, reset city\n        if (prev.country && prev.country !== value && !isEditingWithCity) {\n          console.log('Country changed, resetting city selection');\n          const next = { ...prev, [name]: value, city: '' };\n          const computedLocation = [next.city || '', value || ''].filter(Boolean).join(', ');\n          return { ...next, location: computedLocation };\n        }\n        \n        // Return updated form data with new country\n        const next = { ...prev, [name]: value };\n        const computedLocation = [next.city || '', value || ''].filter(Boolean).join(', ');\n        return { ...next, location: computedLocation };\n      });\n    } else if (name === 'city') {\n      // For city changes, reset the flag if clearing the city\n      if (value === '') {\n        setIsEditingWithCity(false);\n      }\n      setFormData(prev => {\n        const next = { ...prev, [name]: value };\n        const computedLocation = [value || '', next.country || ''].filter(Boolean).join(', ');\n        return { ...next, location: computedLocation };\n      });\n    } else {\n      // For all other fields, just update normally\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n  };\n\n  // Handle checkbox changes including nested objects\n  const handleCheckboxChange = (name: string, checked: boolean) => {\n    const nameParts = name.split('.');\n    \n    if (nameParts.length === 1) {\n      setFormData(prev => ({ ...prev, [name]: checked }));\n    } else {\n      const [category, field] = nameParts;\n      setFormData(prev => {\n        if (!prev) return {};\n        \n        // Check if the category exists in prev and is an object\n        const categoryData = prev[category as keyof typeof prev];\n        const updatedCategory = typeof categoryData === 'object' && categoryData !== null\n          ? { ...categoryData as object, [field]: checked }\n          : { [field]: checked };\n        \n        return {\n          ...prev,\n          [category]: updatedCategory\n        };\n      });\n    }\n  };\n\n  const handleCuisineTypeChange = (cuisine: CuisineType, checked: boolean) => {\n    setFormData(prev => {\n      const currentCuisines = prev.cuisineTypes || [];\n      if (checked) {\n        return { ...prev, cuisineTypes: [...currentCuisines, cuisine] };\n      } else {\n        return { ...prev, cuisineTypes: currentCuisines.filter(c => c !== cuisine) };\n      }\n    });\n  };\n\n  const handleTimeChange = (name: string, value: string) => {\n    setFormData(prev => {\n      const next = { ...prev, [name]: value } as Partial<Restaurant>;\n      const opening = name === 'openingTime' ? value : next.openingTime || '09:00';\n      const closing = name === 'closingTime' ? value : next.closingTime || '22:00';\n      const openingHours = `${opening} - ${closing}`;\n      return { ...next, openingHours };\n    });\n  };\n  \n  // Reset edit mode when component mounts or when form data changes drastically\n  useEffect(() => {\n    return () => {\n      // Clean up on unmount\n      setIsEditingWithCity(false);\n      setPreviousCountry(null);\n    };\n  }, []);\n\n  return {\n    handleInputChange,\n    handleSelectChange,\n    handleCheckboxChange,\n    handleCuisineTypeChange,\n    handleTimeChange,\n    isEditingWithCity\n  };\n};\n","\nimport { useToast } from '@/hooks/use-toast';\nimport { Restaurant } from '../../types/restaurantTypes';\n\nexport interface FormValidationProps {\n  formData: Partial<Restaurant>;\n}\n\nexport const useFormValidation = ({ formData }: FormValidationProps) => {\n  const { toast } = useToast();\n\n  // Form validation\n  const validateForm = (): boolean => {\n    if (!formData.name) {\n      toast({ title: \"Error\", description: \"Restaurant name is required\", variant: \"destructive\" });\n      return false;\n    }\n    if (!formData.country) {\n      toast({ title: \"Error\", description: \"Country is required\", variant: \"destructive\" });\n      return false;\n    }\n    if (!formData.city) {\n      toast({ title: \"Error\", description: \"City is required\", variant: \"destructive\" });\n      return false;\n    }\n    if (!formData.address) {\n      toast({ title: \"Error\", description: \"Address is required\", variant: \"destructive\" });\n      return false;\n    }\n    if (!formData.cuisineTypes || formData.cuisineTypes.length === 0) {\n      toast({ title: \"Error\", description: \"At least one cuisine type is required\", variant: \"destructive\" });\n      return false;\n    }\n    return true;\n  };\n\n  return { validateForm };\n};\n","\nimport { useNavigate } from 'react-router-dom';\nimport { useToast } from '@/hooks/use-toast';\nimport { Restaurant } from '../../types/restaurantTypes';\n\ninterface FormSubmitProps {\n  formData: Partial<Restaurant>;\n  validateForm: () => boolean;\n  saveRestaurant: (data: Partial<Restaurant>) => Promise<Restaurant>;\n}\n\nexport const useFormSubmit = ({ formData, validateForm, saveRestaurant }: FormSubmitProps) => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) return;\n    \n    try {\n      console.log('Submitting restaurant data:', formData);\n      \n      // Ensure formData has correct types before saving\n      const restaurantData: Partial<Restaurant> = {\n        ...formData,\n        // If id exists, ensure it's a string\n        ...(formData.id ? { id: formData.id.toString() } : {})\n      };\n      \n      // Use the saveRestaurant function from useRestaurantsData hook\n      const savedRestaurant = await saveRestaurant(restaurantData);\n      \n      if (savedRestaurant) {\n        // Toast notification is handled by saveRestaurant function\n        navigate('/inventory/restaurants');\n      }\n    } catch (error) {\n      console.error(\"Error saving restaurant:\", error);\n      toast({\n        title: \"Error\",\n        description: \"An error occurred while saving. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  return { handleSubmit };\n};\n","\nimport { useEffect } from 'react';\nimport { useNavigate, useParams, useLocation } from 'react-router-dom';\nimport { useToast } from '@/hooks/use-toast';\nimport { Restaurant } from '../../types/restaurantTypes';\n\nexport interface EditModeEffectProps {\n  isEditMode: boolean;\n  restaurants: Restaurant[];\n  countryOptions: any[];\n  cityOptions: any[];\n  setFilteredCityOptions: (options: any[]) => void;\n  setFormData: (data: Partial<Restaurant>) => void;\n}\n\nexport const useEditModeEffect = ({\n  isEditMode,\n  restaurants,\n  countryOptions,\n  cityOptions,\n  setFilteredCityOptions,\n  setFormData\n}: EditModeEffectProps) => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { id } = useParams<{ id: string }>();\n  const { toast } = useToast();\n\n  // Load the restaurant data if in edit mode - after country and city options are loaded\n  useEffect(() => {\n    if (isEditMode && countryOptions.length > 0 && cityOptions.length > 0) {\n      console.log('Editing mode activated, restaurant ID:', id);\n      \n      // Try to get restaurant from location state first\n      let restaurantToEdit = location.state?.restaurant;\n      \n      // If not in location state, try to find it in restaurants array\n      if (!restaurantToEdit) {\n        console.log('Restaurant not found in location state, searching in restaurants array');\n        const foundRestaurant = restaurants.find(r => r.id === id);\n        if (foundRestaurant) {\n          restaurantToEdit = foundRestaurant;\n        }\n      }\n      \n      if (restaurantToEdit) {\n        console.log('Restaurant found for editing:', restaurantToEdit);\n        console.log('Restaurant city to load:', restaurantToEdit.city);\n        \n        // First, pre-filter cities for the selected country to ensure they're available\n        // when the form data is set\n        if (restaurantToEdit.country) {\n          console.log('Pre-filtering cities for country:', restaurantToEdit.country);\n          const filtered = cityOptions.filter(city => city.country === restaurantToEdit.country);\n          console.log('Filtered cities for edit mode:', filtered.length, filtered.map(c => c.name).join(', '));\n          \n          // First set filtered cities, so they're ready when form data is set\n          setFilteredCityOptions(filtered);\n          \n          // Then, set form data with the full restaurant object in a slight delay\n          // This ensures the city dropdown has options loaded before trying to select a value\n          setTimeout(() => {\n            console.log('Setting form data with city:', restaurantToEdit.city);\n            setFormData({...restaurantToEdit});\n          }, 0);\n        } else {\n          // If no country, just set the form data directly\n          setFormData(restaurantToEdit);\n        }\n      } else {\n        // If restaurant not found, show error and redirect\n        console.error('Restaurant not found for ID:', id);\n        toast({\n          title: \"Error\",\n          description: \"Restaurant not found\",\n          variant: \"destructive\"\n        });\n        navigate('/inventory/restaurants');\n      }\n    }\n  }, [isEditMode, id, location.state, restaurants, navigate, toast, countryOptions, cityOptions, setFormData, setFilteredCityOptions]);\n};\n","\nimport { useEffect } from 'react';\nimport { CountryOption, Restaurant } from '../../types/restaurantTypes';\nimport { CountryCurrencyService } from '@/services/countryCurrencyService';\n\nexport interface CurrencyUpdateProps {\n  formData: Partial<Restaurant>;\n  countryOptions: CountryOption[];\n  setFormData: React.Dispatch<React.SetStateAction<Partial<Restaurant>>>;\n}\n\nexport const useCurrencyUpdate = ({ formData, countryOptions, setFormData }: CurrencyUpdateProps) => {\n  // Set currency based on selected country\n  useEffect(() => {\n    if (formData.country) {\n      console.log('Restaurant: Updating currency for country:', formData.country);\n      \n      // First try to find in countryOptions for backward compatibility\n      const selectedCountry = countryOptions.find(c => c.name === formData.country);\n      if (selectedCountry) {\n        setFormData(prev => ({\n          ...prev,\n          currencyCode: selectedCountry.currency,\n          currencySymbol: selectedCountry.currencySymbol\n        }));\n        console.log(`Restaurant: Updated currency from options for ${selectedCountry.name}: ${selectedCountry.currencySymbol} (${selectedCountry.currency})`);\n        return;\n      }\n\n      // Fallback to centralized currency service\n      const currency = CountryCurrencyService.getCurrencyByCountryName(formData.country);\n      setFormData(prev => ({\n        ...prev,\n        currencyCode: currency.code,\n        currencySymbol: currency.symbol\n      }));\n      console.log(`Restaurant: Updated currency from service for ${formData.country}: ${currency.symbol} (${currency.code})`);\n    }\n  }, [formData.country, countryOptions, setFormData]);\n};\n","\nimport { useEffect, useState } from 'react';\nimport { Restaurant } from '../../types/restaurantTypes';\n\nexport interface CountryCityEffectProps {\n  formData: Partial<Restaurant>;\n  cityOptions: any[];\n  filterCitiesByCountry: (country: string) => void;\n}\n\nexport const useCountryCityEffect = ({\n  formData,\n  cityOptions,\n  filterCitiesByCountry\n}: CountryCityEffectProps) => {\n  const [previousCountry, setPreviousCountry] = useState<string | undefined>(undefined);\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  \n  // Filter cities when country changes\n  useEffect(() => {\n    console.log('Country changed to:', formData.country);\n    console.log('Current city value:', formData.city);\n    \n    // Skip first render to avoid unnecessary city resets\n    if (isFirstRender) {\n      setIsFirstRender(false);\n      if (formData.country) {\n        setPreviousCountry(formData.country);\n        filterCitiesByCountry(formData.country);\n      }\n      return;\n    }\n    \n    if (formData.country) {\n      // Check if country has actually changed\n      if (previousCountry !== formData.country) {\n        console.log('Filtering cities for country:', formData.country);\n        filterCitiesByCountry(formData.country);\n        setPreviousCountry(formData.country);\n        \n        // Reset city selection if country changes and city isn't in the new country\n        if (formData.city && previousCountry) {\n          const cityBelongsToNewCountry = cityOptions.some(\n            city => city.name === formData.city && city.country === formData.country\n          );\n          \n          if (!cityBelongsToNewCountry) {\n            console.log('City reset because it does not belong to the new country');\n          }\n        }\n      }\n    }\n  }, [formData.country, filterCitiesByCountry, previousCountry, formData.city, cityOptions, isFirstRender]);\n  \n  // Log when city is set for debugging purposes\n  useEffect(() => {\n    if (formData.city) {\n      console.log('City set to:', formData.city);\n    }\n  }, [formData.city]);\n  \n  // Validate if city belongs to selected country\n  useEffect(() => {\n    if (formData.country && formData.city && cityOptions.length > 0) {\n      const cityValid = cityOptions.some(\n        city => city.name === formData.city\n      );\n      \n      if (!cityValid) {\n        console.log('Selected city is not valid for the current country');\n      }\n    }\n  }, [formData.country, formData.city, cityOptions]);\n};\n","\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport ImageWithFallback from '@/components/ui/image-with-fallback';\nimport { Sightseeing, Image } from '@/types/sightseeing';\nimport { useCitiesData } from '@/hooks/useCitiesData';\nimport { useSightseeingCurrency } from '@/hooks/useSightseeingCurrency';\nimport { X, User, DollarSign } from 'lucide-react';\n\ninterface BasicInformationProps {\n  formData: Sightseeing;\n  handleFormChange: (field: string, value: any) => void;\n  countries: string[];\n  cities: string[];\n}\n\nconst BasicInformation: React.FC<BasicInformationProps> = ({\n  formData,\n  handleFormChange,\n  countries,\n  cities\n}) => {\n  const [newImageUrl, setNewImageUrl] = useState('');\n  const { getActiveCountries, getCitiesByCountry } = useCitiesData();\n  const [availableCountries, setAvailableCountries] = useState<string[]>([]);\n  const [availableCities, setAvailableCities] = useState<string[]>([]);\n  \n  // Currency auto-loading hook\n  const { currencyInfo, loading: currencyLoading, error: currencyError } = useSightseeingCurrency(formData.country);\n\n  // Load countries and cities data\n  useEffect(() => {\n    // Prefer countries passed via props if available; fallback to hook\n    const propCountryNames = Array.isArray(countries) && countries.length > 0 ? countries : [];\n    const hookCountryNames = getActiveCountries().map(country => country.name);\n    const merged = propCountryNames.length > 0 ? propCountryNames : hookCountryNames;\n    // Ensure currently selected country remains selectable even if inactive\n    const finalCountries = new Set(merged);\n    if (formData.country) finalCountries.add(formData.country);\n    setAvailableCountries(Array.from(finalCountries));\n  }, [countries, getActiveCountries, formData.country]);\n\n  // Update available cities when country changes\n  useEffect(() => {\n    if (formData.country) {\n      const citiesForCountry = getCitiesByCountry(formData.country);\n      const cityNames = citiesForCountry.map(city => city.name);\n      // Keep current city selectable even if filtered list doesnt include it\n      const finalCitySet = new Set(cityNames);\n      if (formData.city) finalCitySet.add(formData.city);\n      setAvailableCities(Array.from(finalCitySet));\n    } else {\n      setAvailableCities([]);\n    }\n  }, [formData.country, getCitiesByCountry, formData.city]);\n\n  // Handle country change\n  const handleCountryChange = (value: string) => {\n    console.log('Country changed to:', value);\n    handleFormChange('country', value);\n    // City will be automatically filtered by the useEffect above\n  };\n\n  // Auto-save currency information when currency data is loaded\n  useEffect(() => {\n    if (currencyInfo && formData.country) {\n      // Only update if the currency information has changed\n      if (formData.pricing_currency !== currencyInfo.currency || \n          formData.pricing_currency_symbol !== currencyInfo.symbol) {\n        handleFormChange('pricing_currency', currencyInfo.currency);\n        handleFormChange('pricing_currency_symbol', currencyInfo.symbol);\n      }\n    }\n  }, [currencyInfo, formData.country, formData.pricing_currency, formData.pricing_currency_symbol, handleFormChange]);\n\n  const handleAddImage = () => {\n    if (newImageUrl && formData.images?.every(img => img.url !== newImageUrl)) {\n      // Create a new image object\n      const newImage: Image = {\n        id: (formData.images?.length || 0) + 1,\n        url: newImageUrl,\n        isPrimary: !formData.images || formData.images.length === 0\n      };\n      \n      // Update form data with the new image\n      const updatedImages = [...(formData.images || []), newImage];\n      handleFormChange('images', updatedImages);\n      \n      // Also update imageUrl if this is the first image (for backward compatibility)\n      if (!formData.imageUrl && newImage.isPrimary) {\n        handleFormChange('imageUrl', newImageUrl);\n      }\n      \n      setNewImageUrl('');\n    }\n  };\n\n  const handleRemoveImage = (id: number) => {\n    if (formData.images) {\n      const imageToRemove = formData.images.find(img => img.id === id);\n      const updatedImages = formData.images.filter(img => img.id !== id);\n      \n      // If we're removing the primary image, make the first remaining image primary\n      if (imageToRemove?.isPrimary && updatedImages.length > 0) {\n        updatedImages[0].isPrimary = true;\n        \n        // Also update imageUrl for backward compatibility\n        handleFormChange('imageUrl', updatedImages[0].url);\n      }\n      \n      handleFormChange('images', updatedImages);\n      \n      // If removing the last image, clear imageUrl too\n      if (updatedImages.length === 0) {\n        handleFormChange('imageUrl', '');\n      }\n    }\n  };\n\n  const setPrimaryImage = (id: number) => {\n    if (formData.images) {\n      const updatedImages = formData.images.map(img => ({\n        ...img,\n        isPrimary: img.id === id\n      }));\n      \n      handleFormChange('images', updatedImages);\n      \n      // Update imageUrl for backward compatibility\n      const primaryImage = updatedImages.find(img => img.isPrimary);\n      if (primaryImage) {\n        handleFormChange('imageUrl', primaryImage.url);\n      }\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Basic Details</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"country\">Country *</Label>\n              <Select \n                value={formData.country || ''} \n                onValueChange={handleCountryChange}\n              >\n                <SelectTrigger id=\"country\">\n                  <SelectValue placeholder=\"Select Country\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {availableCountries.length > 0 ? (\n                    availableCountries.map((country) => (\n                      <SelectItem key={country} value={country}>\n                        {country}\n                      </SelectItem>\n                    ))\n                  ) : (\n                    <SelectItem value=\"loading\" disabled>\n                      Loading countries...\n                    </SelectItem>\n                  )}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"city\">City *</Label>\n              <Select \n                value={formData.city || ''} \n                onValueChange={(value) => handleFormChange('city', value)}\n                disabled={!formData.country}\n              >\n                <SelectTrigger id=\"city\">\n                  <SelectValue placeholder={formData.country ? \"Select City\" : \"Select Country First\"} />\n                </SelectTrigger>\n                <SelectContent>\n                  {availableCities.length > 0 ? (\n                    availableCities.map((city) => (\n                      <SelectItem key={city} value={city}>\n                        {city}\n                      </SelectItem>\n                    ))\n                  ) : (\n                    <SelectItem value=\"no-cities\" disabled>\n                      {formData.country ? \"No cities available\" : \"Select country first\"}\n                    </SelectItem>\n                  )}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            {/* Currency Display */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"currency\">Currency</Label>\n              <div className=\"relative\">\n                <Input \n                  id=\"currency\" \n                  value={currencyInfo ? currencyInfo.displayText : (formData.country ? 'Loading...' : 'Select country first')}\n                  disabled\n                  className=\"bg-muted\"\n                />\n                <DollarSign className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              </div>\n              {currencyError && (\n                <p className=\"text-sm text-red-500\">{currencyError}</p>\n              )}\n              {currencyInfo && (\n                <p className=\"text-xs text-muted-foreground\">\n                  Auto-loaded from country settings\n                </p>\n              )}\n            </div>\n            \n            <div className=\"space-y-2 md:col-span-2 lg:col-span-3\">\n              <Label htmlFor=\"name\">Sightseeing Name *</Label>\n              <Input \n                id=\"name\" \n                value={formData.name || ''} \n                onChange={(e) => handleFormChange('name', e.target.value)}\n                placeholder=\"E.g., Phi Phi Island Tour\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"latitude\">Latitude</Label>\n              <Input \n                id=\"latitude\" \n                type=\"number\"\n                step=\"0.000001\"\n                value={formData.latitude || ''} \n                onChange={(e) => handleFormChange('latitude', parseFloat(e.target.value) || null)}\n                placeholder=\"E.g., 7.9519\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"longitude\">Longitude</Label>\n              <Input \n                id=\"longitude\" \n                type=\"number\"\n                step=\"0.000001\"\n                value={formData.longitude || ''} \n                onChange={(e) => handleFormChange('longitude', parseFloat(e.target.value) || null)}\n                placeholder=\"E.g., 98.3381\"\n              />\n            </div>\n            \n            <div className=\"space-y-2 md:col-span-2 lg:col-span-3\">\n              <Label htmlFor=\"googleMapLink\">Google Map Link</Label>\n              <Input \n                id=\"googleMapLink\" \n                value={formData.googleMapLink || ''} \n                onChange={(e) => handleFormChange('googleMapLink', e.target.value)}\n                placeholder=\"https://maps.google.com/...\"\n              />\n            </div>\n            \n            <div className=\"space-y-2 md:col-span-2 lg:col-span-3\">\n              <Label htmlFor=\"address\">Address</Label>\n              <Textarea \n                id=\"address\" \n                value={formData.address || ''} \n                onChange={(e) => handleFormChange('address', e.target.value)}\n                placeholder=\"Full address of the location\"\n                rows={2}\n              />\n            </div>\n            \n            <div className=\"space-y-2 md:col-span-2 lg:col-span-3\">\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea \n                id=\"description\" \n                value={formData.description || ''} \n                onChange={(e) => handleFormChange('description', e.target.value)}\n                placeholder=\"Describe the sightseeing experience\"\n                rows={4}\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Images section */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Images</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-wrap gap-4\">\n              {formData.images?.map((image) => (\n                <div key={image.id} className=\"relative w-32 h-32 group\">\n                  <ImageWithFallback\n                    src={image.url} \n                    alt={`Sightseeing image ${image.id}`} \n                    className={`w-full h-full object-cover rounded-md border-2 ${image.isPrimary ? 'border-primary' : 'border-transparent'}`}\n                    fallbackIcon={<User className=\"h-8 w-8 text-muted-foreground\" />}\n                  />\n                  <div className=\"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 flex flex-col items-center justify-center transition-opacity rounded-md\">\n                    {!image.isPrimary && (\n                      <button\n                        type=\"button\"\n                        onClick={() => setPrimaryImage(image.id)}\n                        className=\"bg-primary text-white rounded-full p-1 mb-2 hover:bg-primary/80\"\n                        title=\"Set as primary image\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                          <path d=\"m5 12 5 5L20 7\"></path>\n                        </svg>\n                      </button>\n                    )}\n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveImage(image.id)}\n                      className=\"bg-red-500 text-white rounded-full p-1 hover:bg-red-600\"\n                      title=\"Remove image\"\n                    >\n                      <X size={16} />\n                    </button>\n                  </div>\n                  {image.isPrimary && (\n                    <div className=\"absolute top-0 right-0 bg-primary text-white text-xs px-1 rounded-bl-md\">\n                      Primary\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <Input \n                value={newImageUrl}\n                onChange={(e) => setNewImageUrl(e.target.value)}\n                placeholder=\"Enter image URL\" \n                className=\"flex-grow\"\n              />\n              <Button type=\"button\" onClick={handleAddImage}>\n                Add Image\n              </Button>\n            </div>\n            \n            <div className=\"text-sm text-muted-foreground mt-2\">\n              Upload images or paste image URLs to showcase the sightseeing attraction.\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default BasicInformation;\n","import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { X, Calendar as CalendarIcon, AlertTriangle } from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { format } from 'date-fns';\nimport { cn } from '@/lib/utils';\nimport { \n  sightseeingCategories, \n  difficultyLevels, \n  seasons,\n  daysOfWeek \n} from '../../data/initialData';\nimport { getExpirationStatus, formatValidityPeriod } from '../../services/expirationService';\n\ninterface OperationalDetailsProps {\n  formData: Sightseeing;\n  handleFormChange: (field: string, value: any) => void;\n}\n\nconst OperationalDetails: React.FC<OperationalDetailsProps> = ({\n  formData,\n  handleFormChange\n}) => {\n  const [selectedCategories, setSelectedCategories] = React.useState<string[]>(\n    formData.category ? formData.category.split(', ') : []\n  );\n  \n  const [newActivity, setNewActivity] = React.useState('');\n  \n  // Get start and end dates from validity period\n  const getStartDate = (): Date | undefined => {\n    if (!formData.validityPeriod) return undefined;\n    try {\n      return new Date(formData.validityPeriod.startDate);\n    } catch (error) {\n      console.error('Error parsing start date:', error);\n      return undefined;\n    }\n  };\n\n  const getEndDate = (): Date | undefined => {\n    if (!formData.validityPeriod) return undefined;\n    try {\n      return new Date(formData.validityPeriod.endDate);\n    } catch (error) {\n      console.error('Error parsing end date:', error);\n      return undefined;\n    }\n  };\n  \n  // Handle start date change\n  const handleStartDateChange = (date: Date | undefined) => {\n    console.log('Start date selected:', date);\n    \n    if (date) {\n      const currentEndDate = getEndDate();\n      const validityPeriod = {\n        startDate: date.toISOString(),\n        endDate: currentEndDate ? currentEndDate.toISOString() : date.toISOString()\n      };\n      \n      handleFormChange('validityPeriod', validityPeriod);\n      handleFormChange('isExpired', false);\n      handleFormChange('expirationNotified', false);\n    } else {\n      // If start date is cleared, clear the entire period\n      handleFormChange('validityPeriod', null);\n      handleFormChange('isExpired', false);\n      handleFormChange('expirationNotified', false);\n    }\n  };\n  \n  // Handle end date change\n  const handleEndDateChange = (date: Date | undefined) => {\n    console.log('End date selected:', date);\n    \n    if (date) {\n      const currentStartDate = getStartDate();\n      if (!currentStartDate) {\n        // If no start date, set both to the same date\n        const validityPeriod = {\n          startDate: date.toISOString(),\n          endDate: date.toISOString()\n        };\n        handleFormChange('validityPeriod', validityPeriod);\n      } else {\n        // Ensure end date is not before start date\n        const finalEndDate = date < currentStartDate ? currentStartDate : date;\n        const validityPeriod = {\n          startDate: currentStartDate.toISOString(),\n          endDate: finalEndDate.toISOString()\n        };\n        handleFormChange('validityPeriod', validityPeriod);\n      }\n      \n      handleFormChange('isExpired', false);\n      handleFormChange('expirationNotified', false);\n    } else {\n      // If end date is cleared but start date exists, keep start date only\n      const currentStartDate = getStartDate();\n      if (currentStartDate) {\n        const validityPeriod = {\n          startDate: currentStartDate.toISOString(),\n          endDate: currentStartDate.toISOString()\n        };\n        handleFormChange('validityPeriod', validityPeriod);\n      } else {\n        // Clear entire period if no start date\n        handleFormChange('validityPeriod', null);\n        handleFormChange('isExpired', false);\n        handleFormChange('expirationNotified', false);\n      }\n    }\n  };\n  \n  const clearValidityPeriod = () => {\n    console.log('Manually clearing validity period');\n    handleFormChange('validityPeriod', null);\n    handleFormChange('isExpired', false);\n    handleFormChange('expirationNotified', false);\n  };\n  \n  const expirationStatus = formData.validityPeriod ? getExpirationStatus(formData) : 'no-period';\n  \n  const handleCategoryChange = (category: string) => {\n    let updated;\n    if (selectedCategories.includes(category)) {\n      updated = selectedCategories.filter(c => c !== category);\n    } else {\n      updated = [...selectedCategories, category];\n    }\n    setSelectedCategories(updated);\n    handleFormChange('category', updated.join(', '));\n  };\n  \n  const handleAddActivity = () => {\n    if (newActivity && (!formData.activities?.includes(newActivity))) {\n      const activities = formData.activities ? [...formData.activities, newActivity] : [newActivity];\n      handleFormChange('activities', activities);\n      setNewActivity('');\n    }\n  };\n  \n  const handleRemoveActivity = (activity: string) => {\n    if (formData.activities) {\n      handleFormChange('activities', formData.activities.filter(a => a !== activity));\n    }\n  };\n  \n  const handleDayOfWeekChange = (day: string) => {\n    const currentDays = formData.daysOfWeek || [];\n    let updatedDays;\n    \n    if (currentDays.includes(day)) {\n      updatedDays = currentDays.filter(d => d !== day);\n    } else {\n      updatedDays = [...currentDays, day];\n    }\n    \n    handleFormChange('daysOfWeek', updatedDays);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Validity Period */}\n      <Card className=\"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-gray-900 dark:text-white flex items-center gap-2\">\n            <CalendarIcon className=\"h-5 w-5\" />\n            Validity Period\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Start Date */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-gray-700 dark:text-gray-300\">Start Date (Optional)</Label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !getStartDate() && \"text-muted-foreground\"\n                      )}\n                    >\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                      {getStartDate() ? format(getStartDate()!, \"PPP\") : \"Pick start date\"}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={getStartDate()}\n                      onSelect={handleStartDateChange}\n                      initialFocus\n                      className=\"pointer-events-auto\"\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              {/* End Date */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-gray-700 dark:text-gray-300\">End Date (Optional)</Label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !getEndDate() && \"text-muted-foreground\"\n                      )}\n                    >\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                      {getEndDate() ? format(getEndDate()!, \"PPP\") : \"Pick end date\"}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={getEndDate()}\n                      onSelect={handleEndDateChange}\n                      disabled={(date) => {\n                        const startDate = getStartDate();\n                        return startDate ? date < startDate : false;\n                      }}\n                      initialFocus\n                      className=\"pointer-events-auto\"\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n            </div>\n\n            {/* Clear Button */}\n            {formData.validityPeriod && (\n              <div className=\"flex justify-start\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={clearValidityPeriod}\n                  className=\"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400\"\n                >\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Clear Period\n                </Button>\n              </div>\n            )}\n            \n            {formData.validityPeriod && (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"outline\" className=\"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700\">\n                    {formatValidityPeriod(formData.validityPeriod)}\n                  </Badge>\n                </div>\n                \n                {expirationStatus === 'expired' && (\n                  <Alert variant=\"destructive\" className=\"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700\">\n                    <AlertTriangle className=\"h-4 w-4\" />\n                    <AlertDescription className=\"text-red-800 dark:text-red-200\">\n                      This sightseeing has expired and will be automatically set to inactive.\n                    </AlertDescription>\n                  </Alert>\n                )}\n                \n                {expirationStatus === 'expiring-soon' && (\n                  <Alert className=\"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-700\">\n                    <AlertTriangle className=\"h-4 w-4 text-yellow-600 dark:text-yellow-400\" />\n                    <AlertDescription className=\"text-yellow-800 dark:text-yellow-200\">\n                      This sightseeing expires within 7 days.\n                    </AlertDescription>\n                  </Alert>\n                )}\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Categories */}\n      <Card className=\"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-gray-900 dark:text-white\">Categories</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap gap-2 mb-2\">\n            {selectedCategories.map((category) => (\n              <Badge key={category} variant=\"secondary\" className=\"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200\">\n                {category}\n                <button \n                  onClick={() => handleCategoryChange(category)}\n                  className=\"ml-1 hover:text-destructive\"\n                >\n                  <X size={14} />\n                </button>\n              </Badge>\n            ))}\n            {selectedCategories.length === 0 && (\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">No categories selected</div>\n            )}\n          </div>\n          \n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-4\">\n            {sightseeingCategories.map((category) => (\n              <div key={category} className=\"flex items-center space-x-2\">\n                <Checkbox \n                  id={`category-${category}`}\n                  checked={selectedCategories.includes(category)}\n                  onCheckedChange={() => handleCategoryChange(category)}\n                  className=\"border-gray-300 dark:border-gray-600\"\n                />\n                <Label htmlFor={`category-${category}`} className=\"text-sm text-gray-700 dark:text-gray-300\">\n                  {category}\n                </Label>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Activities */}\n      <Card className=\"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-gray-900 dark:text-white\">Activities</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {formData.activities?.map((activity) => (\n              <Badge key={activity} variant=\"outline\" className=\"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-600\">\n                {activity}\n                <button \n                  onClick={() => handleRemoveActivity(activity)}\n                  className=\"ml-1 hover:text-destructive\"\n                >\n                  <X size={14} />\n                </button>\n              </Badge>\n            ))}\n            {!formData.activities?.length && (\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">No activities added</div>\n            )}\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <Input \n              placeholder=\"Add new activity (e.g., Snorkeling)\" \n              value={newActivity}\n              onChange={(e) => setNewActivity(e.target.value)}\n              className=\"flex-grow bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\"\n            />\n            <Button type=\"button\" onClick={handleAddActivity} className=\"bg-blue-600 hover:bg-blue-700 text-white\">\n              Add\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Other operational details */}\n      <Card className=\"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\">\n        <CardHeader>\n          <CardTitle className=\"text-gray-900 dark:text-white\">Additional Details</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Difficulty Level */}\n            <div className=\"space-y-3\">\n              <Label className=\"text-base text-gray-700 dark:text-gray-300\">Difficulty Level</Label>\n              <RadioGroup \n                value={formData.difficultyLevel || ''} \n                onValueChange={(value) => handleFormChange('difficultyLevel', value)}\n                className=\"flex space-x-4\"\n              >\n                {difficultyLevels.map((level) => (\n                  <div key={level} className=\"flex items-center space-x-1\">\n                    <RadioGroupItem value={level} id={`difficulty-${level}`} className=\"border-gray-400 dark:border-gray-500\" />\n                    <Label htmlFor={`difficulty-${level}`} className=\"text-sm text-gray-700 dark:text-gray-300\">{level}</Label>\n                  </div>\n                ))}\n              </RadioGroup>\n            </div>\n            \n            {/* Season */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"season\" className=\"text-gray-700 dark:text-gray-300\">Season</Label>\n              <Select \n                value={formData.season || ''} \n                onValueChange={(value) => handleFormChange('season', value)}\n              >\n                <SelectTrigger id=\"season\" className=\"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\">\n                  <SelectValue placeholder=\"Select Season\" />\n                </SelectTrigger>\n                <SelectContent className=\"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700\">\n                  {seasons.map((season) => (\n                    <SelectItem key={season} value={season} className=\"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700\">\n                      {season}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            {/* Age Group */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"ageGroup\" className=\"text-gray-700 dark:text-gray-300\">Allowed Age Group</Label>\n              <Input \n                id=\"ageGroup\" \n                value={formData.allowedAgeGroup || ''} \n                onChange={(e) => handleFormChange('allowedAgeGroup', e.target.value)}\n                placeholder=\"E.g., 3 to 60 years\"\n                className=\"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\"\n              />\n            </div>\n            \n            {/* Days of Week */}\n            <div className=\"space-y-3\">\n              <Label className=\"text-base text-gray-700 dark:text-gray-300\">Days of Week</Label>\n              <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2\">\n                {daysOfWeek.map((day) => (\n                  <div key={day.value} className=\"flex items-center space-x-2\">\n                    <Checkbox \n                      id={`day-${day.value}`}\n                      checked={(formData.daysOfWeek || []).includes(day.value)}\n                      onCheckedChange={() => handleDayOfWeekChange(day.value)}\n                      className=\"border-gray-300 dark:border-gray-600\"\n                    />\n                    <Label htmlFor={`day-${day.value}`} className=\"text-sm text-gray-700 dark:text-gray-300\">\n                      {day.label}\n                    </Label>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Timing & Location */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"timing\" className=\"text-gray-700 dark:text-gray-300\">Timing & Location</Label>\n              <Input \n                id=\"timing\" \n                value={formData.timing || ''} \n                onChange={(e) => handleFormChange('timing', e.target.value)}\n                placeholder=\"E.g., 09:00 AM - 05:00 PM, Lobby Pickup\"\n                className=\"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\"\n              />\n            </div>\n            \n            {/* Pick-up Time */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pickupTime\" className=\"text-gray-700 dark:text-gray-300\">Pick-up Time</Label>\n              <Input \n                id=\"pickupTime\" \n                value={formData.pickupTime || ''} \n                onChange={(e) => handleFormChange('pickupTime', e.target.value)}\n                placeholder=\"E.g., 08:30 AM\"\n                className=\"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\"\n              />\n            </div>\n            \n            {/* Duration */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"duration\" className=\"text-gray-700 dark:text-gray-300\">Duration (HH:MM)</Label>\n              <Input \n                id=\"duration\" \n                value={formData.duration || ''} \n                onChange={(e) => handleFormChange('duration', e.target.value)}\n                placeholder=\"E.g., 06:00\"\n                className=\"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default OperationalDetails;\n","\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Eye, DollarSign, Car, Package, Users, UserCheck } from 'lucide-react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { getCurrencyByCountry } from '../../utils/currency';\n\ninterface PricingPreviewProps {\n  formData: Sightseeing;\n}\n\nconst PricingPreview: React.FC<PricingPreviewProps> = ({ formData }) => {\n  const currency = getCurrencyByCountry(formData.country || '');\n  const currencySymbol = currency.symbol;\n  const enabledPricingOptions = formData.pricingOptions?.filter(option => option.isEnabled) || [];\n  const enabledTransferOptions = formData.transferOptions?.filter(option => option.isEnabled) || [];\n  const enabledPackageOptions = formData.packageOptions?.filter(option => option.isEnabled) || [];\n\n  if (formData.isFree) {\n    return (\n      <Card className=\"mt-4\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-lg\">\n            <Eye className=\"h-5 w-5\" />\n            Pricing Preview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-6\">\n            <Badge variant=\"secondary\" className=\"text-lg py-2 px-4\">\n              FREE ACTIVITY\n            </Badge>\n            <p className=\"text-sm text-muted-foreground mt-2\">\n              This sightseeing activity is completely free of charge\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const hasAnyPricing = \n    (formData.price && (formData.price.adult > 0 || formData.price.child > 0)) ||\n    (formData.sicAvailable && formData.sicPricing && (formData.sicPricing.adult > 0 || formData.sicPricing.child > 0)) ||\n    enabledPricingOptions.length > 0 ||\n    enabledTransferOptions.length > 0 ||\n    enabledPackageOptions.length > 0 ||\n    (formData.groupSizeOptions && formData.groupSizeOptions.length > 0 && formData.groupSizeOptions.some(o => o.adultPrice > 0 || o.childPrice > 0));\n\n  if (!hasAnyPricing) {\n    return (\n      <Card className=\"mt-4\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-lg\">\n            <Eye className=\"h-5 w-5\" />\n            Pricing Preview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-6\">\n            <p className=\"text-muted-foreground\">\n              No pricing options configured yet\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"mt-4\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2 text-lg\">\n          <Eye className=\"h-5 w-5\" />\n          Pricing Preview\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Standard Pricing */}\n        {formData.price && (formData.price.adult > 0 || formData.price.child > 0) && (\n          <div>\n            <div className=\"flex items-center gap-2 mb-3\">\n              <DollarSign className=\"h-4 w-4\" />\n              <h4 className=\"font-medium\">Standard Pricing</h4>\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"bg-muted/50 p-3 rounded-lg\">\n                <div className=\"text-sm text-muted-foreground\">Adult</div>\n                <div className=\"font-semibold\">{currencySymbol}{formData.price.adult}</div>\n              </div>\n              <div className=\"bg-muted/50 p-3 rounded-lg\">\n                <div className=\"text-sm text-muted-foreground\">Child</div>\n                <div className=\"font-semibold\">{currencySymbol}{formData.price.child}</div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* SIC Pricing */}\n        {formData.sicAvailable && formData.sicPricing && (formData.sicPricing.adult > 0 || formData.sicPricing.child > 0) && (\n          <>\n            {formData.price && (formData.price.adult > 0 || formData.price.child > 0) && <Separator />}\n            <div>\n              <div className=\"flex items-center gap-2 mb-3\">\n                <UserCheck className=\"h-4 w-4\" />\n                <h4 className=\"font-medium\">SIC (Seat-in-Coach) Pricing</h4>\n                <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 border-blue-200\">Available</Badge>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div className=\"bg-muted/50 p-3 rounded-lg\">\n                  <div className=\"text-sm text-muted-foreground\">Adult</div>\n                  <div className=\"font-semibold\">{currencySymbol}{formData.sicPricing.adult}</div>\n                </div>\n                <div className=\"bg-muted/50 p-3 rounded-lg\">\n                  <div className=\"text-sm text-muted-foreground\">Child</div>\n                  <div className=\"font-semibold\">{currencySymbol}{formData.sicPricing.child}</div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Pricing Options */}\n        {enabledPricingOptions.length > 0 && (\n          <>\n            {formData.price && (formData.price.adult > 0 || formData.price.child > 0) && <Separator />}\n            <div>\n              <div className=\"flex items-center gap-2 mb-3\">\n                <DollarSign className=\"h-4 w-4\" />\n                <h4 className=\"font-medium\">Pricing Options</h4>\n                <Badge variant=\"outline\">{enabledPricingOptions.length}</Badge>\n              </div>\n              <div className=\"space-y-2\">\n                {enabledPricingOptions.map((option, index) => (\n                  <div key={option.id} className=\"bg-muted/50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"font-medium text-sm\">{option.type}</div>\n                      <Badge variant=\"secondary\" className=\"text-xs\">Enabled</Badge>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>Adult: <span className=\"font-semibold\">{currencySymbol}{option.adultPrice}</span></div>\n                      <div>Child: <span className=\"font-semibold\">{currencySymbol}{option.childPrice}</span></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Transfer Options */}\n        {enabledTransferOptions.length > 0 && (\n          <>\n            <Separator />\n            <div>\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Car className=\"h-4 w-4\" />\n                <h4 className=\"font-medium\">Transfer Options</h4>\n                <Badge variant=\"outline\">{enabledTransferOptions.length}</Badge>\n              </div>\n              <div className=\"space-y-2\">\n                {enabledTransferOptions.map((option, index) => (\n                  <div key={option.id} className=\"bg-muted/50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"font-medium text-sm\">{option.vehicleType}</div>\n                      <div className=\"flex gap-1\">\n                        <Badge variant=\"secondary\" className=\"text-xs\">{option.type || 'SIC'}</Badge>\n                        <Badge variant=\"secondary\" className=\"text-xs\">Enabled</Badge>\n                      </div>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <div>Capacity: <span className=\"font-semibold\">{option.capacity}</span></div>\n                      <div>Price: <span className=\"font-semibold\">{currencySymbol}{option.price} {option.priceUnit}</span></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Package Options */}\n        {enabledPackageOptions.length > 0 && (\n          <>\n            <Separator />\n            <div>\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Package className=\"h-4 w-4\" />\n                <h4 className=\"font-medium\">Package Options</h4>\n                <Badge variant=\"outline\">{enabledPackageOptions.length}</Badge>\n              </div>\n              <div className=\"space-y-2\">\n                {enabledPackageOptions.map((option, index) => (\n                  <div key={option.id} className=\"bg-muted/50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <div className=\"font-medium text-sm\">{option.name}</div>\n                        <div className=\"text-xs text-muted-foreground\">{option.type}</div>\n                      </div>\n                      <Badge variant=\"secondary\" className=\"text-xs\">Enabled</Badge>\n                    </div>\n                    {option.description && (\n                      <div className=\"text-xs text-muted-foreground mb-2\">{option.description}</div>\n                    )}\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>Adult: <span className=\"font-semibold\">{currencySymbol}{option.adultPrice}</span></div>\n                      <div>Child: <span className=\"font-semibold\">{currencySymbol}{option.childPrice}</span></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Group Size Options */}\n        {formData.groupSizeOptions && formData.groupSizeOptions.length > 0 && formData.groupSizeOptions.some(o => o.adultPrice > 0 || o.childPrice > 0) && (\n          <>\n            <Separator />\n            <div>\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Users className=\"h-4 w-4\" />\n                <h4 className=\"font-medium\">Group Size Options</h4>\n                <Badge variant=\"outline\">{formData.groupSizeOptions.length}</Badge>\n              </div>\n              <div className=\"space-y-2\">\n                {formData.groupSizeOptions.map((option, index) => (\n                  <div key={option.id} className=\"bg-muted/50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"font-medium text-sm\">\n                        {option.minPeople} - {option.maxPeople} people\n                      </div>\n                      <Badge variant=\"secondary\" className=\"text-xs\">Group Rate</Badge>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                      <div>Adult: <span className=\"font-semibold\">{currencySymbol}{option.adultPrice}</span></div>\n                      <div>Child: <span className=\"font-semibold\">{currencySymbol}{option.childPrice}</span></div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PricingPreview;\n","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Switch } from '@/components/ui/switch';\nimport { PlusCircle, Trash, AlertTriangle } from 'lucide-react';\nimport { Separator } from '@/components/ui/separator';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Sightseeing, TransferOption } from '@/types/sightseeing';\nimport { packageTypes } from '../../data/initialData';\nimport { useTransportData } from '../../../transport/hooks/useTransportData';\nimport PricingPreview from './PricingPreview';\nimport { getCurrencyByCountry } from '../../utils/currency';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\ninterface PricingModuleProps {\n  formData: Sightseeing;\n  handleFormChange: (field: string, value: any) => void;\n}\n\n// PricingModule component\nconst PricingModule: React.FC<PricingModuleProps> = ({ formData, handleFormChange }) => {\n  const [activeTab, setActiveTab] = useState('standard');\n  const [showCustomTypeInput, setShowCustomTypeInput] = useState<{[key: number]: boolean}>({});\n  const [showCustomPackageType, setShowCustomPackageType] = useState<{[key: number]: boolean}>({});\n  const { transport: transportTypes } = useTransportData();\n\n  // Get currency symbol based on selected country\n  const currency = getCurrencyByCountry(formData.country || '');\n  const currencySymbol = currency.symbol;\n  const currencyCode = currency.code;\n\n  // Predefined pricing types with new additions\n  const pricingTypes = [\n    'Ticket Only',\n    'Entry Fee', \n    'National Park Fee',\n    'Guide Fee',\n    'Activity Fee',\n    'Equipment Rental',\n    'Custom' // This will trigger custom input\n  ];\n\n  // Handle standard price changes\n  const handleStandardPriceChange = (type: 'adult' | 'child', value: string) => {\n    const price = parseFloat(value) || 0;\n    handleFormChange('price', {\n      ...formData.price,\n      [type]: price\n    });\n  };\n\n  // Handle SIC availability toggle\n  const handleSicAvailableToggle = (checked: boolean) => {\n    handleFormChange('sicAvailable', checked);\n    \n    // If SIC is enabled, ensure SIC pricing is initialized\n    if (checked && !formData.sicPricing) {\n      handleFormChange('sicPricing', { adult: 0, child: 0 });\n    }\n    \n    // If SIC is disabled, clear SIC pricing\n    if (!checked) {\n      handleFormChange('sicPricing', { adult: 0, child: 0 });\n    }\n  };\n\n  // Handle SIC pricing changes\n  const handleSicPriceChange = (type: 'adult' | 'child', value: string) => {\n    const price = parseFloat(value) || 0;\n    handleFormChange('sicPricing', {\n      ...formData.sicPricing,\n      [type]: price\n    });\n  };\n\n  // Handle mandatory transfer toggle\n  const handleMandatoryTransferToggle = (checked: boolean) => {\n    handleFormChange('requiresMandatoryTransfer', checked);\n    handleFormChange('transferMandatory', checked);\n  };\n\n  // Handle free toggle\n  const handleFreeToggle = (checked: boolean) => {\n    handleFormChange('isFree', checked);\n    \n    // If free is toggled on, reset prices\n    if (checked) {\n      handleFormChange('price', { adult: 0, child: 0 });\n      handleFormChange('sicPricing', { adult: 0, child: 0 });\n      \n      // Also disable any pricing options\n      if (formData.pricingOptions) {\n        const updatedOptions = formData.pricingOptions.map(option => ({\n          ...option,\n          isEnabled: false\n        }));\n        handleFormChange('pricingOptions', updatedOptions);\n      }\n      \n      // And disable any package options\n      if (formData.packageOptions) {\n        const updatedPackages = formData.packageOptions.map(pkg => ({\n          ...pkg,\n          isEnabled: false\n        }));\n        handleFormChange('packageOptions', updatedPackages);\n      }\n\n      // And disable any transfer options\n      if (formData.transferOptions) {\n        const updatedTransfers = formData.transferOptions.map(transfer => ({\n          ...transfer,\n          isEnabled: false\n        }));\n        handleFormChange('transferOptions', updatedTransfers);\n      }\n    }\n  };\n\n  // Pricing Option handlers\n  const handleAddPricingOption = () => {\n    const newOption = {\n      id: Date.now(),\n      type: 'Ticket Only',\n      adultPrice: 0,\n      childPrice: 0,\n      isEnabled: true\n    };\n    \n    const updatedOptions = formData.pricingOptions ? \n      [...formData.pricingOptions, newOption] : \n      [newOption];\n    \n    handleFormChange('pricingOptions', updatedOptions);\n  };\n\n  const handlePricingOptionChange = (index: number, field: string, value: any) => {\n    if (!formData.pricingOptions) return;\n    \n    const updatedOptions = [...formData.pricingOptions];\n    \n    // Handle custom type selection\n    if (field === 'type') {\n      if (value === 'Custom') {\n        setShowCustomTypeInput(prev => ({ ...prev, [index]: true }));\n        updatedOptions[index] = {\n          ...updatedOptions[index],\n          [field]: value,\n          customType: ''\n        };\n      } else {\n        setShowCustomTypeInput(prev => ({ ...prev, [index]: false }));\n        updatedOptions[index] = {\n          ...updatedOptions[index],\n          [field]: value,\n          customType: undefined\n        };\n      }\n    } else {\n      updatedOptions[index] = {\n        ...updatedOptions[index],\n        [field]: value\n      };\n    }\n    \n    handleFormChange('pricingOptions', updatedOptions);\n  };\n\n  const handleRemovePricingOption = (index: number) => {\n    if (!formData.pricingOptions) return;\n    \n    const updatedOptions = formData.pricingOptions.filter((_, i) => i !== index);\n    handleFormChange('pricingOptions', updatedOptions);\n  };\n\n  // Package Option handlers\n  const handleAddPackageOption = () => {\n    const newPackage = {\n      id: Date.now(),\n      name: 'Standard Package',\n      type: 'Group',\n      description: '',\n      adultPrice: 0,\n      childPrice: 0,\n      isEnabled: true\n    };\n    \n    const updatedPackages = formData.packageOptions ? \n      [...formData.packageOptions, newPackage] : \n      [newPackage];\n    \n    handleFormChange('packageOptions', updatedPackages);\n  };\n\n  const handlePackageOptionChange = (index: number, field: string, value: any) => {\n    if (!formData.packageOptions) return;\n    \n    const updatedPackages = [...formData.packageOptions];\n    \n    // Handle custom type selection\n    if (field === 'type') {\n      if (value === 'Custom') {\n        setShowCustomPackageType(prev => ({ ...prev, [index]: true }));\n        updatedPackages[index] = {\n          ...updatedPackages[index],\n          [field]: value,\n          customType: ''\n        };\n      } else {\n        setShowCustomPackageType(prev => ({ ...prev, [index]: false }));\n        updatedPackages[index] = {\n          ...updatedPackages[index],\n          [field]: value,\n          customType: undefined\n        };\n      }\n    } else {\n      updatedPackages[index] = {\n        ...updatedPackages[index],\n        [field]: value\n      };\n    }\n    \n    handleFormChange('packageOptions', updatedPackages);\n  };\n\n  const handleRemovePackageOption = (index: number) => {\n    if (!formData.packageOptions) return;\n    \n    const updatedPackages = formData.packageOptions.filter((_, i) => i !== index);\n    handleFormChange('packageOptions', updatedPackages);\n  };\n\n  // Transfer Option handlers\n  const handleAddTransferOption = () => {\n    const newTransfer: TransferOption = {\n      id: Date.now(),\n      vehicleType: transportTypes?.length > 0 ? transportTypes[0].name : 'Standard Vehicle',\n      capacity: getSeatingCapacityForVehicle(transportTypes?.length > 0 ? transportTypes[0].name : 'Standard Vehicle'),\n      price: 0,\n      priceUnit: 'Per Person',\n      isEnabled: true\n    };\n    \n    const updatedTransfers = formData.transferOptions ?\n      [...formData.transferOptions, newTransfer] :\n      [newTransfer];\n    \n    handleFormChange('transferOptions', updatedTransfers);\n  };\n\n  const handleTransferOptionChange = (index: number, field: string, value: any) => {\n    if (!formData.transferOptions) return;\n    \n    const updatedTransfers = [...formData.transferOptions];\n    \n    // If vehicle type is changed, update capacity automatically\n    if (field === 'vehicleType') {\n      updatedTransfers[index] = {\n        ...updatedTransfers[index],\n        [field]: value,\n        capacity: getSeatingCapacityForVehicle(value)\n      };\n    } else {\n      updatedTransfers[index] = {\n        ...updatedTransfers[index],\n        [field]: value\n      };\n    }\n    \n    handleFormChange('transferOptions', updatedTransfers);\n  };\n\n  const handleRemoveTransferOption = (index: number) => {\n    if (!formData.transferOptions) return;\n    \n    const updatedTransfers = formData.transferOptions.filter((_, i) => i !== index);\n    handleFormChange('transferOptions', updatedTransfers);\n  };\n\n  // Group Size Option handlers\n  const handleAddGroupSizeOption = () => {\n    const newOption = {\n      id: Date.now(),\n      minPeople: 1,\n      maxPeople: 4,\n      adultPrice: 0,\n      childPrice: 0,\n    };\n\n    const updated = formData.groupSizeOptions\n      ? [...formData.groupSizeOptions, newOption]\n      : [newOption];\n\n    handleFormChange('groupSizeOptions', updated);\n  };\n\n  const handleGroupSizeOptionChange = (index: number, field: string, value: any) => {\n    if (!formData.groupSizeOptions) return;\n\n    const updated = [...formData.groupSizeOptions];\n\n    if (field === 'minPeople' || field === 'maxPeople') {\n      updated[index] = { ...updated[index], [field]: parseInt(value as string, 10) || 0 };\n    } else if (field === 'adultPrice' || field === 'childPrice') {\n      updated[index] = { ...updated[index], [field]: parseFloat(value as string) || 0 };\n    } else {\n      updated[index] = { ...updated[index], [field]: value };\n    }\n\n    handleFormChange('groupSizeOptions', updated);\n  };\n\n  const handleRemoveGroupSizeOption = (index: number) => {\n    if (!formData.groupSizeOptions) return;\n    const updated = formData.groupSizeOptions.filter((_, i) => i !== index);\n    handleFormChange('groupSizeOptions', updated);\n  };\n\n  // Helper function to get seating capacity for a vehicle type\n  const getSeatingCapacityForVehicle = (vehicleTypeName: string): string => {\n    if (!transportTypes || transportTypes.length === 0) {\n      return '1-4'; // Default fallback\n    }\n    \n    const vehicleType = transportTypes.find(type => type.name === vehicleTypeName);\n    if (vehicleType && vehicleType.seatingCapacity) {\n      return vehicleType.seatingCapacity.toString();\n    }\n    \n    // Fallback based on vehicle type name patterns\n    const lowerName = vehicleTypeName.toLowerCase();\n    if (lowerName.includes('bus')) return '20-50';\n    if (lowerName.includes('van') || lowerName.includes('minibus')) return '8-15';\n    if (lowerName.includes('suv')) return '6-8';\n    if (lowerName.includes('sedan') || lowerName.includes('car')) return '1-4';\n    \n    return '1-4'; // Default fallback\n  };\n\n  // Initialize with at least one transfer option if none exists\n  useEffect(() => {\n    if (!formData.transferOptions || formData.transferOptions.length === 0) {\n      handleAddTransferOption();\n    }\n  }, []);\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-xl font-semibold\">\n            Pricing Information {formData.country && `(${currencyCode})`}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {/* SIC Availability Management */}\n          <div className=\"mb-6 p-4 bg-secondary/10 rounded-lg space-y-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                checked={!!formData.sicAvailable}\n                onCheckedChange={handleSicAvailableToggle}\n                id=\"sic-available-toggle\"\n              />\n              <Label htmlFor=\"sic-available-toggle\" className=\"font-medium\">\n                SIC (Seat-in-Coach) Available\n              </Label>\n            </div>\n            \n            {formData.sicAvailable && (\n              <>\n                <div className=\"grid gap-4 sm:grid-cols-2 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"sic-adult-price\" className=\"font-medium\">\n                      SIC Price - Adult ({currencySymbol})\n                    </Label>\n                    <Input\n                      id=\"sic-adult-price\"\n                      type=\"number\"\n                      placeholder={`Enter SIC adult price in ${currencyCode}`}\n                      value={formData.sicPricing?.adult || 0}\n                      onChange={(e) => handleSicPriceChange('adult', e.target.value)}\n                      disabled={!!formData.isFree}\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"sic-child-price\" className=\"font-medium\">\n                      SIC Price - Child ({currencySymbol})\n                    </Label>\n                    <Input\n                      id=\"sic-child-price\"\n                      type=\"number\"\n                      placeholder={`Enter SIC child price in ${currencyCode}`}\n                      value={formData.sicPricing?.child || 0}\n                      onChange={(e) => handleSicPriceChange('child', e.target.value)}\n                      disabled={!!formData.isFree}\n                    />\n                  </div>\n                </div>\n                \n                <Alert>\n                  <AlertTriangle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    When SIC is available, it will be shown in Standard Pricing. Private transfer options will be available separately in Transfer Options.\n                  </AlertDescription>\n                </Alert>\n              </>\n            )}\n          </div>\n\n          {/* Transfer Requirements */}\n          <div className=\"mb-6 p-4 bg-accent/10 rounded-lg space-y-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                checked={!!formData.requiresMandatoryTransfer}\n                onCheckedChange={handleMandatoryTransferToggle}\n                id=\"mandatory-transfer-toggle\"\n              />\n              <Label htmlFor=\"mandatory-transfer-toggle\" className=\"font-medium\">\n                Requires Mandatory Transfer\n              </Label>\n            </div>\n            \n            {formData.requiresMandatoryTransfer && (\n              <Alert>\n                <AlertTriangle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  This sightseeing requires mandatory transfer selection. Customers must choose between SIC (if available) or Private transfer options.\n                </AlertDescription>\n              </Alert>\n            )}\n          </div>\n\n          <div className=\"mb-6 flex items-center space-x-2\">\n            <Switch \n              checked={!!formData.isFree}\n              onCheckedChange={handleFreeToggle}\n              id=\"free-toggle\"\n            />\n            <Label htmlFor=\"free-toggle\" className=\"font-medium\">\n              This is a free sightseeing activity\n            </Label>\n          </div>\n\n          {!formData.isFree && (\n            <Tabs value={activeTab} onValueChange={setActiveTab}>\n              <TabsList className=\"mb-4\">\n                <TabsTrigger value=\"standard\">Standard Pricing</TabsTrigger>\n                <TabsTrigger value=\"options\">Pricing Options</TabsTrigger>\n                <TabsTrigger value=\"transfers\">Transfer Options</TabsTrigger>\n                <TabsTrigger value=\"packages\">Package Options</TabsTrigger>\n                <TabsTrigger value=\"group\">Group Size Options</TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"standard\">\n                <div className=\"space-y-6\">\n                  {/* Regular Standard Pricing */}\n                  <div>\n                    <h3 className=\"text-lg font-medium mb-4\">Standard Pricing</h3>\n                    <div className=\"grid gap-4 sm:grid-cols-2\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"adult-price\" className=\"font-medium\">\n                          Standard Price - Adult ({currencySymbol})\n                        </Label>\n                        <Input\n                          id=\"adult-price\"\n                          type=\"number\"\n                          placeholder={`Enter adult price in ${currencyCode}`}\n                          value={formData.price?.adult || 0}\n                          onChange={(e) => handleStandardPriceChange('adult', e.target.value)}\n                          disabled={!!formData.isFree}\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"child-price\" className=\"font-medium\">\n                          Standard Price - Child ({currencySymbol})\n                        </Label>\n                        <Input\n                          id=\"child-price\"\n                          type=\"number\"\n                          placeholder={`Enter child price in ${currencyCode}`}\n                          value={formData.price?.child || 0}\n                          onChange={(e) => handleStandardPriceChange('child', e.target.value)}\n                          disabled={!!formData.isFree}\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* SIC Pricing Display */}\n                  {formData.sicAvailable && (\n                    <div>\n                      <Separator className=\"my-4\" />\n                      <h3 className=\"text-lg font-medium mb-4\">SIC (Seat-in-Coach) Pricing</h3>\n                      <div className=\"grid gap-4 sm:grid-cols-2\">\n                        <div className=\"space-y-2\">\n                          <Label className=\"font-medium\">\n                            SIC Price - Adult ({currencySymbol})\n                          </Label>\n                          <div className=\"p-3 bg-muted rounded-md\">\n                            {currencySymbol}{formData.sicPricing?.adult || 0}\n                          </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label className=\"font-medium\">\n                            SIC Price - Child ({currencySymbol})\n                          </Label>\n                          <div className=\"p-3 bg-muted rounded-md\">\n                            {currencySymbol}{formData.sicPricing?.child || 0}\n                          </div>\n                        </div>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mt-2\">\n                        SIC pricing is managed in the main settings above. This is displayed here for reference.\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"options\">\n                <div className=\"space-y-4\">\n                  {formData.pricingOptions?.map((option, index) => (\n                    <Card key={option.id} className=\"overflow-hidden\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch\n                              checked={option.isEnabled !== false}\n                              onCheckedChange={(checked) => handlePricingOptionChange(index, 'isEnabled', checked)}\n                              disabled={!!formData.isFree}\n                            />\n                            <Label className=\"font-medium\">Enabled</Label>\n                          </div>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\" \n                            onClick={() => handleRemovePricingOption(index)}\n                          >\n                            <Trash className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                        \n                        <div className=\"grid gap-4 sm:grid-cols-3\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Type</Label>\n                            <Select\n                              value={option.type}\n                              onValueChange={(value) => handlePricingOptionChange(index, 'type', value)}\n                              disabled={!option.isEnabled || !!formData.isFree}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select type\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {pricingTypes.map((type) => (\n                                  <SelectItem key={type} value={type}>{type}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            \n                            {/* Custom Type Input */}\n                            {option.type === 'Custom' && showCustomTypeInput[index] && (\n                              <Input\n                                placeholder=\"Enter custom type\"\n                                value={option.customType || ''}\n                                onChange={(e) => handlePricingOptionChange(index, 'customType', e.target.value)}\n                                disabled={!option.isEnabled || !!formData.isFree}\n                                className=\"mt-2\"\n                              />\n                            )}\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Adult Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter adult price in ${currencyCode}`}\n                              value={option.adultPrice || 0}\n                              onChange={(e) => handlePricingOptionChange(index, 'adultPrice', parseFloat(e.target.value) || 0)}\n                              disabled={!option.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Child Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter child price in ${currencyCode}`}\n                              value={option.childPrice || 0}\n                              onChange={(e) => handlePricingOptionChange(index, 'childPrice', parseFloat(e.target.value) || 0)}\n                              disabled={!option.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                  \n                  <Button \n                    variant=\"outline\" \n                    onClick={handleAddPricingOption}\n                    disabled={!!formData.isFree}\n                    className=\"w-full flex items-center justify-center\"\n                  >\n                    <PlusCircle className=\"h-4 w-4 mr-2\" />\n                    Add Pricing Option\n                  </Button>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"transfers\">\n                <div className=\"space-y-4\">\n                  {/* Transfer Requirements Info */}\n                  {formData.requiresMandatoryTransfer && (\n                    <Alert>\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        This sightseeing requires mandatory transfer. Configure transfer options below.\n                        {formData.sicAvailable && \" SIC transfer pricing is managed above, these are for private transfers.\"}\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                  \n                  {formData.transferOptions?.map((transfer, index) => (\n                    <Card key={transfer.id} className=\"overflow-hidden\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch\n                              checked={transfer.isEnabled !== false}\n                              onCheckedChange={(checked) => handleTransferOptionChange(index, 'isEnabled', checked)}\n                              disabled={!!formData.isFree}\n                            />\n                            <Label className=\"font-medium\">Enabled</Label>\n                          </div>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\" \n                            onClick={() => handleRemoveTransferOption(index)}\n                          >\n                            <Trash className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                        \n                        <div className=\"grid gap-4 sm:grid-cols-2\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Vehicle Type</Label>\n                            <Select\n                              value={transfer.vehicleType}\n                              onValueChange={(value) => handleTransferOptionChange(index, 'vehicleType', value)}\n                              disabled={!transfer.isEnabled || !!formData.isFree}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select vehicle type\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {transportTypes && transportTypes.length > 0 ? (\n                                  transportTypes.map((type) => (\n                                    <SelectItem key={type.id} value={type.name}>\n                                      {type.name} ({type.category}) - {type.seatingCapacity || 'N/A'} seats\n                                    </SelectItem>\n                                  ))\n                                ) : (\n                                  <SelectItem value=\"Standard Vehicle\">Standard Vehicle</SelectItem>\n                                )}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Seating Capacity</Label>\n                            <Input\n                              placeholder=\"Enter capacity or auto-filled from vehicle type\"\n                              value={transfer.capacity || ''}\n                              onChange={(e) => handleTransferOptionChange(index, 'capacity', e.target.value)}\n                              disabled={!transfer.isEnabled || !!formData.isFree}\n                            />\n                            <p className=\"text-xs text-muted-foreground\">\n                              Capacity is automatically set based on selected vehicle type from Transport Management\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"grid gap-4 sm:grid-cols-2 mt-4\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter price in ${currencyCode}`}\n                              value={transfer.price || 0}\n                              onChange={(e) => handleTransferOptionChange(index, 'price', parseFloat(e.target.value) || 0)}\n                              disabled={!transfer.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Price Unit</Label>\n                            <Select\n                              value={transfer.priceUnit}\n                              onValueChange={(value) => handleTransferOptionChange(index, 'priceUnit', value)}\n                              disabled={!transfer.isEnabled || !!formData.isFree}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select price unit\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"Per Person\">Per Person</SelectItem>\n                                <SelectItem value=\"Per Vehicle\">Per Vehicle</SelectItem>\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-2 mt-4\">\n                          <Label className=\"text-sm\">Transfer Type</Label>\n                          <Select\n                            value={transfer.type || 'SIC'}\n                            onValueChange={(value) => handleTransferOptionChange(index, 'type', value)}\n                            disabled={!transfer.isEnabled || !!formData.isFree}\n                          >\n                            <SelectTrigger>\n                              <SelectValue placeholder=\"Select transfer type\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"SIC\">SIC (Shared)</SelectItem>\n                              <SelectItem value=\"Private\">Private</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n                        \n                        {/* Transfer logic info */}\n                        {formData.sicAvailable && transfer.type === 'SIC' && (\n                          <Alert className=\"mt-4\">\n                            <AlertDescription>\n                              SIC transfer pricing is managed above in the SIC pricing section. This option indicates SIC availability.\n                            </AlertDescription>\n                          </Alert>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))}\n                  \n                  <Button \n                    variant=\"outline\" \n                    onClick={handleAddTransferOption}\n                    disabled={!!formData.isFree}\n                    className=\"w-full flex items-center justify-center\"\n                  >\n                    <PlusCircle className=\"h-4 w-4 mr-2\" />\n                    Add Transfer Option\n                  </Button>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"packages\">\n                <div className=\"space-y-4\">\n                  {formData.packageOptions?.map((pkg, index) => (\n                    <Card key={pkg.id} className=\"overflow-hidden\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex justify-between items-center mb-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch\n                              checked={pkg.isEnabled !== false}\n                              onCheckedChange={(checked) => handlePackageOptionChange(index, 'isEnabled', checked)}\n                              disabled={!!formData.isFree}\n                            />\n                            <Label className=\"font-medium\">Enabled</Label>\n                          </div>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"sm\" \n                            onClick={() => handleRemovePackageOption(index)}\n                          >\n                            <Trash className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                        \n                        <div className=\"grid gap-4 sm:grid-cols-2 mb-4\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Package Name</Label>\n                            <Input\n                              placeholder=\"Enter package name\"\n                              value={pkg.name || ''}\n                              onChange={(e) => handlePackageOptionChange(index, 'name', e.target.value)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Package Type</Label>\n                            <Select\n                              value={pkg.type}\n                              onValueChange={(value) => handlePackageOptionChange(index, 'type', value)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select type\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {packageTypes.map((type) => (\n                                  <SelectItem key={type} value={type}>{type}</SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            \n                            {/* Custom Type Input */}\n                            {pkg.type === 'Custom' && showCustomPackageType[index] && (\n                              <Input\n                                placeholder=\"Enter custom package type\"\n                                value={pkg.customType || ''}\n                                onChange={(e) => handlePackageOptionChange(index, 'customType', e.target.value)}\n                                disabled={!pkg.isEnabled || !!formData.isFree}\n                                className=\"mt-2\"\n                              />\n                            )}\n                          </div>\n                        </div>\n                        \n                        {/* Transfer Options for Package */}\n                        <div className=\"grid gap-4 sm:grid-cols-2 mb-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch\n                              checked={!!pkg.transferIncluded}\n                              onCheckedChange={(checked) => handlePackageOptionChange(index, 'transferIncluded', checked)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            />\n                            <Label className=\"text-sm\">Transfer Included</Label>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Switch\n                              checked={!!pkg.requiresPrivateTransfer}\n                              onCheckedChange={(checked) => handlePackageOptionChange(index, 'requiresPrivateTransfer', checked)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            />\n                            <Label className=\"text-sm\">Requires Private Transfer</Label>\n                          </div>\n                        </div>\n                        \n                        <div className=\"space-y-2 mb-4\">\n                          <Label className=\"text-sm\">Description</Label>\n                          <Input\n                            placeholder=\"Enter package description\"\n                            value={pkg.description || ''}\n                            onChange={(e) => handlePackageOptionChange(index, 'description', e.target.value)}\n                            disabled={!pkg.isEnabled || !!formData.isFree}\n                          />\n                        </div>\n                        \n                        <div className=\"grid gap-4 sm:grid-cols-2\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Adult Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter adult price in ${currencyCode}`}\n                              value={pkg.adultPrice || 0}\n                              onChange={(e) => handlePackageOptionChange(index, 'adultPrice', parseFloat(e.target.value) || 0)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Child Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter child price in ${currencyCode}`}\n                              value={pkg.childPrice || 0}\n                              onChange={(e) => handlePackageOptionChange(index, 'childPrice', parseFloat(e.target.value) || 0)}\n                              disabled={!pkg.isEnabled || !!formData.isFree}\n                            />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                  \n                  <Button \n                    variant=\"outline\" \n                    onClick={handleAddPackageOption}\n                    disabled={!!formData.isFree}\n                    className=\"w-full flex items-center justify-center\"\n                  >\n                    <PlusCircle className=\"h-4 w-4 mr-2\" />\n                    Add Package Option\n                  </Button>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"group\">\n                <div className=\"space-y-4\">\n                  {formData.groupSizeOptions?.map((option, index) => (\n                    <Card key={option.id} className=\"overflow-hidden\">\n                      <CardContent className=\"p-4 space-y-4\">\n                        <div className=\"grid gap-4 sm:grid-cols-2\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Min People</Label>\n                            <Input\n                              type=\"number\"\n                              min={1}\n                              value={option.minPeople ?? 1}\n                              onChange={(e) =>\n                                handleGroupSizeOptionChange(index, 'minPeople', e.target.value)\n                              }\n                              disabled={!!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Max People</Label>\n                            <Input\n                              type=\"number\"\n                              min={option.minPeople ?? 1}\n                              value={option.maxPeople ?? (option.minPeople ?? 1)}\n                              onChange={(e) =>\n                                handleGroupSizeOptionChange(index, 'maxPeople', e.target.value)\n                              }\n                              disabled={!!formData.isFree}\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"grid gap-4 sm:grid-cols-2\">\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Adult Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter adult price in ${currencyCode}`}\n                              value={option.adultPrice || 0}\n                              onChange={(e) =>\n                                handleGroupSizeOptionChange(index, 'adultPrice', e.target.value)\n                              }\n                              disabled={!!formData.isFree}\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-sm\">Child Price ({currencySymbol})</Label>\n                            <Input\n                              type=\"number\"\n                              placeholder={`Enter child price in ${currencyCode}`}\n                              value={option.childPrice || 0}\n                              onChange={(e) =>\n                                handleGroupSizeOptionChange(index, 'childPrice', e.target.value)\n                              }\n                              disabled={!!formData.isFree}\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"flex justify-end\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleRemoveGroupSizeOption(index)}\n                            disabled={!!formData.isFree}\n                          >\n                            <Trash className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n\n                  <Button \n                    variant=\"outline\" \n                    onClick={handleAddGroupSizeOption}\n                    disabled={!!formData.isFree}\n                    className=\"w-full flex items-center justify-center\"\n                  >\n                    <PlusCircle className=\"h-4 w-4 mr-2\" />\n                    Add Group Size Option\n                  </Button>\n                </div>\n              </TabsContent>\n            </Tabs>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Add the pricing preview */}\n      <PricingPreview formData={formData} />\n    </div>\n  );\n};\n\nexport default PricingModule;\n","import React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { X, Plus } from 'lucide-react';\n\ninterface PoliciesInfoProps {\n  formData: Sightseeing;\n  handleFormChange: (field: string, value: any) => void;\n}\n\nconst PoliciesInfo: React.FC<PoliciesInfoProps> = ({\n  formData,\n  handleFormChange\n}) => {\n  // Local inputs for tag-style arrays\n  const [highlightInput, setHighlightInput] = useState('');\n  const [exclusionInput, setExclusionInput] = useState('');\n\n  const policies = formData.policies || { \n    highlights: [], \n    exclusions: [], \n    inclusions: [], \n    advisory: '',\n    cancellationPolicy: '',\n    refundPolicy: '',\n    confirmationPolicy: '',\n    termsConditions: ''\n  };\n  const highlights: string[] = Array.isArray(policies.highlights) ? policies.highlights : [];\n  const exclusions: string[] = Array.isArray(policies.exclusions) ? policies.exclusions : [];\n\n  const updatePolicies = (next: Partial<typeof policies>) => {\n    handleFormChange('policies', { ...policies, ...next });\n  };\n\n  const addHighlight = () => {\n    const value = highlightInput.trim();\n    if (!value) return;\n    updatePolicies({ highlights: [...highlights, value] });\n    setHighlightInput('');\n  };\n\n  const removeHighlight = (idx: number) => {\n    updatePolicies({ highlights: highlights.filter((_, i) => i !== idx) });\n  };\n\n  const addExclusion = () => {\n    const value = exclusionInput.trim();\n    if (!value) return;\n    updatePolicies({ exclusions: [...exclusions, value] });\n    setExclusionInput('');\n  };\n\n  const removeExclusion = (idx: number) => {\n    updatePolicies({ exclusions: exclusions.filter((_, i) => i !== idx) });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Other Inclusions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Inclusions & Information</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"otherInclusions\">Other Inclusions</Label>\n              <Textarea \n                id=\"otherInclusions\" \n                value={formData.otherInclusions || ''} \n                onChange={(e) => handleFormChange('otherInclusions', e.target.value)}\n                placeholder=\"Describe what else is included in the tour/sightseeing\"\n                rows={3}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"advisory\">Advisory</Label>\n              <Textarea \n                id=\"advisory\" \n                value={policies.advisory || ''} \n                onChange={(e) => updatePolicies({ advisory: e.target.value })}\n                placeholder=\"Important information that visitors should know before booking\"\n                rows={3}\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Policies */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Policies</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {/* Highlights (multi-input/tag-style) */}\n            <div className=\"space-y-2\">\n              <Label>Highlights</Label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {highlights.length === 0 ? (\n                  <span className=\"text-sm text-muted-foreground\">No highlights added</span>\n                ) : (\n                  highlights.map((item, idx) => (\n                    <Badge key={`highlight-${idx}`} variant=\"secondary\" className=\"flex items-center gap-1\">\n                      {item}\n                      <button type=\"button\" onClick={() => removeHighlight(idx)} className=\"ml-1 inline-flex\">\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </Badge>\n                  ))\n                )}\n              </div>\n              <div className=\"flex gap-2\">\n                <Input\n                  value={highlightInput}\n                  onChange={(e) => setHighlightInput(e.target.value)}\n                  placeholder=\"Type a highlight and press Enter\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter') {\n                      e.preventDefault();\n                      addHighlight();\n                    }\n                  }}\n                />\n                <Button type=\"button\" onClick={addHighlight} disabled={!highlightInput.trim()}>\n                  <Plus className=\"h-4 w-4 mr-1\" /> Add\n                </Button>\n              </div>\n            </div>\n\n            {/* Exclusions (multi-input/tag-style) */}\n            <div className=\"space-y-2\">\n              <Label>Exclusions</Label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {exclusions.length === 0 ? (\n                  <span className=\"text-sm text-muted-foreground\">No exclusions added</span>\n                ) : (\n                  exclusions.map((item, idx) => (\n                    <Badge key={`exclusion-${idx}`} variant=\"outline\" className=\"flex items-center gap-1\">\n                      {item}\n                      <button type=\"button\" onClick={() => removeExclusion(idx)} className=\"ml-1 inline-flex\">\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </Badge>\n                  ))\n                )}\n              </div>\n              <div className=\"flex gap-2\">\n                <Input\n                  value={exclusionInput}\n                  onChange={(e) => setExclusionInput(e.target.value)}\n                  placeholder=\"Type an exclusion and press Enter\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter') {\n                      e.preventDefault();\n                      addExclusion();\n                    }\n                  }}\n                />\n                <Button type=\"button\" variant=\"outline\" onClick={addExclusion} disabled={!exclusionInput.trim()}>\n                  <Plus className=\"h-4 w-4 mr-1\" /> Add\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"cancellationPolicy\">Cancellation Policy</Label>\n              <Textarea \n                id=\"cancellationPolicy\" \n                value={policies.cancellationPolicy || ''} \n                onChange={(e) => updatePolicies({ cancellationPolicy: e.target.value })}\n                placeholder=\"Details about cancellation deadlines and fees\"\n                rows={3}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"refundPolicy\">Refund Policy</Label>\n              <Textarea \n                id=\"refundPolicy\" \n                value={policies.refundPolicy || ''} \n                onChange={(e) => updatePolicies({ refundPolicy: e.target.value })}\n                placeholder=\"Information about when and how refunds are processed\"\n                rows={3}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmationPolicy\">Confirmation Policy</Label>\n              <Textarea \n                id=\"confirmationPolicy\" \n                value={policies.confirmationPolicy || ''} \n                onChange={(e) => updatePolicies({ confirmationPolicy: e.target.value })}\n                placeholder=\"Information about booking confirmation process\"\n                rows={3}\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"termsConditions\">Terms & Conditions</Label>\n              <Textarea \n                id=\"termsConditions\" \n                value={policies.termsConditions || ''} \n                onChange={(e) => updatePolicies({ termsConditions: e.target.value })}\n                placeholder=\"Additional terms and conditions\"\n                rows={4}\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n      \n      {/* Status */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Status</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center space-x-4\">\n            <Switch\n              checked={formData.status === 'active'}\n              onCheckedChange={(checked) => handleFormChange('status', checked ? 'active' : 'inactive')}\n              id=\"status\"\n            />\n            <Label htmlFor=\"status\" className=\"font-medium\">\n              {formData.status === 'active' ? 'Active' : 'Inactive'}\n            </Label>\n          </div>\n          <p className=\"text-muted-foreground text-sm mt-2\">\n            {formData.status === 'active'\n              ? 'This sightseeing will be visible to users and available for bookings.'\n              : 'This sightseeing will not be visible to users and unavailable for bookings.'}\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default PoliciesInfo;\n","\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport BasicInformation from './form-sections/BasicInformation';\nimport OperationalDetails from './form-sections/OperationalDetails';\nimport PricingModule from './form-sections/PricingModule';\nimport PoliciesInfo from './form-sections/PoliciesInfo';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { useRealTimeCountriesData } from '@/hooks/useRealTimeCountriesData';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle, CheckCircle2 } from 'lucide-react';\n\ninterface SightseeingFormProps {\n  formData: Sightseeing;\n  handleFormChange: (field: string, value: any) => void;\n  isEditMode: boolean;\n}\n\nconst SightseeingForm: React.FC<SightseeingFormProps> = ({\n  formData,\n  handleFormChange,\n  isEditMode\n}) => {\n  const [activeTab, setActiveTab] = useState('basic');\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\n  const { activeCountries } = useRealTimeCountriesData();\n  const [validationStatus, setValidationStatus] = useState({\n    basic: false,\n    operational: true, // Optional section\n    pricing: false,\n    policies: true, // Optional section\n  });\n\n  // Validate form sections\n  useEffect(() => {\n    // Basic information validation\n    const isBasicValid = !!formData.name && !!formData.country && !!formData.city;\n    \n    // Pricing validation\n    const isPricingValid = \n      formData.isFree || \n      (formData.price && (formData.price.adult > 0 || formData.price.child > 0)) || \n      formData.pricingOptions?.some(o => o.isEnabled) || \n      formData.transferOptions?.some(o => o.isEnabled && o.price > 0) ||\n      formData.packageOptions?.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0)) ||\n      formData.groupSizeOptions?.some(o => (o.adultPrice > 0 || o.childPrice > 0));\n    \n    setValidationStatus({\n      basic: isBasicValid,\n      operational: true, // Optional section\n      pricing: isPricingValid,\n      policies: true, // Optional section\n    });\n  }, [formData]);\n\n  // Helper to get validation status icon for tab\n  const getTabStatusIcon = (tabKey: string) => {\n    if (validationStatus[tabKey as keyof typeof validationStatus]) {\n      return <CheckCircle2 className=\"h-4 w-4 text-green-500 ml-2\" />;\n    }\n    return <AlertCircle className=\"h-4 w-4 text-red-500 ml-2\" />;\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>{isEditMode ? 'Edit' : 'Add'} Sightseeing</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid grid-cols-4 mb-4\">\n            <TabsTrigger value=\"basic\" className=\"flex items-center\">\n              Basic Information\n              {getTabStatusIcon('basic')}\n            </TabsTrigger>\n            <TabsTrigger value=\"operational\" className=\"flex items-center\">\n              Operational Details\n              {getTabStatusIcon('operational')}\n            </TabsTrigger>\n            <TabsTrigger value=\"pricing\" className=\"flex items-center\">\n              Pricing\n              {getTabStatusIcon('pricing')}\n            </TabsTrigger>\n            <TabsTrigger value=\"policies\" className=\"flex items-center\">\n              Policies & Info\n              {getTabStatusIcon('policies')}\n            </TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"basic\">\n            {!validationStatus.basic && (\n              <Alert variant=\"destructive\" className=\"mb-4\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  Please fill in all required fields: Country, City, and Sightseeing Name.\n                </AlertDescription>\n              </Alert>\n            )}\n            \n            <BasicInformation\n              formData={formData}\n              handleFormChange={handleFormChange}\n              countries={activeCountries.map(c => c.name)}\n              cities={[]} // This will be handled internally in the BasicInformation component\n            />\n          </TabsContent>\n          \n          <TabsContent value=\"operational\">\n            <OperationalDetails\n              formData={formData}\n              handleFormChange={handleFormChange}\n            />\n          </TabsContent>\n          \n          <TabsContent value=\"pricing\">\n            {!validationStatus.pricing && (\n              <Alert variant=\"destructive\" className=\"mb-4\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  Please either mark the sightseeing as free or add at least one pricing option with a price greater than zero.\n                </AlertDescription>\n              </Alert>\n            )}\n            \n            <PricingModule\n              formData={formData}\n              handleFormChange={handleFormChange}\n            />\n          </TabsContent>\n          \n          <TabsContent value=\"policies\">\n            <PoliciesInfo\n              formData={formData}\n              handleFormChange={handleFormChange}\n            />\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SightseeingForm;\n","\nimport { useFormState } from './form/useFormState';\nimport { useFormHandlers } from './form/useFormHandlers';\nimport { useFormValidation } from './form/useFormValidation';\nimport { useFormSubmit } from './form/useFormSubmit';\nimport { useEditModeEffect } from './form/useEditModeEffect';\nimport { useCurrencyUpdate } from './form/useCurrencyUpdate';\n\nexport const useSightseeingForm = (sightseeingId?: number) => {\n  // Get form state\n  const { formData, setFormData } = useFormState();\n  \n  // Form handlers\n  const { handleFormChange } = useFormHandlers({ setFormData });\n  \n  // Form validation\n  const { isFormValid } = useFormValidation({ formData });\n  \n  // Form submission\n  const { handleSubmit } = useFormSubmit({ \n    formData, \n    isFormValid, \n    sightseeingId \n  });\n  \n  // Handle edit mode\n  useEditModeEffect({\n    sightseeingId,\n    setFormData\n  });\n\n  // Update currency when country changes\n  useCurrencyUpdate({ formData, setFormData });\n  \n  return {\n    formData,\n    handleFormChange,\n    handleSubmit,\n    isFormValid\n  };\n};\n","import { useState } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\n\nexport const useFormState = () => {\n  const emptyForm: Sightseeing = {\n    id: 0,\n    name: '',\n    description: '',\n    country: '',\n    city: '',\n    status: 'active',\n    lastUpdated: new Date().toISOString(),\n    createdAt: new Date().toISOString(),\n    duration: '',\n    transferTypes: ['SIC', 'Private'],\n    transferOptions: [\n      {\n        id: Date.now(),\n        vehicleType: 'Standard Vehicle',\n        capacity: '1-4',\n        price: 0,\n        priceUnit: 'Per Person',\n        isEnabled: true,\n        type: 'SIC'\n      }\n    ],\n    activities: [],\n    daysOfWeek: [],\n    price: { adult: 0, child: 0 },\n    isFree: false,\n    images: [],\n    pricingOptions: [\n      {\n        id: Date.now() + 100,\n        type: 'Ticket Only',\n        name: 'Standard Ticket',\n        adultPrice: 0,\n        childPrice: 0,\n        isEnabled: true\n      }\n    ],\n    packageOptions: [],\n    groupSizeOptions: [],\n    policies: {\n      highlights: [],\n      inclusions: [],\n      exclusions: [],\n      advisory: '',\n      refundPolicy: '',\n      termsConditions: '',\n      cancellationPolicy: '',\n      confirmationPolicy: ''\n    },\n    // SIC availability management\n    sicAvailable: false,\n    sicPricing: { adult: 0, child: 0 },\n    requiresMandatoryTransfer: false,\n    transferMandatory: false\n  };\n  \n  const [formData, setFormData] = useState<Sightseeing>(emptyForm);\n  \n  return { formData, setFormData };\n};","import { Sightseeing } from '@/types/sightseeing';\n\nexport interface FormHandlersProps {\n  setFormData: React.Dispatch<React.SetStateAction<Sightseeing>>;\n}\n\nexport const useFormHandlers = ({ setFormData }: FormHandlersProps) => {\n  const handleFormChange = (field: string, value: any) => {\n    setFormData(prev => {\n      const updated = { ...prev, [field]: value, lastUpdated: new Date().toISOString() };\n      \n      // If updating pricing options, ensure proper structure\n      if (field === 'pricingOptions' && Array.isArray(value)) {\n        updated.pricingOptions = value.map(option => ({\n          ...option,\n          id: option.id || Date.now() + Math.random(),\n          name: option.name || option.type || 'Standard',\n          adultPrice: Number(option.adultPrice) || 0,\n          childPrice: Number(option.childPrice) || 0,\n          isEnabled: option.isEnabled !== undefined ? option.isEnabled : true\n        }));\n      }\n\n      // If updating package options, ensure proper structure\n      if (field === 'packageOptions' && Array.isArray(value)) {\n        updated.packageOptions = value.map(option => ({\n          ...option,\n          id: option.id || Date.now() + Math.random(),\n          adultPrice: Number(option.adultPrice) || 0,\n          childPrice: Number(option.childPrice) || 0,\n          isEnabled: option.isEnabled !== undefined ? option.isEnabled : true\n        }));\n      }\n\n      // If updating group size options, ensure proper structure\n      if (field === 'groupSizeOptions' && Array.isArray(value)) {\n        updated.groupSizeOptions = value.map(option => ({\n          ...option,\n          id: option.id || Date.now() + Math.random(),\n          adultPrice: Number(option.adultPrice) || 0,\n          childPrice: Number(option.childPrice) || 0\n        }));\n      }\n\n      // Handle SIC pricing updates\n      if (field === 'sicPricing' && value) {\n        updated.sicPricing = {\n          adult: Number(value.adult) || 0,\n          child: Number(value.child) || 0\n        };\n      }\n\n      // Handle SIC availability logic\n      if (field === 'sicAvailable') {\n        if (value && !updated.sicPricing) {\n          updated.sicPricing = { adult: 0, child: 0 };\n        }\n      }\n\n      // Auto-generate Google Map link when latitude/longitude are set\n      if (field === 'latitude' || field === 'longitude') {\n        const lat = field === 'latitude' ? value : updated.latitude;\n        const lon = field === 'longitude' ? value : updated.longitude;\n        if (typeof lat === 'number' && typeof lon === 'number') {\n          const autoLink = `https://www.google.com/maps?q=${lat},${lon}`;\n          updated.googleMapLink = autoLink;\n        }\n      }\n\n      return updated;\n    });\n  };\n  \n  return { handleFormChange };\n};","import { useState, useEffect } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\n\nexport interface FormValidationProps {\n  formData: Sightseeing;\n}\n\nexport const useFormValidation = ({ formData }: FormValidationProps) => {\n  const [isFormValid, setIsFormValid] = useState(false);\n  \n  useEffect(() => {\n    // Basic required fields validation\n    const isBasicValid = !!formData.name && !!formData.country && !!formData.city;\n    // Operational required fields\n    const hasActivities = Array.isArray(formData.activities) && formData.activities.length > 0;\n    const hasPickupTime = !!(formData.pickupTime && formData.pickupTime.trim().length > 0);\n    \n    // Pricing validation - check all possible pricing sources including SIC\n    const hasPricing = \n      (formData.isFree) || \n      (formData.price && (formData.price.adult > 0 || formData.price.child > 0)) || \n      (formData.sicAvailable && formData.sicPricing && (formData.sicPricing.adult > 0 || formData.sicPricing.child > 0)) ||\n      (formData.pricingOptions && formData.pricingOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) || \n      (formData.transferOptions && formData.transferOptions.some(o => o.isEnabled && o.price > 0)) ||\n      (formData.packageOptions && formData.packageOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n      (formData.groupSizeOptions && formData.groupSizeOptions.some(o => (o.adultPrice > 0 || o.childPrice > 0)));\n    \n    setIsFormValid(isBasicValid && hasActivities && hasPickupTime && hasPricing);\n  }, [\n    formData.name,\n    formData.country,\n    formData.city,\n    formData.activities,\n    formData.pickupTime,\n    formData.isFree,\n    formData.price,\n    formData.sicAvailable,\n    formData.sicPricing,\n    formData.pricingOptions,\n    formData.transferOptions,\n    formData.packageOptions,\n    formData.groupSizeOptions\n  ]);\n  \n  return { isFormValid };\n};","import { useNavigate } from 'react-router-dom';\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Sightseeing } from '@/types/sightseeing';\nimport { updateSightseeing as updateSightseeingDb, createSightseeing } from '../../services/sightseeingService';\n\nexport interface FormSubmitProps {\n  formData: Sightseeing;\n  isFormValid: boolean;\n  sightseeingId?: number;\n}\n\nexport const useFormSubmit = ({ formData, isFormValid, sightseeingId }: FormSubmitProps) => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  \n  const handleSubmit = async () => {\n    // Minimal save support: require only basic fields; warn for incomplete data\n    const isBasicValid = !!formData.name && !!formData.country && !!formData.city;\n    if (!isFormValid && !isBasicValid) {\n      toast({\n        title: \"Validation Error\",\n        description: \"Please fill basic fields: Name, Country, and City.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    // Ensure imageUrl is synced with primary image\n    let updatedFormData = { ...formData };\n    if (formData.images && formData.images.length > 0) {\n      const primaryImage = formData.images.find(img => img.isPrimary) || formData.images[0];\n      updatedFormData = {\n        ...updatedFormData,\n        imageUrl: primaryImage.url\n      };\n    }\n\n    // Ensure transferTypes is updated based on the transfer options\n    const transferTypes = new Set<string>();\n    if (updatedFormData.transferOptions) {\n      updatedFormData.transferOptions.forEach(option => {\n        if (option.isEnabled && option.type) {\n          transferTypes.add(option.type);\n        }\n      });\n    }\n    updatedFormData.transferTypes = Array.from(transferTypes);\n\n    // Normalize arrays and strings for Supabase\n    updatedFormData.activities = Array.isArray(updatedFormData.activities) ? updatedFormData.activities : [];\n    updatedFormData.daysOfWeek = Array.isArray(updatedFormData.daysOfWeek) ? updatedFormData.daysOfWeek : [];\n    updatedFormData.pickupTime = (updatedFormData.pickupTime || '').trim() || updatedFormData.pickupTime;\n\n    // Ensure all pricing data is properly structured before saving\n    if (updatedFormData.pricingOptions) {\n      updatedFormData.pricingOptions = updatedFormData.pricingOptions.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        type: option.type || 'Standard',\n        name: option.name || option.type || 'Standard',\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0,\n        isEnabled: option.isEnabled !== undefined ? option.isEnabled : true,\n        description: option.description || ''\n      }));\n    }\n\n    if (updatedFormData.packageOptions) {\n      updatedFormData.packageOptions = updatedFormData.packageOptions.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0,\n        isEnabled: option.isEnabled !== undefined ? option.isEnabled : true\n      }));\n    }\n\n    if (updatedFormData.groupSizeOptions) {\n      updatedFormData.groupSizeOptions = updatedFormData.groupSizeOptions.map(option => ({\n        ...option,\n        id: option.id || Date.now() + Math.random(),\n        adultPrice: Number(option.adultPrice) || 0,\n        childPrice: Number(option.childPrice) || 0\n      }));\n    }\n\n    // Structure policies JSONB object with all 8 required fields\n    const currentPolicies = updatedFormData.policies || ({} as any);\n    const inclusionsFromText = (updatedFormData.otherInclusions || '')\n      .split('\\n')\n      .map(s => s.trim())\n      .filter(Boolean);\n\n    updatedFormData.policies = {\n      // Arrays: ensure they are always arrays\n      highlights: Array.isArray(currentPolicies.highlights) ? currentPolicies.highlights : [],\n      exclusions: Array.isArray(currentPolicies.exclusions) ? currentPolicies.exclusions : [],\n      inclusions: inclusionsFromText.length > 0\n        ? inclusionsFromText\n        : (Array.isArray(currentPolicies.inclusions) ? currentPolicies.inclusions : []),\n      // Strings: ensure all 5 text fields are included\n      advisory: (currentPolicies.advisory || '').toString().trim(),\n      refundPolicy: (currentPolicies.refundPolicy || '').toString().trim(),\n      confirmationPolicy: (currentPolicies.confirmationPolicy || '').toString().trim(),\n      termsConditions: (currentPolicies.termsConditions || '').toString().trim(),\n      cancellationPolicy: (currentPolicies.cancellationPolicy || '').toString().trim()\n    } as any;\n    \n    try {\n      // If pricing is missing, ensure status is inactive for minimal save\n      const hasPricing = \n        (updatedFormData.isFree) || \n        (updatedFormData.price && (updatedFormData.price.adult > 0 || updatedFormData.price.child > 0)) || \n        (updatedFormData.sicAvailable && updatedFormData.sicPricing && (updatedFormData.sicPricing.adult > 0 || updatedFormData.sicPricing.child > 0)) ||\n        (updatedFormData.pricingOptions && updatedFormData.pricingOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) || \n        (updatedFormData.transferOptions && updatedFormData.transferOptions.some(o => o.isEnabled && o.price > 0)) ||\n        (updatedFormData.packageOptions && updatedFormData.packageOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n        (updatedFormData.groupSizeOptions && updatedFormData.groupSizeOptions.some(o => (o.adultPrice > 0 || o.childPrice > 0)));\n      if (!hasPricing) {\n        updatedFormData.status = 'inactive';\n      }\n\n      if (sightseeingId) {\n        // Update existing record in Supabase\n        await updateSightseeingDb(updatedFormData);\n      } else {\n        // Create new record in Supabase\n        await createSightseeing(updatedFormData);\n      }\n\n      toast({\n        title: sightseeingId ? \"Sightseeing Updated\" : \"New Sightseeing Saved\",\n        description: !isFormValid\n          ? `\"${formData.name || 'Untitled'}\" has been saved with minimum information${!hasPricing ? ' as Inactive' : ''}.`\n          : `\"${formData.name}\" has been ${sightseeingId ? \"updated\" : \"added\"} successfully.`,\n        variant: \"default\"\n      });\n\n      // Notify other components and return to list\n      window.dispatchEvent(new CustomEvent('sightseeingUpdated'));\n      navigate('/inventory/sightseeing');\n    } catch (error) {\n      console.error('Error saving sightseeing:', error);\n      toast({\n        title: \"Error\",\n        description: \"There was an error saving the sightseeing data. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  return { handleSubmit };\n};","import { useEffect } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { getSightseeingById } from '../../services/sightseeingService';\n\nexport interface EditModeEffectProps {\n  sightseeingId?: number;\n  setFormData: React.Dispatch<React.SetStateAction<Sightseeing>>;\n}\n\nexport const useEditModeEffect = ({ sightseeingId, setFormData }: EditModeEffectProps) => {\n  useEffect(() => {\n    const loadExisting = async () => {\n      if (!sightseeingId) return;\n      const existingSightseeing = await getSightseeingById(sightseeingId);\n      if (existingSightseeing) {\n        // Ensure we have an images array\n        const preparedData = { \n          ...existingSightseeing,\n          images: existingSightseeing.images || [],\n          policies: existingSightseeing.policies || {\n            highlights: [],\n            inclusions: [],\n            exclusions: [],\n            advisory: '',\n            refundPolicy: '',\n            termsConditions: '',\n            cancellationPolicy: '',\n            confirmationPolicy: ''\n          }\n        };\n        \n        // If there's an imageUrl but no images array, create one\n        if (existingSightseeing.imageUrl && (!existingSightseeing.images || existingSightseeing.images.length === 0)) {\n          preparedData.images = [\n            {\n              id: 1,\n              url: existingSightseeing.imageUrl,\n              isPrimary: true\n            }\n          ];\n        }\n\n        // Initialize transferOptions if they don't exist\n        if (!preparedData.transferOptions || preparedData.transferOptions.length === 0) {\n          preparedData.transferOptions = [\n            {\n              id: Date.now(),\n              vehicleType: 'Standard Vehicle',\n              capacity: '1-4',\n              price: 0,\n              priceUnit: 'Per Person',\n              isEnabled: true,\n              type: 'SIC'\n            }\n          ];\n          preparedData.transferTypes = preparedData.transferTypes || ['SIC', 'Private'];\n        }\n\n        // Ensure pricing options have proper structure\n        if (!preparedData.pricingOptions || preparedData.pricingOptions.length === 0) {\n          preparedData.pricingOptions = [\n            {\n              id: Date.now() + 100,\n              type: 'Ticket Only',\n              name: 'Standard Ticket',\n              adultPrice: preparedData.price?.adult || 0,\n              childPrice: preparedData.price?.child || 0,\n              isEnabled: true\n            }\n          ];\n        }\n\n        // Ensure package options are initialized\n        if (!preparedData.packageOptions) {\n          preparedData.packageOptions = [];\n        }\n\n        // Ensure group size options are initialized\n        if (!preparedData.groupSizeOptions) {\n          preparedData.groupSizeOptions = [];\n        }\n        \n        setFormData(preparedData);\n      }\n    };\n\n    loadExisting();\n  }, [sightseeingId, setFormData]);\n};","\nimport { useEffect } from 'react';\nimport { Sightseeing } from '@/types/sightseeing';\nimport { useSightseeingCurrency } from '@/hooks/useSightseeingCurrency';\n\nexport interface CurrencyUpdateProps {\n  formData: Sightseeing;\n  setFormData: React.Dispatch<React.SetStateAction<Sightseeing>>;\n}\n\nexport const useCurrencyUpdate = ({ formData, setFormData }: CurrencyUpdateProps) => {\n  const { currencyInfo, loading } = useSightseeingCurrency(formData.country);\n\n  useEffect(() => {\n    if (currencyInfo && formData.country && !loading) {\n      console.log('Sightseeing: Updating currency for country:', formData.country);\n      console.log('Sightseeing: Currency info:', currencyInfo);\n      \n      setFormData(prev => ({\n        ...prev,\n        currency: currencyInfo.currency,\n        currencySymbol: currencyInfo.symbol,\n        pricing_currency: currencyInfo.currency,\n        pricing_currency_symbol: currencyInfo.symbol\n      }));\n      \n      console.log('Sightseeing: Updated currency to:', currencyInfo);\n    }\n  }, [currencyInfo, formData.country, loading, setFormData]);\n};\n","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Save, AlertCircle } from 'lucide-react';\nimport SightseeingForm from './components/SightseeingForm';\nimport { useSightseeingForm } from './hooks/useSightseeingForm';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\nconst AddSightseeing: React.FC = () => {\n  const navigate = useNavigate();\n  const { formData, handleFormChange, handleSubmit, isFormValid } = useSightseeingForm();\n\n  // Compute minimal validation and pricing presence for UI behavior\n  const isBasicValid = !!formData.name && !!formData.country && !!formData.city;\n  const hasPricing = \n    (formData.isFree) || \n    (formData.price && (formData.price.adult > 0 || formData.price.child > 0)) || \n    (formData.sicAvailable && formData.sicPricing && (formData.sicPricing.adult > 0 || formData.sicPricing.child > 0)) ||\n    (formData.pricingOptions && formData.pricingOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) || \n    (formData.transferOptions && formData.transferOptions.some(o => o.isEnabled && o.price > 0)) ||\n    (formData.packageOptions && formData.packageOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n    (formData.groupSizeOptions && formData.groupSizeOptions.some(o => (o.adultPrice > 0 || o.childPrice > 0)));\n\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-6 px-4 sm:px-6\">\n        <div className=\"flex items-center mb-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => navigate('/inventory/sightseeing')}\n            className=\"mr-4\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Button>\n          <h1 className=\"text-2xl font-bold flex-grow\">Add Sightseeing</h1>\n          {/* Save status selection: Active/Inactive */}\n          <div className=\"flex items-center gap-2 mr-3\">\n            <span className=\"text-sm text-muted-foreground\">Save as:</span>\n            <Button\n              variant={formData.status === 'active' ? 'default' : 'secondary'}\n              onClick={() => handleFormChange('status', 'active')}\n              disabled={!hasPricing}\n              aria-pressed={formData.status === 'active'}\n            >\n              Active\n            </Button>\n            <Button\n              variant={formData.status === 'inactive' ? 'default' : 'secondary'}\n              onClick={() => handleFormChange('status', 'inactive')}\n              aria-pressed={formData.status === 'inactive'}\n            >\n              Inactive\n            </Button>\n          </div>\n          <Button \n            onClick={handleSubmit} \n            disabled={!isBasicValid}\n            className=\"flex items-center gap-2\"\n          >\n            <Save className=\"h-4 w-4\" />\n            Save\n          </Button>\n        </div>\n\n        {/* Validation summary before Save controls */}\n        {!isFormValid && (\n          <Alert variant=\"destructive\" className=\"mb-6\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              You can save with minimum information, but the following items need attention:\n              {(!formData.activities || formData.activities.length === 0) && ' Activities'}\n              {(!formData.pickupTime || !formData.pickupTime.trim()) && ', Pick-up Time'}\n              {!hasPricing && ', Pricing'}\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <SightseeingForm\n          formData={formData}\n          handleFormChange={handleFormChange}\n          isEditMode={false}\n        />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default AddSightseeing;\n","\nimport React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Save, AlertCircle } from 'lucide-react';\nimport SightseeingForm from './components/SightseeingForm';\nimport { useSightseeingForm } from './hooks/useSightseeingForm';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\nconst EditSightseeing: React.FC = () => {\n  const navigate = useNavigate();\n  const { id } = useParams<{ id: string }>();\n  \n  const sightseeingId = id ? parseInt(id) : undefined;\n  const { formData, handleFormChange, handleSubmit, isFormValid } = useSightseeingForm(sightseeingId);\n\n  // Minimal validation and pricing presence for Edit behavior (match Add page)\n  const isBasicValid = !!formData.name && !!formData.country && !!formData.city;\n  const hasPricing =\n    (formData.isFree) ||\n    (formData.price && (formData.price.adult > 0 || formData.price.child > 0)) ||\n    (formData.sicAvailable && formData.sicPricing && (formData.sicPricing.adult > 0 || formData.sicPricing.child > 0)) ||\n    (formData.pricingOptions && formData.pricingOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n    (formData.transferOptions && formData.transferOptions.some(o => o.isEnabled && o.price > 0)) ||\n    (formData.packageOptions && formData.packageOptions.some(o => o.isEnabled && (o.adultPrice > 0 || o.childPrice > 0))) ||\n    (formData.groupSizeOptions && formData.groupSizeOptions.some(o => (o.adultPrice > 0 || o.childPrice > 0)));\n\n  return (\n    <PageLayout>\n      <div className=\"container mx-auto py-6 px-4 sm:px-6\">\n        <div className=\"flex items-center mb-6\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => navigate('/inventory/sightseeing')}\n            className=\"mr-4\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Button>\n          <h1 className=\"text-2xl font-bold flex-grow\">Edit Sightseeing</h1>\n          <Button \n            onClick={handleSubmit} \n            disabled={!isBasicValid}\n            className=\"flex items-center gap-2\"\n          >\n            <Save className=\"h-4 w-4\" />\n            Save Changes\n          </Button>\n        </div>\n\n        {/* Validation summary before Save controls (allow minimal save) */}\n        {!isFormValid && (\n          <Alert variant=\"destructive\" className=\"mb-6\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              You can save with minimum information, but the following items need attention:\n              {(!formData.activities || formData.activities.length === 0) && ' Activities'}\n              {(!formData.pickupTime || !formData.pickupTime.trim()) && ', Pick-up Time'}\n              {!hasPricing && ', Pricing'}\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <SightseeingForm\n          formData={formData}\n          handleFormChange={handleFormChange}\n          isEditMode={true}\n        />\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default EditSightseeing;\n","\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { ArrowLeft, Calendar, MapPin, Plus, CheckCircle, Clock, DollarSign, FileText, Save, Eye } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { TourPackage } from '@/types/package';\nimport PackageBasicInfo from '@/components/inventory/packages/PackageBasicInfo';\nimport ItineraryBuilder from '@/components/inventory/packages/ItineraryBuilder';\nimport CostPricing from '@/components/inventory/packages/CostPricing';\nimport TermsConditions from '@/components/inventory/packages/TermsConditions';\nimport { tourPackageService } from '@/integrations/supabase/services/tourPackageService';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\nconst CreatePackage: React.FC = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState('basic-info');\n  \n  // Package state with initial values\n  const [packageData, setPackageData] = useState<Partial<TourPackage>>({\n    name: '',\n    minPax: 2,\n    days: 1,\n    nights: 0,\n    isFixedDeparture: false,\n    totalSeats: 0,\n    startCity: '',\n    endCity: '',\n    destinations: [],\n    packageType: 'domestic',\n    themes: [],\n    banners: [],\n    itinerary: [],\n    baseCost: 0,\n    markup: 15,\n    finalPrice: 0,\n    pricePerPerson: 0,\n    currency: 'INR',\n    inclusions: '',\n    exclusions: '',\n    cancellationPolicy: '',\n    paymentPolicy: '',\n    status: 'draft'\n  });\n\n  // Calculate completion percentage for progress indicator\n  const getCompletionPercentage = () => {\n    let completed = 0;\n    let total = 4;\n    \n    // Basic Info checks\n    if (packageData.name && packageData.destinations && packageData.destinations.length > 0) {\n      completed++;\n    }\n    \n    // Itinerary checks\n    if (packageData.itinerary && packageData.itinerary.length > 0) {\n      completed++;\n    }\n    \n    // Pricing checks\n    if (packageData.baseCost > 0 && packageData.finalPrice > 0) {\n      completed++;\n    }\n    \n    // Terms checks\n    if (packageData.inclusions || packageData.exclusions) {\n      completed++;\n    }\n    \n    return Math.round((completed / total) * 100);\n  };\n\n  // Validation for each step\n  const getStepValidation = (step: string) => {\n    switch (step) {\n      case 'basic-info':\n        return packageData.name && packageData.destinations && packageData.destinations.length > 0;\n      case 'itinerary':\n        return packageData.itinerary && packageData.itinerary.length > 0;\n      case 'pricing':\n        return packageData.baseCost > 0 && packageData.finalPrice > 0;\n      case 'terms':\n        return true; // Terms are optional\n      default:\n        return false;\n    }\n  };\n  \n  // Handle form submission\n  const handleSubmit = async (published: boolean = false) => {\n    if (!packageData.name) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please provide a package name.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('basic-info');\n      return;\n    }\n    \n    if (!packageData.destinations || packageData.destinations.length === 0) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please add at least one destination.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('basic-info');\n      return;\n    }\n    \n    if (!packageData.itinerary || packageData.itinerary.length === 0) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please create an itinerary.\",\n        variant: \"destructive\"\n      });\n      setActiveTab('itinerary');\n      return;\n    }\n    \n    try {\n      const created = await tourPackageService.createFromUiPackage({\n        ...packageData,\n        status: published ? 'published' : 'draft',\n        createdAt: new Date().toISOString(),\n      });\n      toast({\n        title: published ? 'Package published' : 'Package saved as draft',\n        description: `${created.name} has been ${published ? 'published' : 'saved as draft'} successfully.`,\n      });\n      navigate('/inventory/packages');\n    } catch (error: any) {\n      toast({\n        title: 'Save failed',\n        description: error?.message ?? 'An error occurred while saving the package.',\n        variant: 'destructive',\n      });\n    }\n  };\n  \n  // Handle form input changes\n  const updatePackageData = (updates: Partial<TourPackage>) => {\n    setPackageData(prev => ({\n      ...prev,\n      ...updates\n    }));\n  };\n  \n  // Handle navigation between tabs\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n  };\n  \n  // Navigation to previous section\n  const goToPrevious = () => {\n    const tabs = ['basic-info', 'itinerary', 'pricing', 'terms'];\n    const currentIndex = tabs.indexOf(activeTab);\n    if (currentIndex > 0) {\n      setActiveTab(tabs[currentIndex - 1]);\n    }\n  };\n  \n  // Navigation to next section\n  const goToNext = () => {\n    const tabs = ['basic-info', 'itinerary', 'pricing', 'terms'];\n    const currentIndex = tabs.indexOf(activeTab);\n    if (currentIndex < tabs.length - 1) {\n      setActiveTab(tabs[currentIndex + 1]);\n    }\n  };\n\n  const tabsConfig = [\n    {\n      id: 'basic-info',\n      label: 'Basic Info',\n      icon: MapPin,\n      description: 'Package details and destinations'\n    },\n    {\n      id: 'itinerary',\n      label: 'Itinerary',\n      icon: Calendar,\n      description: 'Day-by-day activities'\n    },\n    {\n      id: 'pricing',\n      label: 'Pricing',\n      icon: DollarSign,\n      description: 'Cost and pricing details'\n    },\n    {\n      id: 'terms',\n      label: 'Terms',\n      icon: FileText,\n      description: 'Policies and conditions'\n    }\n  ];\n  \n  return (\n    <PageLayout>\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900\">\n        <div className=\"p-6 max-w-7xl mx-auto\">\n          {/* Header Section */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8\">\n            <div className=\"flex items-center gap-4 mb-6\">\n              <Button \n                variant=\"ghost\" \n                size=\"icon\"\n                onClick={() => navigate('/inventory/packages')}\n                className=\"h-10 w-10 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700\"\n              >\n                <ArrowLeft className=\"h-5 w-5\" />\n              </Button>\n              <div className=\"flex-1\">\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n                  Create New Tour Package\n                </h1>\n                <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n                  Build a comprehensive tour package with detailed itinerary and pricing\n                </p>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900 dark:text-blue-300\">\n                  {getCompletionPercentage()}% Complete\n                </Badge>\n                <div className=\"w-32\">\n                  <Progress value={getCompletionPercentage()} className=\"h-2\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tabs Navigation */}\n          <Tabs value={activeTab} onValueChange={handleTabChange} className=\"space-y-6\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n              <TabsList className=\"grid grid-cols-4 w-full bg-gray-50 dark:bg-gray-700 rounded-lg p-1 h-auto\">\n                {tabsConfig.map((tab) => {\n                  const Icon = tab.icon;\n                  const isCompleted = getStepValidation(tab.id);\n                  const isActive = activeTab === tab.id;\n                  \n                  return (\n                    <TabsTrigger \n                      key={tab.id}\n                      value={tab.id} \n                      className=\"flex flex-col gap-2 p-4 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 rounded-md transition-all duration-200 h-auto\"\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <div className={`p-1.5 rounded-lg ${isActive ? 'bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300' : 'bg-gray-100 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}`}>\n                          <Icon className=\"h-4 w-4\" />\n                        </div>\n                        {isCompleted && (\n                          <CheckCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n                        )}\n                      </div>\n                      <div className=\"text-center\">\n                        <div className=\"font-medium text-sm\">{tab.label}</div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:block\">\n                          {tab.description}\n                        </div>\n                      </div>\n                    </TabsTrigger>\n                  );\n                })}\n              </TabsList>\n            </div>\n            \n            {/* Tab Content */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700\">\n              <TabsContent value=\"basic-info\" className=\"mt-0 p-6\">\n                <div className=\"mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Package Information</h2>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Enter the basic details for your tour package</p>\n                </div>\n                <PackageBasicInfo\n                  packageData={packageData}\n                  updatePackageData={updatePackageData}\n                />\n                <div className=\"flex justify-end mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                  <Button \n                    onClick={goToNext}\n                    className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6\"\n                  >\n                    Continue to Itinerary\n                    <Calendar className=\"h-4 w-4 ml-2\" />\n                  </Button>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"itinerary\" className=\"mt-0 p-6\">\n                <div className=\"mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Itinerary Builder</h2>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Create a detailed day-by-day itinerary for your package</p>\n                </div>\n                <ItineraryBuilder\n                  packageData={packageData}\n                  updatePackageData={updatePackageData}\n                />\n                <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                  <Button variant=\"outline\" onClick={goToPrevious} className=\"px-6\">\n                    <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                    Back to Basic Info\n                  </Button>\n                  <Button \n                    onClick={goToNext}\n                    className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6\"\n                  >\n                    Continue to Pricing\n                    <DollarSign className=\"h-4 w-4 ml-2\" />\n                  </Button>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"pricing\" className=\"mt-0 p-6\">\n                <div className=\"mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Cost & Pricing</h2>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Set the base cost, markup, and final pricing for your package</p>\n                </div>\n                <CostPricing\n                  packageData={packageData}\n                  updatePackageData={updatePackageData}\n                />\n                <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                  <Button variant=\"outline\" onClick={goToPrevious} className=\"px-6\">\n                    <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                    Back to Itinerary\n                  </Button>\n                  <Button \n                    onClick={goToNext}\n                    className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6\"\n                  >\n                    Continue to Terms\n                    <FileText className=\"h-4 w-4 ml-2\" />\n                  </Button>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"terms\" className=\"mt-0 p-6\">\n                <div className=\"mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">Terms & Conditions</h2>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Define inclusions, exclusions, and policies for your package</p>\n                </div>\n                <TermsConditions\n                  packageData={packageData}\n                  updatePackageData={updatePackageData}\n                />\n                <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                  <Button variant=\"outline\" onClick={goToPrevious} className=\"px-6\">\n                    <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                    Back to Pricing\n                  </Button>\n                  <div className=\"flex gap-3\">\n                    <Button \n                      variant=\"outline\" \n                      onClick={() => handleSubmit(false)}\n                      className=\"px-6 border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700\"\n                    >\n                      <Save className=\"h-4 w-4 mr-2\" />\n                      Save as Draft\n                    </Button>\n                    <Button \n                      onClick={() => handleSubmit(true)}\n                      className=\"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-6\"\n                    >\n                      <Eye className=\"h-4 w-4 mr-2\" />\n                      Publish Package\n                    </Button>\n                  </div>\n                </div>\n              </TabsContent>\n            </div>\n          </Tabs>\n\n          {/* Quick Actions Sidebar */}\n          <div className=\"fixed bottom-6 right-6 z-10\">\n            <Card className=\"shadow-lg border-0 bg-white/90 backdrop-blur-sm dark:bg-gray-800/90\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex flex-col gap-2\">\n                  <Button \n                    size=\"sm\" \n                    variant=\"outline\" \n                    onClick={() => handleSubmit(false)}\n                    className=\"text-xs\"\n                  >\n                    <Save className=\"h-3 w-3 mr-1\" />\n                    Quick Save\n                  </Button>\n                  <div className=\"text-xs text-gray-500 text-center\">\n                    {getCompletionPercentage()}% done\n                  </div>\n                  <Progress value={getCompletionPercentage()} className=\"h-1\" />\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default CreatePackage;\n","\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport PageLayout from '@/components/layout/PageLayout';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { ArrowLeft, Calendar, Clock, Globe, MapPin, Users, Utensils, Car, Hotel, Camera, FileText, Edit } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { cn } from '@/lib/utils';\nimport { TourPackage } from '@/types/package';\nimport { tourPackageService } from '@/integrations/supabase/services/tourPackageService';\nimport { useToast } from '@/hooks/use-toast';\n\nconst ViewPackage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const [packageData, setPackageData] = useState<TourPackage | null>(null);\n  const [activeTab, setActiveTab] = useState('overview');\n  \n  useEffect(() => {\n    const loadPackage = async () => {\n      if (!id) return;\n      try {\n        const pkg = await tourPackageService.getTourPackageById(id);\n        setPackageData(pkg);\n      } catch (error: any) {\n        toast({\n          title: 'Package not found',\n          description: error?.message ?? 'The requested package could not be found.',\n          variant: 'destructive'\n        });\n        navigate('/inventory/packages');\n      }\n    };\n    loadPackage();\n  }, [id, navigate, toast]);\n  \n  if (!packageData) {\n    return (\n      <PageLayout>\n        <div className=\"p-6 flex items-center justify-center h-full\">\n          <p>Loading package details...</p>\n        </div>\n      </PageLayout>\n    );\n  }\n  \n  const formatCurrency = (value: number): string => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: packageData.currency || 'INR',\n      maximumFractionDigits: 0\n    }).format(value);\n  };\n  \n  // Get the first banner image or default\n  const bannerImage = packageData.banners && packageData.banners.length > 0 \n    ? packageData.banners[0] \n    : 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2070';\n    \n  // Function to get status badge color\n  const getStatusBadge = () => {\n    switch (packageData.status) {\n      case 'published':\n        return <Badge className=\"bg-green-500 hover:bg-green-600\">Published</Badge>;\n      case 'draft':\n        return <Badge variant=\"outline\" className=\"text-gray-500 border-gray-300\">Draft</Badge>;\n      default:\n        return null;\n    }\n  };\n  \n  return (\n    <PageLayout>\n      <div className=\"p-3 sm:p-6\">\n        <div className=\"flex items-center gap-2 mb-6\">\n          <Button \n            variant=\"ghost\" \n            size=\"icon\"\n            onClick={() => navigate('/inventory/packages')}\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <div className=\"flex-grow\">\n            <div className=\"flex items-center justify-between\">\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {packageData.name}\n              </h1>\n              <div className=\"flex items-center space-x-2\">\n                {getStatusBadge()}\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\" \n                  onClick={() => navigate(`/inventory/packages/${id}/edit`)}\n                  className=\"ml-2 flex items-center gap-1\"\n                >\n                  <Edit className=\"h-4 w-4\" />\n                  <span>Edit Package</span>\n                </Button>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n              Created on {new Date(packageData.createdAt).toLocaleDateString()}\n            </p>\n          </div>\n        </div>\n        \n        {/* Banner Image */}\n        <div className=\"relative h-48 sm:h-64 w-full mb-6 rounded-lg overflow-hidden\">\n          <img \n            src={bannerImage} \n            alt={packageData.name} \n            className=\"w-full h-full object-cover\"\n          />\n          {packageData.isFixedDeparture && (\n            <Badge variant=\"secondary\" className=\"absolute top-4 left-4 bg-blue-500 text-white hover:bg-blue-600\">\n              Fixed Departure\n            </Badge>\n          )}\n        </div>\n        \n        {/* Quick Info Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n          <Card>\n            <CardContent className=\"flex items-center p-4 space-x-4\">\n              <div className=\"rounded-full bg-primary/10 p-2\">\n                <Calendar className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Duration</p>\n                <p className=\"font-medium\">{packageData.days} Days / {packageData.nights} Nights</p>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"flex items-center p-4 space-x-4\">\n              <div className=\"rounded-full bg-primary/10 p-2\">\n                <Globe className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Destinations</p>\n                <p className=\"font-medium\">\n                  {Array.isArray(packageData.destinations) && packageData.destinations.length > 0\n                    ? packageData.destinations\n                        .map(d => d?.country)\n                        .filter(Boolean)\n                        .join(', ')\n                    : 'No destinations'}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"flex items-center p-4 space-x-4\">\n              <div className=\"rounded-full bg-primary/10 p-2\">\n                <Users className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Min. Guests</p>\n                <p className=\"font-medium\">{packageData.minPax} persons</p>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"flex items-center p-4 space-x-4\">\n              <div className=\"rounded-full bg-primary/10 p-2\">\n                <FileText className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-500\">Price Per Person</p>\n                <p className=\"font-medium\">{formatCurrency(packageData.pricePerPerson)}</p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n        \n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\n          <TabsList className=\"flex flex-nowrap overflow-x-auto gap-2 p-1 w-full\">\n            <TabsTrigger value=\"overview\" className=\"flex gap-2 min-w-max px-3 py-2 text-sm sm:text-base\">\n              <FileText className=\"h-4 w-4\" />\n              <span>Overview</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"itinerary\" className=\"flex gap-2 min-w-max px-3 py-2 text-sm sm:text-base\">\n              <Calendar className=\"h-4 w-4\" />\n              <span>Itinerary</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"pricing\" className=\"flex gap-2 min-w-max px-3 py-2 text-sm sm:text-base\">\n              <FileText className=\"h-4 w-4\" />\n              <span>Pricing</span>\n            </TabsTrigger>\n            <TabsTrigger value=\"terms\" className=\"flex gap-2 min-w-max px-3 py-2 text-sm sm:text-base\">\n              <FileText className=\"h-4 w-4\" />\n              <span>Terms</span>\n            </TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"overview\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold\">Package Overview</h3>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-white\">Destinations</h4>\n                  {Array.isArray(packageData.destinations) && packageData.destinations.length > 0 ? (\n                    <div className=\"mt-2 space-y-3\">\n                      {packageData.destinations.map((destination, index) => (\n                        <div key={index} className=\"bg-gray-50 dark:bg-gray-800 p-3 rounded-md\">\n                          <div className=\"flex items-center mb-1\">\n                            <MapPin className=\"h-4 w-4 mr-1 text-gray-500\" />\n                            <span className=\"font-medium\">{destination?.country || 'Unknown country'}</span>\n                          </div>\n                          <div className=\"ml-5 flex flex-wrap gap-2\">\n                            {Array.isArray(destination?.cities) && destination.cities.length > 0 ? (\n                              destination.cities.map((city, idx) => (\n                                <Badge key={idx} variant=\"secondary\">\n                                  {city}\n                                </Badge>\n                              ))\n                            ) : (\n                              <span className=\"text-sm text-gray-500\">No cities listed</span>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"mt-2 text-sm text-gray-500\">No destinations specified.</p>\n                  )}\n                </div>\n                \n                {packageData.themes && packageData.themes.length > 0 && (\n                  <div>\n                    <h4 className=\"font-medium text-gray-900 dark:text-white\">Tour Theme</h4>\n                    <div className=\"flex flex-wrap gap-2 mt-2\">\n                      {packageData.themes.map(theme => (\n                        <Badge key={theme} variant=\"outline\">\n                          {theme}\n                        </Badge>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                \n                {packageData.isFixedDeparture && packageData.departureDate && (\n                  <div>\n                    <h4 className=\"font-medium text-gray-900 dark:text-white\">Departure Details</h4>\n                    <div className=\"mt-2 bg-gray-50 dark:bg-gray-800 p-3 rounded-md\">\n                      <div className=\"flex items-center mb-1\">\n                        <Calendar className=\"h-4 w-4 mr-1 text-gray-500\" />\n                        <span>Departure Date: {new Date(packageData.departureDate).toLocaleDateString()}</span>\n                      </div>\n                      {packageData.totalSeats && (\n                        <div className=\"flex items-center\">\n                          <Users className=\"h-4 w-4 mr-1 text-gray-500\" />\n                          <span>Total Seats: {packageData.totalSeats}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n                \n                <div>\n                  <h4 className=\"font-medium text-gray-900 dark:text-white\">Start & End Points</h4>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2\">\n                    <div className=\"bg-gray-50 dark:bg-gray-800 p-3 rounded-md\">\n                      <div className=\"flex items-center\">\n                        <MapPin className=\"h-4 w-4 mr-1 text-gray-500\" />\n                        <span className=\"font-medium\">Start: {packageData.startCity}</span>\n                      </div>\n                    </div>\n                    <div className=\"bg-gray-50 dark:bg-gray-800 p-3 rounded-md\">\n                      <div className=\"flex items-center\">\n                        <MapPin className=\"h-4 w-4 mr-1 text-gray-500\" />\n                        <span className=\"font-medium\">End: {packageData.endCity}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Gallery Card */}\n            {packageData.banners && packageData.banners.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <h3 className=\"text-lg font-semibold\">Gallery</h3>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n                    {packageData.banners.map((banner, index) => (\n                      <div key={index} className=\"relative aspect-square rounded-lg overflow-hidden\">\n                        <img \n                          src={banner} \n                          alt={`Gallery ${index + 1}`}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n          \n          <TabsContent value=\"itinerary\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold\">Detailed Itinerary</h3>\n              </CardHeader>\n              <CardContent>\n                {packageData.itinerary.map((day, index) => (\n                  <div key={index} className={cn(\n                    \"border-l-2 pl-4 py-4\",\n                    index === 0 ? \"\" : \"border-t\",\n                    index === packageData.itinerary.length - 1 ? \"\" : \"border-dashed\"\n                  )}>\n                    <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2\">\n                      <div>\n                        <h4 className=\"text-md font-semibold\">\n                          Day {day.day}: {day.title || day.city || ''}\n                        </h4>\n                        <div className=\"text-sm text-gray-500\">\n                          {day.accommodation?.hotelName || day.accommodation?.customHotelName \n                            ? `Stay: ${day.accommodation.hotelName || day.accommodation.customHotelName}` \n                            : 'No accommodation (departure day)'}\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Badge variant={day.meals?.breakfast ? \"default\" : \"outline\"} className=\"text-xs\">B</Badge>\n                        <Badge variant={day.meals?.lunch ? \"default\" : \"outline\"} className=\"text-xs\">L</Badge>\n                        <Badge variant={day.meals?.dinner ? \"default\" : \"outline\"} className=\"text-xs\">D</Badge>\n                      </div>\n                    </div>\n                    \n                    <p className=\"text-gray-700 dark:text-gray-300 mb-3\">{day.description}</p>\n                    \n                    {Array.isArray(day.activities) && day.activities.length > 0 && (\n                      <div className=\"space-y-2 mt-3\">\n                        <h5 className=\"text-sm font-medium\">Activities:</h5>\n                        <div className=\"space-y-2\">\n                          {day.activities.map((activity, actIdx) => (\n                            <div key={actIdx} className=\"flex items-start bg-gray-50 dark:bg-gray-800 p-2 rounded\">\n                              <div className=\"mr-3\">\n                                {activity.type === 'hotel' && <Hotel className=\"h-4 w-4 text-gray-500\" />}\n                                {activity.type === 'sightseeing' && <Camera className=\"h-4 w-4 text-gray-500\" />}\n                                {activity.type === 'transport' && <Car className=\"h-4 w-4 text-gray-500\" />}\n                                {activity.type === 'free' && <Clock className=\"h-4 w-4 text-gray-500\" />}\n                                {activity.type === 'additional' && <FileText className=\"h-4 w-4 text-gray-500\" />}\n                                {activity.type === 'gala' && <Utensils className=\"h-4 w-4 text-gray-500\" />}\n                              </div>\n                              <div>\n                                <div className=\"font-medium text-sm\">{activity.title}</div>\n                                <div className=\"text-sm text-gray-500\">{activity.description}</div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          <TabsContent value=\"pricing\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold\">Pricing Details</h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">Base Cost</p>\n                    <p className=\"text-lg font-semibold\">{formatCurrency(packageData.baseCost)}</p>\n                  </div>\n                  \n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\n                    <p className=\"text-sm text-gray-500 mb-1\">Markup</p>\n                    <p className=\"text-lg font-semibold\">{packageData.markup}%</p>\n                  </div>\n                  \n                  {packageData.commission && (\n                    <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\n                      <p className=\"text-sm text-gray-500 mb-1\">Commission</p>\n                      <p className=\"text-lg font-semibold\">{packageData.commission}%</p>\n                    </div>\n                  )}\n                </div>\n                \n                <Separator />\n                \n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <p className=\"font-medium\">Final Package Price</p>\n                    <p className=\"text-lg font-bold\">{formatCurrency(packageData.finalPrice)}</p>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <p className=\"font-medium\">Price Per Person</p>\n                    <p className=\"text-lg font-bold\">{formatCurrency(packageData.pricePerPerson)}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          <TabsContent value=\"terms\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold\">Inclusions & Exclusions</h3>\n              </CardHeader>\n              <CardContent className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-medium mb-2\">Inclusions</h4>\n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg whitespace-pre-wrap\">\n                    {packageData.inclusions || 'No inclusions specified.'}\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium mb-2\">Exclusions</h4>\n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg whitespace-pre-wrap\">\n                    {packageData.exclusions || 'No exclusions specified.'}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold\">Policies</h3>\n              </CardHeader>\n              <CardContent className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-medium mb-2\">Cancellation Policy</h4>\n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg whitespace-pre-wrap\">\n                    {packageData.cancellationPolicy || 'No cancellation policy specified.'}\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium mb-2\">Payment Policy</h4>\n                  <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg whitespace-pre-wrap\">\n                    {packageData.paymentPolicy || 'No payment policy specified.'}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default ViewPackage;\n"],"file":"app-inventory-Dz4tdTS6.js"}