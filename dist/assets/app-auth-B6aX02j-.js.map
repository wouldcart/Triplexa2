{"version":3,"mappings":"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","names":["Login","username","setUsername","useState","password","setPassword","showPassword","setShowPassword","loading","setLoading","error","setError","resetOpen","setResetOpen","resetEmail","setResetEmail","resetLoading","setResetLoading","resetMessage","setResetMessage","magicLinkEmail","setMagicLinkEmail","magicLinkLoading","setMagicLinkLoading","magicLinkSent","setMagicLinkSent","showMagicLink","setShowMagicLink","activeTab","setActiveTab","mobilePhone","setMobilePhone","mobileName","setMobileName","mobileRequestId","setMobileRequestId","mobileOtp","setMobileOtp","mobileSending","setMobileSending","mobileVerifying","setMobileVerifying","isExistingMobileUser","setIsExistingMobileUser","mobileMode","setMobileMode","handleMobileModeChange","mode","settings","logo","companyDetails","name","tagline","appSettings","useApplicationSettings","toast","useToast","navigate","useNavigate","location","useLocation","signIn","signInWithGoogle","user","useAuth","useEffect","replace","emailParam","URLSearchParams","search","get","hash","window","startsWith","substring","params","type","access_token","refresh_token","code","Set","has","supabase","auth","setSession","message","exchangeCodeForSession","Promise","r","setTimeout","data","session","getSession","history","replaceState","document","title","pathname","sessionUser","sessionError","AuthService","getCurrentSession","err","msg","Error","timeoutId","async","length","exists","userExistsByPhone","clearTimeout","className","children","jsxs","jsx","src","alt","charAt","Card","CardHeader","CardTitle","CardDescription","CardContent","Tabs","value","onValueChange","v","TabsList","TabsTrigger","TabsContent","onSubmit","e","preventDefault","authResponse","localStorage","setItem","JSON","stringify","permissions","description","includes","Label","htmlFor","UserIcon","Input","id","placeholder","autoComplete","onChange","target","required","Lock","Button","variant","size","onClick","EyeOff","Eye","Alert","AlertDescription","disabled","testClient","__vitePreload","import","then","n","a3","__VITE_PRELOAD__","result","errorMessage","Chrome","Mail","maxLength","smsSendOtp","String","request_id","inputMode","pattern","smsVerifyOtp","existingUserId","profileData","profileError","from","select","eq","single","role","u","upsertAgentWithPhone","emailAlias","email","pwd","resp","trim","Dialog","open","onOpenChange","DialogContent","DialogHeader","DialogTitle","DialogDescription","trimmed","test","resetError","resetPassword","DialogFooter","trimmedEmail","authHelpers","signInWithMagicLink","Send","redirectsTo","map","account","quickLogin","Register","formData","setFormData","confirmPassword","phone","department","position","employee_id","showConfirmPassword","setShowConfirmPassword","handleInputChange","field","prev","signUp","status","User","Phone","Building","Select","SelectTrigger","SelectValue","SelectContent","label","SelectItem","dept","Link","to","AgentSignup","company_name","business_type","specialization","address","city","country","confirm_password","agreed","setAgreed","passwordStrength","setPasswordStrength","score","passwordFocused","setPasswordFocused","emailExists","setEmailExists","phoneExists","setPhoneExists","countryCode","setCountryCode","detectedCountry","setDetectedCountry","detectCountryFromIP","countryCodes","response","fetch","json","country_code","countryCodeObj","find","c","t","userExistsByEmail","digits","hasLength","hasUpper","hasNumber","hasSymbol","validateForm","ref","utmSource","event","sourceParam","source_type","source_details","recordReferralCodeIfMissing","toLowerCase","signupRequest","additionalAgentData","business_address","specializations","AgentManagementService","signupAgent","updateAgentSourceByEmail","Building2","encodeURIComponent","numericValue","handlePhoneChange","onFocus","onBlur","style","width","ok","Check","X","upper","lower","numbers","symbols","all","pick","chars","Math","floor","random","base","join","rest","i","raw","split","j","generated","Sparkles","Checkbox","checked","onCheckedChange","href","rel","AgentPasswordChange","identifier","setIdentifier","currentPassword","setCurrentPassword","newPassword","setNewPassword","setConfirmPassword","pwdErr","match","getStoredAgentCredentials","localResult","changeAgentPassword","agentId","success","rpcErr","setAgentCredentials","rpcEx","ResetPassword","userName","setUserName","userEmail","setUserEmail","h","codeFromHash","processAuthLink","companyName","updateErr","updatePassword","signOut","ex","Unauthorized","AlertCircle","ArrowLeft"],"ignoreList":[],"sources":["../../src/pages/auth/Login.tsx","../../src/pages/auth/Register.tsx","../../src/pages/auth/AgentSignup.tsx","../../src/pages/auth/AgentPasswordChange.tsx","../../src/pages/auth/ResetPassword.tsx","../../src/pages/auth/Unauthorized.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Button } from '../../components/ui/button';\nimport { Input } from '../../components/ui/input';\nimport { Label } from '../../components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../components/ui/card';\nimport { Alert, AlertDescription } from '../../components/ui/alert';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '../../components/ui/dialog';\nimport { useToast } from '../../hooks/use-toast';\nimport { useApp } from '../../contexts/AppContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useApplicationSettings } from '../../contexts/ApplicationSettingsContext';\nimport { AuthService } from '../../services/authService';\nimport { supabase } from '../../lib/supabaseClient';\nimport { User } from '../../types/User';\nimport { Eye, EyeOff, Lock, User as UserIcon, Mail, Send, Chrome } from 'lucide-react';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { upsertAgentWithPhone, sendOtp as smsSendOtp, verifyOtp as smsVerifyOtp } from '@/services/smsService.ts';\n\nconst Login: React.FC = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [resetOpen, setResetOpen] = useState(false);\n  const [resetEmail, setResetEmail] = useState('');\n  const [resetLoading, setResetLoading] = useState(false);\n  const [resetMessage, setResetMessage] = useState<string | null>(null);\n  \n  // Magic link state\n  const [magicLinkEmail, setMagicLinkEmail] = useState('');\n  const [magicLinkLoading, setMagicLinkLoading] = useState(false);\n  const [magicLinkSent, setMagicLinkSent] = useState(false);\n  const [showMagicLink, setShowMagicLink] = useState(false);\n  const [activeTab, setActiveTab] = useState<'email'|'mobile'>('email');\n  const [mobilePhone, setMobilePhone] = useState('');\n  const [mobileName, setMobileName] = useState('');\n  const [mobileRequestId, setMobileRequestId] = useState('');\n  const [mobileOtp, setMobileOtp] = useState('');\n  const [mobileSending, setMobileSending] = useState(false);\n  const [mobileVerifying, setMobileVerifying] = useState(false);\n  const [isExistingMobileUser, setIsExistingMobileUser] = useState<boolean | null>(null);\n  const [mobileMode, setMobileMode] = useState<'login' | 'register' | null>(null);\n\n  // Reset mobile form when switching modes\n  const resetMobileForm = () => {\n    setMobilePhone('');\n    setMobileName('');\n    setMobileRequestId('');\n    setMobileOtp('');\n    setMobileSending(false);\n    setMobileVerifying(false);\n    setIsExistingMobileUser(null);\n  };\n\n  const handleMobileModeChange = (mode: 'login' | 'register' | null) => {\n    resetMobileForm();\n    setMobileMode(mode);\n  };\n  \n  // Use ApplicationSettings with fallback for unauthenticated users\n  let settings = { \n    logo: '', \n    companyDetails: { \n      name: 'Travel App', \n      tagline: 'Your Travel Partner' \n    } \n  };\n  \n  try {\n    const { settings: appSettings } = useApplicationSettings();\n    settings = appSettings || settings;\n  } catch (error) {\n    // Fallback for when ApplicationSettingsProvider is not available\n    console.warn('ApplicationSettingsProvider not available, using fallback settings');\n  }\n  const { toast } = useToast();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const { signIn, signInWithGoogle, user } = useAuth();\n\n  // Redirect authenticated users immediately to root (which will handle role-based routing)\n  useEffect(() => {\n    if (user) {\n      console.log('ðŸ”„ User already authenticated, redirecting to root for role-based routing');\n      console.log('ðŸ‘¤ User details:', user.id, 'Role:', user.role);\n      navigate('/', { replace: true });\n    }\n  }, [user, navigate]);\n\n  // Prefill username and magic link email from query params\n  useEffect(() => {\n    try {\n      const params = new URLSearchParams(location.search);\n      const emailParam = params.get('email');\n      if (emailParam) {\n        setUsername(emailParam);\n        setMagicLinkEmail(emailParam);\n      }\n    } catch {}\n  }, [location.search]);\n\n  // Handle Supabase invite/magic link: set session from hash and redirect\n  useEffect(() => {\n    const hash = window.location.hash.startsWith('#') ? window.location.hash.substring(1) : window.location.hash;\n    if (!hash) return;\n\n    const params = new URLSearchParams(hash);\n    const type = params.get('type');\n    const access_token = params.get('access_token');\n    const refresh_token = params.get('refresh_token');\n    const code = params.get('code');\n\n    // Handle all Supabase auth link types (invite, magiclink, signup, email_confirm, recovery, email_change)\n    const handledTypes = new Set(['invite', 'magiclink', 'signup', 'email_confirm', 'recovery', 'email_change']);\n    if (type && handledTypes.has(type)) {\n      (async () => {\n        try {\n          console.log('ðŸ“© Processing Supabase auth link:', type);\n\n          // Prefer explicit setSession when BOTH tokens are present\n          if (access_token && refresh_token) {\n            console.log('ðŸ”‘ Setting session via setSession with access + refresh tokens');\n            const { error } = await supabase.auth.setSession({\n              access_token,\n              refresh_token\n            } as any);\n            if (error) {\n              console.error('âŒ Error setting Supabase session from auth link:', error);\n              setError(error.message || 'Failed to process login link');\n              return;\n            }\n          } else if (code) {\n            // PKCE flow fallback (when using flowType: 'pkce')\n            console.log('ðŸ”„ Exchanging PKCE code for session');\n            const { error } = await supabase.auth.exchangeCodeForSession(code);\n            if (error) {\n              console.error('âŒ Error exchanging code for session:', error);\n              setError(error.message || 'Failed to process login link');\n              return;\n            }\n          } else {\n            // As a safety net, rely on detectSessionInUrl and check session\n            console.log('ðŸ•µï¸ Attempting to detect existing session from URL');\n            // Give the client a moment to auto-detect and set session\n            await new Promise((r) => setTimeout(r, 150));\n            const { data: { session } } = await supabase.auth.getSession();\n            if (!session) {\n              console.warn('âš ï¸ No session detected from auth link; tokens missing');\n              setError('Login link invalid or expired. Please open the latest email.');\n              return;\n            }\n          }\n\n          // Clean the hash to avoid re-processing on navigation\n          window.history.replaceState(null, document.title, window.location.pathname + window.location.search);\n\n          // Fetch enriched app user/session and redirect to role-based dashboard\n          const { user: sessionUser, error: sessionError } = await AuthService.getCurrentSession();\n          if (sessionError) {\n            console.warn('âš ï¸ Session retrieval after auth link had an issue:', sessionError);\n          }\n\n          if (sessionUser) {\n            console.log('âœ… Auth link processed. Redirecting to dashboard for role:', sessionUser.role);\n            navigate('/', { replace: true });\n          } else {\n            console.log('â„¹ï¸ No app user found after setting session; redirecting to root anyway');\n            navigate('/', { replace: true });\n          }\n        } catch (err) {\n          console.error('ðŸš¨ Unexpected error processing auth link:', err);\n          const msg = err instanceof Error ? err.message : 'Failed to process login link';\n          setError(msg);\n        }\n      })();\n    }\n  }, [navigate]);\n\n\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      console.log('ðŸ” Attempting login for:', username);\n      \n      // Use AuthContext signIn method\n      const authResponse = await signIn(username, password);\n      \n      if (authResponse.error) {\n        console.log('âŒ Login error:', authResponse.error);\n        setError(authResponse.error);\n        return;\n      }\n      \n      if (authResponse.user) {\n        console.log('âœ… Login successful for user:', authResponse.user.name, 'Role:', authResponse.user.role, 'Department:', authResponse.user.department);\n        \n        // Store user permissions for access control\n        localStorage.setItem('user_permissions', JSON.stringify(authResponse.user.permissions || []));\n        \n        toast({\n          title: \"Login successful\",\n          description: `Welcome back, ${authResponse.user.name}!`,\n        });\n\n        // The useEffect will handle redirection when user state is updated\n        console.log('âœ… Login completed, waiting for AuthContext to update user state');\n      } else {\n        setError('Invalid username/email or password');\n      }\n    } catch (err) {\n      console.error('ðŸš¨ Login error:', err);\n      if (err instanceof Error) {\n        // More specific error messages based on error type\n        if (err.message.includes('Invalid login credentials')) {\n          setError('Invalid email or password');\n        } else if (err.message.includes('Email not confirmed')) {\n          setError('Please verify your email address before logging in');\n        } else if (err.message.includes('Too many requests')) {\n          setError('Too many login attempts. Please try again later');\n        } else if (err.message.includes('network')) {\n          setError('Network error. Please check your connection');\n        } else {\n          setError(err.message || 'An error occurred during login');\n        }\n      } else {\n        setError('An error occurred during login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOpenReset = () => {\n    setResetMessage(null);\n    setResetEmail(username || '');\n    setResetOpen(true);\n  };\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setResetLoading(true);\n    setResetMessage(null);\n    const trimmed = resetEmail.trim();\n    const emailValid = /.+@.+\\..+/.test(trimmed);\n    if (!emailValid) {\n      setResetMessage('Please enter a valid email address.');\n      setResetLoading(false);\n      return;\n    }\n    try {\n      const { error: resetError } = await AuthService.resetPassword(trimmed);\n      if (resetError) {\n        setResetMessage(resetError);\n      } else {\n        setResetMessage('Password reset email sent. Check your inbox.');\n      }\n    } catch (err: any) {\n      setResetMessage(err.message || 'Unable to send reset email.');\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  const handleMagicLink = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setMagicLinkLoading(true);\n    setError('');\n    \n    const trimmedEmail = magicLinkEmail.trim();\n    const emailValid = /.+@.+\\..+/.test(trimmedEmail);\n    \n    if (!emailValid) {\n      setError('Please enter a valid email address.');\n      setMagicLinkLoading(false);\n      return;\n    }\n\n    try {\n      const { authHelpers } = await import('../../lib/supabaseClient');\n      const { data, error } = await authHelpers.signInWithMagicLink(trimmedEmail);\n      \n      if (error) {\n        console.error('Magic link error:', error);\n        setError(error.message || 'Failed to send magic link');\n      } else {\n        setMagicLinkSent(true);\n        toast({\n          title: \"Magic link sent!\",\n          description: `Check your email at ${trimmedEmail} for the login link.`,\n        });\n      }\n    } catch (err: any) {\n      console.error('Magic link error:', err);\n      setError(err.message || 'Failed to send magic link');\n    } finally {\n      setMagicLinkLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      console.log('ðŸ” Initiating Google OAuth for agent role');\n      console.log('ðŸ“ Current origin:', window.location.origin);\n      console.log('ðŸ§ª Testing Supabase client availability...');\n      \n      // Test if Supabase client is available\n      const { supabase: testClient } = await import('../../lib/supabaseClient');\n      console.log('âœ… Supabase client loaded:', !!testClient);\n      \n      // Check if we're in a development environment\n      console.log('ðŸŒ Environment:', import.meta.env.MODE);\n      console.log('ðŸ”— Redirect URL will be:', `${window.location.origin}/login`);\n      \n      const result = await signInWithGoogle('agent');\n      \n      if (result.error) {\n        console.error('âŒ Google sign-in error:', result.error);\n        \n        // Check for specific OAuth errors\n        const errorMessage = result.error;\n        if (errorMessage.includes('provider') || errorMessage.includes('oauth')) {\n          setError('Google OAuth is not configured. Please contact support or use email login.');\n          toast({\n            title: \"Google OAuth Not Available\",\n            description: \"Google sign-in is not configured. Please use email login or contact support.\",\n            variant: \"destructive\",\n          });\n        } else {\n          setError(result.error);\n          toast({\n            title: \"Google sign-in failed\",\n            description: result.error,\n            variant: \"destructive\",\n          });\n        }\n      } else {\n        console.log('âœ… Google OAuth initiated, result:', result);\n        console.log('ðŸ”„ Waiting for redirect...');\n        // The OAuth flow will redirect to Google and back\n        // The auth state change listener will handle the session\n        \n        // Show a message to the user\n        toast({\n          title: \"Redirecting to Google...\",\n          description: \"You'll be redirected to Google to complete sign-in.\",\n        });\n      }\n    } catch (err: any) {\n      console.error('ðŸš¨ Google sign-in error:', err);\n      setError(err.message || 'Google sign-in failed');\n      toast({\n        title: \"Google sign-in failed\",\n        description: err.message || 'An error occurred during Google sign-in',\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const enhancedTestAccounts = [\n    { \n      role: 'Super Admin', \n      username: 'akshay@wouldcart.com', \n      password: 'Akki#6342', \n      description: 'Full system access',\n      permissions: 'All modules, user management, system settings',\n      redirectsTo: 'Main Dashboard'\n    },\n    { \n      role: 'Manager', \n      username: 'manager@wouldcart.com', \n      password: 'manager123', \n      description: 'Management level access',\n      permissions: 'Team oversight, bookings, inventory, reports',\n      redirectsTo: 'Main Dashboard'\n    },\n    { \n      role: 'HR Manager', \n      username: 'hrmanager@wouldcart.com', \n      password: 'hr123', \n      description: 'HR management access',\n      permissions: 'Staff management, payroll, attendance, leave',\n      redirectsTo: 'HR Dashboard'\n    },\n    { \n      role: 'Sales Staff', \n      username: 'staff_sales@wouldcart.com', \n      password: 'staff123', \n      description: 'Sales department staff',\n      permissions: 'Query management, booking creation, customer relations',\n      redirectsTo: 'Sales Dashboard'\n    },\n    { \n      role: 'Support Staff', \n      username: 'support_agent@wouldcart.com', \n      password: 'support123', \n      description: 'Customer support staff',\n      permissions: 'Agent management, ticket handling, communication',\n      redirectsTo: 'Support Dashboard'\n    },\n     { \n      role: 'content Marketing', \n      username: 'content@wouldcart.com', \n      password: 'content123', \n      description: 'Content marketing staff',\n      permissions: 'Content creation, campaign management, analytics',\n      redirectsTo: 'Content Dashboard'\n    },\n    { \n      role: 'Field Sales', \n      username: 'field_sales@wouldcart.com', \n      password: 'field123', \n      description: 'Field sales executive',\n      permissions: 'Agent acquisition, lead generation, territory management',\n      redirectsTo: 'Agent Management'\n    },\n    { \n      role: 'Operations Staff', \n      username: 'ops_staff@wouldcart.com', \n      password: 'ops123', \n      description: 'Operations department',\n      permissions: 'Booking coordination, vendor management, service delivery',\n      redirectsTo: 'Operations Dashboard'\n    },\n    { \n      role: 'Travel Agent', \n      username: 'agent@wouldcart.com', \n      password: 'agent123', \n      description: 'External travel agent',\n      permissions: 'Query creation, booking management, commission tracking',\n      redirectsTo: 'Agent Dashboard'\n    },\n    { \n      role: 'Basic User', \n      username: 'user@wouldcart.com', \n      password: 'user123', \n      description: 'Traveler account with trip management',\n      permissions: 'Trip viewing, itinerary access, travel history, support',\n      redirectsTo: 'Traveler Dashboard'\n    }\n  ];\n\n  const quickLogin = (username: string, password: string) => {\n    setUsername(username);\n    setPassword(password);\n  };\n\n  // Check if mobile number exists when user types\n  useEffect(() => {\n    const checkMobileUser = async () => {\n      if (mobilePhone.length === 10) {\n        try {\n          const { exists } = await AuthService.userExistsByPhone(mobilePhone);\n          setIsExistingMobileUser(exists);\n        } catch (error) {\n          console.error('Error checking mobile user:', error);\n          setIsExistingMobileUser(null);\n        }\n      } else {\n        setIsExistingMobileUser(null);\n      }\n    };\n\n    // Debounce the check to avoid too many API calls\n    const timeoutId = setTimeout(checkMobileUser, 500);\n    return () => clearTimeout(timeoutId);\n  }, [mobilePhone]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n      <div className=\"w-full max-w-md space-y-6 p-6\">\n        <div className=\"text-center\">\n          {settings.logo ? (\n            <div className=\"flex justify-center mb-4\">\n              <img \n                src={settings.logo} \n                alt={settings.companyDetails.name}\n                className=\"h-12 w-auto object-contain\"\n              />\n            </div>\n          ) : (\n            <div className=\"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-white font-bold text-xl\">\n                {settings.companyDetails.name.charAt(0)}\n              </span>\n            </div>\n          )}\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n            {settings.companyDetails.name}\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n            {settings.companyDetails.tagline}\n          </p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Sign In</CardTitle>\n            <CardDescription>\n              Enter your credentials to access your account\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Tabs value={activeTab} onValueChange={(v:any)=>setActiveTab(v)}>\n              <TabsList className=\"mb-4\">\n                <TabsTrigger value=\"email\">Email</TabsTrigger>\n                <TabsTrigger value=\"mobile\">Mobile</TabsTrigger>\n              </TabsList>\n              <TabsContent value=\"email\">\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\">Email</Label>\n                <div className=\"relative\">\n                  <UserIcon className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                  <Input\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"Enter your registered email address.\"\n                    autoComplete=\"email\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    className=\"pl-10\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Password</Label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                  <Input\n                    id=\"password\"\n                    type={showPassword ? 'text' : 'password'}\n                    placeholder=\"Enter your password\"\n                    autoComplete=\"current-password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    className=\"pl-10 pr-10\"\n                    required\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                    onClick={() => setShowPassword(!showPassword)}\n                  >\n                    {showPassword ? (\n                      <EyeOff className=\"h-4 w-4 text-gray-400\" />\n                    ) : (\n                      <Eye className=\"h-4 w-4 text-gray-400\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>\n                    {error}\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              <div className=\"flex items-center justify-between mb-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"link\"\n                  className=\"p-0 h-auto font-medium text-blue-600 hover:text-blue-800\"\n                  onClick={handleOpenReset}\n                >\n                  Forgot password?\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"link\"\n                  className=\"p-0 h-auto font-medium text-green-600 hover:text-green-800\"\n                  onClick={() => setShowMagicLink(true)}\n                >\n                  Email login\n                </Button>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={loading}\n              >\n                {loading ? 'Signing in...' : 'Sign In'}\n              </Button>\n\n              <div className=\"relative my-4\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-300 dark:border-gray-600\" />\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400\">Or continue with</span>\n                </div>\n              </div>\n\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={handleGoogleSignIn}\n                disabled={loading}\n              >\n                <Chrome className=\"h-4 w-4 mr-2\" />\n                {loading ? 'Connecting...' : 'Sign in with Google'}\n              </Button>\n\n\n\n              <div className=\"text-center\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  First time here?{' '}\n                  <Button\n                    type=\"button\"\n                    variant=\"link\"\n                    className=\"p-0 h-auto font-medium text-blue-600 hover:text-blue-800\"\n                    onClick={() => navigate('/signup/agent')}\n                  >\n                    Register your travel agency here.\n                  </Button>\n                </p>\n                <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-2\">\n                  New to our platform? Sign in with Google to get started.\n                </p>\n              </div>\n            </form>\n              </TabsContent>\n              <TabsContent value=\"mobile\">\n                <div className=\"space-y-4\">\n                  {!mobileMode && (\n                    <div className=\"space-y-4\">\n                      <div className=\"text-center mb-4\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                          Mobile Login\n                        </h3>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                          Choose how you'd like to continue\n                        </p>\n                      </div>\n                      \n                      <div className=\"space-y-3\">\n                        <Button \n                          type=\"button\" \n                          className=\"w-full\"\n                          onClick={() => handleMobileModeChange('login')}\n                        >\n                          <UserIcon className=\"h-4 w-4 mr-2\" />\n                          Login with Mobile Number\n                        </Button>\n                        \n                        <div className=\"relative\">\n                          <div className=\"absolute inset-0 flex items-center\">\n                            <div className=\"w-full border-t border-gray-300 dark:border-gray-600\" />\n                          </div>\n                          <div className=\"relative flex justify-center text-sm\">\n                            <span className=\"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400\">or</span>\n                          </div>\n                        </div>\n                        \n                        <Button \n                          type=\"button\" \n                          variant=\"outline\"\n                          className=\"w-full\"\n                          onClick={() => handleMobileModeChange('register')}\n                        >\n                          <Mail className=\"h-4 w-4 mr-2\" />\n                          Register New Account\n                        </Button>\n                      </div>\n                      \n                      <p className=\"text-xs text-center text-gray-500 dark:text-gray-400\">\n                        Already have an account? Use \"Login with Mobile Number\" to sign in\n                      </p>\n                    </div>\n                  )}\n\n                  {mobileMode === 'login' && (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                          Mobile Login\n                        </h3>\n                        <Button \n                          type=\"button\" \n                          variant=\"ghost\" \n                          size=\"sm\"\n                          onClick={() => handleMobileModeChange(null)}\n                        >\n                          Back\n                        </Button>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"mobilePhoneLogin\">Mobile (India)</Label>\n                        <div className=\"flex gap-3\">\n                          <Input \n                            id=\"mobilePhoneLogin\" \n                            type=\"tel\" \n                            placeholder=\"10-digit mobile number\" \n                            value={mobilePhone} \n                            onChange={(e)=>setMobilePhone(e.target.value.replace(/\\D/g,''))} \n                            maxLength={10} \n                            className=\"flex-1\" \n                          />\n                          <Button \n                            type=\"button\" \n                            onClick={async()=>{ \n                              setMobileSending(true); \n                              try {\n                                const r = await smsSendOtp(mobilePhone,'login'); \n                                if (!r.error) { \n                                  setMobileRequestId(r.data.request_id||''); \n                                  toast({ \n                                    title:'OTP sent', \n                                    description:`Enter the OTP sent to +91${mobilePhone}` \n                                  }); \n                                } else { \n                                  toast({ \n                                    title:'Send OTP failed', \n                                    description:String(r.error?.message||'Unknown error'), \n                                    variant:'destructive' \n                                  }); \n                                }\n                              } catch (error) {\n                                console.error('OTP send error:', error);\n                                toast({ \n                                  title:'Send OTP failed', \n                                  description:'Failed to send OTP. Please try again.', \n                                  variant:'destructive' \n                                });\n                              }\n                              setMobileSending(false); \n                            }} \n                            disabled={mobileSending || mobilePhone.length!==10}\n                          >\n                            {mobileSending ? 'Sendingâ€¦' : 'Send OTP'}\n                          </Button>\n                        </div>\n                        {isExistingMobileUser === false && mobilePhone.length === 10 && (\n                          <p className=\"text-xs text-orange-600 dark:text-orange-400\">\n                            âš  This number is not registered. Please use \"Register New Account\" instead.\n                          </p>\n                        )}\n                      </div>\n                      \n                      {mobileRequestId && (\n                        <div className=\"space-y-2\">\n                          <Label>OTP</Label>\n                          <Input\n                            inputMode=\"numeric\"\n                            pattern=\"[0-9]{6}\"\n                            maxLength={6}\n                            value={mobileOtp}\n                            onChange={(e)=>setMobileOtp(e.target.value.replace(/\\D/g,''))}\n                            placeholder=\"Enter 6-digit OTP\"\n                          />\n                          <Button \n                            type=\"button\" \n                            className=\"w-full\"\n                            onClick={async()=>{\n                              setMobileVerifying(true);\n                              try {\n                                const r = await smsVerifyOtp(mobilePhone, mobileRequestId, mobileOtp)\n                                if (!r.error) {\n                                  // Check if user exists with this phone number\n                                  const { exists, id: existingUserId } = await AuthService.userExistsByPhone(mobilePhone);\n                                  \n                                  if (exists && existingUserId) {\n                                    // Existing user - proceed with login\n                                    try {\n                                      const { data: profileData, error: profileError } = await supabase\n                                        .from('profiles')\n                                        .select('email, name, role, phone')\n                                        .eq('id', existingUserId)\n                                        .single();\n                                      \n                                      if (profileError || !profileData) {\n                                        toast({ \n                                          title: 'Profile not found', \n                                          description: 'Could not find your account details. Please contact support.',\n                                          variant: 'destructive' \n                                        });\n                                        setMobileVerifying(false);\n                                        return;\n                                      }\n                                      \n                                      // Check if this is an agent account\n                                      if (profileData.role === 'agent') {\n                                        // Use the existing upsertAgentWithPhone to handle login\n                                        const u = await upsertAgentWithPhone(mobilePhone, profileData.name || `Agent ${mobilePhone}`)\n                                        if (!u.error) {\n                                          const emailAlias = u.data.email\n                                          const pwd = u.data.password\n                                          const resp = await signIn(emailAlias, pwd)\n                                          if (resp.error) {\n                                            toast({ title:'Login failed', description:String(resp.error), variant:'destructive' })\n                                          } else {\n                                            toast({ title:'Login successful', description:`Welcome back, ${resp.user?.name||'Agent'}` })\n                                          }\n                                        } else {\n                                          toast({ title:'Login setup failed', description:String(u.error?.message||'Unknown error'), variant:'destructive' })\n                                        }\n                                      } else {\n                                        // Non-agent user - mobile login not supported\n                                        toast({ \n                                          title: 'Mobile login not available', \n                                          description: 'Please use email login for your account type.',\n                                          variant: 'destructive' \n                                        });\n                                      }\n                                    } catch (error) {\n                                      console.error('Error during existing user mobile login:', error);\n                                      toast({ \n                                        title: 'Login error', \n                                        description: 'An error occurred during login. Please try again.',\n                                        variant: 'destructive' \n                                      });\n                                    }\n                                  } else {\n                                    toast({ \n                                      title: 'Number not registered', \n                                      description: 'This mobile number is not registered. Please use \"Register New Account\" instead.',\n                                      variant: 'destructive' \n                                    });\n                                  }\n                                } else {\n                                  toast({ title:'Verification failed', description:String(r.error?.message||'Unknown error'), variant:'destructive' })\n                                }\n                              } catch (error) {\n                                console.error('OTP verification error:', error);\n                                toast({ \n                                  title:'Verification failed', \n                                  description:'Failed to verify OTP. Please try again.', \n                                  variant:'destructive' \n                                });\n                              }\n                              setMobileVerifying(false);\n                            }} \n                            disabled={mobileVerifying || mobileOtp.length!==6}\n                          >\n                            {mobileVerifying ? 'Verifyingâ€¦' : 'Verify & Sign In'}\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {mobileMode === 'register' && (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                          Register New Account\n                        </h3>\n                        <Button \n                          type=\"button\" \n                          variant=\"ghost\" \n                          size=\"sm\"\n                          onClick={() => handleMobileModeChange(null)}\n                        >\n                          Back\n                        </Button>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"mobileNameRegister\">Name</Label>\n                        <Input \n                          id=\"mobileNameRegister\" \n                          type=\"text\" \n                          placeholder=\"Your name\" \n                          value={mobileName} \n                          onChange={(e)=>setMobileName(e.target.value)} \n                        />\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {mobileName ? 'âœ“' : 'â„¹'} Enter your full name\n                        </p>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"mobilePhoneRegister\">Mobile (India)</Label>\n                        <div className=\"flex gap-3\">\n                          <Input \n                            id=\"mobilePhoneRegister\" \n                            type=\"tel\" \n                            placeholder=\"10-digit mobile number\" \n                            value={mobilePhone} \n                            onChange={(e)=>setMobilePhone(e.target.value.replace(/\\D/g,''))} \n                            maxLength={10} \n                            className=\"flex-1\" \n                          />\n                          <Button \n                            type=\"button\" \n                            onClick={async()=>{ \n                              setMobileSending(true); \n                              try {\n                                const r = await smsSendOtp(mobilePhone,'register'); \n                                if (!r.error) { \n                                  setMobileRequestId(r.data.request_id||''); \n                                  toast({ \n                                    title:'OTP sent', \n                                    description:`Enter the OTP sent to +91${mobilePhone}` \n                                  }); \n                                } else { \n                                  toast({ \n                                    title:'Send OTP failed', \n                                    description:String(r.error?.message||'Unknown error'), \n                                    variant:'destructive' \n                                  }); \n                                }\n                              } catch (error) {\n                                console.error('OTP send error:', error);\n                                toast({ \n                                  title:'Send OTP failed', \n                                  description:'Failed to send OTP. Please try again.', \n                                  variant:'destructive' \n                                });\n                              }\n                              setMobileSending(false); \n                            }} \n                            disabled={mobileSending || mobilePhone.length!==10 || mobileName.trim()===''}\n                          >\n                            {mobileSending ? 'Sendingâ€¦' : 'Send OTP'}\n                          </Button>\n                        </div>\n                        {isExistingMobileUser === true && mobilePhone.length === 10 && (\n                          <p className=\"text-xs text-orange-600 dark:text-orange-400\">\n                            âš  This number is already registered. Please use \"Login with Mobile Number\" instead.\n                          </p>\n                        )}\n                      </div>\n                      \n                      {mobileRequestId && (\n                        <div className=\"space-y-2\">\n                          <Label>OTP</Label>\n                          <Input\n                            inputMode=\"numeric\"\n                            pattern=\"[0-9]{6}\"\n                            maxLength={6}\n                            value={mobileOtp}\n                            onChange={(e)=>setMobileOtp(e.target.value.replace(/\\D/g,''))}\n                            placeholder=\"Enter 6-digit OTP\"\n                          />\n                          <Button \n                            type=\"button\" \n                            className=\"w-full\"\n                            onClick={async()=>{\n                              setMobileVerifying(true);\n                              try {\n                                const r = await smsVerifyOtp(mobilePhone, mobileRequestId, mobileOtp)\n                                if (!r.error) {\n                                  // Check if user exists with this phone number\n                                  const { exists } = await AuthService.userExistsByPhone(mobilePhone);\n                                  \n                                  if (!exists) {\n                                    // New user - create account\n                                    const u = await upsertAgentWithPhone(mobilePhone, mobileName || `Agent ${mobilePhone}`)\n                                    if (!u.error) {\n                                      const emailAlias = u.data.email\n                                      const pwd = u.data.password\n                                      const resp = await signIn(emailAlias, pwd)\n                                      if (resp.error) {\n                                        toast({ title:'Login failed', description:String(resp.error), variant:'destructive' })\n                                      } else {\n                                        toast({ title:'Registration successful', description:`Welcome, ${resp.user?.name||'Agent'}` })\n                                      }\n                                    } else {\n                                      toast({ title:'Account creation failed', description:String(u.error?.message||'Unknown error'), variant:'destructive' })\n                                    }\n                                  } else {\n                                    toast({ \n                                      title: 'Number already registered', \n                                      description: 'This mobile number is already registered. Please use login instead.',\n                                      variant: 'destructive' \n                                    });\n                                  }\n                                } else {\n                                  toast({ title:'Verification failed', description:String(r.error?.message||'Unknown error'), variant:'destructive' })\n                                }\n                              } catch (error) {\n                                console.error('OTP verification error:', error);\n                                toast({ \n                                  title:'Verification failed', \n                                  description:'Failed to verify OTP. Please try again.', \n                                  variant:'destructive' \n                                });\n                              }\n                              setMobileVerifying(false);\n                            }} \n                            disabled={mobileVerifying || mobileOtp.length!==6 || mobileName.trim()===''}\n                          >\n                            {mobileVerifying ? 'Verifyingâ€¦' : 'Create Account & Sign In'}\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </TabsContent>\n            </Tabs>\n           \n            \n            <Dialog open={resetOpen} onOpenChange={setResetOpen}>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Reset your password</DialogTitle>\n                  <DialogDescription>\n                    Enter your email to receive a password reset link.\n                  </DialogDescription>\n                </DialogHeader>\n                <form onSubmit={handleResetPassword}>\n                  <div className=\"mb-4\">\n                    <Label htmlFor=\"resetEmail\">Email</Label>\n                    <Input\n                      id=\"resetEmail\"\n                      type=\"email\"\n                      autoComplete=\"email\"\n                      value={resetEmail}\n                      onChange={(e) => setResetEmail(e.target.value)}\n                      placeholder=\"you@example.com\"\n                      required\n                    />\n                  </div>\n                  {resetMessage && (\n                    <Alert>\n                      <AlertDescription>{resetMessage}</AlertDescription>\n                    </Alert>\n                  )}\n                  <DialogFooter>\n                    <Button type=\"button\" variant=\"outline\" onClick={() => setResetOpen(false)}>\n                      Cancel\n                    </Button>\n                    <Button type=\"submit\" disabled={resetLoading}>\n                      {resetLoading ? 'Sendingâ€¦' : 'Send reset email'}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </DialogContent>\n            </Dialog>\n            \n            {/* Magic Link Dialog */}\n            <Dialog open={showMagicLink} onOpenChange={setShowMagicLink}>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Login with Email</DialogTitle>\n                  <DialogDescription>\n                    {magicLinkSent \n                      ? \"Magic link sent! Check your email for the login link.\"\n                      : \"Enter your email to receive a magic link for passwordless login.\"\n                    }\n                  </DialogDescription>\n                </DialogHeader>\n                {!magicLinkSent ? (\n                  <form onSubmit={handleMagicLink}>\n                    <div className=\"mb-4\">\n                      <Label htmlFor=\"magicLinkEmail\">Email</Label>\n                      <div className=\"relative\">\n                        <Mail className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                        <Input\n                          id=\"magicLinkEmail\"\n                          type=\"email\"\n                          autoComplete=\"email\"\n                          value={magicLinkEmail}\n                          onChange={(e) => setMagicLinkEmail(e.target.value)}\n                          placeholder=\"agent@example.com\"\n                          className=\"pl-10\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    <DialogFooter>\n                      <Button type=\"button\" variant=\"outline\" onClick={() => setShowMagicLink(false)}>\n                        Cancel\n                      </Button>\n                      <Button type=\"submit\" disabled={magicLinkLoading}>\n                        <Send className=\"h-4 w-4 mr-2\" />\n                        {magicLinkLoading ? 'Sending...' : 'Send Magic Link'}\n                      </Button>\n                    </DialogFooter>\n                  </form>\n                ) : (\n                  <DialogFooter>\n                    <Button \n                      onClick={() => {\n                        setShowMagicLink(false);\n                        setMagicLinkSent(false);\n                        setMagicLinkEmail('');\n                      }}\n                    >\n                      Close\n                    </Button>\n                  </DialogFooter>\n                )}\n              </DialogContent>\n            </Dialog>\n          </CardContent>\n        </Card>\n\n        {/* Enhanced Test Accounts with Permissions */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-sm\">Test Accounts with Permissions</CardTitle>\n            <CardDescription className=\"text-xs\">\n              Click any account to auto-fill credentials. Each role has specific permissions and dashboard access.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto\">\n              {enhancedTestAccounts.map((account) => (\n                <Button\n                  key={account.username}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"text-xs justify-start h-auto p-3 text-left\"\n                  onClick={() => quickLogin(account.username, account.password)}\n                >\n                  <div className=\"w-full\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <span className=\"font-medium text-sm\">{account.role}</span>\n                      <span className=\"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded\">\n                        â†’ {account.redirectsTo}\n                      </span>\n                    </div>\n                    <div className=\"text-muted-foreground text-xs mb-1\">\n                      {account.description}\n                    </div>\n                    <div className=\"text-xs text-gray-500 border-t pt-1 mt-1\">\n                      <strong>Access:</strong> {account.permissions}\n                    </div>\n                  </div>\n                </Button>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Quick Access Note */}\n       <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              By signing in, you agree to our{' '}\n              <Button\n                type=\"button\"\n                variant=\"link\"\n                className=\"p-0 h-auto font-medium text-blue-600 hover:text-blue-800\"\n                onClick={() => navigate('/terms')}\n              >\n                Terms & Conditions\n              </Button>{' '}\n              and{' '}\n              <Button\n                type=\"button\"\n                variant=\"link\"\n                className=\"p-0 h-auto font-medium text-blue-600 hover:text-blue-800\"\n                onClick={() => navigate('/privacy')}\n              >\n                Privacy Policy\n              </Button>.\n            </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Button } from '../../components/ui/button';\nimport { Input } from '../../components/ui/input';\nimport { Label } from '../../components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../components/ui/card';\nimport { Alert, AlertDescription } from '../../components/ui/alert';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\nimport { useToast } from '../../hooks/use-toast';\nimport { AuthService } from '../../services/authService';\nimport { Eye, EyeOff, User, Mail, Phone, Building } from 'lucide-react';\n\nconst Register: React.FC = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n    phone: '',\n    role: '',\n    department: '',\n    position: '',\n    employee_id: ''\n  });\n  \n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n  const roles = [\n    { value: 'staff', label: 'Staff' },\n    { value: 'agent', label: 'Agent' },\n    { value: 'sales_agent', label: 'Sales Agent' },\n    { value: 'manager', label: 'Manager' },\n    { value: 'hr_manager', label: 'HR Manager' },\n    { value: 'finance_manager', label: 'Finance Manager' }\n  ];\n\n  const departments = [\n    { value: 'Operations', label: 'Operations' },\n    { value: 'Sales', label: 'Sales' },\n    { value: 'Marketing', label: 'Marketing' },\n    { value: 'Customer Support', label: 'Customer Support' },\n    { value: 'Finance', label: 'Finance' },\n    { value: 'HR', label: 'Human Resources' },\n    { value: 'Field Sales', label: 'Field Sales' },\n    { value: 'General', label: 'General' }\n  ];\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    setError('');\n  };\n\n  const validateForm = () => {\n    if (!formData.name.trim()) {\n      setError('Name is required');\n      return false;\n    }\n    \n    if (!formData.email.trim()) {\n      setError('Email is required');\n      return false;\n    }\n    \n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\n      setError('Please enter a valid email address');\n      return false;\n    }\n    \n    if (!formData.password) {\n      setError('Password is required');\n      return false;\n    }\n    \n    if (formData.password.length < 6) {\n      setError('Password must be at least 6 characters long');\n      return false;\n    }\n    \n    if (formData.password !== formData.confirmPassword) {\n      setError('Passwords do not match');\n      return false;\n    }\n    \n    if (!formData.role) {\n      setError('Role is required');\n      return false;\n    }\n    \n    if (!formData.department) {\n      setError('Department is required');\n      return false;\n    }\n    \n    if (!formData.position.trim()) {\n      setError('Position is required');\n      return false;\n    }\n    \n    return true;\n  };\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n\n    try {\n      const authResponse = await AuthService.signUp(formData.email, formData.password, {\n        name: formData.name,\n        role: formData.role,\n        department: formData.department,\n        phone: formData.phone,\n        position: formData.position,\n        employee_id: formData.employee_id,\n        status: 'active'\n      });\n\n      if (authResponse.error) {\n        setError(authResponse.error);\n        return;\n      }\n\n      if (authResponse.user) {\n        toast({\n          title: \"Registration successful\",\n          description: `Welcome ${authResponse.user.name}! Please check your email to verify your account.`,\n        });\n\n        // Redirect to login page\n        navigate('/login');\n      }\n\n    } catch (err) {\n      console.error('Registration error:', err);\n      if (err instanceof Error) {\n        if (err.message.includes('already registered')) {\n          setError('An account with this email already exists');\n        } else if (err.message.includes('network')) {\n          setError('Network error. Please check your connection');\n        } else {\n          setError(err.message || 'An error occurred during registration');\n        }\n      } else {\n        setError('An error occurred during registration');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1\">\n          <CardTitle className=\"text-2xl font-bold text-center\">Create Account</CardTitle>\n          <CardDescription className=\"text-center\">\n            Enter your details to create a new account\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleRegister} className=\"space-y-4\">\n            {error && (\n              <Alert variant=\"destructive\">\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Full Name</Label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"name\"\n                  type=\"text\"\n                  placeholder=\"Enter your full name\"\n                  value={formData.name}\n                  onChange={(e) => handleInputChange('name', e.target.value)}\n                  className=\"pl-10\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter your email\"\n                  value={formData.email}\n                  onChange={(e) => handleInputChange('email', e.target.value)}\n                  className=\"pl-10\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Phone Number</Label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"phone\"\n                  type=\"tel\"\n                  placeholder=\"Enter your phone number\"\n                  value={formData.phone}\n                  onChange={(e) => handleInputChange('phone', e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"employee_id\">Employee ID (Optional)</Label>\n              <div className=\"relative\">\n                <Building className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\n                <Input\n                  id=\"employee_id\"\n                  type=\"text\"\n                  placeholder=\"Enter employee ID\"\n                  value={formData.employee_id}\n                  onChange={(e) => handleInputChange('employee_id', e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\">Role</Label>\n              <Select value={formData.role} onValueChange={(value) => handleInputChange('role', value)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select your role\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {roles.map((role) => (\n                    <SelectItem key={role.value} value={role.value}>\n                      {role.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"department\">Department</Label>\n              <Select value={formData.department} onValueChange={(value) => handleInputChange('department', value)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select your department\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {departments.map((dept) => (\n                    <SelectItem key={dept.value} value={dept.value}>\n                      {dept.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"position\">Position</Label>\n              <Input\n                id=\"position\"\n                type=\"text\"\n                placeholder=\"Enter your position/title\"\n                value={formData.position}\n                onChange={(e) => handleInputChange('position', e.target.value)}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"Enter your password\"\n                  value={formData.password}\n                  onChange={(e) => handleInputChange('password', e.target.value)}\n                  className=\"pr-10\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-3 text-gray-400 hover:text-gray-600\"\n                >\n                  {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"confirmPassword\"\n                  type={showConfirmPassword ? \"text\" : \"password\"}\n                  placeholder=\"Confirm your password\"\n                  value={formData.confirmPassword}\n                  onChange={(e) => handleInputChange('confirmPassword', e.target.value)}\n                  className=\"pr-10\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  className=\"absolute right-3 top-3 text-gray-400 hover:text-gray-600\"\n                >\n                  {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                </button>\n              </div>\n            </div>\n\n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              disabled={loading}\n            >\n              {loading ? 'Creating Account...' : 'Create Account'}\n            </Button>\n\n            <div className=\"text-center text-sm\">\n              <span className=\"text-gray-600\">Already have an account? </span>\n              <Link to=\"/login\" className=\"text-blue-600 hover:underline\">\n                Sign in\n              </Link>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default Register;","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useApplicationSettings } from '@/contexts/ApplicationSettingsContext';\nimport { Building2, Mail, Phone, MapPin, User, Eye, EyeOff, Check, X, Sparkles } from 'lucide-react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { AgentManagementService } from '@/services/agentManagementService';\nimport { AuthService } from '@/services/authService';\nimport { AgentSignupRequest } from '@/types/agentManagement';\nimport { useToast } from '@/hooks/use-toast';\nimport { recordReferralCodeIfMissing } from '@/services/staffReferralService';\n\nconst AgentSignup: React.FC = () => {\n  const { toast } = useToast();\n  // const [logs, setLogs] = useState<string[]>([]); // Hidden for production\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    company_name: '',\n    business_type: '',\n    specialization: '',\n    address: '',\n    city: '',\n    country: '',\n    password: '',\n    confirm_password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [agreed, setAgreed] = useState(false);\n  const [passwordStrength, setPasswordStrength] = useState<{ score: number; label: string }>({ score: 0, label: 'Too short' });\n  const [passwordFocused, setPasswordFocused] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [emailExists, setEmailExists] = useState(false);\n  const [phoneExists, setPhoneExists] = useState(false);\n  const [countryCode, setCountryCode] = useState('+1'); // Default to US\n  const [detectedCountry, setDetectedCountry] = useState('');\n  const { settings } = useApplicationSettings();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Auto-detect country on component mount\n  useEffect(() => {\n    detectCountryFromIP();\n  }, []);\n\n  const businessTypes = [\n    'Travel Agency',\n    'Tour Operator',\n    'Online Travel Portal',\n    'Corporate Travel Desk',\n    'Destination Management Company',\n    'Travel Consultant',\n    'Other'\n  ];\n\n  // Country codes for phone number input\n  const countryCodes = [\n    { code: '+1', country: 'US', name: 'United States' },\n    { code: '+44', country: 'GB', name: 'United Kingdom' },\n    { code: '+91', country: 'IN', name: 'India' },\n    { code: '+61', country: 'AU', name: 'Australia' },\n    { code: '+81', country: 'JP', name: 'Japan' },\n    { code: '+49', country: 'DE', name: 'Germany' },\n    { code: '+33', country: 'FR', name: 'France' },\n    { code: '+86', country: 'CN', name: 'China' },\n    { code: '+65', country: 'SG', name: 'Singapore' },\n    { code: '+852', country: 'HK', name: 'Hong Kong' },\n    { code: '+971', country: 'AE', name: 'UAE' },\n    { code: '+966', country: 'SA', name: 'Saudi Arabia' },\n    { code: '+27', country: 'ZA', name: 'South Africa' },\n    { code: '+34', country: 'ES', name: 'Spain' },\n    { code: '+39', country: 'IT', name: 'Italy' },\n    { code: '+82', country: 'KR', name: 'South Korea' },\n    { code: '+66', country: 'TH', name: 'Thailand' },\n    { code: '+84', country: 'VN', name: 'Vietnam' },\n    { code: '+62', country: 'ID', name: 'Indonesia' },\n    { code: '+60', country: 'MY', name: 'Malaysia' },\n    { code: '+63', country: 'PH', name: 'Philippines' },\n    { code: '+92', country: 'PK', name: 'Pakistan' },\n    { code: '+880', country: 'BD', name: 'Bangladesh' },\n    { code: '+94', country: 'LK', name: 'Sri Lanka' },\n    { code: '+977', country: 'NP', name: 'Nepal' },\n    { code: '+975', country: 'BT', name: 'Bhutan' },\n    { code: '+960', country: 'MV', name: 'Maldives' },\n    { code: '+93', country: 'AF', name: 'Afghanistan' },\n    { code: '+98', country: 'IR', name: 'Iran' },\n    { code: '+964', country: 'IQ', name: 'Iraq' },\n    { code: '+962', country: 'JO', name: 'Jordan' },\n    { code: '+961', country: 'LB', name: 'Lebanon' },\n    { code: '+963', country: 'SY', name: 'Syria' },\n    { code: '+970', country: 'PS', name: 'Palestine' },\n    { code: '+972', country: 'IL', name: 'Israel' },\n    { code: '+20', country: 'EG', name: 'Egypt' },\n    { code: '+212', country: 'MA', name: 'Morocco' },\n    { code: '+216', country: 'TN', name: 'Tunisia' },\n    { code: '+213', country: 'DZ', name: 'Algeria' },\n    { code: '+218', country: 'LY', name: 'Libya' },\n    { code: '+222', country: 'MR', name: 'Mauritania' },\n    { code: '+221', country: 'SN', name: 'Senegal' },\n    { code: '+225', country: 'CI', name: 'Ivory Coast' },\n    { code: '+233', country: 'GH', name: 'Ghana' },\n    { code: '+234', country: 'NG', name: 'Nigeria' },\n    { code: '+254', country: 'KE', name: 'Kenya' },\n    { code: '+255', country: 'TZ', name: 'Tanzania' },\n    { code: '+256', country: 'UG', name: 'Uganda' },\n    { code: '+250', country: 'RW', name: 'Rwanda' },\n    { code: '+257', country: 'BI', name: 'Burundi' },\n    { code: '+252', country: 'SO', name: 'Somalia' },\n    { code: '+258', country: 'MZ', name: 'Mozambique' },\n    { code: '+260', country: 'ZM', name: 'Zambia' },\n    { code: '+263', country: 'ZW', name: 'Zimbabwe' },\n    { code: '+264', country: 'NA', name: 'Namibia' },\n    { code: '+267', country: 'BW', name: 'Botswana' },\n    { code: '+268', country: 'SZ', name: 'Swaziland' },\n    { code: '+290', country: 'SH', name: 'Saint Helena' },\n    { code: '+500', country: 'FK', name: 'Falkland Islands' },\n    { code: '+508', country: 'PM', name: 'Saint Pierre and Miquelon' },\n    { code: '+590', country: 'GP', name: 'Guadeloupe' },\n    { code: '+591', country: 'BO', name: 'Bolivia' },\n    { code: '+592', country: 'GY', name: 'Guyana' },\n    { code: '+593', country: 'EC', name: 'Ecuador' },\n    { code: '+594', country: 'GF', name: 'French Guiana' },\n    { code: '+595', country: 'PY', name: 'Paraguay' },\n    { code: '+596', country: 'MQ', name: 'Martinique' },\n    { code: '+597', country: 'SR', name: 'Suriname' },\n    { code: '+598', country: 'UY', name: 'Uruguay' },\n    { code: '+599', country: 'AN', name: 'Netherlands Antilles' },\n    { code: '+7', country: 'RU', name: 'Russia' },\n    { code: '+40', country: 'RO', name: 'Romania' },\n    { code: '+41', country: 'CH', name: 'Switzerland' },\n    { code: '+43', country: 'AT', name: 'Austria' },\n    { code: '+45', country: 'DK', name: 'Denmark' },\n    { code: '+46', country: 'SE', name: 'Sweden' },\n    { code: '+47', country: 'NO', name: 'Norway' },\n    { code: '+48', country: 'PL', name: 'Poland' },\n    { code: '+51', country: 'PE', name: 'Peru' },\n    { code: '+52', country: 'MX', name: 'Mexico' },\n    { code: '+53', country: 'CU', name: 'Cuba' },\n    { code: '+54', country: 'AR', name: 'Argentina' },\n    { code: '+55', country: 'BR', name: 'Brazil' },\n    { code: '+56', country: 'CL', name: 'Chile' },\n    { code: '+57', country: 'CO', name: 'Colombia' },\n    { code: '+58', country: 'VE', name: 'Venezuela' },\n    { code: '+64', country: 'NZ', name: 'New Zealand' },\n    { code: '+68', country: 'TO', name: 'Tonga' },\n    { code: '+690', country: 'TK', name: 'Tokelau' },\n    { code: '+691', country: 'FM', name: 'Micronesia' },\n    { code: '+692', country: 'MH', name: 'Marshall Islands' },\n    { code: '+800', country: '001', name: 'International Freephone' },\n    { code: '+808', country: '001', name: 'International Shared Cost' },\n    { code: '+870', country: '001', name: 'Inmarsat SNAC' },\n    { code: '+878', country: '001', name: 'Universal Personal Telecommunications' },\n    { code: '+881', country: '001', name: 'Global Mobile Satellite System' },\n    { code: '+882', country: '001', name: 'International Networks' },\n    { code: '+883', country: '001', name: 'International Networks' },\n    { code: '+888', country: '001', name: 'Telematics' },\n    { code: '+979', country: '001', name: 'International Premium Rate Service' }\n  ];\n\n  const specializations = [\n    'Leisure Travel',\n    'Corporate Travel',\n    'Adventure Travel',\n    'Luxury Travel',\n    'Budget Travel',\n    'Group Tours',\n    'Honeymoon Packages',\n    'Educational Tours',\n    'Pilgrimage Tours',\n    'International Travel',\n    'Domestic Travel'\n  ];\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  // Handle phone number input - only allow numbers\n  const handlePhoneChange = (value: string) => {\n    // Remove all non-numeric characters except for the initial + in country code\n    const numericValue = value.replace(/[^0-9]/g, '');\n    setFormData(prev => ({ ...prev, phone: numericValue }));\n  };\n\n  // Detect country based on IP address\n  const detectCountryFromIP = async () => {\n    try {\n      const response = await fetch('https://ipapi.co/json/');\n      const data = await response.json();\n      const detectedCountry = data.country_code;\n      const countryCodeObj = countryCodes.find(c => c.country === detectedCountry);\n      if (countryCodeObj) {\n        setCountryCode(countryCodeObj.code);\n        setDetectedCountry(countryCodeObj.name);\n        // setLogs(prev => [...prev, `Auto-detected country: ${countryCodeObj.name} (${countryCodeObj.code})`]);\n      }\n    } catch (error) {\n      console.warn('Failed to detect country from IP:', error);\n      // setLogs(prev => [...prev, 'Could not auto-detect country, using default']);\n    }\n  };\n\n  const validateForm = () => {\n    if (!formData.name || !formData.email || !formData.phone) {\n      setError('Please fill in all required fields');\n      return false;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      setError('Please enter a valid email address');\n      return false;\n    }\n\n    // Duplicate checks\n    if (emailExists) {\n      setError('Email already exists. Please login.');\n      return false;\n    }\n    if (phoneExists) {\n      setError('Phone number already exists. Please login.');\n      return false;\n    }\n\n    // Credentials validation with stronger requirements\n    const pwd = formData.password || '';\n    const hasLength = pwd.length >= 8;\n    const hasUpper = /[A-Z]/.test(pwd);\n    const hasNumber = /\\d/.test(pwd);\n    const hasSymbol = /[^A-Za-z0-9]/.test(pwd);\n\n    if (!pwd) {\n      setError('Password is required');\n      return false;\n    }\n    if (!hasLength || !hasUpper || !hasNumber || !hasSymbol) {\n      setError('Password must be at least 8 chars and include uppercase, number, and symbol');\n      return false;\n    }\n    if (formData.password !== formData.confirm_password) {\n      setError('Passwords do not match');\n      return false;\n    }\n\n    if (!agreed) {\n      setError('You must agree to the Terms & Privacy to continue');\n      return false;\n    }\n\n    return true;\n  };\n\n  // Compute password strength whenever the user types\n  useEffect(() => {\n    const pwd = formData.password || '';\n    const score = (\n      (pwd.length >= 8 ? 1 : 0) +\n      (/[A-Z]/.test(pwd) ? 1 : 0) +\n      (/\\d/.test(pwd) ? 1 : 0) +\n      (/[^A-Za-z0-9]/.test(pwd) ? 1 : 0)\n    );\n    const labelMap: Record<number, string> = {\n      0: 'Too short',\n      1: 'Weak',\n      2: 'Fair',\n      3: 'Good',\n      4: 'Strong',\n    };\n    setPasswordStrength({ score, label: labelMap[score] });\n  }, [formData.password]);\n\n  // Generate a strong password and fill both fields\n  const handleGeneratePassword = () => {\n    const upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    const lower = 'abcdefghijklmnopqrstuvwxyz';\n    const numbers = '0123456789';\n    const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';\n    const all = upper + lower + numbers + symbols;\n    const pick = (chars: string) => chars[Math.floor(Math.random() * chars.length)];\n    const length = 14;\n    const base = [pick(upper), pick(lower), pick(numbers), pick(symbols)].join('');\n    let rest = '';\n    for (let i = 0; i < length - base.length; i++) rest += pick(all);\n    const raw = (base + rest).split('');\n    // Shuffle\n    for (let i = raw.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [raw[i], raw[j]] = [raw[j], raw[i]];\n    }\n    const generated = raw.join('');\n    setFormData((prev) => ({ ...prev, password: generated, confirm_password: generated }));\n    setPasswordFocused(true);\n    setShowPassword(false);\n  };\n\n  // Debounced email existence check\n  useEffect(() => {\n    const t = setTimeout(async () => {\n      try {\n        const email = formData.email.trim();\n        if (!email) {\n          setEmailExists(false);\n          return;\n        }\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(email)) {\n          setEmailExists(false);\n          return;\n        }\n        const { exists } = await AuthService.userExistsByEmail(email);\n        setEmailExists(!!exists);\n      } catch {\n        setEmailExists(false);\n      }\n    }, 400);\n    return () => clearTimeout(t);\n  }, [formData.email]);\n\n  // Debounced phone existence check (digits-only compare)\n  useEffect(() => {\n    const t = setTimeout(async () => {\n      try {\n        const phone = `${countryCode}${formData.phone.trim()}`;\n        const digits = formData.phone.trim().replace(/\\D/g, '');\n        if (!digits || digits.length < 7) {\n          setPhoneExists(false);\n          return;\n        }\n        const { exists } = await AuthService.userExistsByPhone(phone);\n        setPhoneExists(!!exists);\n      } catch {\n        setPhoneExists(false);\n      }\n    }, 400);\n    return () => clearTimeout(t);\n  }, [formData.phone, countryCode]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (!validateForm()) return;\n\n    setLoading(true);\n\n    // Capture source tracking from URL params\n    const params = new URLSearchParams(location.search);\n    const ref = params.get('ref') || undefined;\n    const utmSource = params.get('utm_source') || undefined;\n    const event = params.get('event') || undefined;\n    const sourceParam = params.get('source') || undefined;\n\n    let source_type = 'organic';\n    let source_details = 'direct_signup';\n    if (ref) {\n      source_type = 'staff_referral';\n      source_details = ref;\n      // Record referral code into staff_referrals table if missing\n      try { await recordReferralCodeIfMissing(ref); } catch {}\n    } else if (event) {\n      source_type = 'event';\n      source_details = event;\n    } else if (utmSource) {\n      source_type = 'ad_campaign';\n      source_details = utmSource;\n    } else if (sourceParam && sourceParam.toLowerCase().startsWith('qr_')) {\n      // Backward-compat: old QR links used ?source=qr_<CODE>\n      source_type = 'event';\n      source_details = sourceParam.replace(/^qr_/i, '');\n    }\n\n    const signupRequest = {\n      name: formData.name.trim(),\n      email: formData.email.trim(),\n      phone: `${countryCode}${formData.phone.trim()}`,\n      company_name: formData.company_name.trim(),\n      password: formData.password,\n      source_type,\n      source_details\n    };\n\n    const additionalAgentData = {\n      business_address: formData.address.trim(),\n      city: formData.city.trim(),\n      country: formData.country.trim(),\n      type: formData.business_type,\n      specializations: formData.specialization ? [formData.specialization] : []\n    };\n\n    try {\n      const authResponse = await AuthService.signUp(\n        formData.email,\n        formData.password,\n        {\n          name: formData.name,\n          role: 'agent',\n          phone: `${countryCode}${formData.phone}`,\n          department: 'Agents',\n          position: 'External Agent',\n          business_address: formData.address,\n          city: formData.city,\n          country: formData.country,\n          business_type: formData.business_type,\n          specialization: formData.specialization,\n          company_name: formData.company_name,\n          source_type,\n          source_details,\n        } as any\n      );\n\n      if (authResponse.error) {\n        // setLogs((prev) => [...prev, `Signup error: ${authResponse.error}`]);\n        setError(authResponse.error);\n        return;\n      }\n\n      // Sync agent record with all form data to agents table\n      // setLogs((prev) => [...prev, 'Syncing agent record with complete data...']);\n      const result = await AgentManagementService.signupAgent({\n        ...signupRequest,\n        ...additionalAgentData\n      });\n      if (result && result.error) {\n        console.warn('Managed agents sync error:', result.error);\n        // setLogs((prev) => [...prev, `Managed agents sync warning: ${String(result.error)}`]);\n      }\n\n      // Force source attribution based on URL params (overrides trigger defaults)\n      // setLogs((prev) => [...prev, 'Enforcing source attribution...']);\n      const forceRes = await AgentManagementService.updateAgentSourceByEmail(\n        formData.email.trim(),\n        source_type,\n        source_details\n      );\n      if (forceRes?.error) {\n        console.warn('Force source update warning:', forceRes.error);\n      // setLogs((prev) => [...prev, `Source update warning: ${String(forceRes.error)}`]);\n      }\n\n      toast({\n        title: 'Account created',\n        description: 'Check your email to verify.',\n      });\n      // setLogs((prev) => [...prev, 'Verification email sent. Redirecting to login...']);\n      navigate('/login');\n    } catch (err) {\n      console.error('Registration error:', err);\n      setError('Signup failed. Try again.');\n      // setLogs((prev) => [...prev, `Registration error: ${err instanceof Error ? err.message : String(err)}`]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-4 sm:py-8\">\n      <div className=\"w-full max-w-2xl space-y-4 sm:space-y-6 p-4 sm:p-6\">\n        <div className=\"text-center\">\n          {settings.logo ? (\n            <div className=\"flex justify-center mb-3 sm:mb-4\">\n              <img \n                src={settings.logo} \n                alt={settings.companyDetails.name}\n                className=\"h-10 sm:h-12 w-auto object-contain\"\n              />\n            </div>\n          ) : (\n            <div className=\"w-10 h-10 sm:w-12 sm:h-12 bg-blue-500 rounded-lg flex items-center justify-center mx-auto mb-3 sm:mb-4\">\n              <span className=\"text-white font-bold text-lg sm:text-xl\">\n                {settings.companyDetails.name.charAt(0)}\n              </span>\n            </div>\n          )}\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\n            Sign Up\n          </h1>\n          <p className=\"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2\">\n           Access exclusive deals, AI itinerary tools, and more.\n          </p>\n        </div>\n\n        <Card>\n          <CardHeader className=\"px-4 sm:px-6 pb-4\">\n            <CardTitle className=\"text-lg sm:text-xl\">Registration</CardTitle>\n            <CardDescription className=\"text-sm sm:text-base\">\n              Complete the form below to register as a travel agent or agency\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"px-4 sm:px-6\">\n            <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-6\">\n              {/* Company Information */}\n              <div className=\"space-y-3 sm:space-y-4\">\n                <h3 className=\"text-base sm:text-lg font-medium\">Company Information</h3>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"company_name\">Company Name *</Label>\n                    <div className=\"relative\">\n                      <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"company_name\"\n                        placeholder=\"Company name\"\n                        value={formData.company_name}\n                        onChange={(e) => handleInputChange('company_name', e.target.value)}\n                        className=\"pl-10 text-sm sm:text-base\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"name\">Contact Person Name *</Label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"name\"\n                        placeholder=\"Contact person name\"\n                        value={formData.name}\n                        onChange={(e) => handleInputChange('name', e.target.value)}\n                        className=\"pl-10 text-sm sm:text-base\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"email\">Email Address *</Label>\n                    <div className=\"relative\">\n                      <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email address\"\n                        value={formData.email}\n                        onChange={(e) => handleInputChange('email', e.target.value)}\n                        className=\"pl-10 text-sm sm:text-base\"\n                        required\n                      />\n                      {emailExists && (\n                        <div className=\"mt-2 text-xs sm:text-sm flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\">\n                          <span className=\"text-red-600\">This email is already registered.</span>\n                          <Button\n                            type=\"button\"\n                            variant=\"link\"\n                            className=\"p-0 h-auto text-blue-600 hover:text-blue-800 text-xs sm:text-sm\"\n                            onClick={() => navigate(`/login?email=${encodeURIComponent(formData.email.trim())}`)}\n                          >\n                            Login Instead\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone\">Phone Number *</Label>\n                    <div className=\"flex gap-1 sm:gap-2\">\n                      <div className=\"relative w-16 sm:w-20 flex-shrink-0\">\n                        <Select value={countryCode} onValueChange={setCountryCode}>\n                          <SelectTrigger className=\"w-full px-2 sm:px-3\">\n                            <SelectValue>\n                              <span className=\"text-xs sm:text-sm font-medium\">{countryCode}</span>\n                            </SelectValue>\n                          </SelectTrigger>\n                          <SelectContent className=\"max-h-[200px] sm:max-h-[300px]\">\n                            {countryCodes.map((country) => (\n                              <SelectItem key={country.code} value={country.code} className=\"text-xs sm:text-sm\">\n                                <div className=\"flex items-center gap-1 sm:gap-2\">\n                                  <span className=\"text-xs sm:text-sm font-medium\">{country.code}</span>\n                                  <span className=\"text-xs text-gray-500 hidden sm:inline\">{country.name}</span>\n                                </div>\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      <div className=\"relative flex-1 min-w-0\">\n                        <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                        <Input\n                          id=\"phone\"\n                          placeholder=\"Phone number\"\n                          value={formData.phone}\n                          onChange={(e) => handlePhoneChange(e.target.value)}\n                          className=\"pl-10 w-full text-sm sm:text-base\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    {phoneExists && (\n                      <div className=\"mt-2 text-xs sm:text-sm flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\">\n                        <span className=\"text-red-600\">This phone number is already registered.</span>\n                        <Button\n                          type=\"button\"\n                          variant=\"link\"\n                          className=\"p-0 h-auto text-blue-600 hover:text-blue-800 text-xs sm:text-sm\"\n                          onClick={() => navigate(`/login?email=${encodeURIComponent(formData.email.trim())}`)}\n                        >\n                          Login Instead\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n               \n\n                \n\n                 \n               \n              </div>\n\n            \n\n\n                \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n              {/* Login Credentials */}\n              <div className=\"space-y-3 sm:space-y-4\">\n                <h3 className=\"text-base sm:text-lg font-medium\">Login Credentials</h3>\n                <div className=\"space-y-4\">\n                  {/* Create Password - full width */}\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"password\">Create Password *</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"password\"\n                        type={showPassword ? 'text' : 'password'}\n                        placeholder=\"Strong password\"\n                        autoComplete=\"new-password\"\n                        value={formData.password}\n                        onChange={(e) => handleInputChange('password', e.target.value)}\n                        onFocus={() => setPasswordFocused(true)}\n                        onBlur={() => setPasswordFocused(!!formData.password)}\n                        className=\"pr-8 sm:pr-10 text-sm sm:text-base\"\n                        required\n                      />\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"absolute right-0 top-0 h-full px-2 sm:px-3 hover:bg-transparent\"\n                        onClick={() => setShowPassword(!showPassword)}\n                        aria-label={showPassword ? 'Hide password' : 'Show password'}\n                      >\n                        {showPassword ? (\n                          <EyeOff className=\"h-3 w-3 sm:h-4 sm:w-4 text-gray-400\" />\n                        ) : (\n                          <Eye className=\"h-3 w-3 sm:h-4 sm:w-4 text-gray-400\" />\n                        )}\n                      </Button>\n                    </div>\n                    {/* Password strength meter & compact hints, shown only when typing/creating */}\n                    {(passwordFocused || !!formData.password) && (\n                      <div className=\"mt-2\">\n                        <div className=\"h-2 w-full rounded bg-gray-200 overflow-hidden\">\n                          <div\n                            className={\n                              `h-full transition-all ${\n                                passwordStrength.score <= 1 ? 'bg-red-500' :\n                                passwordStrength.score === 2 ? 'bg-yellow-500' :\n                                passwordStrength.score === 3 ? 'bg-green-500' : 'bg-emerald-600'\n                              }`\n                            }\n                            style={{ width: `${(passwordStrength.score / 4) * 100}%` }}\n                          />\n                        </div>\n                        <div className=\"text-xs mt-2 text-gray-600 dark:text-gray-400 flex flex-wrap items-center gap-1 sm:gap-2\">\n                          <span className=\"text-xs\">Strength: {passwordStrength.label}</span>\n                          {(() => {\n                            const pwd = formData.password || '';\n                            const reqs = [\n                              { label: '8+ chars', ok: pwd.length >= 8 },\n                              { label: 'capital', ok: /[A-Z]/.test(pwd) },\n                              { label: 'number', ok: /\\d/.test(pwd) },\n                              { label: 'symbol', ok: /[^A-Za-z0-9]/.test(pwd) },\n                            ];\n                            return reqs.map((r) => (\n                              <span key={r.label} className={`flex items-center gap-1 text-xs ${r.ok ? 'text-green-600' : 'text-gray-500'}`}>\n                                {r.ok ? <Check className=\"h-2 w-2 sm:h-3 sm:w-3\" /> : <X className=\"h-2 w-2 sm:h-3 sm:w-3\" />}\n                                <span className=\"hidden sm:inline\">{r.label}</span>\n                              </span>\n                            ));\n                          })()}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Confirm Password - inline with Generate button (80%/20%) */}\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"confirm_password\">Confirm Password *</Label>\n                    <div className=\"flex gap-1 sm:gap-2\">\n                      <div className=\"relative flex-[4] w-4/5\">\n                        <Input\n                          id=\"confirm_password\"\n                          type={showConfirmPassword ? 'text' : 'password'}\n                          placeholder=\"Confirm password\"\n                          autoComplete=\"new-password\"\n                          value={formData.confirm_password}\n                          onChange={(e) => handleInputChange('confirm_password', e.target.value)}\n                          className=\"pr-8 sm:pr-10 w-full text-sm sm:text-base\"\n                          required\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"absolute right-0 top-0 h-full px-2 sm:px-3 hover:bg-transparent\"\n                          onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                          aria-label={showConfirmPassword ? 'Hide confirm password' : 'Show confirm password'}\n                        >\n                          {showConfirmPassword ? (\n                            <EyeOff className=\"h-3 w-3 sm:h-4 sm:w-4 text-gray-400\" />\n                          ) : (\n                            <Eye className=\"h-3 w-3 sm:h-4 sm:w-4 text-gray-400\" />\n                          )}\n                        </Button>\n                      </div>\n                      <Button \n                        type=\"button\" \n                        variant=\"outline\" \n                        size=\"xs\" \n                        onClick={handleGeneratePassword}\n                        className=\"flex-[1] w-1/5 text-xs py-1 h-9 sm:h-10 min-w-0 whitespace-nowrap px-1 sm:px-2\"\n                      >\n                        <Sparkles className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                        <span className=\"hidden sm:inline ml-1\">Generate</span>\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Terms & Privacy consent */}\n              <div className=\"flex items-start gap-2 sm:gap-3\">\n                <Checkbox id=\"consent\" checked={agreed} onCheckedChange={(v) => setAgreed(!!v)} />\n                <label htmlFor=\"consent\" className=\"text-xs sm:text-sm text-gray-700 dark:text-gray-300 leading-relaxed\">\n                  I agree to the{' '}\n                  <a href=\"/terms\" className=\"text-blue-600 hover:text-blue-800 underline\" target=\"_blank\" rel=\"noopener noreferrer\">Terms &amp; Conditions</a>\n                  {' '}and{' '}\n                  <a href=\"/privacy\" className=\"text-blue-600 hover:text-blue-800 underline\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>.\n                </label>\n              </div>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>{error}</AlertDescription>\n                </Alert>\n              )}\n\n              <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"w-full sm:flex-1\"\n                  onClick={() => navigate('/login')}\n                >\n                  Back to Login\n                </Button>\n                <Button\n                  type=\"submit\"\n                  className=\"w-full sm:flex-1\"\n                  disabled={loading || emailExists || phoneExists || !agreed}\n                >\n                  {loading ? 'Registering...' : 'Get Started'}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n        {/* Debug Logs (last 3) - Hidden for production */}\n        {/* <div className=\"max-w-2xl mx-auto mt-4\">\n          {logs.slice(-3).map((msg, idx) => (\n            <div key={idx} className=\"text-xs rounded border p-2 mb-2 bg-muted/30\">\n              {msg}\n            </div>\n          ))}\n        </div> */}\n      </div>\n    </div>\n  );\n};\n\nexport default AgentSignup;","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { useToast } from '@/hooks/use-toast';\nimport { getStoredAgentCredentials, changeAgentPassword } from '@/utils/agentAuth';\nimport { AgentManagementService } from '@/services/agentManagementService';\n\nconst AgentPasswordChange: React.FC = () => {\n  const navigate = useNavigate();\n  const { toast } = useToast();\n\n  const [identifier, setIdentifier] = useState(''); // username or email\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const validatePassword = (pwd: string): string | null => {\n    if (pwd.length < 8) return 'Password must be at least 8 characters';\n    if (!/[A-Z]/.test(pwd)) return 'Include at least one uppercase letter';\n    if (!/[a-z]/.test(pwd)) return 'Include at least one lowercase letter';\n    if (!/[0-9]/.test(pwd)) return 'Include at least one number';\n    if (!/[!@#$%^&*(),.?\":{}|<>_\\-]/.test(pwd)) return 'Include at least one special character';\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      if (newPassword !== confirmPassword) {\n        setError('New password and confirm password do not match');\n        return;\n      }\n      const pwdErr = validatePassword(newPassword);\n      if (pwdErr) {\n        setError(pwdErr);\n        return;\n      }\n\n      const creds = getStoredAgentCredentials();\n      const match = creds.find(c => {\n        const id = identifier.trim().toLowerCase();\n        return (\n          (c.username && c.username.toLowerCase() === id) ||\n          (c.email && c.email.toLowerCase() === id)\n        );\n      });\n\n      if (!match) {\n        setError('No agent found for provided username or email');\n        return;\n      }\n\n      // Local change first (validates current password)\n      const localResult = changeAgentPassword(match.agentId, currentPassword, newPassword);\n      if (!localResult.success) {\n        setError(localResult.message || 'Failed to change password');\n        return;\n      }\n\n      // Update DB credentials via RPC (set as permanent)\n      try {\n        const { error: rpcErr } = await AgentManagementService.setAgentCredentials(\n          match.agentId,\n          match.username,\n          newPassword,\n          false\n        );\n        if (rpcErr) {\n          console.warn('RPC credential update error:', rpcErr);\n        }\n      } catch (rpcEx) {\n        console.warn('RPC credential update exception:', rpcEx);\n      }\n\n      toast({ title: 'Password updated', description: 'You can now sign in with your new password.' });\n      navigate('/login');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n      <div className=\"w-full max-w-md space-y-6 p-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Change Password</CardTitle>\n            <CardDescription>\n              For new agents with temporary credentials or required password change\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"identifier\">Username or Email</Label>\n                <Input\n                  id=\"identifier\"\n                  type=\"text\"\n                  placeholder=\"Enter username or email\"\n                  value={identifier}\n                  onChange={(e) => setIdentifier(e.target.value)}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"currentPassword\">Current (temporary) Password</Label>\n                <Input\n                  id=\"currentPassword\"\n                  type=\"password\"\n                  placeholder=\"Enter current temporary password\"\n                  value={currentPassword}\n                  onChange={(e) => setCurrentPassword(e.target.value)}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"newPassword\">New Password</Label>\n                <Input\n                  id=\"newPassword\"\n                  type=\"password\"\n                  placeholder=\"Enter new password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"Re-enter new password\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  required\n                />\n              </div>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>{error}</AlertDescription>\n                </Alert>\n              )}\n\n              <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                {loading ? 'Updating...' : 'Update Password'}\n              </Button>\n\n              <div className=\"text-center\">\n                <Button\n                  type=\"button\"\n                  variant=\"link\"\n                  className=\"p-0 h-auto\"\n                  onClick={() => navigate('/login')}\n                >\n                  Back to Login\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default AgentPasswordChange;","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { useToast } from '@/hooks/use-toast';\nimport { supabase } from '@/lib/supabaseClient';\nimport { AuthService } from '@/services/authService';\nimport { useApplicationSettings } from '@/contexts/ApplicationSettingsContext';\n\nconst ResetPassword: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { toast } = useToast();\n  const { settings } = useApplicationSettings();\n\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [userName, setUserName] = useState<string>('');\n  const [userEmail, setUserEmail] = useState<string>('');\n\n  // Handle Supabase recovery flow: exchange PKCE code or process hash tokens\n  useEffect(() => {\n    const processAuthLink = async () => {\n      try {\n        // First, try PKCE code from query string\n        const params = new URLSearchParams(location.search);\n        const code = params.get('code');\n        if (code) {\n          const { error } = await supabase.auth.exchangeCodeForSession(code);\n          if (error) {\n            setError(error.message || 'Invalid or expired reset link');\n            return;\n          }\n          // Clean query to avoid re-processing\n          window.history.replaceState(null, document.title, window.location.pathname);\n        } else {\n          // Fallback: handle hash tokens (access_token/refresh_token) for recovery\n          const hash = window.location.hash.startsWith('#') ? window.location.hash.substring(1) : window.location.hash;\n          if (hash) {\n            const h = new URLSearchParams(hash);\n            const type = h.get('type');\n            const access_token = h.get('access_token');\n            const refresh_token = h.get('refresh_token');\n            const codeFromHash = h.get('code');\n\n            if (type === 'recovery') {\n              if (access_token && refresh_token) {\n                const { error } = await supabase.auth.setSession({ access_token, refresh_token } as any);\n                if (error) {\n                  setError(error.message || 'Failed to process reset link');\n                  return;\n                }\n              } else if (codeFromHash) {\n                const { error } = await supabase.auth.exchangeCodeForSession(codeFromHash);\n                if (error) {\n                  setError(error.message || 'Failed to process reset link');\n                  return;\n                }\n              }\n              // Clean hash\n              window.history.replaceState(null, document.title, window.location.pathname + window.location.search);\n            }\n          }\n        }\n\n        // After session is set, fetch enriched user to display name/email\n        const { user: sessionUser } = await AuthService.getCurrentSession();\n        if (sessionUser) {\n          setUserName(sessionUser.name || '');\n          setUserEmail(sessionUser.email || '');\n        }\n      } catch (e) {\n        setError(e instanceof Error ? e.message : 'Unable to process reset link');\n      }\n    };\n\n    processAuthLink();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const validatePassword = (pwd: string): string | null => {\n    if (!pwd || pwd.length < 8) return 'Password must be at least 8 characters';\n    if (!/[A-Z]/.test(pwd)) return 'Include at least one uppercase letter';\n    if (!/\\d/.test(pwd)) return 'Include at least one number';\n    if (!/[^A-Za-z0-9]/.test(pwd)) return 'Include at least one symbol';\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (!newPassword || !confirmPassword) {\n      setError('Please enter and confirm your new password');\n      return;\n    }\n    if (newPassword !== confirmPassword) {\n      setError('New password and confirm password do not match');\n      return;\n    }\n    const pwdErr = validatePassword(newPassword);\n    if (pwdErr) {\n      setError(pwdErr);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const { error: updateErr } = await AuthService.updatePassword(newPassword);\n      if (updateErr) {\n        setError(updateErr);\n        return;\n      }\n\n      toast({ title: 'Password updated', description: 'You can now sign in with your new password.' });\n\n      // Sign out to avoid direct login to profile after reset\n      await AuthService.signOut();\n      navigate('/login');\n    } catch (ex) {\n      setError(ex instanceof Error ? ex.message : 'Password update failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const companyName = settings.companyDetails?.name || 'TripOex';\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n      <div className=\"w-full max-w-md space-y-6 p-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Reset Password</CardTitle>\n            <CardDescription>\n              {companyName} {userName ? `- ${userName}` : userEmail ? `- ${userEmail}` : ''}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"newPassword\">New Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"newPassword\"\n                    type={showPassword ? 'text' : 'password'}\n                    placeholder=\"Enter new password\"\n                    value={newPassword}\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    className=\"pr-10\"\n                    required\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                    onClick={() => setShowPassword(!showPassword)}\n                  >\n                    {showPassword ? 'Hide' : 'Show'}\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"confirmPassword\"\n                    type={showConfirmPassword ? 'text' : 'password'}\n                    placeholder=\"Re-enter new password\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    className=\"pr-10\"\n                    required\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"absolute right-0 top-0 h-full px-3 hover:bg-transparent\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  >\n                    {showConfirmPassword ? 'Hide' : 'Show'}\n                  </Button>\n                </div>\n              </div>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>{error}</AlertDescription>\n                </Alert>\n              )}\n\n              <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                {loading ? 'Updating...' : 'Update Password'}\n              </Button>\n\n              <div className=\"text-center\">\n                <Button type=\"button\" variant=\"link\" className=\"p-0 h-auto\" onClick={() => navigate('/login')}>\n                  Back to Login\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPassword;","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { AlertCircle, ArrowLeft } from 'lucide-react';\n\nconst Unauthorized: React.FC = () => {\n  const navigate = useNavigate();\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mb-4\">\n            <AlertCircle className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\n          </div>\n          <CardTitle className=\"text-2xl\">Access Denied</CardTitle>\n          <CardDescription>\n            You don't have permission to access this page\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 text-center\">\n            Please contact your administrator if you believe this is an error.\n          </p>\n          <div className=\"flex space-x-2\">\n            <Button \n              variant=\"outline\" \n              className=\"flex-1\"\n              onClick={() => navigate(-1)}\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Go Back\n            </Button>\n            <Button \n              className=\"flex-1\"\n              onClick={() => navigate('/')}\n            >\n              Dashboard\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default Unauthorized;\n"],"file":"app-auth-B6aX02j-.js"}